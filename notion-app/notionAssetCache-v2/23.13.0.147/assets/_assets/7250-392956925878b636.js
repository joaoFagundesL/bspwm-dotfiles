"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[7250],{32603:(e,t,o)=>{o.r(t),o.d(t,{markInitialPageRenderComplete:()=>m,measureSubMetricsInBrowserProfiler:()=>p,setInitialRenderCompleted:()=>u,setSubMetric:()=>d,setSubMetricsAtRenderCallback:()=>l,updateMetricData:()=>c,updateMetricDataWithIsPushTag:()=>g});var n=o(5809),i=o(83055),r=o(94134),s=o(18245),a=o(77144);function l(e){const{mainStartTime:t,prefetchInitiatedTime:o,renderStartTime:i,renderEndTime:r,mainImportEndTime:s}=e,l=(0,n.$)();if(!l)return;const d={app_start_to_main_start:{startTime:l,endTime:t},main_start_to_prefetch_initiated:{startTime:t,endTime:o},prefetch_initiated_to_render_start:{startTime:o,endTime:i},render_start_to_render_end:{startTime:i,endTime:r},import_start:{startTime:0,endTime:t},import_start_to_prefetch_stage_completion:{startTime:t,endTime:o},main_import:{startTime:t,endTime:s},react_render:{startTime:i,endTime:r}};a.Z.state.subMetrics.update((e=>({...e,...d})))}function d(e){const{name:t,endTime:o}=e,n=e.startTime(a.Z.state.subMetrics.state);n&&a.Z.state.subMetrics.update((e=>({...e,[t]:{startTime:n,endTime:o}})))}function c(e){a.Z.state.metricData.update((t=>({...t,...e})))}function u(){a.Z.update((e=>({...e,initialRenderCompleted:!0})))}function p(){for(const[t,o]of Object.entries(i.D9())){if(!o)break;try{window.performance.measure(t,{start:o.startTime,end:o.endTime})}catch(e){}}}function g(e){const t=e.RouterStore.state;let o;var n;"page"===t.route.name&&(o=t.route.mobileData,c({is_push:null===(n=o)||void 0===n?void 0:n.isPush}))}function m(e){let{environment:t,isEditable:o,isHomePage:n}=e;const l=t.RouterStore.state,c=l.initialRoute.name,{initialRenderCompleted:g,initialRenderAfterLoginCompleted:m,initialLoadCachedPageChunkCalledAt:h}=a.Z.state,f="page"===l.route.name?l.route.mobileData:void 0;if(g)m||"login"!==c?s.default.measure("navigation_page_render",{environment:t,data:{is_push:(null==f?void 0:f.isPush)??!1,wasm_sqlite_initialized:a.Z.state.metricData.state.wasm_sqlite_initialized}}):(s.default.measure("initial_page_render_after_login",{environment:t}),a.Z.update((e=>({...e,initialRenderAfterLoginCompleted:!0}))));else{var y;u();const e=Boolean(null===(y=performance)||void 0===y?void 0:y.mark)?performance.mark("initial_page_render").startTime:performance.now();d({name:"await_page_chunk_end_to_browser_repaint_start",startTime:e=>{var t;return null===(t=e.await_page_chunk_start_to_await_page_chunk_end)||void 0===t?void 0:t.endTime},endTime:e}),s.default.measureFromAppStart({metricName:"initial_page_render",endTime:e},{environment:t,data:{...i.IN(),initial_route:c,is_editable:o,is_home_page:n,profiling_tool:(0,r.getProfilingToolForSession)()},shouldSendIfStatsigNotInitialized:!0}),p(),void 0!==h&&s.default.measureFromAppStart({metricName:"load_cached_page_chunk_wait_time",endTime:h},{environment:t,data:{initial_route:c},shouldSendIfStatsigNotInitialized:!0})}}},59389:(e,t,o)=>{o.d(t,{T_:()=>y,Ud:()=>S,eV:()=>f});var n=o(1302),i=o(45953),r=o(42),s=o(58202),a=o(952),l=o(41433),d=o(96802),c=o(94419),u=o(9953),p=o(24677),g=o(993),m=o(98104),h=o(68422);function f(e){const{environment:t,store:o,transaction:i,preventTextSelection:r,onTextSelection:s}=e,l=o.useCrdt(),d=u.j4({environment:t,type:"text",inMemoryRecordCache:o.inMemoryRecordCache,transaction:i,spaceId:o.pointer.spaceId,useCrdt:l}),g=c.R3({parent:o.getContentStore(),append:d,transaction:i}).child;return r||n.default.afterNextFlush((()=>{p.eP({environment:t,store:g}),m.N_({store:g.getBlockTitleStore()}),null==s||s()})),a.W(t,{from:"template_picker",type:"text",creating_block_id:d.id,parent_collection_id:d.getParentCollectionIdUpToTwoLevels()}),g}function y(e){const{environment:t,store:o,transaction:n}=e;d.is({store:o,transaction:n}),f({environment:t,store:o,transaction:n})}function S(e){var t;const{environment:o,store:d,viewType:c,transaction:u}=e,p=null===(t=d.getBlockTitleStore())||void 0===t?void 0:t.getValue();l.ZI({environment:o,sourceBlockId:"root",targetBlockPointer:d.pointer,sourceBlockSubtree:(0,i.R3)((0,r.iC)({isInline:!1,viewType:c})),targetRecordCache:d.inMemoryRecordCache,transaction:u,deepCopyTransclusionContainers:!0,resolveTemplateVariables:!0,useCrdt:d.useCrdt()}),h.vs({environment:o,block:d,blockType:"collection_view_page",transaction:u}),p&&g.sO({environment:o,editorMode:"default",store:d.getBlockTitleStore(),value:p,transaction:u}),n.default.afterNextFlush((()=>{const e=s.R.findCollectionViewBlockFromStore(d);null==e||e.handleCreated()})),a.W(o,{from:"template_picker",type:"collection_view_page",creating_block_id:d.id})}},19977:(e,t,o)=>{o.d(t,{Z:()=>d});o(67294);var n=o(86628),i=o(33767),r=o(68709),s=o(82136),a=o(92650),l=o(85893);function d(e){const{pageBlockStore:t,isVisible:o,context:d}=e,c=(0,n.VK)((()=>t.isFullWidth()||d===s.S.CollectionPageView),[d,t]);return(0,l.jsx)(r.p,{allowSelectionWithin:!0,style:{width:c&&o?a.QB:0},children:(0,l.jsx)(i.HV,{...e})})}},76805:(e,t,o)=>{o.d(t,{Z:()=>Se});var n=o(67294),i=o(1302),r=o(480),s=o(6740),a=o(86628),l=o(27961),d=o(83303),c=o(70203),u=o(9291),p=o(26249),g=o(96802),m=o(13447);const h=1e3;function f(e){if(e){const t=(0,c.QaF)(e.getValue());return Boolean(t)}return!1}function y(e){if(e){const t=e.getSettings();if(t&&t.hidden_collection_descriptions)return t.hidden_collection_descriptions}return[]}function S(e){const{environment:t,store:o,value:n}=e;m.createAndCommit({userAction:"PageViewBlock.setCollectionViewPageDescription",environment:t,perform:e=>{g.FH({stores:[o],update:{hide_collection_view_page_description:n},transaction:e})}})}function v(e){const{environment:t,pageId:o,isExpanded:n,store:i,userSettingsStore:r,descriptionStore:s}=e,a=i.state.isExpanded;i.setState({isExpanded:n});f(s)&&r&&a!==n&&m.createAndCommit({userAction:"pageDescriptionActions.setExpanded",environment:t,perform:e=>{if(n){const t={pointer:{table:"user_settings",id:r.id},path:["settings","hidden_collection_descriptions"],command:"listRemove",args:{id:o}};m.applyOperation({store:r,transaction:e,operation:t})}else{const t={pointer:{table:"user_settings",id:r.id},path:["settings","hidden_collection_descriptions"],command:"listAfter",args:{id:o}};m.applyOperation({store:r,transaction:e,operation:t});let n=y(r);for(;n.length>h;){const t=n[0],o={pointer:{table:"user_settings",id:r.id},path:["settings","hidden_collection_descriptions"],command:"listRemove",args:{id:t}};m.applyOperation({store:r,transaction:e,operation:o}),n=y(r)}}}})}var x=o(24677),b=o(98104),k=o(31192),C=o(28020),M=o(50627),j=o(89086),w=o(97511),P=o(24405),V=o(90199),I=o(1436),_=o(37810),T=o(25888),Z=o(993),E=o(84076),B=o(31278),K=o(76798),D=o(32662),L=o(26388),F=o(65187),R=o(28651),O=o(68056),A=o(46654),W=o(18514),N=o(807),H=o(24666),z=o(85893);const U={fontSize:14,paddingLeft:6,paddingBottom:4,paddingTop:3},G=function(e){let{descriptionStore:t,disabled:o,toggleStore:n,pageId:i,userSettingsStore:r,collectionStore:s,locked:a,canEdit:l}=e;return(0,z.jsx)("div",{style:{maxWidth:"100%",borderRadius:4,overflow:"hidden",marginBottom:12},children:(0,z.jsx)(oe,{descriptionStore:t,disabled:o,toggleStore:n,pageId:i,userSettingsStore:r,collectionStore:s,locked:a,canEdit:l})})};function $(){const e=(0,r.O7)(),t=(0,a.qz)(void 0,R.Z),o=(0,a.VK)((()=>t.state.mouseEntered),[t]),n=(0,P.yK)((e=>({linkStyle:{...U,color:o?e.mediumTextColor:e.lightTextColor,cursor:"pointer"}})),[o]);return(0,z.jsx)("div",{style:{display:"flex"},onClick:()=>T.Fs(e,{from:"sprint_board_learn_how_to_use"}),children:(0,z.jsxs)(E.Z,{style:n.linkStyle,href:(0,W.UY)("guides.sprintPlanning"),external:!0,disabled:!0,onMouseEnter:()=>t.enter(),onMouseLeave:()=>t.exit(),children:[(0,z.jsx)(u.FormattedMessage,{defaultMessage:"Learn how to use Sprints",id:"pageDescription.sprintBoard.message"}),(0,z.jsx)(D.Z,{size:2}),(0,I.g)({width:16,display:"inline-block",position:"relative",top:"3px",height:void 0})]})})}function X(e){return e.isExpanded()}function Q(e){let{collectionStore:t}=e;const o=(0,a.VK)((()=>t&&t.getIcon()),[t]);return(0,z.jsxs)("div",{style:{display:"flex",alignItems:"start"},children:[(0,z.jsx)("div",{style:{paddingTop:4,paddingRight:6},children:(0,V.b)({width:12})}),(0,z.jsx)("div",{children:(0,z.jsx)("div",{children:(0,z.jsx)(u.FormattedMessage,{defaultMessage:"Please unlock {pageTitleWithIcon} to edit the description.",id:"pageDescription.lockedTooltip.message",values:{pageTitleWithIcon:(0,z.jsxs)("span",{style:{whiteSpace:"nowrap",fontWeight:_.Z.fontWeight.bold},children:[o&&(0,z.jsx)(B.Z,{disabled:!0,icon:o,isEmptyPage:!1,size:12,style:{marginRight:4,display:"inline-block"}}),t&&(0,z.jsx)(K.Z,{store:t,style:{display:"inline"}})]})}})})})]})}function q(e){return!0}function Y(e){return!0}function J(e,t,o,n,i,r){X(t)||e.preventDefault(),function(e,t,o,n,i){v({environment:n,pageId:t,isExpanded:!X(e),store:e,userSettingsStore:i,descriptionStore:o})}(t,o,n,i,r)}function ee(e,t,o,n,i,r){if(!function(e,t,o){const n=o&&o.publicEditModeStore.state;return!t&&!(0,A.YF)(n)&&e.canEdit()}(o,n,r))return;if(e.preventDefault(),i&&i.isComposing())return;const s=H.default.state;if("editing"===s.mode){const e=(0,O.QY)(s.multiSelection);if(!e)return;const n=null!=r&&r.pageStore?N.Z.getMode(r.pageStore):"default";m.createAndCommit({userAction:"PageDescription.handleEnter",environment:t,perform:i=>{Z.hJ({environment:t,editorMode:n,store:o,string:"\n",selection:e.selection,disableMentions:!0,disableSlashCommands:!0,disableEmojiCommands:!0,transaction:i})}})}}function te(e){let{descriptionStore:t,disabled:o,toggleStore:i,pageId:s,userSettingsStore:l}=e;const d=(0,r.O7)(),c=(0,u.useIntl)(),{device:p}=d,g=(0,w.l)(),m=(0,n.useRef)(null),h=(0,n.useCallback)((e=>ee(e,d,t,o,m.current,g)),[d,t,o,g,m]),f=(0,a.VK)((()=>X(i)),[i]);return t?(0,z.jsx)(F.Z,{ref:m,store:t,style:{...U,width:780},disabled:o,placeholder:c.formatMessage({defaultMessage:"Add a description…",id:"pageDescription.emptyPlaceholder"}),disableSlashCommands:!0,disableEmbedMenu:!0,disableMentions:!0,onTab:q,onUntab:Y,onEnter:h,onClick:f?()=>{}:e=>J(e,i,s,t,d,l),disableStyleAnnotations:p.isMobileBrowser,disableInsertedDeletedAnnotations:p.isMobileBrowser,disableHorizontalEdgeScroll:!0,pasteBehavior:"inline",inPageFind:{type:"none"}}):null}function oe(e){let{descriptionStore:t,disabled:o,toggleStore:i,pageId:s,userSettingsStore:a,collectionStore:l,locked:d,canEdit:c}=e;return(0,r.O7)().device.isMobile?(0,z.jsx)(n.Fragment,{children:(0,z.jsx)(te,{descriptionStore:t,disabled:o,toggleStore:i,pageId:s,userSettingsStore:a})}):(0,z.jsx)(L.ZP,{renderTooltip:()=>(0,z.jsx)(Q,{collectionStore:l}),disableTooltip:!d||!c,render:e=>(0,z.jsx)("div",{children:(0,z.jsx)("div",{style:{display:"flex",cursor:"text"},...e,children:(0,z.jsx)(te,{descriptionStore:t,disabled:o,toggleStore:i,pageId:s,userSettingsStore:a})})})})}var ne=o(59764),ie=o(34488),re=o(64635),se=o(80444),ae=o(49085);class le extends ae.default{getInitialState(){return{isExpanded:!0}}isExpanded(){return Boolean(this.state.isExpanded)}}const de=le;var ce=o(82136),ue=o(53223),pe=o(23063),ge=o(89728);function me(e){return"sprint_board"===e.getFormat().special_page_for_pm_launch}function he(e){const{canEdit:t,context:o,controlHoverStyle:p,disabled:g,handleHeaderMouseEnterThrottled:m,handleHeaderMouseLeaveDebounced:h,headerControlsStyle:k,headerFocusStore:w,isEditable:P,paddingLeft:V,paddingRight:I,pageCover:_,store:T,topControls:Z}=e,E=(0,r.O7)(),B=(0,n.useMemo)((()=>new de),[]),K=(0,a.VK)((()=>T.getCollectionViewSourceDescriptionStore()),[T]),D=(0,a.VK)((()=>T.getCollectionViewSourceCollectionStore()),[T]),L=(0,a.VK)((()=>f(K)),[K]),F=(0,a.VK)((()=>T.getTitleStore()),[T]),R=(0,a.VK)((()=>T.getFormat()),[T]),O=(0,a.VK)((()=>me(T)),[T]),A=n.useRef(!1);(0,n.useEffect)((()=>{if(!A.current){A.current=!0;const{currentUserSettingsStore:e}=se.default.state;!function(e){const{pageId:t,store:o,userSettingsStore:n,descriptionHasText:i}=e;let r=i;y(n).includes(t)&&(r=!1),o.setState({isExpanded:r})}({pageId:T.id,store:B,userSettingsStore:e,descriptionHasText:L})}}),[L,T.id,B]);const W=(0,a.VK)((()=>c.QaF(null==F?void 0:F.getValue())),[F]),N=(0,a.VK)((()=>!!T.getCollectionViewSourceCollectionStore()||!!F&&(!!W||!!(0,j.J5)(F))),[T,F,W]),H=(0,a.VK)((()=>C.qG(T.id)),[T]),U=(0,a.VK)((()=>(0,M.kC)(T,E)),[T,E]),$=(0,a.VK)((()=>(0,M.du)(T,o,E)),[T,o,E]),X=()=>{const{currentUserSettingsStore:e}=se.default.state,t=T.id;v({environment:E,pageId:t,isExpanded:!1,store:B,userSettingsStore:e,descriptionStore:K})},Q=()=>{const{currentUserSettingsStore:e}=se.default.state,t=T.id;v({environment:E,pageId:t,isExpanded:!0,store:B,userSettingsStore:e,descriptionStore:K})},q=(0,a.VK)((()=>{if("sprint_board"===T.getFormat().special_page_for_pm_launch)return!0;const e=B.isExpanded();return(f(K)||P)&&e}),[K,P,B,T]),Y=(0,a.VK)((()=>{if(!q)return{type:"hidden"};if(!K)return{type:"hidden"};if(!B.isExpanded())return{type:"hidden"};const{currentUserSettingsStore:e}=se.default.state;return{type:"visible",descriptionStore:K,currentUserSettingsStore:e,collectionStore:D}}),[K,D,B,q]),J=(0,a.VK)((()=>T.isNonEditableState()),[T]),ee=e=>{const t=e.target;void 0!==t&&t instanceof HTMLElement&&(0,s.E)(t)&&w.setState(!0)},te=()=>{const{device:e}=E,{currentUserSettingsStore:t}=se.default.state,o=K;v({environment:E,pageId:T.id,store:B,userSettingsStore:t,isExpanded:!0,descriptionStore:o}),i.default.afterNextFlush((()=>{o&&!e.isMobileBrowser&&b.NX({store:o})}))},oe=()=>{w.setState(!1)},ae=()=>{F&&(x.ZH(E),b.NX({store:F}))},le=()=>{const{device:e}=E;if(P&&!D&&!W)return(0,z.jsx)(ge.Z,{style:p,isLightGray:!0,onClick:ae,icon:d.c,children:e.isSmallPhone?(0,z.jsx)(u.FormattedMessage,{id:"pageViewBlock.add.pageTitleMobile",defaultMessage:"Title"}):(0,z.jsx)(u.FormattedMessage,{id:"pageViewBlock.add.pageTitle",defaultMessage:"Add title"})},"add-title")},ce=()=>{const{device:e}=E;if(!O||!P)return;return Boolean(R.hide_collection_view_page_description)?(0,z.jsx)(ge.Z,{isLightGray:!0,style:p,onClick:()=>S({environment:E,store:T,value:!1}),icon:l.z,children:e.isSmallPhone?(0,z.jsx)(u.FormattedMessage,{defaultMessage:"Description",id:"pageViewBlock.showDescription.mobileButton"}):(0,z.jsx)(u.FormattedMessage,{defaultMessage:"Show description",id:"pageViewBlock.showDescription.button"})}):(0,z.jsx)(ge.Z,{isLightGray:!0,style:p,onClick:()=>{S({environment:E,store:T,value:!0})},icon:l.z,children:(0,z.jsx)(u.FormattedMessage,{defaultMessage:"Hide description",id:"pageViewBlock.hideDescription.button"})})},ue=()=>{const{device:e}=E;if(D)return q?(0,z.jsx)(ge.Z,{isLightGray:!0,style:p,onClick:X,icon:l.z,children:(0,z.jsx)(u.FormattedMessage,{defaultMessage:"Hide description",id:"pageViewBlock.hideDescription.button"})}):P&&!L?(0,z.jsx)(ge.Z,{isLightGray:!0,style:p,onClick:te,icon:l.z,children:e.isSmallPhone?(0,z.jsx)(u.FormattedMessage,{defaultMessage:"Description",id:"pageViewBlock.addDescription.mobileButton"}):(0,z.jsx)(u.FormattedMessage,{defaultMessage:"Add description",id:"pageViewBlock.addDescription.button"})}):L?(0,z.jsx)(ge.Z,{isLightGray:!0,style:p,onClick:Q,icon:l.z,children:e.isSmallPhone?(0,z.jsx)(u.FormattedMessage,{defaultMessage:"Description",id:"pageViewBlock.showDescription.mobileButton"}):(0,z.jsx)(u.FormattedMessage,{defaultMessage:"Show description",id:"pageViewBlock.showDescription.button"})}):void 0};return(0,z.jsxs)(z.Fragment,{children:[function(){const{WindowSizeStore:n}=E,i=H?null:(0,z.jsxs)("div",{style:{display:"flex",alignItems:"flex-start"},children:[(0,z.jsx)(ne.Z,{...e}),N&&(0,z.jsx)(re.Z,{...e})]});return(0,z.jsxs)("div",{style:U,onMouseEnter:m,onMouseMove:m,onMouseLeave:h,children:[_,(0,z.jsx)(pe.Z,{isVisible:!0,animationStyle:{width:$},render:()=>(0,z.jsxs)("div",{style:{maxWidth:"100%",paddingLeft:n.getSafePaddingLeftCSS(V)},children:[(0,z.jsxs)("div",{onFocus:ee,onBlur:oe,style:{...k},className:"notion-page-controls",children:[Z,le(),ce(),ue()]}),(0,z.jsxs)("div",{style:{paddingRight:n.getSafePaddingRightCSS(I),marginBottom:8},children:[i,(0,z.jsx)(ye,{store:T}),"visible"===Y.type&&(0,z.jsx)(G,{disabled:!P,canEdit:t,locked:J,pageId:T.id,toggleStore:B,descriptionStore:Y.descriptionStore,collectionStore:Y.collectionStore,userSettingsStore:Y.currentUserSettingsStore}),(0,z.jsx)(ie.V,{store:T,context:o,disabled:g},T.id)]})]})})]})}(),(0,z.jsx)(fe,{store:T,paddingLeft:V,paddingRight:I,context:o,disabled:g})]})}function fe(e){let{store:t,paddingLeft:o,paddingRight:n,context:i,disabled:s}=e;const l=(0,r.O7)(),d=(0,a.VK)((()=>(0,k.nZ)(t,l)),[t,l]);return(0,z.jsx)(ue.DZ,{overridePaddingLeft:o,overridePaddingRight:n,store:t,isFullScreen:!0,viewId:d,disabled:s,hideHeaderActions:i===ce.S.InAppTemplatePreview})}function ye(e){let{store:t}=e;const o=(0,a.VK)((()=>me(t)),[t]),n=(0,a.VK)((()=>Boolean(t.getFormat().hide_collection_view_page_description)),[t]);return o&&!n?(0,z.jsx)($,{}):null}const Se=n.memo(he,p.Z)},13677:(e,t,o)=>{o.d(t,{Z:()=>h});var n=o(67294),i=o(480),r=o(86628),s=o(53965),a=o(26249),l=o(96802),d=o(13447),c=o(66890),u=o(79131),p=o(52247),g=o(85893);function m(e){let{store:t,collectionStore:o,disabled:n,locked:a,propertyIds:p,schema:m,handleMouseMove:h,handleMouseLeave:y,handleContextMenu:S,blockPropertyValueOverlayStore:v,format:x,isInPeekRenderer:b,type:k,topBorder:C}=e;const M=(0,i.O7)(),j=(0,c.Y$)(),w=(0,r.VK)((()=>j.permissionScopes.state),[j]);return"minimal"===k?(0,g.jsx)(g.Fragment,{children:p.map(((e,i)=>(0,g.jsx)("div",{children:(0,g.jsx)(f,{schema:m,format:x,locked:a,collectionStore:o,store:t,disabled:n,isInPeekRenderer:b,handleMouseMove:h,handleMouseLeave:y,blockPropertyValueOverlayStore:v,topBorder:C,propertyId:e,index:i})},e)))}):n||a||!w.canConfigureCollection?(0,g.jsx)("div",{style:u.yA,children:p.map(((e,i)=>(0,g.jsx)("div",{children:(0,g.jsx)(f,{schema:m,format:x,locked:a,collectionStore:o,store:t,disabled:n,isInPeekRenderer:b,handleMouseMove:h,handleMouseLeave:y,blockPropertyValueOverlayStore:v,topBorder:C,propertyId:e,index:i})},e)))}):(0,g.jsx)(u.ZP,{direction:"vertical",keys:p,renderKey:(e,i,r)=>(0,g.jsx)(f,{propertyId:e,index:i,schema:m,format:x,locked:a,collectionStore:o,store:t,disabled:n,isInPeekRenderer:b,handleMouseMove:h,handleMouseLeave:y,blockPropertyValueOverlayStore:v}),onDrop:e=>function(e,t,o,n){const i=o.collection_page_sections||[],r=s.oA(e.map((e=>i.find((t=>t.section===e))))),a=i.filter((t=>!e.includes(t.section))),c=[...r,...a];d.createAndCommit({userAction:"RelationPropertyPageSections.handleReorder",environment:n,perform:e=>{l.FH({stores:[t],update:{collection_page_sections:c},transaction:e})}})}(e,o,x,M)})}const h=n.memo(m,a.Z);function f(e){let{propertyId:t,index:o,schema:n,format:i,locked:r,collectionStore:s,store:a,disabled:l,isInPeekRenderer:d,handleMouseMove:c,handleMouseLeave:u,blockPropertyValueOverlayStore:m,topBorder:h}=e;const f=(i.collection_page_sections||[]).filter((e=>e.section===t)).map((e=>e.visibility))[0];return(0,g.jsx)(p.Z,{store:a,collectionStore:s,disabled:l,locked:r,property:t,schema:n,handleMouseMove:c,handleMouseLeave:u,handleContextMenu:()=>{},blockPropertyValueOverlayStore:m,format:i,visibility:f,isInPeekRenderer:d,topBorder:0!==o&&h})}},44862:(e,t,o)=>{o.d(t,{Z:()=>f});o(67294);var n=o(480),i=o(86628),r=o(24405),s=o(60291),a=o(54497),l=o(9291),d=o(31701),c=o(5149),u=o(41232),p=o(32363),g=o(16402),m=o(84076),h=o(85893);const f=function(e){let{collectionStore:t,collectionContextStore:o}=e;return(0,i.VK)((()=>t.isSyncedCollection()),[t])?(0,h.jsx)(v,{collectionStore:t,collectionContextStore:o}):null};function y(e){return{color:e.mediumTextColor,fontSize:14,lineHeight:1.2}}function S(e){let{collectionStore:t,collectionContextStore:o}=e;const u=(0,r.Fg)(),p=(0,n.O7)(),f=(0,i.VK)((()=>t.getFormatStore().getKeyStore("sync_state").getKeyStore("syncing").getValue()),[t]),S=(0,i.VK)((()=>t.getFormatStore().getKeyStore("sync_state").getKeyStore("last_synced_at").getValue()),[t]),v=(0,i.VK)((()=>null==o?void 0:o.numberChildrenUnfurled.state),[o]),x=(0,i.VK)((()=>null==o?void 0:o.numberChildrenReceived.state),[o]),b=v&&x&&v/x<1&&!p.device.isMobile,k=f&&p.device.isMobile;let C;return S&&(C=(0,h.jsx)(l.FormattedMessage,{defaultMessage:"Synced {lastSyncedAt}",id:"synced.lastSyncedAt.label",values:{lastSyncedAt:(0,g.IS)(S,{useLowercase:!0})}})),"row_limit_exceeded"===f?(0,h.jsx)(m.Z,{style:{display:"inline-flex",...y(u)},onClick:()=>function(e){e&&(c.r$({collectionContextStore:e,collectionSettingsStore:e.settingsStore}),c.H4({collectionSettingsStore:e.settingsStore,item:{type:"source"}}))}(o),children:(0,h.jsxs)("span",{style:{marginLeft:5,marginRight:5,display:"inline-flex",...y(u)},children:[(0,a.t)({fill:(0,d.fi)("orange",u).fill,marginLeft:4,marginRight:4,width:12,alignSelf:"center"}),(0,h.jsx)(l.FormattedMessage,{defaultMessage:"Partial Sync",id:"synced.partial_sync.label"})]})}):b||k?(0,h.jsxs)("span",{style:{marginLeft:5,marginRight:5,display:"inline-flex",...y(u)},children:[(0,h.jsx)(l.FormattedMessage,{defaultMessage:"Syncing",id:"synced.syncing.label"}),(0,s.b)({marginLeft:4,marginRight:4,width:12,alignSelf:"center"},"sync-spinner")]}):(0,h.jsx)("span",{style:{marginLeft:5,marginRight:5,display:"inline-flex",...y(u)},children:C})}function v(e){let{collectionStore:t,collectionContextStore:o}=e;const n=(0,r.Fg)(),s=(0,i.VK)((()=>t.getFormatStore().getKeyStore("original_url").getValue()),[t]),a=(0,i.VK)((()=>t.getSpaceId()),[t]),l=(0,i.VK)((()=>Boolean(t.getFormatStore().getKeyStore("sync_state").getValue())),[t]),d=(0,i.VK)((()=>s&&(0,u.pI)(s,a)),[a,s]),c=(0,i.VK)((()=>(0,p.wY)(s,a)),[a,s]);return(0,h.jsxs)("div",{style:{display:"inline-flex",alignItems:"center"},children:[d&&(0,h.jsx)(m.Z,{href:d,style:{display:"inline-flex"},hoveredStyle:{background:"none",textDecoration:"underline"},innerStyle:{flexShrink:1,width:"none",padding:"2px 0px",marginRight:5,borderRadius:4,display:"flex",alignItems:"center",alignSelf:"center",...y(n)},external:!0,children:c}),l?(0,h.jsx)("span",{style:{color:n.mediumTextColor},children:"•"}):null,l?(0,h.jsx)(S,{collectionStore:t,collectionContextStore:o}):null]})}},22705:(e,t,o)=>{o.d(t,{CX:()=>d,P7:()=>c,TI:()=>a,ZP:()=>p,mn:()=>l,w7:()=>u});var n=o(14577),i=o(49085);class r extends i.default{getInitialState(){return{audioRecorder:void 0,audioSessionBlockWriters:new Map,pageBlock:void 0,block:void 0,enabled:!1,environment:void 0,transcribedTexts:[],blockRenderedInPage:!1,blockRenderedInPeekView:!1,loading:!1}}}const s=new r,a=new n.Z((()=>s.state.enabled),{debugName:"DictationEnabledStore"}),l=new n.Z((()=>{var e;return null===(e=s.state.pageBlock)||void 0===e?void 0:e.id}),{debugName:"DictationPageBlockIdStore"}),d=new n.Z((()=>{var e;return null===(e=s.state.block)||void 0===e?void 0:e.id}),{debugName:"DictationBlockIdStore"}),c=new n.Z((()=>s.state.block),{debugName:"DictationBlockStore"}),u=new n.Z((()=>s.state.blockRenderedInPage||s.state.blockRenderedInPeekView),{debugName:"DictationBlockVisibleStore"}),p=s},92283:(e,t,o)=>{o.d(t,{K:()=>i,Y:()=>r});var n=o(77080);function i(){return"on"===n.default.getEligibleGroup({experimentId:"jira_import_and_sync",defaultGroup:"control"})}function r(){return n.default.checkGate("show_jira_import_overlay_messages")}},70177:(e,t,o)=>{o.d(t,{L:()=>u});var n=o(13991),i=o(65669),r=o(90902),s=o(24990);const a={ko:()=>o.e(692).then(o.bind(o,13547)),es:()=>o.e(883).then(o.bind(o,98610)),de:()=>o.e(3224).then(o.bind(o,36802)),fr:()=>o.e(5038).then(o.bind(o,96627)),pt:()=>o.e(2138).then(o.bind(o,88048)),zh:()=>o.e(7835).then(o.bind(o,41787)),ja:()=>o.e(6377).then(o.bind(o,28202)),da:()=>o.e(7677).then(o.bind(o,99815)),fi:()=>o.e(6970).then(o.bind(o,65651)),nb:()=>o.e(3031).then(o.bind(o,92967)),nl:()=>o.e(2579).then(o.bind(o,86541)),sv:()=>o.e(382).then(o.bind(o,63462))};let l=!1,d=!1;async function c(e){for(const[o,n]of Object.entries(e.emojiLocaleKeywords)){var t;r.Q4[o]={...r.Q4[o],keywords:[...n,...(null===(t=r.Q4[o])||void 0===t?void 0:t.keywords)||[]]}}await s.Z.waitUntilLoaded(),s.Z.update((t=>{let{emojiByName:o,...n}=t;return{...n,emojiByName:{...o,...e.emojiByName}}}))}const u=(0,i.Z)((async()=>{await async function(){d||(await c(await o.e(3552).then(o.bind(o,62706))),d=!0)}(),await async function(){if(l)return;const[e]=n.SP.split("-");e in a&&(await c(await a[e]()),l=!0)}()}))},35314:(e,t,o)=>{o.d(t,{e:()=>s});var n=o(67294),i=o(86628),r=o(77794);function s(){const[e,t]=(0,n.useState)(0),[o]=(0,n.useState)((()=>new r.E)),s=(0,n.createRef)();return(0,n.useEffect)((()=>{if(s.current)return o.observe(s.current),()=>{o.destroy()}}),[s,o]),(0,i.VK)((()=>{e!==o.rect.state.width&&t(o.rect.state.width)}),[e,o.rect]),[s,e]}},82356:(e,t,o)=>{o.d(t,{CK:()=>b,IR:()=>k,gm:()=>C,jG:()=>S,m2:()=>v});o(21703);var n=o(15145),i=o(482),r=o(15167),s=o(11318),a=o(19889),l=o(7032),d=o(87420),c=o(8055),u=o(13447),p=o(84210),g=o(74948),m=o(80444),h=o(88923),f=o(6258),y=o(34017);function S(e){let{layoutStore:t,pageLayoutSchema:o,transaction:n}=e;u.applyOperation({transaction:n,store:t,operation:i.op.set({pointer:t.pointer,path:["modules","page_layout_schema"],args:o})}),u.applyOperation({transaction:n,store:t,operation:i.op.update({pointer:t.pointer,path:[],args:{last_edited_time:Date.now(),last_edited_by_id:n.userId,last_edited_by_table:a.KJ}})})}function v(e){let{transaction:t,collectionStore:o,userId:n}=e;b({transaction:t,collectionStore:o,layoutStore:x({transaction:t,collectionStore:o,userId:n})})}function x(e){let{transaction:t,userId:o,collectionStore:n}=e;const a={id:(0,l.ZP)(),spaceId:n.getSpaceId(),table:s.Bh},d=f.t1.createChildStore(n,a);return u.applyOperation({transaction:t,store:d,operation:i.op.set({pointer:d.pointer,path:[],args:(0,r.le)({userId:o,collectionId:n.id,layoutPointer:a})})}),d}function b(e){let{transaction:t,collectionStore:o,layoutStore:n}=e;u.applyOperation({transaction:t,store:o,operation:i.op.update({pointer:o.pointer,path:["format","layout_pointer"],args:n.pointer})})}function k(e){let{environment:t,collectionStore:o}=e;const n=h.default.state.open&&h.default.state.target||m.default.state.mainEditorCurrentBlockStore;if(!n)throw new Error("Could not open page layout editor. Could not find current page.");d.xv(t,"open_page_layout_editor"),g.setUpdateExpand({environment:t,isExpanded:!1,from:"keyboard_default"}),y.Z.setState({isOpen:!0,collectionStore:o,pageStore:n})}function C(e){let{environment:t}=e;const o=y.Z.getState();if(!o.isOpen)throw new Error("Cannot close page layout editor. Page layout editor is not open.");const{pageStore:i}=o,{mainEditorCurrentBlockStore:r}=m.default.getState();if((null==r?void 0:r.id)!==i.id){const e=(0,p.ZP)({store:i,pageVisitSource:n.tY.PageLayoutEditor});c.c4({environment:t,url:e})}y.Z.setState({isOpen:!1})}},62229:(e,t,o)=>{o.d(t,{X:()=>a});o(67294);var n=o(24405),i=o(9291),r=o(68785),s=o(85893);function a(){const e=(0,n.yK)((e=>({wrapper:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:16,marginTop:"12vh"},message:{fontSize:14,marginTop:8,color:e.mediumTextColor}})),[]);return(0,s.jsxs)("div",{style:e.wrapper,children:[(0,s.jsx)(r.Z,{}),(0,s.jsx)("div",{style:e.message,children:(0,s.jsx)(i.FormattedMessage,{defaultMessage:"Importing…",id:"frame.importingMessage"})})]})}},89665:(e,t,o)=>{o.d(t,{bM:()=>h});var n=o(94184),i=o.n(n),r=(o(67294),o(86628)),s=o(68709),a=o(13677),l=o(50627),d=o(19671),c=o(82136),u=o(13023),p=o(94043),g=o(85893);function m(e){const{state:t,store:o,disabled:n,isInPeekRenderer:i,blockPropertyValueOverlayStore:s,onMouseEnter:l,onMouseLeave:d,topBorder:c}=e,u=(0,r.VK)((()=>o.isNonEditableState()),[o]),p=(0,r.VK)((()=>o.getSchema()),[o]);return(0,g.jsx)(a.Z,{topBorder:c,propertyIds:t.sectionPropertyIds,store:o,collectionStore:t.collectionStore,format:t.format,disabled:n,locked:u,schema:p,handleMouseMove:l,handleMouseLeave:d,handleContextMenu:()=>{},blockPropertyValueOverlayStore:s,isInPeekRenderer:i})}function h(e){const{store:t,context:o,disabled:n,inlinePropertyIDs:a,onMouseEnter:h,onMouseLeave:f,hideDivider:y}=e,S=function(e){const{collectionStore:t,format:o,sectionPropertyIds:n}=e;if(!(t&&o&&n&&n.length))return{type:"hidden"};return{type:"visible",collectionStore:t,format:o,sectionPropertyIds:n}}({collectionStore:(0,r.VK)((()=>t.getAssociatedCollectionStore()),[t]),format:(0,r.VK)((()=>(0,l.y6)(t)),[t]),sectionPropertyIds:a});if("hidden"===S.type)return null;const v=o===c.S.PeekView;return(0,g.jsx)(p.Pb,{className:i()({"layout-content-with-divider":!y}),children:(0,g.jsx)(s.p,{allowSelectionWithin:!0,children:(0,g.jsx)(m,{topBorder:!0,state:S,store:t,disabled:n,onMouseEnter:h,onMouseLeave:f,blockPropertyValueOverlayStore:v?u.Z:d.Z,isInPeekRenderer:v})})})}},15329:(e,t,o)=>{o.d(t,{f:()=>h,o:()=>f});var n=o(94184),i=o.n(n),r=(o(67294),o(480)),s=o(86628),a=o(9291),l=o(77933),d=o(68709),c=o(80365),u=o(11599),p=o(2275),g=o(94043),m=o(85893);function h(e){let{store:t}=e;return(0,m.jsx)("div",{style:{width:"100%",maxWidth:"100%",margin:"0 auto 6px auto"},onMouseDown:p.m4,onClick:p.h9,children:(0,m.jsx)(l.Z,{type:"page",store:t,headerText:(0,m.jsx)(a.FormattedMessage,{defaultMessage:"Linked to this page",id:"page.expandedBacklinks.label"}),disableCurrentPageToken:!0,disableInaccessiblePages:!0})})}function f(e){const t=(0,r.O7)(),o=(0,s.VK)((()=>t.PageDetailsStore.getToggleState({environment:t,type:"backlinks",id:e.store.id})),[e.store,t]),n=(0,s.VK)((()=>{const e=u.dy("backlinks");return void 0===o?e:o}),[o]);return 0===(0,s.VK)((()=>{if(!n)return 0;return(0,c.L)(e.store,t).backlinks.length}),[n,e.store,t])?null:(0,m.jsx)(g.Pb,{className:i()({"layout-content-with-divider":!e.hideDivider}),children:(0,m.jsx)(d.p,{allowSelectionWithin:!0,children:(0,m.jsx)(h,{store:e.store})})})}},62062:(e,t,o)=>{o.d(t,{D:()=>g,p:()=>m});o(67294);var n=o(480),i=o(86628),r=o(51454),s=o(68709),a=o(23063),l=o(65496),d=o(50627),c=o(2275),u=o(94043),p=o(85893);function g(e){const{store:t,isEditable:o,paddingX:r,pageCoverHeight:d,onMouseEnter:g,onMouseMove:h,onMouseLeave:f}=e,y=(0,n.O7)(),S=(0,i.VK)((()=>t.isCollectionView()?"20vh":d),[d,t]),v=(0,i.VK)((()=>y.WindowSizeStore.getSafePaddingLeftCSS(r)),[y.WindowSizeStore,r]),x=(0,i.VK)((()=>y.WindowSizeStore.getSafePaddingRightCSS(r)),[y.WindowSizeStore,r]),b=(0,i.VK)((()=>y.WindowSizeStore.state.width),[y.WindowSizeStore]),k=(0,c.WJ)(t),C=(0,i.VK)((()=>m(t,y)),[y,t]);return(0,p.jsx)(u.Nx,{children:(0,p.jsx)(a.Z,{isVisible:!0,animationStyle:{translateX:k},render:()=>(0,p.jsx)(s.p,{allowSelectionWithin:!1,style:C,onMouseEnter:g,onMouseMove:h,onMouseLeave:f,children:(0,p.jsx)(l.Z,{height:S,store:t,disabled:!o,paddingLeft:v,paddingRight:x,proxyWidth:b})})})})}function m(e,t){const o=(0,d.kC)(e,t);return o.zIndex=r.ag,o}},25664:(e,t,o)=>{o.d(t,{s:()=>_});var n=o(94184),i=o.n(n),r=o(67294),s=o(480),a=o(86628),l=o(68709),d=o(43250),c=o(11599),u=o(50627),p=o(65598),g=o(77080),m=o(2275),h=o(1302),f=o(23867),y=o(98104),S=o(13447),v=o(33767),x=o(18821),b=o(82994),k=o(77907),C=o(46351),M=o(82136),j=o(85893);function w(e){const{store:t}=e,o=(0,s.O7)(),n=(0,r.useMemo)((()=>new b.Z(o,(0,f.C)(t.pointer.spaceId))),[o,t.pointer.spaceId]),i=(0,r.useCallback)((()=>{y.ZH(o)}),[o]),l=function(e){const{environment:t,discussionInputStore:o,store:n}=e,i=(0,a.qz)(void 0,M.Z),s=(0,r.useCallback)((e=>{var o;const i=n.id;null===(o=t.PageDetailsStore)||void 0===o||o.setToggleState({environment:t,type:"discussion",id:i},e)}),[t,n.id]);return(0,r.useCallback)((async()=>{const e=o.state.textStore.getValue(),r=o.state.files;if(e&&e.length>0||r.length>0){const{performResult:a}=S.createAndCommit({userAction:"PageDiscussion.useSubmitNewDiscussion",environment:t,perform:o=>x.i8({environment:t,type:"default",blockStore:n,commentTextValue:e||[],transaction:o,files:r}),skipUpdatingEditedMetadata:!0});if(o.reset(),i.setState({...i.state,forceDiscussionOpen:!1}),s(!0),a&&!t.device.isMobile){await h.default.afterNextFlush();const e=C.Z.find((e=>e.getStore().id===a.id));e&&y.NX({store:e.getInputStore().state.textStore})}}}),[o,t,i,s,n])}({environment:o,discussionInputStore:n,store:t}),{value:d}=(0,k.useDependency)(v.Av);return d?(0,j.jsx)(v.rI,{showAvatar:!0,parentStore:t,onSubmit:l,onCancel:i,discussionInputStore:n,discussionFormat:d.discussionHelpers.DiscussionFormat.Page,isMobileSlideUpMenu:!1,shouldSaveUnsentComments:!0,canDrop:!0,blockStore:t}):null}var P=o(94043);function V(e){const{store:t,discussionStore:o,isFirst:n,isOnly:i}=e,a=(0,s.O7)(),l=(0,r.useMemo)((()=>new b.Z(a,(0,f.C)(t.pointer.spaceId))),[a,t.pointer.spaceId]),{value:d}=(0,k.useDependency)(v.Av);return d?(0,j.jsx)(v.gU,{store:o,format:d.discussionHelpers.DiscussionFormat.Page,isFirst:n,isOnly:i,discussionLocation:"page_discussion",showResolveButtonByDefaultIfPossible:!1,blockStore:t,discussionInputStore:l},o.id):null}function I(e){const{store:t,showDiscussionInput:o,unresolvedDiscussionStores:n}=e;return(0,j.jsxs)("div",{style:{width:"100%",margin:"0 auto"},onMouseDown:m.m4,onClick:m.h9,className:d.KA2,children:[n.map(((e,o,n)=>(0,j.jsx)(V,{store:t,discussionStore:e,isFirst:0===o,isOnly:1===n.length},e.id))),o&&(0,j.jsx)("div",{style:{padding:"6px 4px 12px"},children:(0,j.jsx)(w,{store:t})})]})}function _(e){const{store:t,didClickAddDiscussion:o,hideDivider:n}=e,r=(0,s.O7)(),d=(0,a.VK)((()=>{const e={type:"hidden"},n=p.vV(t,{recursivelyLoadAllDiscussions:!1}),i=0===n.length,s="PageDetailsStore"in r&&r.PageDetailsStore.getToggleState({environment:r,type:"discussion",id:t.id}),a=c.A$("comments","section_hide");if(!o&&(!t.isInsideCollection()||!i)&&(i||!i&&(!1===s||void 0===s&&a)))return e;if(a)return e;const l=r.currentUser.isLoggedIn(),d=t.pathIsDead();if(i&&d&&g.default.checkGate("prevent_edits_trash"))return e;const m=l&&t.canComment()&&i&&!(0,u.a_)(t);return!m&&i?e:{type:"visible",showDiscussionInput:m,unresolvedDiscussionStores:n}}),[t,r,o]);return"hidden"===d.type?null:(0,j.jsx)(P.Pb,{className:i()({"layout-content-with-divider":!n}),children:(0,j.jsx)(l.p,{allowSelectionWithin:!0,children:(0,j.jsx)(I,{...d,withLegacyInputPadding:!0,store:t})})})}},94115:(e,t,o)=>{o.d(t,{H:()=>ce});var n=o(67294),i=o(60177),r=o(64338),s=o(480),a=o(88464),l=o(86628),d=o(24405),c=o(99747),u=o(51454),p=o(57819),g=o(19977),m=o(92650),h=o(68785),f=o(29551),y=o(55217),S=o(31192),v=o(83355),x=o(15145),b=o(49271),k=o(9291),C=o(81193),M=o(98834),j=o(8055),w=o(59389),P=o(13447),V=o(10906),I=o(66213),_=o(27105),T=o(24098),Z=o(19124),E=o(84210),B=o(12534),K=o(17504),D=o(77907),L=o(80444),F=o(88632),R=o(83212),O=o(81023),A=o(64921),W=o(36596),N=o(85893);function H(){const e=(0,d.yK)((()=>({menu:{display:"flex",alignItems:"center",marginBottom:5},icon:{marginLeft:5,width:26,height:26,marginRight:10,borderRadius:4},menuItem:{height:14,marginTop:8,marginBottom:8,width:"25%",borderRadius:8}})),[]);return(0,N.jsx)(N.Fragment,{children:[...Array(6)].map(((t,o)=>(0,N.jsxs)("div",{style:e.menu,children:[(0,N.jsx)(W.Z,{style:e.icon}),(0,N.jsx)(W.Z,{style:e.menuItem})]},o)))})}const z={width:"100%"},U={width:"100%",display:"flex",flexDirection:"column",marginBottom:"14vh"};class G extends v.Z{UNSAFE_willMount(e){super.UNSAFE_willMount(e),e.menuListStore.reset()}renderComponent(){const e=F.Z.state.online;return(0,N.jsx)(T.Z,{capture:!0,render:t=>(0,K.Z)((o=>(0,N.jsxs)("div",{...t,...o,style:U,children:[(0,N.jsx)(q,{store:this.props.store}),e&&(0,N.jsx)(D.LazyTemplatePickerTemplateList,{...this.props,renderLoading:()=>(0,N.jsx)(H,{})})]})))})}}G.displayName="TemplatePicker";const $=(0,k.injectIntl)(G);function X(e){return{...b.ZD,color:e.lightTextColor,paddingTop:5,paddingBottom:24}}function Q(e,t,o){const{mainEditorCurrentBlockStore:n}=L.default.state;!function(e,t,o){o?o(e):j.c4({environment:t,url:e})}(n?(0,E.ZP)({store:n,peekViewBlockId:e.id,fullyQualified:!1,pageVisitSource:x.tY.LinkInPage}):(0,E.ZP)({store:e,fullyQualified:!1,pageVisitSource:x.tY.LinkInPage}),t,o)}function q(e){let{store:t}=e;const o=(0,d.Fg)(),i=(0,s.O7)(),r=(0,s.Fy)(),a=(0,n.useContext)(I.ZO),c=(0,l.VK)((()=>R.Z.getMode(i,t)),[i,t]),u=(0,n.useCallback)((e=>function(e,t,o,n){const i=o.getAssociatedCollectionStore();if(i&&O.M_(t)){const{performResult:o}=P.createAndCommit({userAction:"TemplatePicker.newPage",environment:t,perform:o=>M.nx({environment:t,collectionStore:i,transaction:o,useCrdt:(0,_.SL)({event:e,source:"collection_instantiate_template"})})});o&&Q(o,t,n),C.dZ(t,{collection_id:i.id})}}(e,i,t,a)),[i,t,a]),p=(0,l.VK)((()=>t.isTemplate()),[t]),g=(0,l.VK)((()=>F.Z.state.online),[]),m=(0,l.VK)((()=>function(e){return Boolean(e.getAssociatedCollectionStore())}(t)),[t]),h=(0,l.VK)((()=>function(e){const t=e.getAssociatedCollectionStore(),o=t?t.getTemplatePageStores():void 0;return o&&o.length>0}(t)),[t]),f=m&&!h,y=(0,l.VK)((()=>!function(e){const t=e.getAssociatedCollectionStore(),o=t&&t.getParentBlockStore();return V.eD({collectionStore:t,collectionViewBlockStore:o,checkNavigableAncestorLocked:!0})}(t)),[t]),S=(0,l.VK)((()=>(0,Z.GD)(c)),[c]);let v=null;return g||(v=(0,N.jsx)(k.FormattedMessage,{defaultMessage:"{isMobileDevice, select, true {Tap here to continue with an empty page. Please go online to use templates.} other {Press Enter to continue with an empty page. Please go online to use templates.}}",id:"templatePicker.deviceOffline.goOnlinePrompt",values:{isMobileDevice:r.isMobile}})),p&&(v=(0,N.jsx)(k.FormattedMessage,{defaultMessage:"{isMobileDevice, select, true {Tap here to continue with an empty page.} other {Press Enter to continue with an empty page.}}",id:"templatePicker.isTemplate.emptyPagePrompt",values:{isMobileDevice:r.isMobile}})),r.isMobile?v=f?(0,N.jsx)(k.FormattedMessage,{defaultMessage:"{isParentLocked, select, true {Tap here to continue with an empty page} other {Tap here to continue with an empty page, or <templatebutton>create a template</templatebutton>}}",id:"templatePicker.mobileCollectionEmptyPage.prompt",values:{isParentLocked:y,templatebutton:e=>(0,N.jsx)(A.Z,{style:{display:"inline-block",textDecoration:"underline"},onClick:u,children:e})}}):r.isTablet?(0,N.jsx)(k.FormattedMessage,{defaultMessage:"Tap here to continue with an empty page, or pick a template",id:"templatePicker.mobileTabletEmptyPage.withTemplates.prompt"}):(0,N.jsx)(k.FormattedMessage,{defaultMessage:"Tap here to continue...",id:"templatePicker.mobilePhoneEmptyPage.withTemplates.prompt"}):f?v=(0,N.jsx)(k.FormattedMessage,{defaultMessage:"{isParentLocked, select, true {Press Enter to continue with an empty page} other {Press Enter to continue with an empty page, or <templatebutton>create a template</templatebutton>}}",id:"templatePicker.webCollectionEmptyPage.prompt",values:{isParentLocked:y,templatebutton:e=>(0,N.jsx)(A.Z,{style:{display:"inline-block",textDecoration:"underline"},onClick:u,children:e})}}):S&&!m||(v=(0,N.jsx)(k.FormattedMessage,{defaultMessage:"Press Enter to continue with an empty page, or pick a template (↑↓ to select)",id:"templatePicker.webEmptyPage.withTemplates.prompt"})),v?(0,N.jsx)("div",{style:z,children:(0,N.jsx)("div",{style:X(o),onClick:e=>function(e,t,o){(0,B.ZP)({event:e,context:B.Af.EditorClick,callback:()=>{O.M_(o)&&(P.createAndCommit({userAction:"TemplatePicker.handleEmptyPageContinueClick",environment:o,perform:e=>{w.eV({environment:o,store:t,transaction:e})}}),C.rN(o,{template_name:"empty",is_keyboard:!1}))}})}(e,t,i),children:v})}):null}var Y=o(36420),J=o(43250),ee=o(50627),te=o(73819),oe=o(16772),ne=o(49085);class ie extends ne.default{getInitialState(){return{editorWidth:void 0,peekViewEditorWidth:void 0}}setWidth(e,t){t?this.setPeekViewEditorWidth(e):this.setEditorWidth(e)}setEditorWidth(e){this.setState({...this.state,editorWidth:e})}setPeekViewEditorWidth(e){this.setState({...this.state,peekViewEditorWidth:e})}getWidth(e){return e?this.getPeekViewEditorWidth():this.getEditorWidth()}getEditorWidth(){return this.state.editorWidth}getPeekViewEditorWidth(){return this.state.peekViewEditorWidth}}const re=new ie;var se=o(82136),ae=o(2275),le=o(94043);const de=(0,n.forwardRef)((function(e,t){let{context:o,disabled:g,onClick:m,store:f,templatePickerMenuListStore:v}=e;const x=(0,s.O7)(),{device:b}=x,k=(0,i.Dl)();(0,r.q7)(null==k?void 0:k.domLock);const C=(0,ae.Nr)(f),M=(0,ae.C_)(f),j=(0,ae.mj)(f,o)&&!M,w=(0,ae.Qg)(f),P=(0,l.VK)((()=>ae.MQ.state),[]),V=(0,l.VK)((()=>!!P||(!!g||!!f.isNonEditableState())),[f,g,P]),I=(0,l.VK)((()=>f.getFormat()),[f]),_=(0,l.VK)((()=>Boolean((0,p.RR)(oe.default.state))),[]),T=(0,l.VK)((()=>(0,ee.CX)(f)),[f]),Z=(0,ee.OZ)(o),E=(0,te.PE)(f,g),B=(0,s.MO)(),K=(0,l.VK)((()=>f.isCollectionView()),[f]),L=(0,l.VK)((()=>f.hasCover()),[f]),F=(0,d.yK)((e=>{const t=I.page_font||S.rk,n=S.VN[t],i=S.n5[t]||1.5;let r;if(b.isMobile)r=b.isAndroid?S.pE:S.tb;else{r=I.page_small_text?S.Pc[t]||S.ZY:S.TE[t]||S.jo}let s={},a={};T&&(0,ee.OZ)(o)&&!j&&!C||(a=_?{paddingBottom:"600px"}:T?{paddingBottom:"15vh"}:{paddingBottom:0},s={...a,paddingLeft:0,paddingRight:0});let l={};(0,ee.OZ)(o)&&(l={minHeight:240,zIndex:1});let d={};o===se.S.InAppTemplatePreview&&(d={margin:"0 auto"});let p={};if(B&&!K&&E&&!L){const e=132,t=(0,S.Wc)(o,x);p={minHeight:`calc(100vh - ${c.g+e-t}px)`}}return{content:{flexShrink:0,flexGrow:1,maxWidth:"100%",display:"flex",alignItems:"flex-start",flexDirection:"column",fontFamily:S.sL[t],fontSize:r,letterSpacing:n?`${n}em`:void 0,lineHeight:i,width:"100%",zIndex:u.ke,opacity:P?.5:void 0,...s,...l,...d,...p}}}),[L,K,B,T,E,o,b.isAndroid,b.isMobile,x,I.page_font,I.page_small_text,_,C,j,P]),[R,O]=function(e,t){const o=(0,n.useRef)(null),i=(0,a.Z)(o,e),r=(0,Y.y)(o),s=(0,n.useCallback)((e=>{re.setWidth(e.width,t)}),[t]);(0,n.useEffect)((()=>{r&&s(r)}),[s,r]);const d=(0,l.VK)((()=>re.getWidth(t)),[t]);return[i,d]}(t,Z);return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)("div",{className:J.QS0,onClick:m,style:F.content,ref:R,children:[!w&&(0,N.jsx)(y.Z,{store:f.getContentStore(),emptyDroppableStyle:{width:"100%"},disabled:V}),C&&(0,N.jsx)(h.Z,{}),v&&j&&(0,N.jsx)($,{store:f,menuListStore:v})]}),M&&(0,N.jsx)("div",{style:{position:"absolute",bottom:96},children:(0,N.jsx)(D.LazyExperimentalHorizontalTemplatePicker,{store:f,menuListStore:v,editorWidth:O})})]})}));const ce=(0,n.forwardRef)((function(e,t){const{context:o,disabled:n,handlePlaceholderWrapClick:i,pageBlockStore:r,pathToBlockId:a,templatePickerMenuListStore:d,pageViewBlockAccessor:c}=e,u=(0,s.O7)(),p=(0,l.VK)((()=>a?(0,f.Vg)({environment:u,pageBlockStore:r,pathToBlockId:a}):r),[u,r,a]),h=(0,l.VK)((()=>(0,m.fg)(u,r)),[u,r]),y=(0,l.VK)((()=>(0,ee.CX)(r)),[r]);return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(le.Pb,{className:"layout-editor",style:{minHeight:"170px"},children:(0,N.jsx)(de,{store:p,disabled:n,context:o,templatePickerMenuListStore:d,onClick:y?i:void 0,ref:t})}),h&&c?(0,N.jsx)(le.Vw,{children:(0,N.jsx)(g.Z,{pageBlockStore:r,isVisible:!0,context:o,pageViewBlockAccessor:c,isCollapsedAnchor:!0})}):null]})}))},59764:(e,t,o)=>{o.d(t,{Z:()=>f});var n=o(67294),i=o(480),r=o(86628),s=o(41432),a=o(43593),l=o(9291),d=o(9953),c=o(23728),u=o(13447),p=o(31278),g=o(95477),m=o(28020),h=o(85893);const f=n.memo((function(e){let{store:t,isEditable:o,hasCover:f,isInSidePeek:y,openMenuOnMount:S,openMenuOnMountCallback:v}=e;const x=(0,i.O7)(),b=(0,l.useIntl)(),k=(0,r.VK)((()=>t.hasIcon()),[t]),C=(0,r.VK)((()=>{if(k)return t.getIcon()}),[k,t]),M=(0,r.VK)((()=>t.getIconStore()),[t]),j=(0,r.VK)((()=>t.getType()),[t]),w=(0,r.VK)((()=>{if(t.isCollectionView()){const e=t.getCollectionViewSourceCollectionStore();return!!e&&e.isSyncedCollection()}return t.isType(s.Ti.externalObjectInstancePage)}),[t]),P=(0,r.VK)((()=>t.isCollectionView()||y),[t,y]),V=(0,r.VK)((()=>P?36:w?74:140),[P,w]),I=(0,r.VK)((()=>t.isEmptyPage()),[t]),_=(0,n.useCallback)((async e=>{const o=t.getIconStore();if(o){const n=(0,a.Wv)(e,g.default.secureFileS3.url,g.default.secureFileS3V2.url,g.default.secureFileConfig.rootPath,g.default.secureFileConfig.hostname),i=n?n.link:e,{serverCommitResult:r}=u.createAndCommit({userAction:"PageIcon.handleChange",environment:x,perform:e=>{d.sO({store:o,value:i,transaction:e})}});await r,c.P({store:t,environment:x})}}),[x,t]);if(!k)return null;const T={position:"relative",zIndex:1,marginLeft:3,marginBottom:x.device.isMobile?8:0,marginTop:4,pointerEvents:"auto"};let Z;P?T.marginRight=6:T.marginTop=f?-80:x.device.isMobile?0:(0,m.CP)(x),Z=P?{marginTop:(x.device.isMobile,4),marginRight:8}:{marginTop:f?-42:x.device.isMobile?0:(0,m.CP)(x)};const E=P?36:78;if(o){const e=null==M?void 0:M.table;return(0,h.jsx)(p.Z,{disabled:!1,bucket:"secure",icon:C,store:t,isEmptyPage:I,onChange:_,size:V,emojiSize:E,style:T,emojiStyle:Z,largeIcon:!0,openMenuOnMount:S,openMenuOnMountCallback:v,iconLoggingData:{recordTable:e,source:"page_header",block_type:j,collection_id:"collection"===e?null==M?void 0:M.id:void 0},label:b.formatMessage({id:"layout.pageIcon.label",defaultMessage:"Change page icon"})})}return(0,h.jsx)(p.Z,{disabled:!0,icon:C,isEmptyPage:I,size:V,emojiSize:E,style:T,emojiStyle:Z,largeIcon:!0,label:b.formatMessage({id:"layout.pageIcon.disabledLabel",defaultMessage:"Page icon"})})}))},94043:(e,t,o)=>{o.d(t,{Nx:()=>T,Pb:()=>_,Vw:()=>E,Xg:()=>k,a3:()=>D,bj:()=>Z,dp:()=>K,uI:()=>L,us:()=>V});var n=o(94184),i=o.n(n),r=o(67294),s=o(60177),a=o(64338),l=o(24405),d=o(73420),c=o(2275),u=o(85893);const p="layout-wide",g="layout-wide-right-margin-expanded",m="layout-side-peek",h="layout-center-peek",f="layout-home",y="layout-home-phone",S="layout-phone",v="layout-tablet",x="layout-template-preview",b="layout-chat";function k(e){let{children:t,type:o,gap:n,withBottomPadding:r,style:s}=e;const a=(0,c.n1)(o);return(0,u.jsx)("div",{className:i()("layout",{[p]:"wide"===o,[g]:"wide-right-margin-expanded"===o,[m]:"side-peek"===o,[h]:"center-peek"===o,[f]:"home"===o,[y]:"home-phone"===o,[S]:"phone"===o,[v]:"tablet"===o,[x]:"template-preview"===o,[b]:"chat"===o}),style:{paddingBottom:r?a:void 0,gap:n,...s},children:t})}const C="layout-content",M="layout-full",j="layout-margin-left",w="layout-margin-right",P="layout-nested-grid",V="hide-scrollbar",I="layout-column";function _(e){return(0,u.jsx)("div",{className:i()(C,e.className),style:e.style,children:e.children})}function T(e){return(0,u.jsx)("div",{className:M,style:e.style,children:e.children})}function Z(e){return(0,u.jsx)("div",{className:j,style:e.style,children:e.children})}function E(e){return(0,u.jsx)("div",{className:w,children:e.children})}const B=(0,r.forwardRef)((function(e,t){return(0,u.jsx)("div",{className:i()(P,e.className),onClick:e.onClick,style:e.style,role:e.role,id:e.id,"aria-labelledby":e["aria-labelledby"],ref:t,children:e.children})}));function K(e){let{items:t,style:o}=e;const[n,i]=r.useState(0),c=(0,r.useRef)([]),p=(0,s.Dl)();(0,a.q7)(null==p?void 0:p.domLock);const g=(0,l.yK)((e=>({icon:{width:16,height:16,fill:"currentColor"},label:{fontSize:14,fontWeight:600},tab:"centered"===o?{cursor:"pointer",border:"none",padding:"6px 12px",borderRadius:20,color:e.text.secondary,background:"none"}:{cursor:"pointer",border:"none",borderBottom:"2px solid",borderColor:"transparent",padding:"6px 8px 12px",color:e.text.secondary,background:"none"},tabSelected:"centered"===o?{color:e.text.primary,background:e.tint.regular}:{color:e.text.primary,borderColor:e.regularTextColor}})),[o]),m=(0,r.useId)(),h=(0,r.useCallback)((e=>`${m}-tab-${e}`),[m]),f=(0,r.useCallback)((e=>`${m}-tabpanel-${e}`),[m]),y=(0,r.useCallback)((e=>{let o;var r;("ArrowLeft"===e.key?(e.preventDefault(),o=(n+t.length-1)%t.length):"ArrowRight"===e.key&&(e.preventDefault(),o=(n+1)%t.length),void 0!==o)&&(i(o),null===(r=c.current[o])||void 0===r||r.focus())}),[n,t.length]);return(0,u.jsxs)(B,{children:[(0,u.jsx)(_,{children:(0,u.jsx)("div",{role:"tablist",children:(0,u.jsx)(d.X2,{justifyContent:"centered"===o?"center":"flex-start",children:t.map(((e,t)=>{var o;return(0,u.jsx)("button",{ref:e=>{e&&(c.current[t]=e)},id:h(t),role:"tab","aria-controls":f(t),"aria-selected":t===n,tabIndex:t===n?void 0:-1,onKeyDown:y,style:{...g.tab,...t===n&&g.tabSelected},onClick:e=>{e.stopPropagation(),i(t)},children:(0,u.jsxs)(d.X2,{gap:4,alignItems:"center",children:[null===(o=e.icon)||void 0===o?void 0:o.call(e,g.icon),e.label&&(0,u.jsx)("div",{style:g.label,children:e.label})]})},e.key)}))})})}),(0,u.jsx)(B,{id:f(n),role:"tabpanel","aria-labelledby":h(n),children:t[n]?t[n].children:null})]})}function D(e){return(0,u.jsx)("div",{className:i()(I,e.className),style:{"--min-column-width":`${e.minWidth}px`,...e.style},children:e.children})}function L(e){return(0,u.jsxs)(D,{minWidth:e.minWidth,className:e.className,style:e.style,children:[e.left,e.right]})}},34488:(e,t,o)=>{o.d(t,{V:()=>A});var n=o(94184),i=o.n(n),r=o(67294),s=o(86628),a=o(68709),l=o(480),d=o(24405),c=o(53965),u=o(7220),p=o(27714),g=o(9291),m=o(7032),h=o(893),f=o(63296),y=o(95477),S=o(77080),v=o(62878),x=o(13555),b=o(85893);const k=(0,g.defineMessages)({linkCopied:{defaultMessage:"Link copied. Share it with others who may find this useful.",id:"ai.gtmFavoriteActions.linkCopied"},share:{defaultMessage:"Share as AI favorite",id:"ai.gtmFavoriteActions.share"},add:{defaultMessage:"Add to AI favorites",id:"ai.gtmFavoriteActions.add"}});function C(e){const{blockId:t}=e,o=(0,l.O7)(),n=(0,g.useIntl)(),i=(0,r.useCallback)((()=>{(0,v.importGtmFavorite)({environment:o,importArgs:{name:"aiGtmFavoriteImport",blockId:t}})}),[t,o]),s=(0,r.useCallback)((()=>{const e=`${y.default.domainBaseUrl}/ai-gtm/${(0,m.cj)(t)}`;h.RD({environment:o,stringValue:e,copiedMessage:k.linkCopied})}),[t,o]);return(0,b.jsxs)("div",{style:{marginTop:12,marginBottom:12},children:[(0,b.jsx)(f.Z,{onClick:s,icon:p.N,children:n.formatMessage(k.share)}),o.currentUser.isLoggedIn()&&(0,b.jsx)(f.Z,{onClick:i,style:{marginLeft:12},icon:u.l,children:n.formatMessage(k.add)})]})}var M=o(28651),j=o(35314),w=o(85526),P=o(50478),V=o(87167),I=o(41883),_=o(12867),T=o(65091);const Z=5;function E(e){const{collectionStore:t,schema:o,store:n,format:i,propertyIds:a,variant:u}=e,p=(0,l.O7)(),[g,m]=(0,j.e)(),h=(0,s.qz)(void 0,M.Z),f=(0,d.yK)((e=>({pageProperties:{width:"100%",fontSize:14},dragHandle:{marginLeft:-(P.C$+10),marginRight:6},hidePropertiesButton:{margin:"0 0 10px"},showMoreButton:{margin:0},addPropertyButton:{margin:"4px 0 0"},moreProperties:{border:`1px solid ${"dark"===e.mode?e.accentColors.gray[300]:e.accentColors.gray[75]}`,borderRadius:4,padding:"8px 6px"}})),[]),y=(0,s.VK)((()=>"pinned"===u||Boolean(n.isAssociatedCollectionAPageTree())),[n,u]),v=(0,V.nd)({store:n,format:i,schema:o,collectionStore:t,propertyIds:a}),k=(0,s.VK)((()=>w.Z.state.forceShowProperties),[]),[E,B]=(0,r.useMemo)((()=>c.uK(v,(e=>{var t;return!!(null===(t=o[e.property])||void 0===t?void 0:t.type)&&function(e){if("section"===e.visibility)return!1;if("hide"===e.visibility)return!1;if("hide_if_empty"===e.visibility&&!e.hasValue)return!1;return!0}(e)}))),[v,o]),K=function(e){const t=(0,s.VK)((()=>{if(!S.default.checkGate("ai_favorites"))return!1;const t=(0,x.OF)();return!!t&&t.spaceId===e.getSpaceId()&&t.collectionId===e.id}),[e]);return t}(t),D=E.concat(B),[L,F]=(0,r.useState)({open:!1,query:""}),{paddingLeft:R,paddingRight:O,width:A}=e,W=m<Math.min(Z,E.length)*_.Uv;let N;return N=!y||p.device.isMobile||W?(0,b.jsxs)("div",{style:{paddingBottom:8},children:[(0,b.jsx)(I.Z,{...e,showHiddenProperties:k,mergedProperties:y?D:v,propertySearchState:L}),(0,b.jsx)(T.ZP,{...e,mergedProperties:y?D:v,propertySearchState:L,setPropertySearchState:F})]}):(0,b.jsx)(_.ZP,{...e,rowLength:Z,compactProperties:E,hiddenProperties:B,variant:u}),(0,b.jsx)("div",{style:f.pageProperties,onMouseEnter:()=>{h.setState({...h.state,mouseEntered:!0})},onMouseLeave:()=>{h.setState({...h.state,mouseEntered:!1})},ref:g,children:(0,b.jsx)("div",{style:{paddingLeft:R,paddingRight:O,width:A,maxWidth:"100%",padding:y?"pinned"===u?"0 0 10px 0":"10px 0":"8px 0",margin:"0 auto"},children:(0,b.jsxs)("div",{style:{paddingLeft:R,paddingRight:O,width:A,maxWidth:"100%",paddingTop:"8px",margin:"pinned"===u?"0 auto 20px auto":"0 auto"},children:[N,K&&(0,b.jsx)(C,{blockId:n.id})]})})})}var B=o(50627),K=o(73819),D=o(19671),L=o(82136),F=o(13023),R=o(94043);function O(e){const{store:t,format:o,collectionStore:n,disabled:i,blockPropertyValueOverlayStore:r,isInPeekRenderer:a,variant:l,propertyIds:d}=e,c=(0,s.VK)((()=>n.getSchema()),[n]),u=(0,s.VK)((()=>t.isNonEditableState()),[t]);return(0,b.jsx)(E,{store:t,collectionStore:n,schema:c,format:o,disabled:i,locked:u,width:"100%",blockPropertyValueOverlayStore:r,isInPeekRenderer:a,propertyIds:d,variant:l})}function A(e){const{store:t,context:o,disabled:n,variant:r,propertyIds:l,hideDivider:d}=e,c=(0,K.PE)(t,n),u=(0,s.VK)((()=>{if(t.isCollectionViewPageWithContent())return{type:"hidden"};const e=t.getAssociatedCollectionStore();if(!e)return{type:"hidden"};const o=(0,B.y6)(t);return o?{type:"visible",store:t,format:o,collectionStore:e}:{type:"hidden"}}),[t]);if("hidden"===u.type)return null;const p=o===L.S.PeekView;return(0,b.jsx)(R.Pb,{className:i()({"layout-content-with-divider":"pinned"!==r&&!d}),children:(0,b.jsx)(a.p,{allowSelectionWithin:!0,children:(0,b.jsx)(O,{...u,disabled:!c,isInPeekRenderer:p,blockPropertyValueOverlayStore:p?F.Z:D.Z,propertyIds:l,variant:r})})})}},71757:(e,t,o)=>{o.d(t,{_:()=>f});o(67294);var n=o(86628),i=o(24405),r=o(37810),s=o(97039),a=o(78030),l=o(68709),d=o(97820),c=o(73819),u=o(19671),p=o(82136),g=o(13023),m=o(94043),h=o(85893);function f(e){const{store:t,context:o,propertyId:f,disabled:y}=e,S=(0,c.PE)(t,y),v=(0,n.VK)((()=>{if(t.isCollectionViewPageWithContent())return{type:"hidden"};const e=t.getAssociatedCollectionStore();return e?{type:"visible",store:t,collectionStore:e,propertyId:f}:{type:"hidden"}}),[f,t]),x=(0,n.VK)((()=>{var e;return null===(e=v.collectionStore)||void 0===e?void 0:e.getSchema()[f]}),[v.collectionStore,f]),b=(0,n.VK)((()=>t.isNonEditableState()),[t]),k=(0,i.yK)((e=>({propertyName:{color:e.mediumTextColor,fontSize:r.Z.fontSize.UIRegular.desktop,fontWeight:r.Z.fontWeight.regular,marginTop:12,marginBottom:12}})),[]);if(!x)return null;if("hidden"===v.type)return null;const C=o===p.S.PeekView;return(0,h.jsx)(m.Pb,{className:"layout-content-with-divider",children:(0,h.jsx)(l.p,{allowSelectionWithin:!0,children:(0,h.jsxs)("div",{style:{display:"flex",flexDirection:"column",marginBottom:16},children:["relation"!==x.type?(0,h.jsx)(d.Z,{propertySchema:x,showIcon:!0,style:k.propertyName,property:f,badge:(0,h.jsx)(d.o,{propertySchema:x})}):null,(0,h.jsx)(s.Z,{store:t,property:f,disabled:!S,locked:b,format:a.C.PropertyModule,tableWrap:!0,blockPropertyValueOverlayStore:C?g.Z:u.Z,collectionStore:v.collectionStore,isInPeekRenderer:C},f)]})})})}},64635:(e,t,o)=>{o.d(t,{Z:()=>K});var n=o(67294),i=o(13991),r=o(480),s=o(97511),a=o(86628),l=o(24405),d=o(49271),c=o(41432),u=o(42509),p=o(42875),g=o(27714),m=o(9291),h=o(37810),f=o(12714),y=o(68709),S=o(73063),v=o(84076),x=o(26388),b=o(19987),k=o(79954),C=o(44862),M=o(65187),j=o(41232),w=o(33929),P=o(46654),V=o(94841),I=o(21273),_=o(6258),T=o(99757),Z=o(2275),E=o(85893);function B(e){const{store:t,collectionContextStore:o}=e,n=(0,a.VK)((()=>t.isCollectionView()),[t]),i=(0,a.VK)((()=>t.getCollectionViewSourceCollectionStore()),[t]);return n&&o&&i?(0,E.jsx)(C.Z,{collectionStore:i,collectionContextStore:o}):null}const K=n.memo((function(e){let{store:t,disabled:o,isInSidePeek:n,extraStyles:C,titlePlaceholder:K,collectionContextStore:D,shouldShowTemplatePicker:L,onTitleChange:F,onTitleEditText:R,onTitleEsc:O,onTitleUntab:A,onTitleTab:W}=e;const N=(0,r.O7)(),H=(0,s.l)(),z=(0,a.VK)((()=>t.getTitleStore()),[t]),U=(0,a.VK)((()=>{if(t.isCollectionView()){const e=t.getCollectionViewSourceCollectionStore();return!!e&&e.isSyncedCollection()}return t.isType(c.Ti.externalObjectInstancePage)}),[t]),G=(0,a.VK)((()=>{if(o)return!1;if(T.n.state)return!1;const e=H&&H.publicEditModeStore.state;return!(0,P.YF)(e)&&t.canEditCollection()}),[o,H,t]),$=(0,a.VK)((()=>{if(!t.isCollectionView())return!1;const e=t.getCollectionViewSourceCollectionStore();return!!e&&(0,u.OY)(e.getValue())}),[t]),X=(0,a.VK)((()=>{const e=t.getModel();return K??(null==e?void 0:e.getEmptyTitlePlaceholder({getRecordModel:t.getRecordModel,userTimeZone:(0,p.r)(),intl:w.default.getIntl()}))}),[t,K]),Q=!N.device.isMobile&&n,q=(0,a.VK)((()=>G&&!t.isNonEditableState()&&!U&&!(0,V.Kj)(t.id)&&!Z.MQ.state),[G,U,t]),Y=(0,a.VK)((()=>t.isEmptyPage()),[t]),J=(0,a.VK)((()=>t.isTemplate()),[t]),ee=(0,a.VK)((()=>t.getAssociatedCollectionTemplateStores()),[t]),te=(0,a.VK)((()=>t.getSyncedUri()),[t]),oe=function(e){const{store:t,isInSidePeek:o,extraStyles:n}=e,s=(0,r.O7)(),c=(0,a.VK)((()=>t.getFormat()),[t]),u=(0,a.VK)((()=>t.isCollectionView()),[t]),p=(0,a.VK)((()=>t.isExternalObjectInstancePageBlockStore()),[t]),g=(0,a.VK)((()=>Z.MQ.state),[]);return(0,l.yK)((e=>{const t=!!c.page_small_text||s.device.isMobile||u||o?32:40;return{title:{...d.ZD,width:p?"fit-content":"100%"},selectable:{color:g?e.pageTitlePlaceholderTextColor:e.regularTextColor,fontWeight:h.Z.fontWeight.bold,lineHeight:1.2,fontSize:t,fontFamily:h.Z.getHeaderFontFamily({pageFont:c.page_font,locale:i.SP}),cursor:"text",display:"flex",alignItems:"center",textRendering:s.device.isSafari?"optimizeSpeed":void 0,...n},link:{width:16,fill:e.mediumIconColor},placeholder:{...d.ZD,WebkitTextFillColor:e.pageTitlePlaceholderTextColor,cursor:"text"}}}),[s.device.isMobile,s.device.isSafari,n,c.page_font,c.page_small_text,u,p,o,g])}({store:t,isInSidePeek:n,extraStyles:C}),ne=(0,a.VK)((()=>t.isExternalObjectInstancePageBlockStore()),[t]),ie=(0,a.VK)((()=>t.isExternalCollectionBlockStore()?t:void 0),[t]),re=(0,a.VK)((()=>(null==ie?void 0:ie.canEdit())??!1),[ie]),se=(0,a.VK)((()=>te?(0,j.pI)(te,t.pointer.spaceId):void 0),[t.pointer.spaceId,te]),ae=(0,a.VK)((()=>I.Z.shouldEnablePageTitleDiffs()),[]),le=ee&&0===ee.length,de=(0,Z.C_)(t),ce=(0,a.VK)((()=>!de&&(!(!L||J||le||N.device.isMobile)&&Y)),[N.device.isMobile,le,Y,J,de,L]);if($)return null;if(!z)return null;const ue=_.G.createChildStore(z,t.pointer),pe=N.device.isIOS||N.device.isSafari,ge=(0,E.jsx)(M.Z,{tagName:"h1",style:{...oe.title,fontSize:"1em",fontWeight:"inherit",margin:0},store:z,placeholderStyle:oe.placeholder,disabled:!q,placeholder:X,disableSlashCommands:!0,disableSelectAllBlocks:!0,disableStyleAnnotations:!0,disableInsertedDeletedAnnotations:!ae,disableMobileActionBar:!1,disableShiftEnter:!0,disableEmbedMenu:!0,onEsc:O,onUntab:A,onTab:W,disableUpDownArrows:!(!L||J||le||N.device.isMobile)&&Y,disableEnter:ce,onChange:F,disableHorizontalEdgeScroll:!0,pasteBehavior:"block",trackEditsToUserFlow:"user_flow_edit_page_title",inPageFind:{type:"block_match"}});return(0,E.jsxs)("div",{style:Q?{flex:1}:void 0,children:[(0,E.jsxs)(k.Z,{canSelect:!1,canDrag:!1,canEditText:q,onEditText:R,store:ue,style:oe.selectable,analyticsName:"page_content",shouldShowDropZone:!0,children:[pe?(0,E.jsx)(y.p,{style:oe.title,allowSelectionWithin:!0,children:ge}):ge,ne&&(0,E.jsx)(x.ZP,{placement:x.ug.Bottom,renderTooltip:e=>(0,E.jsx)(m.FormattedMessage,{...e,defaultMessage:"Link to original url",description:"Link to the original source of the data.",id:"PageTitle.syncedBlock.original"}),render:e=>(0,E.jsx)(v.Z,{href:se,ignoreLocalHoverState:!0,hovered:!1,children:(0,E.jsx)(S.Z,{ariaLabel:"Link",...e,icon:()=>(0,g.N)(oe.link),style:{marginLeft:4},onClick:()=>{se&&f.D({url:se,environment:N})}})})}),ie&&!N.device.isMobile&&(0,E.jsx)(b.Z,{store:ie,canEdit:re,buttonStyle:{fontWeight:"normal",margin:0}})]}),(0,E.jsx)("div",{style:{marginLeft:4},children:(0,E.jsx)(B,{store:t,collectionContextStore:D})})]})}))},93731:(e,t,o)=>{o.d(t,{J:()=>v});var n=o(67294),i=o(480),r=o(6740),s=o(86628),a=o(10906),l=o(68709),d=o(19987),c=o(12534),u=o(50627),p=o(88923),g=o(59764),m=o(64635),h=o(85893);function f(e){let{store:t,isEditable:o,hasCover:n,isInSidePeek:i,openMenuOnMount:r,openMenuOnMountCallback:s,...a}=e;return(0,h.jsxs)("div",{style:{display:"flex",alignItems:"flex-start"},children:[(0,h.jsx)(g.Z,{store:t,isEditable:o,hasCover:n,isInSidePeek:i,openMenuOnMount:r,openMenuOnMountCallback:s}),(0,h.jsx)(m.Z,{store:t,isInSidePeek:i,...a})]})}function y(e){let{onMouseEnter:t,onMouseMove:o,onMouseLeave:n,headerControls:i}=e;return(0,h.jsx)("div",{onMouseEnter:t,onMouseMove:o,onMouseLeave:n,children:i})}const S=0;function v(e){const{store:t,hasCover:o,headerFocusStore:v,headerControls:x,isEditable:b,openMenuOnMount:k,openMenuOnMountCallback:C,pageViewBlockStore:M,discussionInputStore:j,handleHeaderMouseEnterThrottled:w,handleHeaderMouseLeaveDebounced:P,...V}=e,I=(0,i.O7)(),{device:_,WindowSizeStore:T}=I,Z=(0,s.VK)((()=>(0,a.en)(t)&&(p.default.isSidePeekOpen()||p.default.isSidePeekClosing.state)),[t]),E=_.isMobile&&!o,B=!_.isMobile&&V.isInSidePeek,K=(0,s.VK)((()=>t.isExternalObjectInstancePageBlockStore()&&t.hasError()?t:null),[t]),D=(0,s.VK)((()=>t.canEdit()),[t]),L=(0,s.VK)((()=>T.getSafePaddingLeftCSS(S)),[T]),F=(0,s.VK)((()=>T.getSafePaddingRightCSS(S)),[T]),R=(0,s.VK)((()=>(0,u.kC)(t,I)),[t,I]),O=(0,n.useCallback)((e=>{const t=e.target;void 0!==t&&t instanceof HTMLElement&&(0,r.E)(t)&&v.setState(!0)}),[v]),A=(0,n.useCallback)((()=>{v.setState(!1)}),[v]),W=(0,h.jsx)(g.Z,{store:t,isEditable:b,hasCover:o,isInSidePeek:V.isInSidePeek,openMenuOnMount:k,openMenuOnMountCallback:C}),N=(0,h.jsx)(m.Z,{store:t,...V});return Z?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(y,{onMouseEnter:w,onMouseMove:w,onMouseLeave:P,headerControls:x}),(0,h.jsx)(f,{...e})]}):(0,h.jsx)("div",{style:R,onMouseEnter:w,onMouseMove:w,onMouseLeave:P,children:(0,h.jsxs)("div",{style:{maxWidth:"100%",paddingLeft:L,width:"100%"},onClick:e=>{(0,c.ZP)({event:e,context:c.Af.PageTitleClick})},children:[(0,h.jsxs)(l.p,{onFocus:O,onBlur:A,allowSelectionWithin:!1,style:{pointerEvents:"none"},children:[E&&x,!B&&W,!E&&x]}),(0,h.jsx)("div",{style:{paddingRight:F},children:B?(0,h.jsxs)("div",{style:{display:"flex",alignItems:"flex-start"},children:[W,N]}):N}),K?(0,h.jsx)(d.Z,{store:K,canEdit:D}):null]})})}},2275:(e,t,o)=>{o.d(t,{MQ:()=>X,h9:()=>U,m4:()=>z,mY:()=>ee,WJ:()=>J,Qg:()=>q,n1:()=>Y,C_:()=>Q,mj:()=>$,Nr:()=>G});var n=o(67294),i=o(480),r=o(97511),s=o(86628),a=o(49085),l=o(41432),d=o(80951),c=o(61045),u=o(57819),p=o(10906),g=o(92650),m=o(66890),h=o(22705),f=o(80365),y=o(19124),S=o(12534),v=o(73203),x=o(50627),b=o(61931),k=o(80444),C=o(16772),M=o(19111),j=o(94896),w=o(82136),P=o(88923),V=o(17963),I=o(24405),_=o(90403),T=o(29551),Z=o(89665),E=o(15329),B=o(25664),K=o(94115),D=o(94043),L=o(34488),F=o(71757),R=o(93731),O=o(85893);const A=a.default.createValue(!1),W={properties:e=>{let{store:t,key:o,variant:n,propertyIds:i}=e;return(0,O.jsx)(L.V,{context:w.S.Frame,disabled:!0,store:t,variant:n,propertyIds:i,hideDivider:!0},o)},property:e=>{let{store:t,key:o,propertyId:n}=e;return(0,O.jsx)(F._,{propertyId:n,context:w.S.Frame,disabled:!0,store:t},o)},discussions:e=>{let{store:t,key:o}=e;return(0,O.jsx)(B.s,{store:t,didClickAddDiscussion:!1,hideDivider:!0},o)},titleWithIcon:e=>{let{key:t,store:o,collectionContextStore:n}=e;return(0,O.jsx)(D.Pb,{children:(0,O.jsx)(R.J,{store:o,isEditable:!1,headerControls:void 0,hasCover:!1,isInSidePeek:!1,headerFocusStore:A,openMenuOnMount:!1,openMenuOnMountCallback:N,disabled:!0,titlePlaceholder:"Untitled",collectionContextStore:n,shouldShowTemplatePicker:!1,onTitleChange:N,onTitleEditText:N,onTitleEsc:N,onTitleUntab:N,onTitleTab:N,handleHeaderMouseEnterThrottled:N,handleHeaderMouseLeaveDebounced:N})},t)},editor:e=>{let{key:t,store:o,pathToBlockId:n}=e;return(0,O.jsx)(K.H,{context:w.S.Frame,disabled:!0,handlePlaceholderWrapClick:N,pageBlockStore:o,pathToBlockId:n},t)},expandedBacklinks:e=>{let{key:t,store:o,count:n}=e;return n?(0,O.jsx)(E.o,{store:o,hideDivider:!0},t):(0,O.jsx)(H,{text:"Backlinks"})},inlinePageSections:e=>{let{key:t,store:o,inlinePropertyIDs:n}=e;return(n??[]).length>0?(0,O.jsx)(Z.bM,{context:w.S.Frame,disabled:!0,inlinePropertyIDs:n,onMouseEnter:N,onMouseLeave:N,store:o,hideDivider:!0},t):(0,O.jsx)(H,{text:"Inline page sections"})},tabs:()=>null,cover:()=>null,bottomControls:()=>null,transcript:()=>null};function N(){}function H(e){const t=(0,I.yK)((e=>({text:{fontSize:14,color:"light"===e.mode?e.accentColors.gray[500]:e.accentColors.gray[600]}})),[]);return(0,O.jsxs)(T.gq,{children:[(0,O.jsx)("span",{style:t.text,children:e.text}),(0,O.jsx)(_.Z,{content:"Not enabled"})]})}function z(e){(0,S.ZP)({event:e,context:S.Af.EditorMouseDown,callback:()=>{}})}function U(e){(0,S.ZP)({event:e,context:S.Af.EditorClick,callback:()=>{}})}function G(e){return(0,s.VK)((()=>Boolean(V.Z.state.pageMap[e.id])||j.Z.state.pages.has(e.id)),[e.id])}function $(e,t){const o=(0,i.O7)(),n=(0,r.l)(),a=G(e),l=(0,s.VK)((()=>t===w.S.Frame?k.default.state.currentLoadingContainerStore:t===w.S.PeekView&&P.default.state.open?P.default.state.loadingContainerStore:void 0),[t]),d=q(e);return(0,s.VK)((()=>{const t=o.currentUser.isLoggedIn(),i=n&&n.publicEditModeStore.state;return Boolean(e&&l&&e.isDefined()&&!e.isNonEditableState()&&e.canEdit()&&!e.hasContent()&&t&&(!(null!=i&&i.hasPublicPermission)||"edit"===(null==i?void 0:i.permission))&&!a&&l.state.ready&&!d&&(!(0,y.GD)(i)||"completionPopup"!==C.default.state.type))}),[o.currentUser,d,l,n,a,e])}const X=a.default.createValue(!1);function Q(e){const t=(0,i.O7)(),o=(0,r.l)();return(0,s.VK)((()=>{if(X.state)return!0;if(!(0,v.r)())return!1;if(!t.currentUser.isLoggedIn())return!1;const n=o&&o.publicEditModeStore.state;if(null!=n&&n.hasPublicPermission&&"edit"!==(null==n?void 0:n.permission))return!1;if(e.getContentLength()>1)return!1;const i=e.getContentStores()[0];if(i&&!i.isEmptyTextBlock())return!1;if(e.getAssociatedCollectionStore())return!1;const r=h.TI.state,s=h.mn.state;return!r||e.id!==s}),[t.currentUser,o,e])}function q(e){return(0,s.VK)((()=>{if(e.isCollectionView()){const t=e.getCollectionViewSourceCollectionStore();return!!t&&t.isSyncedCollection()}return e.isType(l.Ti.externalObjectInstancePage)}),[e])}function Y(e){const{device:t,WindowSizeStore:o}=(0,i.O7)(),n=(0,s.VK)((()=>{const e=o.state.height,n=t.isMobile&&M.Z.state.open?e:0;return c._4()+n}),[o,t.isMobile]);return(0,s.VK)((()=>Boolean((0,u.RR)(C.default.state))?600:"home-phone"===e?b.jq:t.isTablet?380:t.isIOS?Math.max(350,n):t.isMobile?400:"side-peek"===e||"center-peek"===e?80:"home"===e?b.XX:"30vh"),[t,n,e])}function J(e){const t=(0,i.O7)(),o=(0,s.VK)((()=>(0,g.fg)(t,e)),[t,e]);return(0,s.VK)((()=>o&&!e.isFullWidth()?(0,g.gC)(t,(0,p.en)(e),(0,p.Ks)(e)):0),[t,o,e])}function ee(e){var t;let{store:o}=e;const r=(0,i.O7)(),a=(0,m.Y$)(),l=(0,s.VK)((()=>o.getSchema()),[o]),c=(0,s.VK)((()=>(0,x.y6)(o)),[o]),u=(0,s.VK)((()=>{if(!c)return;return(c.collection_page_sections||[]).filter((e=>{const t=l[e.section];if(!t||"relation"!==t.type)return;const n=o.getPropertyValue(e.section),i=(0,d.j$)({relationValue:(0,d.rq)(n),propertySchema:t,getRecordModel:o.getRecordModel}).length;return"inline"===e.visibility&&l[e.section]&&0!==i})).map((e=>e.section))}),[c,l,o]),p=(0,s.VK)((()=>{var e;return"section_show"===(null==c||null===(e=c.page_section_visibility)||void 0===e?void 0:e.backlinks)?0:(0,f.L)(o,r).backlinks.length}),[null==c||null===(t=c.page_section_visibility)||void 0===t?void 0:t.backlinks,r,o]);return(0,n.useCallback)(((e,t)=>{const n=e.type;if("property"===n)return W[n]({store:o,key:t,propertyId:e.propertyId});if("titleWithIcon"===n)return W[n]({store:o,key:t,collectionContextStore:a});if("properties"===n)return W[n]({store:o,key:t,propertyIds:e.propertyIds,variant:e.variant});if("inlinePageSections"===n)return W[n]({store:o,key:t,inlinePropertyIDs:u});if("expandedBacklinks"===n)return W[n]({store:o,key:t,count:p});if("editor"===n||"discussions"===n)return W[n]({store:o,key:t});return(0,W[n])()}),[p,a,u,o])}},72974:(e,t,o)=>{o.d(t,{Z:()=>Y});o(57658),o(30541);var n=o(67294),i=o(1302),r=o(13991),s=o(480),a=o(86628),l=o(24405),d=o(80951),c=o(45238),u=o(85893);const p=(0,c.IU)("addPageDiscussion",{viewBox:"0 0 16 16",svg:(0,u.jsx)("path",{d:"M4.095 15.465c.287 0 .499-.137.84-.444l2.523-2.277 4.47.007c2.058 0 3.214-1.19 3.214-3.22V4.22c0-2.03-1.156-3.22-3.213-3.22H3.213C1.163 1 0 2.19 0 4.22V9.53c0 2.037 1.196 3.22 3.165 3.213h.273v1.983c0 .45.24.738.657.738zM3.958 5.156a.454.454 0 01-.444-.45c0-.24.198-.438.444-.438h7.157c.246 0 .445.198.445.437a.45.45 0 01-.445.451H3.958zm0 2.256a.454.454 0 01-.444-.451c0-.24.198-.444.444-.444h7.157a.448.448 0 010 .895H3.958zm0 2.256a.448.448 0 010-.896h4.669c.246 0 .437.206.437.452a.438.438 0 01-.437.444H3.958z"})});var g=o(9999),m=o(98519),h=o(43119),f=o(23867),y=o(9291),S=o(53965),v=o(37810),x=o(85344),b=o(54564),k=o(72711),C=o(98104),M=o(33767),j=o(82994),w=o(68709),P=o(31945),V=o(78140),I=o(40721),_=o(89728),T=o(26388),Z=o(13677),E=o(3553),B=o(80365),K=o(11599),D=o(60709),L=o(50627),F=o(65598),R=o(77907),O=o(24646),A=o(19671),W=o(13023),N=o(89665),H=o(15329),z=o(62062),U=o(25664),G=o(94115),$=o(94043),X=o(34488),Q=o(71757),q=o(93731);const Y=(0,n.forwardRef)((function(e,t){const{layoutSchema:o,store:c,context:Y,disabled:J,templatePickerMenuListStore:ee,styleOverrides:te,onMouseEnter:oe,onMouseMove:ne,onMouseLeave:ie,pageCoverHeight:re,headerControlsStyle:se,isEditable:ae,getControlHoverStyle:le,pageViewBlockStores:de,pageViewBlockAccessor:ce,onDetailMouseEnter:ue,onDetailMouseLeave:pe}=e,ge=(0,s.O7)(),me=(0,a.VK)((()=>c.getAssociatedCollectionStore()),[c]),he=(0,a.VK)((()=>c.getSchema()),[c]),fe=(0,a.VK)((()=>{const e=(0,L.y6)(c);if(!e)return;return(e.collection_page_sections||[]).filter((e=>{const t=he[e.section];if(!t||"relation"!==t.type)return;const o=c.getPropertyValue(e.section),n=(0,d.j$)({relationValue:(0,d.rq)(o),propertySchema:t,getRecordModel:c.getRecordModel}).length;return"inline"===e.visibility&&he[e.section]&&0!==n})).map((e=>e.section))}),[he,c]),ye=(0,l.yK)((e=>({bottomControls:{display:"flex",alignItems:"baseline",justifyContent:"flex-start",flexWrap:"wrap",color:e.lightTextColor,fontFamily:v.Z.getCompositeFontFamily(r.SP).sans},detailsButton:{fontWeight:v.Z.fontWeight.medium,color:e.mediumTextColor}})),[]),Se=(0,a.VK)((()=>(null==te?void 0:te.paddingX)??(0,L.RH)(Y,ge)),[Y,ge,null==te?void 0:te.paddingX]),ve=(0,n.useMemo)((()=>new j.Z(ge,(0,f.C)(c.pointer.spaceId))),[ge,c]),xe=(0,a.VK)((()=>de.pageViewBlockStore.state.forceDiscussionOpen),[de.pageViewBlockStore]),be=(0,n.useCallback)((()=>(0,F.Xp)(c,{recursivelyLoadAllDiscussions:!1})),[c]),ke=(0,n.useCallback)((()=>be()>0),[be]),Ce=(0,a.VK)((()=>{const e={type:"hidden"},t=F.vV(c,{recursivelyLoadAllDiscussions:!1}),o=0===t.length,n="PageDetailsStore"in ge&&ge.PageDetailsStore.getToggleState({environment:ge,type:"discussion",id:c.id}),i=K.A$("comments","section_hide");if(!xe&&(!c.isInsideCollection()||!o)&&(o||!o&&(!1===n||void 0===n&&i)))return e;if(i)return e;const r=ge.currentUser.isLoggedIn()&&c.canComment()&&o&&!(0,L.a_)(c);return!r&&o?e:{type:"visible",showDiscussionInput:r,unresolvedDiscussionStores:t}}),[c,ge,xe]),Me=(0,a.VK)((()=>(0,B.L)(c,ge).backlinks.length),[ge,c]),je=(0,a.VK)((()=>"PageDetailsStore"in ge&&ge.PageDetailsStore.getToggleState({environment:ge,type:"backlinks",id:c.id})),[ge,c.id]),we=(0,a.VK)((()=>{const e=(0,L.y6)(c);if(!e)return;return(e.collection_page_sections||[]).filter((e=>{const t=he[e.section];if(!t||"relation"!==t.type)return;const o=c.getPropertyValue(e.section),n=(0,d.j$)({relationValue:(0,d.rq)(o),propertySchema:t,getRecordModel:c.getRecordModel}).length;return"minimal"===e.visibility&&he[e.section]||"inline"===e.visibility&&he[e.section]&&0===n})).map((e=>e.section))}),[he,c]),{value:Pe}=(0,R.useDependency)(M.Av),Ve=(0,a.VK)((()=>{const t=()=>!!(()=>{const e=(0,K.dy)("backlinks");return void 0===je?e:je})()&&0!==Me,o=async()=>{de.pageViewBlockStore.setState({...de.pageViewBlockStore.state,forceDiscussionOpen:!0}),x.ZW(ge,{from:"page_comments"}),await i.default.afterNextFlush(),C.NX({store:ve.state.textStore})},r=e=>(0,u.jsx)(_.Z,{style:le(e.isBottomControl),isLightGray:!0,onClick:o,icon:p,children:ge.device.isSmallPhone?(0,u.jsx)(y.FormattedMessage,{id:"pageViewBlock.add.pageCommentMobile",defaultMessage:"Comment"}):(0,u.jsx)(y.FormattedMessage,{id:"pageViewBlock.add.pageComment",defaultMessage:"Add comment"})},"addcomment"),s=e=>{const{isTopControlsEmpty:t,isBottomControlsEmpty:o,discussionsRenderState:n}=e;return(0,K.A$)("comments","section_hide")||c.isCollectionView()||c.isInsideCollection()||ke()||!c.canComment()||!ge.currentUser.isLoggedIn()||de.pageViewBlockStore.state.forceDiscussionOpen||c.pathIsDead()?"hidden":"hidden"!==n.type||o?ge.device.isMobile&&t?"bottom":"top":"bottom"};try{let o=[];const i=[...e.topControls],a=t(),l=()=>{if(0===Me)return;if((0,K.A$)("backlinks","section_hide"))return;const e=e=>{let{onClick:t=S.ZT,tooltipEvents:o={},buttonPopupEvents:n={}}=e;return(0,u.jsx)(_.Z,{isGray:!0,icon:e=>(0,g.J)({...e,transform:"rotate(180deg)"}),style:ye.detailsButton,onClick:t,...n,...o,children:(0,u.jsx)(y.FormattedMessage,{id:"pageViewBlock.show.backlinks",defaultMessage:"{numberOfBacklinks, plural, one {{numberOfBacklinks} backlink} other {{numberOfBacklinks} backlinks}}",values:{numberOfBacklinks:Me}})})},t=(0,u.jsx)(T.ZP,{renderTooltip:()=>(0,u.jsx)(y.FormattedMessage,{defaultMessage:"Show pages linked to this page",id:"pageViewBlock.show.backlinks.tooltip"}),placement:T.ug.Bottom,delayThreshold:400,render:t=>e({tooltipEvents:t,onClick:()=>{"PageDetailsStore"in ge&&ge.PageDetailsStore.setToggleState({environment:ge,type:"backlinks",id:c.id},!0)}})},"showbacklinks"),o=(0,u.jsx)(P.ZP,{buttonPopupStore:de.backlinksButtonPopupStore,popupType:P.Z4.Popup,renderOrigin:t=>e({buttonPopupEvents:t}),render:()=>{const e={menuType:D.og.Popup,width:500};return(0,u.jsx)(V.Z,{...e,children:Me>0?(0,u.jsx)(H.f,{store:c}):null})}},"backlinkspopup");return(0,K.A$)("backlinks","section_collapsed")?o:t},d=()=>{if(!(0,K.A$)("comments","section_hide")&&ke()){const e=be();return(0,u.jsx)(_.Z,{isGray:!0,onClick:()=>{"PageDetailsStore"in ge&&ge.PageDetailsStore.setToggleState({environment:ge,type:"discussion",id:c.id},!0)},icon:p,style:ye.detailsButton,children:(0,u.jsx)(y.FormattedMessage,{id:"pageViewBlock.show.pageComments",defaultMessage:"{numberOfComments, plural, one {{numberOfComments} comment} other {{numberOfComments} comments}}",values:{numberOfComments:e}})},"showcomments")}},h=()=>{if(!me)return;const e=(0,L.y6)(c),t=c.isNonEditableState();if(!e)return;const o=we;return o&&o.length?(0,u.jsx)(Z.Z,{propertyIds:o,store:c,collectionStore:me,disabled:J,locked:t,schema:he,handleMouseMove:ne,handleMouseLeave:ie,handleContextMenu:()=>{},blockPropertyValueOverlayStore:(0,L.OZ)(Y)?W.Z:A.Z,format:e,type:"minimal",isInPeekRenderer:(0,L.OZ)(Y)}):void 0},f=()=>{const e=(0,F.mY)(c,{recursivelyLoadAllDiscussions:!1});if(0===e.length)return;const t=(0,u.jsx)(y.FormattedMessage,{id:"pageViewBlock.showResolvedComments.button",defaultMessage:"{numberOfResolvedComments, plural, one {{numberOfResolvedComments} resolved comment} other {{numberOfResolvedComments} resolved comments}}",values:{numberOfResolvedComments:e.length}});return(0,O.Sx)(ge)?(0,u.jsx)(_.Z,{icon:m.k,isGray:!0,style:ye.detailsButton,onClick:()=>{b.Ib({environment:ge,blockStore:c,analyticsFrom:"page_comments",shouldFocusDiscussion:!0,recursivelyLoadAllDiscussions:!1,discussionIds:e.map((e=>e.id))})},children:t}):(0,u.jsx)(P.ZP,{buttonPopupStore:de.resolvedDiscussionButtonPopupStore,popupType:ge.device.isMobile?P.Z4.SlideUp:P.Z4.Popup,renderOrigin:e=>(0,u.jsx)(_.Z,{icon:m.k,isGray:!0,style:ye.detailsButton,...e,children:t}),render:t=>{let o;return o=ge.device.isMobile?{menuType:D.og.Modal,title:(0,u.jsx)(y.FormattedMessage,{defaultMessage:"Resolved comments",id:"pageViewBlock.resolvedComments.menuTabTitle"}),right:(0,u.jsx)(I.DoneMenuText,{}),onClickRight:t.close,whiteBackground:!0}:{menuType:D.og.Popup,width:500},(0,u.jsx)(V.Z,{...o,children:e.map(((e,o,n)=>(0,u.jsx)(E.Z,{store:e,droppable:!0,render:()=>Pe?(0,u.jsx)(M.gU,{store:e,format:Pe.discussionHelpers.DiscussionFormat.Menu,isFirst:0===o,isOnly:1===n.length,discussionLocation:"page_discussion",showResolveButtonByDefaultIfPossible:!0,blockStore:c,onDismiss:t.close},e.id):null},e.id)))})}},"resolve-discussions")},v=(e,t)=>{const o=[],i=!e&&l();i&&o.push((0,u.jsx)(n.Fragment,{children:i},"backlinks"));const r="hidden"===t.type,s=r&&d();s&&o.push((0,u.jsx)(n.Fragment,{children:s},"discussions"));const a=f();a&&!r&&o.unshift((0,u.jsx)(n.Fragment,{children:a},"resolveddiscussions"));const c=h();return c&&o.push((0,u.jsx)(n.Fragment,{children:c},"minimalpagesections")),o};o=v(a,Ce);const x=s({isTopControlsEmpty:0===i.length,isBottomControlsEmpty:0===o.length,discussionsRenderState:Ce});"top"===x?i.push(r({isBottomControl:!1})):"bottom"===x&&o.push(r({isBottomControl:!0}));return{headerControls:(0,u.jsx)("div",{style:se,className:"notion-page-controls",children:i}),bottomControls:o}}catch(a){return{bottomControls:[]}}}),[Pe,e.topControls,se,Ce,le,Me,je,ge,me,Y,J,ve,be,ke,we,ie,ne,de.backlinksButtonPopupStore,de.pageViewBlockStore,de.resolvedDiscussionButtonPopupStore,he,c,ye.detailsButton]),Ie={cover:e=>(0,u.jsx)(z.D,{store:c,isEditable:ae,paddingX:Se,pageCoverHeight:re,onMouseEnter:oe,onMouseMove:ne,onMouseLeave:ie},e),titleWithIcon:t=>(0,u.jsx)($.Pb,{children:(0,u.jsx)(q.J,{handleHeaderMouseEnterThrottled:oe,handleHeaderMouseLeaveDebounced:ie,headerControls:Ve.headerControls,headerFocusStore:de.headerFocusStore,...e})},t),properties:(e,t,o)=>(0,u.jsx)(X.V,{context:Y,disabled:J,store:c,variant:o,propertyIds:t},e),property:(e,t)=>(0,u.jsx)(Q._,{context:Y,disabled:J,propertyId:t,store:c},e),inlinePageSections:e=>(0,u.jsx)(N.bM,{context:Y,disabled:J,inlinePropertyIDs:fe,onMouseEnter:oe,onMouseLeave:ie,store:c},e),expandedBacklinks:e=>(0,u.jsx)(H.o,{store:c},e),discussions:e=>(0,u.jsx)(U.s,{store:c,didClickAddDiscussion:xe},e),bottomControls:e=>0===Ve.bottomControls.length?null:(0,u.jsx)($.Pb,{children:(0,u.jsx)(w.p,{allowSelectionWithin:!0,children:(0,u.jsx)("div",{style:ye.bottomControls,className:"notion-page-details-controls",onMouseEnter:ue,onMouseLeave:pe,children:Ve.bottomControls})})},e),editor:(e,o)=>{let{pathToBlockId:n}=o;return(0,u.jsx)(G.H,{context:Y,disabled:J,handlePlaceholderWrapClick:e=>k.og(e,c,ge),pageBlockStore:c,pathToBlockId:n,templatePickerMenuListStore:ee,pageViewBlockAccessor:ce,ref:t},e)},transcript:e=>null,tabs:(e,t)=>{let{tabs:o,style:n}=t;return(0,u.jsx)($.dp,{style:n,items:o.map(((e,t)=>({key:t,label:e.label,icon:e.icon?h.q0[e.icon]:void 0,children:e.content.map(((e,t)=>"tabs"===e.type?Ie.tabs(t,e):"editor"===e.type?Ie.editor(t,e):"property"===e.type?Ie.property(t,e.propertyId):"properties"===e.type?Ie.properties(t,e.propertyIds,e.variant):Ie[e.type](t)))})))},e)}};return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(R.LazyFloatingTableOfContents,{store:c}),o.map(((e,t)=>{if("tabs"===e.type)return Ie.tabs(t,e);if("property"===e.type)return Ie.property(t,e.propertyId);if("editor"===e.type)return Ie.editor(t,e);if("properties"===e.type)return Ie.properties(t,e.propertyIds,e.variant);const o=Ie[e.type];return o?o(t):null}))]})}))},29755:(e,t,o)=>{o.d(t,{Z:()=>r});var n=o(49085);class i extends n.default{getInitialState(){return{pageMap:{}}}setStatus(e,t){const{pageMap:o}=this.state;t?o[e]=t:delete o[e],this.emit()}}const r=new i},65669:(e,t,o)=>{function n(e){let t,o,n;return async function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return t?(n=r,o||(o=t.then((()=>(o=void 0,t=e(...n),t))),o)):(t=e(...r),t)}}o.d(t,{Z:()=>n})},65955:(e,t,o)=>{o.d(t,{o:()=>r});o(67294);var n=o(45238),i=o(85893);const r=(0,n.IU)("addPage",{viewBox:"0 0 14 14",svg:(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7 0c3.861 0 7 3.139 7 7s-3.139 7-7 7-7-3.139-7-7 3.139-7 7-7zM3.561 5.295a1.027 1.027 0 1 0 2.054 0 1.027 1.027 0 0 0-2.054 0zm5.557 1.027a1.027 1.027 0 1 1 0-2.054 1.027 1.027 0 0 1 0 2.054zm1.211 2.816a.77.77 0 0 0-.124-1.087.786.786 0 0 0-1.098.107c-.273.407-1.16.958-2.254.958-1.093 0-1.981-.55-2.244-.945a.788.788 0 0 0-1.107-.135.786.786 0 0 0-.126 1.101c.55.734 1.81 1.542 3.477 1.542 1.668 0 2.848-.755 3.476-1.541z"})})},64788:(e,t,o)=>{o.d(t,{P:()=>r});o(67294);var n=o(45238),i=o(85893);const r=(0,n.IU)("addPageCover",{viewBox:"0 0 14 14",svg:(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 0a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2zm0 12h10L8.5 5.5l-2 4-2-1.5L2 12z"})})},27961:(e,t,o)=>{o.d(t,{z:()=>r});o(67294);var n=o(45238),i=o(85893);const r=(0,n.IU)("collectionDescriptionSmall",{viewBox:"0 0 14 14",svg:(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7 4.667C6.69049 4.667 6.39366 4.54405 6.17481 4.32519C5.95595 4.10634 5.833 3.80951 5.833 3.5C5.833 3.19049 5.95595 2.89366 6.17481 2.67481C6.39366 2.45595 6.69049 2.333 7 2.333C7.30951 2.333 7.60634 2.45595 7.82519 2.67481C8.04405 2.89366 8.167 3.19049 8.167 3.5C8.167 3.80951 8.04405 4.10634 7.82519 4.32519C7.60634 4.54405 7.30951 4.667 7 4.667V4.667ZM8 11C8 11.2652 7.89464 11.5196 7.70711 11.7071C7.51957 11.8946 7.26522 12 7 12C6.73478 12 6.48043 11.8946 6.29289 11.7071C6.10536 11.5196 6 11.2652 6 11V7C6 6.73478 6.10536 6.48043 6.29289 6.29289C6.48043 6.10536 6.73478 6 7 6C7.26522 6 7.51957 6.10536 7.70711 6.29289C7.89464 6.48043 8 6.73478 8 7V11ZM7 0C5.14348 0 3.36301 0.737498 2.05025 2.05025C0.737498 3.36301 0 5.14348 0 7C0 8.85652 0.737498 10.637 2.05025 11.9497C3.36301 13.2625 5.14348 14 7 14C8.85652 14 10.637 13.2625 11.9497 11.9497C13.2625 10.637 14 8.85652 14 7C14 5.14348 13.2625 3.36301 11.9497 2.05025C10.637 0.737498 8.85652 0 7 0V0Z"})})},7220:(e,t,o)=>{o.d(t,{l:()=>r});o(67294);var n=o(45238),i=o(85893);const r=(0,n.IU)("import",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M13.291 14.5723C13.291 14.1484 12.9902 13.834 12.5732 13.834H8.06836C8.24609 13.8203 8.42383 13.7314 8.56055 13.5947L13.0586 9.08301C13.2158 8.91895 13.291 8.74121 13.291 8.54297C13.291 8.12598 12.9902 7.81836 12.5801 7.81836C12.3682 7.81836 12.1836 7.90039 12.0469 8.03711L10.4951 9.56836L8.69043 11.585L8.75195 10.1084V1.61133C8.75195 1.16016 8.44434 0.852539 8 0.852539C7.5625 0.852539 7.25488 1.16016 7.25488 1.61133V10.1084L7.30957 11.5781L5.50488 9.56836L3.95312 8.03711C3.82324 7.90039 3.63184 7.81836 3.42676 7.81836C3.0166 7.81836 2.70898 8.12598 2.70898 8.54297C2.70898 8.74121 2.78418 8.91895 2.94141 9.08301L7.44629 13.5947C7.58301 13.7314 7.75391 13.8203 7.93848 13.834H3.44043C3.0166 13.834 2.70898 14.1484 2.70898 14.5723C2.70898 14.9893 3.0166 15.3037 3.44043 15.3037H12.5732C12.9902 15.3037 13.291 14.9893 13.291 14.5723Z"})})},13495:(e,t,o)=>{o.d(t,{M:()=>r});o(67294);var n=o(45238),i=o(85893);const r=(0,n.IU)("layoutPadded",{viewBox:"0 0 24 24",svg:(0,i.jsx)("path",{d:"M3.94727 11.832H10.2295C11.3574 11.832 11.9248 11.2715 11.9248 10.1504V7.30664C11.9248 6.18555 11.3574 5.625 10.2295 5.625H3.94727C2.81934 5.625 2.25195 6.18555 2.25195 7.30664V10.1504C2.25195 11.2715 2.81934 11.832 3.94727 11.832ZM15.6572 17.5811H20.0459C21.1738 17.5811 21.7412 17.0273 21.7412 15.8994V8.33203C21.7412 7.21094 21.1738 6.65723 20.0459 6.65723H15.6572C14.5361 6.65723 13.9688 7.21094 13.9688 8.33203V15.8994C13.9688 17.0273 14.5361 17.5811 15.6572 17.5811ZM4.11133 10.5469C3.73535 10.5469 3.53711 10.3486 3.53711 9.95898V7.49805C3.53711 7.10156 3.73535 6.91016 4.11133 6.91016H10.0586C10.4414 6.91016 10.6396 7.10156 10.6396 7.49805V9.95898C10.6396 10.3486 10.4414 10.5469 10.0586 10.5469H4.11133ZM15.8213 16.3027C15.4521 16.3027 15.2471 16.1045 15.2471 15.7148V8.52344C15.2471 8.12695 15.4521 7.93555 15.8213 7.93555H19.875C20.2578 7.93555 20.4561 8.12695 20.4561 8.52344V15.7148C20.4561 16.1045 20.2578 16.3027 19.875 16.3027H15.8213ZM5.66309 18.4629H10.9951C12.1162 18.4629 12.6904 17.9092 12.6904 16.7812V14.8535C12.6904 13.7324 12.1162 13.1787 10.9951 13.1787H5.66309C4.53516 13.1787 3.96777 13.7324 3.96777 14.8535V16.7812C3.96777 17.9092 4.53516 18.4629 5.66309 18.4629ZM5.82715 17.1846C5.45117 17.1846 5.25293 16.9863 5.25293 16.5967V15.0449C5.25293 14.6553 5.45117 14.4639 5.82715 14.4639H10.8242C11.2002 14.4639 11.4053 14.6553 11.4053 15.0449V16.5967C11.4053 16.9863 11.2002 17.1846 10.8242 17.1846H5.82715Z"})})}}]);