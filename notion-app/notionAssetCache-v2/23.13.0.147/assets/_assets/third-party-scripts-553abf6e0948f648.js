"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[9765],{44975:(e,t,s)=>{s.d(t,{EK:()=>l,IM:()=>c,QZ:()=>r,YY:()=>n,_g:()=>o,dy:()=>i,x9:()=>d,yb:()=>u});var a=s(97978);function i(e,t){a.j(e,"download_desktop_app",t)}function n(e,t){a.j(e,"download_mobile_app",t)}function o(e,t){const{name:s,...i}=t;a.j(e,"click_link",{...i,click_name:s})}function r(e,t){a.j(e,"scroll",t)}function c(e,t){a.j(e,"customer_io_in_app_callout_show",t)}function l(e,t){a.j(e,"customer_io_in_app_callout_suppress",t)}function d(e,t){a.j(e,"customer_io_in_app_callout_dismiss",t)}function u(e,t){a.j(e,"customer_io_in_app_callout_error",t)}},59016:(e,t,s)=>{s.d(t,{S:()=>n});var a=s(86628),i=s(80444);function n(){return(0,a.VK)((()=>{const{currentSpaceStore:e}=i.default.state;return(null==e?void 0:e.getMemberCountFromPublicSpaceData())||null}),[])}},37252:(e,t,s)=>{s.r(t),s.d(t,{InjectThirdPartyScripts:()=>j,useThirdPartyScripts:()=>D});var a=s(67294),i=s(13991),n=s(480),o=s(86628),r=(s(57658),s(7032)),c=s(74686),l=s(66673),d=s(65454);const u={siteId:"a2a8e2144b2bbbb4074a",orgId:"901895b8-45c7-40c8-ba91-626cfc6739b3"};function p(){var e,t,s;if(!window._cio)for(window._cio=[],e=function(e){return function(){window._cio.push([e].concat(Array.prototype.slice.call(arguments,0)))}},t=["load","identify","sidentify","track","page","on","off","reset"],s=0;s<t.length;s++)window._cio[t[s]]=e(t[s])}var g=s(7250),f=s(93724),m=s(49902),_=s(53965),S=s(44975),v=s(8055),y=s(95477),I=s(15010),b=s(94134),k=s(58455),w=s(80444),C=s(61893),E=s(74055),h=s(77080),K=s(3418),R=s(77144),V=s(69454),Z=s(7339),M=s(77907);var P=s(59016);function D(){const e=(0,n.O7)(),t=(0,P.S)()||0,s=(0,n.Fy)(),{currentUser:D}=e,j=(0,o.VK)((()=>{var e;return null===(e=w.default.state.currentSpaceStore)||void 0===e?void 0:e.id}),[]),L=(0,o.VK)((()=>Z.C.state.ready),[]);!function(e){let{isEnabled:t,isLoggedIn:s,userId:i,onMessageOpened:n,onMessageDismissed:o,onMessageError:g,onMessageAction:f,cookieService:m}=e;(0,a.useEffect)((()=>{(async function(){return!!t&&!!(await c.ec({service:"customer_io",cookieService:m}))&&!("cio-tracker"in window)})().then((e=>{if(e)return p(),(0,d.ZP)("https://assets.customer.io/assets/track.js",{id:"cio-tracker",attributes:{"data-site-id":u.siteId,"data-use-array-params":"true","data-in-app-org-id":u.orgId,"data-use-in-app":"true","data-auto-track-page":"false"}}).catch((e=>{console.error("Customer.io failed to load",e)}))}))}),[t,m]);const _=(0,l.D9)(i);(0,a.useEffect)((()=>{_!==i&&(p(),s&&void 0!==i?(window._cio.identify({id:(0,r.cj)(i)}),n&&window._cio.on("in-app:message-opened",n),o&&window._cio.on("in-app:message-dismissed",o),f&&window._cio.on("in-app:message-action",f),window._cio.on("in-app:message-error",g)):window._cio.reset())}),[s,i,_,n,o,g,f])}({isEnabled:(0,o.VK)((()=>D.isLoggedIn()&&L&&h.default.checkGate("customerio")),[D,L]),isLoggedIn:D.isLoggedIn(),userId:D.id,onMessageOpened:t=>{E.Z.state.suppressReason?S.EK(e,{message_id:t.detail.messageId,reason:E.Z.state.suppressReason}):(E.Z.setState({...E.Z.state,isVisible:!0}),S.IM(e,{message_id:t.detail.messageId}))},onMessageDismissed:t=>{E.Z.setState({...E.Z.state,isVisible:!1}),S.x9(e,{message_id:t.detail.messageId})},onMessageError:t=>{S.yb(e,{message_id:t.detail.messageId})},onMessageAction:t=>{if(t.detail.actionValue.startsWith("relative_url=")){const s=t.detail.actionValue.split("relative_url=")[1];v.c4({environment:e,url:s})}t.detail.message.dismiss()},cookieService:e.cookieService}),(0,m.kI)({...(0,o.VK)((()=>{const e=k.default.state.isSprigEnabled&&C.Z.state.permission.performance&&h.default.checkGate("sprig")&&s.isDesktop,{currentUserSettingsStore:a,currentSpaceStore:i,currentUserStore:n}=w.default.state,o=null==n?void 0:n.getEmail(),r=a?(0,I.e2)(a):null,c=Boolean(null==i?void 0:i.canAdmin());return{isEnabled:e,userEmail:o,userDaysSinceSignup:r??0,userDomainType:(0,I.JF)(),isSpaceAdmin:c,spaceMemberCount:t}}),[s,t]),isLoggedIn:D.isLoggedIn(),userId:D.id,spaceId:j,sprigConfig:y.default.sprig}),(0,g.oG)({getLocale:(0,a.useCallback)((()=>i.SP),[]),analyticsSettings:(0,o.VK)((()=>_.ei(k.default.state,["isIntercomEnabled","intercomAppId","intercomUserHash","noIntercomUserId","user_id","user_email"])),[]),onVisibilityChange:(0,a.useCallback)((t=>{V.Z.updateShouldResizeWebview(e,t,"v1"),t?K.Z.addNamedPopup("intercom"):K.Z.removeNamedPopup("intercom")}),[e]),cookieService:e.cookieService}),function(e){var t;const{userId:s,spaceId:i,...n}=e,o=(0,M.useDependency)(M.deps.sentry);(0,a.useEffect)((()=>{if(!o.value)return;const{Sentry:e,sentryInitializeFull:t}=o.value;t({Sentry:{...e,isFullSDK:!0},config:y.default,...n})}),[o.value,n]);const r=null===(t=o.value)||void 0===t?void 0:t.Sentry;(0,a.useEffect)((()=>{r&&r.setUser(s?{id:s}:null)}),[r,s]),(0,a.useEffect)((()=>{r&&r.setTag("space.id",i)}),[r,i])}({userId:D.id,spaceId:j,getErrorsSampleRate:(0,a.useCallback)((()=>h.default.getConfigKey("sentry","errorsSampleRate")),[]),getTracesSampleRate:(0,a.useCallback)((()=>h.default.getConfigKey("sentry","tracesSampleRate-v0")),[]),getReplaysSessionSampleRate:(0,a.useCallback)((()=>h.default.getConfigKey("sentry","replaysSessionSampleRate-v0")),[]),getReplaysOnErrorSampleRate:(0,a.useCallback)((()=>h.default.getConfigKey("sentry","replaysOnErrorSampleRate-v0")),[]),getIsProfilingEnabled:(0,a.useCallback)((()=>"sentry"===(0,b.getProfilingToolForSession)()),[]),getProfilesSampleRate:(0,a.useCallback)((()=>h.default.getConfigKey("sentry","profilesSampleRate")),[])}),(0,f.useConfigurePalette)({userId:D.id,spaceId:j,pageType:(0,o.VK)((()=>{var e;return null===(e=w.default.state.mainEditorCurrentBlockStore)||void 0===e?void 0:e.getType()}),[]),device:s,wasm_sqlite_initialized:(0,o.VK)((()=>R.Z.state.metricData.state.wasm_sqlite_initialized),[])})}function j(){return D(),null}},74055:(e,t,s)=>{s.d(t,{V:()=>i,Z:()=>o});var a=s(49085);let i=function(e){return e.IN_APP_CALLOUT_CONFLICT="in-app callout conflict",e.DARK_MODE="not shown in dark mode",e}({});class n extends a.default{getInitialState(){return{isVisible:!1,suppressReason:void 0}}}const o=new n}}]);