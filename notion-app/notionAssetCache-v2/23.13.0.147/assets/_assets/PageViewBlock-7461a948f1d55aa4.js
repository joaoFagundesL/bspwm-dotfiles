"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[9938],{31192:(e,t,o)=>{o.d(t,{Pc:()=>Be,TE:()=>Ze,VN:()=>_e,Wc:()=>Qe,ZP:()=>Re,ZY:()=>He,d$:()=>Fe,jo:()=>De,n5:()=>Le,nZ:()=>Ge,pE:()=>Ie,rk:()=>Te,sL:()=>we,tb:()=>Ae,ww:()=>Ve});o(57658);var s=o(67294),i=o(1302),n=o(13991),r=o(49085),a=o(92996),l=o(70475),d=o(41432),c=o(99036),h=o(65955),p=o(64788),u=o(13495),g=o(43119),v=o(6287),m=o(90965),S=o(70203),C=o(9291),f=o(53965),y=o(1898),b=o(37810),P=o(35253),M=o(51365),x=o(96802),k=o(32603),E=o(72711),T=o(24677),w=o(23728),L=o(98104),_=o(13447),B=o(89626),Z=o(10906),F=o(92650),H=o(66890),I=o(95645),A=o(28651),D=o(75079),V=o(19124),O=o(92283),R=o(70177),j=o(45162),K=o(50627),N=o(98165),z=o(45010),W=o(77907),q=o(82356),G=o(62229),U=o(72974),X=o(62062),Q=o(94043),Y=o(18245),$=o(49427),J=o(80444),ee=o(61766),te=o(77556),oe=o(16772),se=o(80796),ie=o(77080),ne=o(21051),re=o(29755),ae=o(22294),le=o(29798),de=o(19671),ce=o(94896),he=o(82136),pe=o(91551),ue=o(13023),ge=o(88923),ve=o(69784),me=o(27724),Se=o(17963),Ce=o(76805),fe=o(78030),ye=o(15201),be=o(68709),Pe=o(23063),Me=o(91754),xe=o(89728),ke=o(65496),Ee=o(85893);const Te=b.Z.getCompositeFontFamily(n.SP).sans,we={serif:b.Z.getCompositeFontFamily(n.SP).serif,mono:b.Z.getCompositeFontFamily(n.SP).mono,comic:b.Z.getCompositeFontFamily(n.SP).comic},Le={serif:1.6,mono:1.6},_e={serif:0,mono:.055},Be={serif:15,mono:14},Ze={serif:17,mono:15},Fe={width:"100%",display:"flex",flexDirection:"column",position:"relative",alignItems:"center",flexGrow:1},He=14,Ie=17,Ae=16,De=16;function Ve(e){return!!e.isIOS}class Oe extends I.Z{constructor(){super(...arguments),this.contentEl=null,this.clickedAddIconState=!1,this.openResolvedDiscussionPopup=()=>{this.stores.resolvedDiscussionButtonPopupStore.setState({open:!0}),this.stores.pageViewBlockStore.setState({...this.stores.pageViewBlockStore.state,forceDiscussionOpen:!0})},this.getContentWrapEl=()=>this.contentEl,this.collectionContextStore=new te.Z(this.environment),this.documentViewHorizontalOffset=this.createComputedStore((()=>{const{store:e}=this.props;return this.marginCommentsVisible.state&&!this.props.store.isFullWidth()?(0,F.gC)(this.environment,(0,Z.en)(e),(0,Z.Ks)(e)):0})),this.storeTypes={headerFocusStore:r.default.createClass(!1),headerMouseStore:A.Z,detailsFocusStore:r.default.createClass(!1),detailsMouseStore:A.Z,pageViewBlockStore:he.Z,resolvedDiscussionButtonPopupStore:ee.Z,backlinksButtonPopupStore:ee.Z,templatePickerMenuListStore:le.Z,loadingPageCoverStore:r.default.createClass(!1)},this.getHorizontalTransformStyles=()=>{const e=this.documentViewHorizontalOffset.state;return{layout:{translateX:-1*e},layoutFull:{translateX:e}}},this.hasCoverStore=this.createComputedStore((()=>this.props.store.hasCover())),this.hasIconStore=this.createComputedStore((()=>this.props.store.hasIcon())),this.titleStore=this.createComputedStore((()=>this.props.store.getTitleStore())),this.handleAddRandomIconClick=()=>{const{store:e}=this.props,{environment:t}=this,{serverCommitResult:o}=_.createAndCommit({userAction:"PageViewBlock.handleAddRandomIconClick",environment:this.environment,perform:t=>{x.is({store:e,transaction:t})}});this.clickedAddIconState=!0,o.then((()=>w.P({store:e,environment:t})))},this.handleAddRandomCoverClick=async()=>{const{store:e}=this.props,{environment:t}=this,o=e.getCoverStore();if(!o)return;if(o.getValue())return;this.stores.loadingPageCoverStore.setState(!0);const s=(await W.deps.pageCovers.loader()).default,{serverCommitResult:i}=_.createAndCommit({userAction:"PageViewBlock.handleAddRandomCoverClick",environment:t,perform:t=>{E.tk({transaction:t,store:e,coverStore:o,pageCovers:s})}});i.then((()=>w.P({store:e,environment:t}))),this.stores.loadingPageCoverStore.setState(!1)},this.handleCustomizeLayout=()=>{const e=Ke(this.props.store);e&&(0,q.IR)({environment:this.environment,collectionStore:e})},this.handleHeaderMouseEnter=()=>{se.Z.state.isDragging||ve.default.state.isActive||this.stores.headerMouseStore.setState({...this.stores.headerMouseStore.state,mouseEntered:!0})},this.handleHeaderMouseLeave=()=>{se.Z.state.isDragging||ve.default.state.isActive||this.stores.headerMouseStore.setState({...this.stores.headerMouseStore.state,mouseEntered:!1})},this.handleDetailsMouseEnter=()=>{se.Z.state.isDragging||ve.default.state.isActive||this.stores.detailsMouseStore.setState({...this.stores.detailsMouseStore.state,mouseEntered:!0})},this.handleDetailsMouseLeave=()=>{se.Z.state.isDragging||ve.default.state.isActive||this.stores.detailsMouseStore.setState({...this.stores.detailsMouseStore.state,mouseEntered:!1})},this.handleHeaderMouseEnterThrottled=f.P2(this.handleHeaderMouseEnter,100),this.handleHeaderMouseLeaveDebounced=f.Ds(this.handleHeaderMouseLeave,100),this.handleDetailsMouseEnterThrottled=f.P2(this.handleDetailsMouseEnter,100),this.handleDetailsMouseLeaveDebounced=f.Ds(this.handleDetailsMouseLeave,100),this.handleTitleEditText=e=>{const t=this.titleStore.state;t&&(T.eP({environment:this.environment,store:this.props.store}),e.isAtStartOfLine?L.N_({store:t}):L.NX({store:t}))},this.handleTitleEsc=e=>{const{onTitleEsc:t}=this.props;L.ZH(this.environment),T.ZH(this.environment),t&&t(e)},this.handleTitleTab=e=>{const{store:t}=this.props;if(t.isCollectionView())return!0;if(e.preventDefault(),function(e){return Boolean(Ke(e))}(this.props.store)){const e=(0,K.y6)(this.props.store);if(e&&e.collection_page_properties){const o=e.collection_page_properties.find(((e,t)=>function(e,t){const o=Ke(t);if(!o)return!1;const s=function(e){return e.getSchema()}(t),i=s[e];return Boolean(i&&!c.uk.includes(i.type))}(e.property,this.props.store)));o&&i.default.afterNextFlush((()=>{var e;M.bA({environment:this.environment,blockPropertyValueOverlayStore:(e=this.props.context,(0,K.OZ)(e)?ue.Z:de.Z),collectionContextStore:this.collectionContextStore,store:t,property:o.property,format:fe.C.Page})}))}}},this.handleTitleUntab=e=>{const{store:t}=this.props;if(t.isCollectionView())return!0;this.handleTitleEsc(e)},this.handleTitleChange=()=>{this.stores.templatePickerMenuListStore.reset();const{environment:e}=this,{store:t}=this.props;w.P({store:t,environment:e})},this.showTemplatePickerStore=this.createComputedStore((()=>{const{store:e,context:t}=this.props,o=this.environment.currentUser.isLoggedIn(),s=this.pageContext&&this.pageContext.publicEditModeStore.state;let i;return t===he.S.Frame?i=J.default.state.currentLoadingContainerStore:t===he.S.PeekView&&ge.default.state.open&&(i=ge.default.state.loadingContainerStore),Boolean(e&&i&&e.isDefined()&&!e.isNonEditableState()&&e.canEdit()&&!e.hasContent()&&o&&(!(null!=s&&s.hasPublicPermission)||"edit"===(null==s?void 0:s.permission))&&!(Boolean(Se.Z.state.pageMap[e.id])||ce.Z.state.pages.has(e.id))&&i.state.ready&&!(0,K.a_)(this.props.store)&&(!(0,V.GD)(s)||"completionPopup"!==oe.default.state.type))})),this.pageIconProps=this.createComputedStore((()=>({store:this.props.store,isEditable:this.isEditable(),hasCover:this.hasCoverStore.state,isInSidePeek:ze(this.props.store),openMenuOnMountCallback:()=>{this.clickedAddIconState=!1}}))),this.pageTitleProps=this.createComputedStore((()=>{var e;const t=(null===(e=this.props.styleOverrides)||void 0===e?void 0:e.paddingX)??(0,K.RH)(this.props.context,this.environment);return{store:this.props.store,disabled:!this.canEdit(),isInSidePeek:ze(this.props.store),paddingLeft:t,paddingRight:t,extraStyles:this.props.titleStyle,titlePlaceholder:this.props.titlePlaceholder,collectionContextStore:this.collectionContextStore,shouldShowTemplatePicker:this.showTemplatePickerStore.state,onTitleChange:this.handleTitleChange,onTitleEditText:this.handleTitleEditText,onTitleEsc:this.handleTitleEsc,onTitleUntab:this.handleTitleUntab,onTitleTab:this.handleTitleTab}}))}get registries(){return super.registries.concat($.Z)}getContentInnerWidth(){const e=this.getContentWrapEl();if(e){const t=e.getBoundingClientRect().width,o=this.getContentPadding()??{paddingLeft:0,paddingRight:0};return t-o.paddingLeft-o.paddingRight}}getContentPadding(){const e=this.getContentWrapEl();if(e){if(Ve(this.environment.device))return{paddingLeft:0,paddingRight:0};const t=getComputedStyle(e),o=parseFloat(t.getPropertyValue("padding-left")),s=parseFloat(t.getPropertyValue("padding-left"));return{paddingLeft:f.i2(o)?0:o,paddingRight:f.i2(s)?0:s}}}UNSAFE_willMountOrUpdate(e){super.UNSAFE_willMountOrUpdate(e);const{store:t,context:o}=e;var s;"page"===this.environment.RouterStore.state.route.name&&(null===(s=this.environment.mobileNative)||void 0===s||s.markTransitionReady({type:"page",id:this.props.store.id}));const i=Ke(this.props.store);if(this.collectionContextStore.collectionStore()!==i&&i){const e=i.getParentBlockStore();this.collectionContextStore.setContext({type:"collectionPage",collectionViewBlockStore:e,collectionStore:i})}if(o===he.S.Frame){const e=We(o),s=this.pageContext&&this.pageContext.publicEditModeStore.state;null!=s&&s.hasPublicPermission&&"edit"===s.permission&&!t.isTemplate()?P.Bw({bannerStore:e,id:"EditingPageBanner",contentKey:"editing_page",styleKey:Me.v.White}):P.qL({bannerStore:e,id:"EditingPageBanner"});re.Z.state.pageMap[t.id]?P.Bw({bannerStore:e,id:"ImportingEvernotePage",contentKey:"importing_evernote",styleKey:Me.v.Blue,blockStore:t}):P.qL({bannerStore:e,id:"ImportingEvernotePage"})}if(qe(o)){const e=We(o),s=N.oZ(t),i=N.wf(t),r=N.D0(t),a=t.getCollectionStore(),l=(0,O.K)()&&t.isCollectionView()&&(null==a?void 0:a.isExternalSyncedCollection());if((0,m.nV)(s))P.Bw({bannerStore:e,id:"SpaceContentDuplicationPage",contentKey:"space_content_duplication",styleKey:Me.v.Red,blockStore:t});else if(i)P.Bw({bannerStore:e,id:"DeletedPage",contentKey:"deleted_or_moved_page",blockStore:t,styleKey:Me.v.Red});else if(r)P.Bw({bannerStore:e,id:"ArchivedTeamPage",contentKey:"page_in_archived_team",styleKey:Me.v.Red});else for(const t of["SpaceContentDuplicationPage","DeletedPage","ArchivedTeamPage"])P.qL({bannerStore:e,id:t});t.isTemplate()?P.Bw({bannerStore:e,id:"CollectionTemplatePage",contentKey:"template_in_page",styleKey:Me.v.Beige,blockStore:t,context:o,disabled:this.props.disabled}):t.isInsideFactoryOrDuplicateBlocksAction()?P.Bw({bannerStore:e,id:"CollectionTemplatePage",contentKey:"template_in_button",styleKey:Me.v.Beige,blockStore:t,context:o,disabled:this.props.disabled}):P.qL({bannerStore:e,id:"CollectionTemplatePage"}),t.useCrdt()&&!ie.default.checkGate("suppress_crdt_banner")?P.Bw({bannerStore:e,id:"CrdtPage",contentKey:"crdt_page",styleKey:Me.v.Beige}):P.qL({bannerStore:e,id:"CrdtPage"});const d=t.getFormat();if(ie.default.checkGate("improved_asana_importer_screens")&&null!=d&&d.is_asana_imported_project&&P.Bw({bannerStore:e,id:"AsanaImporterBanner",contentKey:"asana_importer_banner",blockStore:t,styleKey:Me.v.ImportNotification}),l){var n;(null==a||null===(n=a.getFormat())||void 0===n||null===(n=n.sync_state)||void 0===n?void 0:n.syncing)?P.Bw({bannerStore:e,id:"ExternalSyncProgressBanner",contentKey:"external_sync_progress_banner",styleKey:Me.v.LightBlue,blockStore:t}):P.qL({bannerStore:e,id:"ExternalSyncProgressBanner"})}}}didMount(){const{device:e}=this.environment,{store:t,context:o}=this.props,s=this.titleStore.state;if((0,R.L)(),e.isPhone){const{PageScroller:e}=z.Z;if(e){if(e.scrollerEl()&&this.canEdit()&&!this.hasCoverStore.state){const t=Qe(this.props.context,this.environment);e.scrollTo(t)}}}var i;s&&this.shouldSelectTitleOnMount()&&(T.eP({environment:this.environment,store:t}),L.NX({store:s}),e.isAndroid&&(null===(i=this.environment.mobileNative)||void 0===i||i.forceShowSoftKeyboard()));if(k.updateMetricDataWithIsPushTag(this.environment),o!==he.S.Frame||this.props.store.isCollectionView()||(k.markInitialPageRenderComplete({environment:this.environment,isEditable:this.isEditable(),isHomePage:!1}),function(e,t){const{device:o,RouterStore:s}=t,{route:i}=s.state,n=e;var r;o.isMobileNative&&"page"===i.name&&i.showMoveTo&&n.isEmptyTitle()&&n.isEmptyPage()&&(null===(r=t.mobileNative)||void 0===r||r.markTransitionReady({type:"new_page",id:n.id}))}(this.props.store,this.environment)),this.collectionContextStore){const e=(0,D.vS)(this.collectionContextStore);Y.default.measure("collections.open_item_page_lag",{environment:this.environment,data:{...e,peek_mode:ge.default.getPeekMode()}})}!function(e,t){if("space_for_ai"!==(0,B.sy)())return;const o=e.getContentStores()[0],s=B.__.state;if(!o||o.id!==s)return;T.eP({environment:t,store:o}),L.NX({store:o.getBlockTitleStore()})}(this.props.store,this.environment)}willUnmount(){super.willUnmount(),qe(this.props.context)&&(P.qL({bannerStore:We(this.props.context),id:"DeletedPage"}),P.qL({bannerStore:We(this.props.context),id:"CollectionTemplatePage"}),P.qL({bannerStore:We(this.props.context),id:"Site"}),P.qL({bannerStore:We(this.props.context),id:"CrdtPage"}),ie.default.checkGate("improved_asana_importer_screens")&&P.qL({bannerStore:We(this.props.context),id:"AsanaImporterBanner"}),P.qL({bannerStore:We(this.props.context),id:"ExternalSyncProgressBanner"}))}renderPageLayoutSchema(e){const t=this.getHorizontalTransformStyles();var o,s;const i=function(e,t,o,s){if(s.device.isPhone)return"phone";if(s.device.isTablet)return(0,K.mO)(t,o,s)?"wide":"tablet";if((0,K.OZ)(o))return ze(t)?"side-peek":"center-peek";if(function(e){return e===he.S.InAppTemplatePreview}(o)||function(e){return e===he.S.InPageSnapShot}(o))return"template-preview";return(0,K.mO)(t,o,s)?e?"wide-right-margin-expanded":"wide":"default"}((o=this.props.store,s=this.environment,{visible:(0,F.fg)(s,o)}).visible,this.props.store,this.props.context,this.environment);return(0,Ee.jsx)(Pe.Z,{isVisible:!0,animationStyle:t.layout,render:()=>{var t;return(0,Ee.jsx)(Q.Xg,{type:i,withBottomPadding:!0,children:(0,Ee.jsx)(U.Z,{context:this.props.context,onMouseEnter:this.handleHeaderMouseEnterThrottled,onMouseLeave:this.handleHeaderMouseLeaveDebounced,onMouseMove:this.handleHeaderMouseEnterThrottled,onDetailMouseEnter:this.handleDetailsMouseEnterThrottled,onDetailMouseLeave:this.handleDetailsMouseLeaveDebounced,pageCoverHeight:(null===(t=this.props.styleOverrides)||void 0===t?void 0:t.pageCoverHeight)??Oe.defaultPageCoverHeight(this.environment),layoutSchema:e,styleOverrides:this.props.styleOverrides,templatePickerMenuListStore:this.stores.templatePickerMenuListStore,topControls:this.getTopControls(),headerControlsStyle:this.getHeaderControlsStyle(),getControlHoverStyle:e=>this.getControlHoverStyle({isBottomControl:e}),pageViewBlockStores:{...this.stores},...this.pageIconProps.state,openMenuOnMount:this.clickedAddIconState,...this.pageTitleProps.state,disabled:this.props.disabled,pageViewBlockAccessor:this.getContentWrapEl,ref:e=>{e&&(this.contentEl=e)}})})}})}renderPersisted(){var e,t,o;const{store:s,context:i}=this.props;if(s.getType()===d.Ti.copyIndicator&&(s.getParentTable()!==v.vF||s.getParentTable()===v.vF&&0===Object.keys(s.getProperties()).length))return(0,Ee.jsx)(G.X,{});if(s.isCollectionView())return(0,Ee.jsx)(H.L1,{value:this.collectionContextStore,children:(0,Ee.jsx)(Ce.Z,{canEdit:this.canEdit(),context:i,controlHoverStyle:this.getControlHoverStyle({}),handleHeaderMouseEnterThrottled:this.handleHeaderMouseEnterThrottled,handleHeaderMouseLeaveDebounced:this.handleHeaderMouseLeaveDebounced,headerControlsStyle:this.getHeaderControlsStyle(),headerFocusStore:this.stores.headerFocusStore,pageCover:this.renderPageCover(),topControls:this.getTopControls(),...this.pageIconProps.state,openMenuOnMount:this.clickedAddIconState,...this.pageTitleProps.state,store:s})});const n=Boolean(ie.default.checkGate("enable_transcript_tab")&&(null===(e=this.collectionContextStore.collectionStore())||void 0===e?void 0:e.getDatabaseType())===a.Fi&&(null===(t=this.props.store.getFormatStore().getValue())||void 0===t||null===(t=t.content_tabs)||void 0===t?void 0:t[l.Z])),r=this.props.store.getAssociatedCollectionStore(),c=null==r||null===(o=r.getLayoutStore())||void 0===o||null===(o=o.getModules())||void 0===o?void 0:o.page_layout_schema;let h;return h=n?this.renderPageLayoutSchema(g.Tf.page_layout_schema):c&&ie.default.checkGate("page_layouts")?this.renderPageLayoutSchema(c):this.renderPageLayoutSchema(g.bl.page_layout_schema),this.collectionContextStore&&this.collectionContextStore.contextType&&(h=(0,Ee.jsx)(H.L1,{value:this.collectionContextStore,children:h})),(0,j.Aw)(this.environment)?(0,Ee.jsx)(ye.O,{displayName:"PageContent",style:{...Fe,...this.props.style},disabled:!this.canEdit()||this.props.store.isNonEditableState(),shouldSelectOnEnter:je,children:h}):h}getTopControls(){const e=[],t=this.renderAddIcon();t&&e.push((0,Ee.jsx)(s.Fragment,{children:t},"add-icon"));const o=this.renderAddCover();o&&e.push((0,Ee.jsx)(s.Fragment,{children:o},"add-cover"));const i=this.renderCustomizeLayout();return i&&e.push((0,Ee.jsx)(s.Fragment,{children:i},"customize-layout")),e}renderPageCover(){const{WindowSizeStore:e}=this.environment,{store:t,styleOverrides:o,context:s}=this.props,i=t.isCollectionView()?"20vh":(null==o?void 0:o.pageCoverHeight)??Oe.defaultPageCoverHeight(this.environment),n=(null==o?void 0:o.paddingX)??(0,K.RH)(s,this.environment);return(0,Ee.jsx)(be.p,{allowSelectionWithin:!1,style:(0,X.p)(this.props.store,this.environment),onMouseEnter:this.handleHeaderMouseEnterThrottled,onMouseMove:this.handleHeaderMouseEnterThrottled,onMouseLeave:this.handleHeaderMouseLeaveDebounced,children:(0,Ee.jsx)(ke.Z,{height:i,store:t,disabled:!this.isEditable(),paddingLeft:e.getSafePaddingLeftCSS(n),paddingRight:e.getSafePaddingRightCSS(n),proxyWidth:e.state.width})})}renderAddIcon(){const{device:e}=this.environment;if(this.isEditable()&&!this.hasIconStore.state)return(0,Ee.jsx)(xe.Z,{style:this.getControlHoverStyle({}),isLightGray:!0,onClick:this.handleAddRandomIconClick,icon:h.o,children:e.isSmallPhone?(0,Ee.jsx)(C.FormattedMessage,{id:"pageViewBlock.add.pageIconMobile",defaultMessage:"Icon"}):(0,Ee.jsx)(C.FormattedMessage,{id:"pageViewBlock.add.pageIcon",defaultMessage:"Add icon"})},"add-icon")}renderAddCover(){const{device:e}=this.environment;if(this.isEditable()&&!this.hasCoverStore.state)return!0===this.stores.loadingPageCoverStore.state?(0,Ee.jsx)(xe.Z,{style:this.getControlHoverStyle({}),isLightGray:!0,disabled:!0,icon:p.P,children:e.isSmallPhone?(0,Ee.jsx)(C.FormattedMessage,{id:"pageViewBlock.add.pageCoverMobileLoading",defaultMessage:"Loading"}):(0,Ee.jsx)(C.FormattedMessage,{id:"pageViewBlock.add.pageCoverLoading",defaultMessage:"Loading cover"})},"add-cover-loading"):(0,Ee.jsx)(xe.Z,{style:this.getControlHoverStyle({}),isLightGray:!0,onClick:this.handleAddRandomCoverClick,icon:p.P,children:e.isSmallPhone?(0,Ee.jsx)(C.FormattedMessage,{id:"pageViewBlock.add.pageCoverMobile",defaultMessage:"Cover"}):(0,Ee.jsx)(C.FormattedMessage,{id:"pageViewBlock.add.pageCover",defaultMessage:"Add cover"})},"add-cover")}renderCustomizeLayout(){const{device:e}=this.environment;if(this.isEditable()&&ie.default.checkGate("page_layouts")&&!e.isMobile&&Ke(this.props.store))return(0,Ee.jsx)(xe.Z,{style:this.getControlHoverStyle({}),isLightGray:!0,onClick:this.handleCustomizeLayout,icon:u.M,children:(0,Ee.jsx)(C.FormattedMessage,{id:"pageViewBlock.customizeLayout",defaultMessage:"Customize layout"})},"customize-layout")}isEditable(){return this.canEditCollection()&&!this.props.store.isNonEditableState()&&!(0,K.a_)(this.props.store)}shouldSelectTitleOnMount(){const{device:e}=this.environment,{store:t}=this.props,o=this.titleStore.state,{forceSelectTitleOnMount:s}=this.props;return!!o&&(!!s||!t.isCollectionView()&&(!S.QaF(o.getValue())||(0,K.CX)(this.props.store)&&!e.isMobile))}static defaultPageCoverHeight(e){return e.device.isMobile?200:"30vh"}static paddingBottom(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const{device:o}=e;return o.isTablet?380:o.isIOS?Math.max(350,t):o.isMobile?400:"30vh"}getHeaderControlsStyle(){const{store:e}=this.props,{device:t}=this.environment,{isMobile:o}=t,s=Ue(this.props.context,this.environment);let i,r,a;return o?this.hasCoverStore.state?(this.hasIconStore.state,a="block",i=s,r=4):(a="flex",i=s,r=Xe(this.environment)):e.isCollectionView()||ze(this.props.store)?(a="flex",this.hasCoverStore.state?(i=16,r=4):(i=4,r=4)):(a="flex",this.hasIconStore.state?(i=8,r=4):this.hasCoverStore.state?(i=16,r=4):(i=s,r=Xe(this.environment))),{display:a,justifyContent:"flex-start",flexWrap:"wrap",marginTop:i,marginBottom:r,marginLeft:-1,color:this.theme.lightTextColor,fontFamily:b.Z.getCompositeFontFamily(n.SP).sans,pointerEvents:"auto"}}getControlHoverIsVisible(e){const{device:t}=this.environment,o=this.stores.headerMouseStore.state.mouseEntered,s=this.stores.detailsMouseStore.state.mouseEntered,i=this.stores.headerFocusStore.state,n=this.stores.detailsFocusStore.state;return!!t.isMobile||(e?s&&!ae.Z.state.isKeyboardMode||n:o&&!ae.Z.state.isKeyboardMode||i)}getControlHoverStyle(e){let{isBottomControl:t}=e;const o=this.getControlHoverIsVisible(t);return{opacity:o?1:0,pointerEvents:o?"auto":"none",transition:"opacity 100ms ease"}}}const Re=Oe;function je(){return 0===me.default.state.stores.length}function Ke(e){return e.getAssociatedCollectionStore()}function Ne(e){return e===he.S.Frame}function ze(e){return Z.en(e)&&(ge.default.isSidePeekOpen()||ge.default.isSidePeekClosing.state)}function We(e){return(0,K.OZ)(e)?pe.Z:Ne(e)?ne.Z:(0,y.t1)(e)}function qe(e){return Ne(e)||(0,K.OZ)(e)}function Ge(e,t){if(function(e){return e===J.default.state.mainEditorCurrentBlockStore}(e)){const{RouterStore:e}=t;return e.state.route.collectionViewId}}function Ue(e,t){return t.device.isMobile?16:(0,K.OZ)(e)?32:80}function Xe(e){return e.device.isMobile?32:4}function Qe(e,t){return 28+Ue(e,t)}}}]);