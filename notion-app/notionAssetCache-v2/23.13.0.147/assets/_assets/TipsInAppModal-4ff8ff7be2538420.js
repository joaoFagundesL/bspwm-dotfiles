"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[8099],{15102:(e,t,n)=>{n.r(t),n.d(t,{TipsInAppModal:()=>Z});var i=n(67294),o=n(480),r=n(86628),s=n(24405),a=n(45238),l=n(85893);const d=(0,a.IU)("exclamation",{viewBox:"0 0 16 16",svg:(0,l.jsx)("path",{d:"M7.99634 15.5659C6.96118 15.5659 5.98706 15.3682 5.07397 14.9727C4.16089 14.582 3.35522 14.0376 2.65698 13.3394C1.96362 12.6411 1.41919 11.8354 1.02368 10.9224C0.628174 10.0093 0.43042 9.03516 0.43042 8C0.43042 6.96484 0.628174 5.99072 1.02368 5.07764C1.41919 4.16455 1.96362 3.36133 2.65698 2.66797C3.35522 1.96973 4.15845 1.42285 5.06665 1.02734C5.97974 0.631836 6.95386 0.434082 7.98901 0.434082C9.02905 0.434082 10.0056 0.631836 10.9187 1.02734C11.8318 1.42285 12.6375 1.96973 13.3357 2.66797C14.0339 3.36133 14.5808 4.16455 14.9763 5.07764C15.3718 5.99072 15.5696 6.96484 15.5696 8C15.5696 9.03516 15.3718 10.0093 14.9763 10.9224C14.5808 11.8354 14.0339 12.6411 13.3357 13.3394C12.6375 14.0376 11.8318 14.582 10.9187 14.9727C10.0056 15.3682 9.03149 15.5659 7.99634 15.5659ZM7.99634 14.0718C8.84106 14.0718 9.62964 13.9155 10.3621 13.603C11.0945 13.2905 11.739 12.856 12.2957 12.2993C12.8523 11.7427 13.2869 11.0981 13.5994 10.3657C13.9119 9.6333 14.0681 8.84473 14.0681 8C14.0681 7.16016 13.9119 6.37402 13.5994 5.6416C13.2869 4.9043 12.8523 4.25732 12.2957 3.70068C11.739 3.14404 11.092 2.70947 10.3547 2.39697C9.62231 2.08447 8.83374 1.92822 7.98901 1.92822C7.14917 1.92822 6.3606 2.08447 5.62329 2.39697C4.89087 2.70947 4.24878 3.14404 3.69702 3.70068C3.14526 4.25732 2.71313 4.9043 2.40063 5.6416C2.08813 6.37402 1.93188 7.16016 1.93188 8C1.93188 8.84473 2.08813 9.6333 2.40063 10.3657C2.71313 11.0981 3.14526 11.7427 3.69702 12.2993C4.25366 12.856 4.89819 13.2905 5.63062 13.603C6.36792 13.9155 7.15649 14.0718 7.99634 14.0718ZM7.99634 9.21582C7.57153 9.21582 7.35181 9.00098 7.33716 8.57129L7.23462 5.01172C7.22485 4.79688 7.29077 4.62109 7.43237 4.48438C7.57397 4.34766 7.75708 4.2793 7.98169 4.2793C8.2063 4.2793 8.39185 4.3501 8.53833 4.4917C8.68481 4.62842 8.75317 4.80176 8.74341 5.01172L8.62622 8.57129C8.61646 9.00098 8.40649 9.21582 7.99634 9.21582ZM7.99634 11.6475C7.75708 11.6475 7.552 11.5718 7.3811 11.4204C7.21509 11.2642 7.13208 11.0713 7.13208 10.8418C7.13208 10.6123 7.21509 10.4219 7.3811 10.2705C7.552 10.1143 7.75708 10.0361 7.99634 10.0361C8.23071 10.0361 8.43091 10.1118 8.59692 10.2632C8.76782 10.4146 8.85327 10.6074 8.85327 10.8418C8.85327 11.0762 8.76782 11.269 8.59692 11.4204C8.42603 11.5718 8.22583 11.6475 7.99634 11.6475Z"})});var c=n(9291),u=n(31701),p=n(37810),h=n(23063),m=n(25777),C=n(50506),f=n(63296),g=n(85740),x=n(32662),y=n(95477),S=n(18514),j=n(30806),w=n(52389);const M=5e3;function Z(e){let{tipCardDisplayInfo:t,onClosed:n}=e;const a=(0,o.O7)(),d=(0,r.VK)((()=>a.WindowSizeStore.state.width<900),[a.WindowSizeStore]),[c,p]=(0,i.useState)("loading"),h=(0,s.yK)((e=>({modal:{margin:24,height:"80vh",minWidth:d?void 0:700,width:d?"80vw":"56vw",maxWidth:1e3},container:{height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",background:"dark"===e.mode?u.ZP.black:u.ZP.white},loading:{width:"100%",height:"loaded"===c?"100%":"auto"},loadingInner:{height:"100%"},iframe:{border:0,height:"100%",width:"100%"}})),[c,d]),f=(0,i.useRef)(null),g=(0,i.useRef)(void 0),Z=(0,i.useRef)(!0);(0,i.useEffect)((()=>{if(Z.current)return Z.current=!1,g.current=setTimeout((()=>{"loaded"!==c&&(p("timeout"),j.Ai(a,{tip_key:t.key,error_type:"slow_to_load"}))}),M),()=>clearTimeout(g.current)}),[c,a,t]);const k=(0,i.useCallback)((()=>{var e;if(clearTimeout(g.current),null!==(e=f.current)&&void 0!==e&&e.contentDocument){if(null!==f.current.contentDocument.querySelector("meta[name='notion:error']"))return p("error"),void j.Ai(a,{tip_key:t.key,error_type:"unable_to_load"})}p("loaded")}),[a,t]),{iframeSrc:I,externalHref:_}=(0,r.VK)((()=>{const e=new URLSearchParams;e.set("utm_source","tips"),e.set("utm_medium","inapp"),e.set("utm_campaign","2024q1_tipsinhome_m2");const n=`${(0,S.UY)("guides.guides")}${t.href}?${e.toString()}`,i=new URL((0,S.UY)("embed.guides")).pathname;"dark"===(0,u.gh)({theme:a.ThemeModeStore.state}).mode&&e.set("theme","dark");const o=`${t.href}?${e.toString()}`;return{iframeSrc:`${y.default.domainBaseUrl}${i}${o}`,externalHref:n}}),[t.href,a.ThemeModeStore]),[A,D]=(0,i.useState)(!1);return(0,l.jsx)(C.Z,{open:!A,preventHideChildrenWhileOpening:!0,innerStyle:h.modal,onDismiss:()=>{D(!0)},onClosed:()=>{w.Z.setState({open:!1}),n()},render:()=>(0,l.jsxs)("div",{style:h.container,children:[(0,l.jsx)(m.Z,{loaded:"loaded"===c||"error"===c,style:h.loading,innerStyle:h.loadingInner,spinnerSize:24,showSpinnerTimeout:500,children:"error"===c?(0,l.jsx)(v,{}):(0,l.jsx)("iframe",{ref:f,style:h.iframe,src:I,onLoad:k,sandbox:"allow-popups allow-popups-to-escape-sandbox allow-scripts allow-same-origin"})}),"timeout"===c?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(x.Z,{size:16}),(0,l.jsx)(b,{href:_})]}):null]})})}function b(e){let{href:t}=e;const n=(0,s.yK)((e=>({container:{display:"flex",flexDirection:"column",alignItems:"center",fontSize:14,color:e.text.secondary,fontWeight:p.Z.fontWeight.regular}})),[]);return(0,l.jsx)(h.Z,{isVisible:!0,enterAnimationStyle:{opacity:0},animationStyle:{opacity:1},render:()=>(0,l.jsxs)("div",{style:n.container,children:[(0,l.jsx)(c.FormattedMessage,{defaultMessage:"It's taking a while to load this lesson",id:"tipsInAppModal.timeoutDisplay.body"}),(0,l.jsx)(x.Z,{size:8}),(0,l.jsx)(g.Z,{isBlue:!0,external:!0,href:t,children:(0,l.jsx)(c.FormattedMessage,{defaultMessage:"Open in help center",id:"tipsInAppModal.timeoutDisplay.cta"})})]})})}function v(){const e=(0,s.yK)((e=>({container:{display:"flex",flexDirection:"column",alignItems:"center",gap:8},icon:{width:36,height:36,color:e.icon.tertiary},body:{fontSize:14,display:"flex",flexDirection:"column",textAlign:"center",color:e.text.secondary},title:{fontWeight:p.Z.fontWeight.semibold},description:{paddingTop:1,fontWeight:p.Z.fontWeight.regular}})),[]);return(0,l.jsx)(h.Z,{isVisible:!0,enterAnimationStyle:{opacity:0},animationStyle:{opacity:1},render:()=>(0,l.jsxs)("div",{style:e.container,children:[d(e.icon),(0,l.jsxs)("div",{style:e.body,children:[(0,l.jsx)("span",{style:e.title,children:(0,l.jsx)(c.FormattedMessage,{defaultMessage:"Unable to load this lesson",id:"tipsInAppModal.error.title"})}),(0,l.jsx)("span",{style:e.description,children:(0,l.jsx)(c.FormattedMessage,{defaultMessage:"Please try again later",id:"tipsInAppModal.error.body"})})]}),(0,l.jsx)(f.Z,{onClick:()=>{w.Z.setState({open:!1})},children:(0,l.jsx)(c.FormattedMessage,{defaultMessage:"Dismiss",id:"tipsInAppModal.error.cta"})})]})})}},52389:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(49085);class o extends i.default{getInitialState(){return{open:!1}}}const r=new o}}]);