"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[841],{10417:(e,t,n)=>{n.r(t),n.d(t,{DiscussionFormat:()=>_,DiscussionLocationToAvatarSize:()=>W,anyDiscussionCommentsLoading:()=>$,commentComparator:()=>U,discussionLocationToDiscussionFormat:()=>E,formatFileSize:()=>Y,getAndSortCommentStoresByTime:()=>A,getDiscussions:()=>H,getDiscussionsForSidebar:()=>L,getFirstComment:()=>B,getIcon:()=>S,getLatestRelevantComment:()=>I,getSetOfUsersInDiscussions:()=>G,hasCommentChanged:()=>O,inputIsEmpty:()=>R,isCommentAllEmojis:()=>N,lineClampForCommentCount:()=>D,sortDiscussionStoresByLatestComment:()=>Z});var r=n(66897),i=n(12436),o=(n(67294),n(45238)),a=n(85893);const l=(0,o.IU)("codeFile",{viewBox:"0 0 23 24",svg:(0,a.jsx)("path",{d:"M4.195 11.86c0-.266.078-.488.235-.665.156-.182.38-.3.672-.351.494-.089.849-.271 1.062-.547.214-.281.32-.73.32-1.344V6.961c0-1.115.263-1.938.79-2.469.525-.536 1.333-.804 2.421-.804.203 0 .375.023.516.07.177.057.31.146.398.265a.646.646 0 01.141.422c0 .339-.148.558-.445.657a1.14 1.14 0 01-.157.039l-.171.015c-.625.047-1.066.222-1.32.524-.256.302-.384.8-.384 1.492v2.414c0 .672-.182 1.198-.546 1.578-.36.38-.86.604-1.5.672-.032 0-.047.013-.047.039.005.02.02.034.047.04.64.062 1.14.283 1.5.663.364.38.546.906.546 1.578v2.414c0 .693.128 1.19.383 1.492.255.303.696.48 1.32.532.053 0 .1.002.141.008l.133.03c.333.09.5.308.5.657a.68.68 0 01-.14.43.816.816 0 01-.407.273 1.48 1.48 0 01-.437.063c-1.12 0-1.948-.266-2.485-.797-.531-.526-.797-1.352-.797-2.477V14.79c0-.614-.106-1.062-.32-1.344-.213-.28-.568-.463-1.062-.547-.292-.062-.516-.182-.672-.359-.157-.177-.235-.404-.235-.68zm15.602 0c0 .275-.078.502-.235.68-.156.176-.382.296-.68.358-.5.084-.856.266-1.07.547-.208.282-.312.73-.312 1.344v1.992c0 1.125-.266 1.95-.797 2.477-.531.531-1.36.797-2.484.797-.151 0-.297-.021-.438-.063a.757.757 0 01-.414-.265.715.715 0 01-.133-.438c0-.182.042-.328.125-.437a.674.674 0 01.383-.22l.117-.03c.047-.006.097-.008.149-.008.625-.052 1.065-.23 1.32-.532.255-.302.383-.799.383-1.492v-2.414c0-.672.182-1.208.547-1.61.364-.405.864-.616 1.5-.632.026-.005.039-.018.039-.039 0-.026-.013-.04-.04-.04-.635-.015-1.135-.226-1.5-.632-.364-.406-.546-.945-.546-1.617V7.172c0-.693-.128-1.193-.383-1.5-.255-.307-.695-.48-1.32-.516l-.18-.015a1.233 1.233 0 01-.148-.04c-.297-.109-.446-.328-.446-.656 0-.166.045-.307.133-.422a.777.777 0 01.414-.265c.14-.047.31-.07.508-.07 1.089 0 1.896.268 2.422.804.526.531.789 1.354.789 2.469v1.992c0 .615.107 1.06.32 1.336.214.276.568.461 1.063.555.297.052.523.169.68.351a.967.967 0 01.234.664z"})}),s=(0,o.IU)("compressedFile",{viewBox:"0 0 23 24",svg:(0,a.jsx)("path",{d:"M5.297 17.758V5.968c0-.838.213-1.473.64-1.905.428-.438 1.06-.657 1.899-.657h8.32c.839 0 1.472.219 1.899.656.427.433.64 1.068.64 1.907v11.789c0 .844-.213 1.482-.64 1.914-.427.432-1.06.648-1.899.648h-8.32c-.839 0-1.471-.216-1.899-.648-.427-.432-.64-1.07-.64-1.914zm1.539-.094c0 .36.094.635.281.828.188.193.472.29.852.29h8.062c.38 0 .664-.097.852-.29.187-.193.281-.469.281-.828V6.07c0-.364-.094-.643-.281-.836-.188-.198-.471-.296-.852-.296H7.97c-.38 0-.664.098-.852.296-.187.193-.281.472-.281.836v11.594zm4.617 1.906V8.648h1.086V19.57h-1.086zM12 8.953c-.62 0-1.107-.17-1.46-.508-.35-.338-.524-.804-.524-1.398 0-.115.005-.23.015-.344.016-.114.037-.226.063-.336l.734-3.21a.637.637 0 01.242-.384.709.709 0 01.438-.14h.984a.68.68 0 01.43.14.672.672 0 01.25.383l.734 3.211c.021.11.037.222.047.336.016.115.024.23.024.344 0 .594-.175 1.06-.524 1.398-.349.339-.833.508-1.453.508zm0-1.125c.24 0 .438-.08.594-.242a.826.826 0 00.242-.61.82.82 0 00-.242-.593.795.795 0 00-.594-.25c-.24 0-.44.083-.602.25a.825.825 0 00-.242.594c0 .24.078.442.235.609a.826.826 0 00.609.242zm0 2.89V9.696h1.828c.146 0 .268.05.367.149a.464.464 0 01.149.351c0 .146-.05.271-.149.375a.498.498 0 01-.367.149H12zm-1.836 1.024a.516.516 0 01-.367-.148.525.525 0 01-.149-.375c0-.14.05-.258.149-.352a.516.516 0 01.367-.148H12v1.023h-1.836zM12 12.79v-1.023h1.828c.146 0 .268.05.367.148a.49.49 0 01.149.36.5.5 0 01-.149.367.498.498 0 01-.367.148H12zm-1.836 1.024a.516.516 0 01-.367-.149.516.516 0 01-.149-.367c0-.14.05-.258.149-.352a.516.516 0 01.367-.148H12v1.015h-1.836zM12 14.867v-1.023h1.828c.146 0 .268.05.367.148a.473.473 0 01.149.36.5.5 0 01-.149.367.499.499 0 01-.367.148H12zm-1.836 1.024a.508.508 0 01-.516-.523.48.48 0 01.149-.352.516.516 0 01.367-.149H12v1.024h-1.836zM12 16.945v-1.023h1.828c.146 0 .268.05.367.148a.473.473 0 01.149.36c0 .14-.05.263-.149.367a.499.499 0 01-.367.148H12zm-1.836 1.04a.516.516 0 01-.367-.15.499.499 0 01-.149-.366c0-.146.05-.266.149-.36a.516.516 0 01.367-.148H12v1.023h-1.836z"})});var c=n(40304);const u=(0,o.IU)("executable",{viewBox:"0 0 23 23.5",svg:(0,a.jsx)("path",{d:"M5.164 16.883c-.37-.209-.651-.448-.844-.719-.187-.276-.28-.69-.28-1.242V8.609c0-.416.08-.763.241-1.039.162-.28.417-.52.766-.718l5.492-3.079c.484-.27.971-.406 1.461-.406.49 0 .974.136 1.453.406l5.492 3.079c.35.197.604.437.766.718.161.276.242.623.242 1.04v6.312c0 .552-.094.966-.281 1.242-.188.27-.469.51-.844.719l-6.047 3.39c-.52.287-1.044.287-1.57 0l-6.047-3.39zm.844-1.203l5.265 2.976v-6.265L5.43 9.094v5.687c0 .203.041.375.125.516.088.14.24.268.453.383zm11.976 0c.214-.115.362-.242.446-.383a.95.95 0 00.133-.516V9.094l-5.844 3.297v6.265l5.265-2.976zM12 11.11l5.773-3.235-4.937-2.781c-.552-.318-1.112-.318-1.68 0l-4.93 2.781L12 11.109z"})}),d=(0,o.IU)("file3D",{viewBox:"0 0 23 24",svg:(0,a.jsx)("path",{d:"M5.648 16.352l5.61-2.82v-6.65h1.492v6.65l5.61 2.82-.75 1.273-5.61-2.82-5.61 2.82-.742-1.273zm-1.945 1.195l1.32-2.985c.105-.25.243-.427.415-.53a.643.643 0 01.539-.071c.187.052.349.198.484.437l1.937 3.352c.146.245.196.46.149.648a.61.61 0 01-.336.43c-.177.1-.404.133-.68.102l-3.242-.36c-.297-.036-.5-.146-.61-.328-.103-.182-.096-.414.024-.695zm16.594 0c.12.281.125.513.015.695-.104.182-.304.292-.601.328l-3.242.36c-.271.03-.498-.003-.68-.102a.634.634 0 01-.344-.43c-.041-.187.01-.403.157-.648l1.937-3.352c.135-.24.294-.385.477-.437a.638.638 0 01.539.07c.177.104.32.281.43.531l1.312 2.985zm-8.89-12.985c.181-.25.377-.372.585-.367.208 0 .404.123.586.367l1.93 2.618c.167.229.252.445.258.648a.596.596 0 01-.204.5c-.14.13-.354.195-.64.195h-3.86c-.276 0-.486-.065-.632-.195a.637.637 0 01-.203-.508c.005-.208.088-.422.25-.64l1.93-2.617z"})});var p=n(52455);const m=(0,o.IU)("font",{viewBox:"0 0 24 24",svg:(0,a.jsx)("path",{d:"M17.008 17.766c-.724 0-1.354-.185-1.89-.555-.537-.37-.957-.888-1.259-1.555-.296-.672-.445-1.458-.445-2.36 0-.895.149-1.676.445-2.343.303-.672.722-1.193 1.258-1.562.537-.375 1.167-.563 1.89-.563.433 0 .834.07 1.204.211.375.14.7.344.977.61.28.26.5.572.656.937h.062V9.64c0-.256.073-.459.219-.61a.738.738 0 01.555-.226c.234 0 .424.075.57.226.146.151.219.354.219.61v7.312c0 .255-.073.453-.219.594a.771.771 0 01-.57.219.773.773 0 01-.547-.203c-.146-.136-.221-.331-.227-.586v-.954h-.062a2.688 2.688 0 01-1.094 1.29c-.495.302-1.076.453-1.742.453zm.453-1.368c.484 0 .906-.125 1.266-.375.364-.255.643-.611.835-1.07.198-.463.297-1.01.297-1.64 0-.63-.099-1.178-.297-1.641-.197-.469-.476-.83-.835-1.086a2.1 2.1 0 00-1.266-.39 2.13 2.13 0 00-1.266.382c-.354.25-.627.607-.82 1.07-.193.464-.29 1.014-.29 1.649s.097 1.185.29 1.648c.193.464.466.823.82 1.078.36.25.782.375 1.266.375zm-14.07 1.32c-.271 0-.485-.072-.641-.218-.151-.146-.227-.349-.227-.61 0-.156.034-.335.102-.538l3.477-9.375C6.33 6.326 6.784 6 7.46 6c.36 0 .651.08.875.242.23.162.404.406.523.735l3.454 9.335c.072.204.109.391.109.563 0 .26-.084.466-.25.617-.162.151-.38.227-.656.227-.26 0-.466-.06-.618-.18-.145-.115-.26-.312-.343-.594l-.867-2.422H5.226l-.868 2.422c-.083.282-.2.48-.351.594-.146.12-.352.18-.617.18zM5.68 13.07h3.57L7.484 7.992h-.039L5.68 13.07z"})});var g=n(87292);const h=(0,o.IU)("presentation",{viewBox:"0 0 24 24",svg:(0,a.jsx)("path",{d:"M6.305 20.703c-.844 0-1.482-.213-1.914-.64-.433-.428-.649-1.06-.649-1.899v-8.031c0-.839.216-1.472.649-1.899.432-.427 1.07-.64 1.914-.64h11.383c.843 0 1.481.216 1.914.648.437.427.656 1.057.656 1.89v8.032c0 .833-.219 1.464-.656 1.89-.433.433-1.07.65-1.915.65H6.306zm.093-1.531h11.196c.36 0 .635-.096.828-.29.198-.187.297-.47.297-.85v-7.766c0-.38-.1-.664-.297-.852-.193-.193-.469-.289-.828-.289H6.398c-.364 0-.643.096-.835.29-.188.187-.282.47-.282.85v7.766c0 .38.094.664.282.852.192.193.47.289.835.289zM5.461 6.32c.057-.37.185-.656.383-.86.203-.202.513-.304.93-.304h10.453c.416 0 .724.102.921.305.204.203.334.49.391.86H5.461zm1.594-2.258c.02-.348.133-.611.336-.789.208-.182.5-.273.875-.273h7.468c.375 0 .664.091.868.273.203.178.32.44.351.79H7.055z"})});var f=n(61646),v=n(62261),y=n(19035),x=n(70691),w=n(53965),C=n(1898),z=n(18265),b=n(65598),V=n(77080),M=n(67926);const j=n(60809),P={doc:c.w,docx:c.w,pages:c.w,md:c.w,txt:c.w,rtf:c.w,xls:f.Y,xlsx:f.Y,csv:f.Y,tsv:f.Y,ods:f.Y,pdf:g.B,pptx:h,ppt:h,zip:s,br:s,bz2:s,gz:s,"7z":s,dmg:s,pkg:s,jar:s,rar:s,tar:s,xar:s,stl:d,obj:d,fbx:d,amf:d,iges:d,mp3:i.l,m4a:i.l,wav:i.l,aac:i.l,ogg:i.l,flac:i.l,alac:i.l,wma:i.l,exe:u,otf:m,ttf:m,woff:m,eof:m,py:l,java:l,js:l,ts:l,tsx:l,c:l,h:l,cpp:l,go:l,rs:l,css:l,php:l,swift:l,kt:l,lua:l,m:l,bash_profile:l,bashrc:l,zshrc:l,vimrc:l,vim:l};function S(e){const t=function(e){if(!e)return"";const{pathname:t}=z.Qc(e);if(!t)return"";const n=t.split(".");return n[n.length-1]}(e).toLowerCase();return P[t]??p.X}let _=function(e){return e[e.Menu=0]="Menu",e[e.Page=1]="Page",e[e.Sidebar=2]="Sidebar",e[e.Margin=3]="Margin",e[e.Unfurl=4]="Unfurl",e}({});function I(e){let{recordStore:t,currentUserId:n,timestamp:r}=e;return K({recordStore:t,currentUserId:n,timestamp:r})||B(t)}const F=6,k=3;function D(e){return e>1?k:F}function H(e){return e?b.al(e,{recursivelyLoadAllDiscussions:!0,includeLoadingDiscussions:!0}):[]}function L(e){let{blockStore:t,currentUserId:n,ignoreAfterTime:r}=e;if(!t)return[];return b.al(t,{recursivelyLoadAllDiscussions:!0,includeLoadingDiscussions:!0}).sort(((e,t)=>{const i=I({recordStore:e,currentUserId:n,timestamp:r}),o=I({recordStore:t,currentUserId:n,timestamp:r});return null!=i&&i.isDefined()?null!=o&&o.isDefined()?-(i.getCreatedTime()-o.getCreatedTime()):1:-1}))}function U(e,t){return e&&e.isDefined()?t&&t.isDefined()?e.getCreatedTime()-t.getCreatedTime():1:-1}function A(e){return b.D4(e).sort(((e,t)=>U(e,t)))}function B(e){return A(e)[0]}function T(e){return K({recordStore:e,currentUserId:void 0})}function K(e){let{recordStore:t,currentUserId:n,timestamp:r}=e;const i=b.D4(t).filter((e=>V.default.checkGate("comments_pane_improvements")?r?e.isDefined()&&e.getCreatedTime()<r:e.isDefined():e.isDefined()&&e.getCreatedById()!==n)).sort(((e,t)=>U(e,t)));return i[i.length-1]}function Z(e){return e.sort(((e,t)=>U(T(e),T(t))))}function R(e){const t=e.state.textStore.getValue(),n=(e.state.files??[]).length>0,r=t&&t.length>0;return!n&&!r}function O(e,t){const n=e.state.textStore.getValue(),r=e.state.files;if(!t)return n&&0!==n.length||r&&r.length>0;const i=b.zP(t).getValue();return!w.Xy(i,n)||function(e,t){const n=e.state.files,r=b.le(t);if(r.length!==n.length)return!0;return r.some(((e,t)=>e.id!==n[t].id))}(e,t)}function $(e){if(e.some((e=>!e.isReady())))return!0;return!!e.map((e=>b.D4(e))).flat().some((e=>!e.isReady()||!e.getCreatedTime()))}function E(e){switch(e){case"block_menu":case"reply_menu_mentions_comments":case"reply_menu_all_updates":case"reply_menu_archive":case"reply_menu_updates_sidebar":case"updates_menu_mentions_comments":case"updates_menu_all_updates":case"updates_menu_archive":return _.Menu;case"page_discussion":return _.Page;case"updates_sidebar":return _.Sidebar;case"margin_comments":return _.Margin;case"comment_unfurl":return _.Unfurl;default:(0,C.t1)(e)}}function G(e){return w.mN(w.VS(e,(e=>b.D4(e).map((e=>({store:e,pointer:e.getCreatedByPointer()}))))),(e=>{var t;return null===(t=e.pointer)||void 0===t?void 0:t.id})).filter((e=>(0,C.$K)(e.pointer))).map((e=>{let{store:t,pointer:n}=e;return M.t.createChildStore(t,n)})).map((e=>e.getModel())).filter(C.$K).map((e=>e instanceof x.T?(0,r.dp)(e):e instanceof y.L?(0,r.D$)(e):e instanceof v.R?(0,r.Jp)(e):void(0,C.t1)(e))).filter(C.$K)}function N(e){var t;if(e.length>1)return!1;const n=e[0];if(!n.length)return!1;const r=n[0].trim(),i=j();return(null===(t=r.match(i))||void 0===t?void 0:t.join(""))===r}const W={updates_menu_all_updates:28,updates_menu_mentions_comments:28,updates_menu_archive:28,block_menu:20,reply_menu_all_updates:20,reply_menu_mentions_comments:20,reply_menu_archive:20,reply_menu_updates_sidebar:20,page_discussion:20,updates_sidebar:23,margin_comments:20,comment_unfurl:32};function Y(e){return((null==e?void 0:e.match(/[0-9.]+|[a-z]+/gi))??[]).join(" ")}},97310:(e,t,n)=>{n.r(t),n.d(t,{FilePropertyModule:()=>W,FilePropertyModuleSizes:()=>N});n(21703);var r=n(67294),i=n(480),o=n(86628),a=n(24405),l=n(80951),s=n(53965),c=n(993),u=n(13447),d=n(53471),p=n(27411),m=n(55118),g=n(95538),h=n(56666),f=n(25651),v=n(75071),y=n(37612),x=n(92607),w=n(9291),C=n(27153),z=n(10417),b=n(60709),V=n(61766),M=n(52275),j=n(31945),P=n(73063),S=n(68785),_=n(78140),I=n(32163),F=n(78942),k=n(81865),D=n(72495),H=n(85893);let L=function(e){return e.MediumCard="medium-card",e}({});function U(e,t){return{valueContainer:{width:155,height:100,flexGrow:0,flexShrink:0,position:"relative",border:"1px solid",borderRadius:12,borderColor:e.stroke.deemphasized,overflow:"hidden"},nonPreviewableValueInnerContainer:{width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",rowGap:12},addValueInnerContainer:{width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},addValueSpinner:{width:23,height:23,color:e.icon.tertiary},addValueIcon:{width:23,height:23,color:e.icon.tertiary},uploadingValueInnerContainer:{width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",rowGap:12},uploadingProgress:{color:e.icon.tertiary},uploadingFileName:{maxWidth:"90%",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},nonPreviewableValueIcon:{height:24,width:24,fill:e.regularIconColor},nonPreviewableValueText:{maxWidth:"90%",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},previewableImagePropertyValueContainer:{width:"100%",height:"100%"},previewableImagePropertyImage:{width:"100%",height:"100%",objectFit:"cover"},menuIconButton:{width:18,height:18,position:"absolute",borderRadius:"50%",borderWidth:1,borderColor:e.stroke.deemphasized,borderStyle:"solid",top:6,right:6,background:e.surface.wash}}}function A(e){const{size:t,filePropertyLink:n}=e,[i,o]=(0,r.useState)(!1),l=(0,r.createRef)(),s=(0,a.yK)((e=>U(e)),[t]);let c;var u;return u=n,c=[".gif",".png",".jpg",".jpeg",".heic"].some((e=>(0,g.y_)(u.url,e)))?O:R,(0,H.jsxs)("div",{ref:l,style:s.valueContainer,onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),children:[i&&(0,H.jsx)(K,{...e}),c({...e})]})}function B(e){const{size:t,uploadingFile:n}=e,r=(0,a.yK)((e=>U(e)),[t]);return(0,H.jsx)("div",{style:r.valueContainer,children:(0,H.jsxs)("div",{style:r.uploadingValueInnerContainer,children:[(0,H.jsx)(F.e,{style:r.uploadingProgress,size:23,percentage:n.progressPercent}),(0,H.jsx)("div",{style:r.uploadingFileName,children:n.name})]})})}function T(e){const{isLoading:t,uploadFile:n}=e,o=(0,i.O7)(),l=(0,w.useIntl)(),s=!t,c=(0,r.useMemo)((()=>[{type:"file",title:l.formatMessage({defaultMessage:"File",id:"FilePropertyModuleValue.FilePropertyModuleAddValue.mediaMenuTabs.file"}),fileUpload:!0,imageUpload:!1,videoUpload:!1,onUpload:e=>{n(e),C.Z()}}]),[l,n]),u=(0,r.useCallback)((e=>{s&&C.$(o,{originRect:e.currentTarget.getBoundingClientRect(),originGap:3,title:l.formatMessage({id:"FilePropertyModuleValue.FilePropertyModuleAddValue.mediaActionsMenu.show",defaultMessage:"File"}),currentTab:"file",tabs:c})}),[o,l,s,c]),d=(0,a.yK)((t=>U(t,e.size)),[e.size]),p=s?{cursor:"pointer"}:{},m=e.isLoading?(0,H.jsx)(S.Z,{style:d.addValueSpinner}):(0,v.f)(d.addValueIcon);return(0,H.jsx)("div",{style:d.valueContainer,onClick:u,children:(0,H.jsx)("div",{style:{...d.addValueInnerContainer,...p},children:m})})}function K(e){const t=(0,o.qz)(void 0,V.Z),n=(0,a.yK)((t=>U(t,e.size)),[e.size]);return(0,H.jsx)(j.ZP,{popupType:j.Z4.Popup,placementToOrigin:j.pO.Right,buttonPopupStore:t,renderOrigin:e=>(0,H.jsx)(P.Z,{...e,style:n.menuIconButton,hoveredStyle:n.menuIconButton,pressedStyle:n.menuIconButton,ariaLabel:"more",hasBackground:!1,showShadow:!1,icon:h.o}),render:t=>(0,H.jsx)(Z,{...e,closeMenu:t.close})})}function Z(e){const{closeMenu:t,deleteFile:n,renameFile:r,viewFile:i}=e,o={width:18,height:18},a=[{key:"view-original",action:i,render:e=>(0,H.jsx)(M.Z,{...e,title:(0,H.jsx)(w.FormattedMessage,{defaultMessage:"View original",id:"FilePropertyModuleValue.PropertyValuePopoverMenu.viewOriginal"}),icon:(0,x.v)(o)})},{key:"rename",action:r,render:e=>(0,H.jsx)(M.Z,{...e,title:(0,H.jsx)(w.FormattedMessage,{defaultMessage:"Rename",id:"FilePropertyModuleValue.PropertyValuePopoverMenu.Rename"}),icon:(0,f.R)(o)})},{key:"delete",action:n,render:e=>(0,H.jsx)(M.Z,{...e,title:(0,H.jsx)(w.FormattedMessage,{defaultMessage:"Delete",id:"FilePropertyModuleValue.PropertyValuePopoverMenu.delete"}),icon:(0,y.y)(o)})}],l=[{key:"actions",render:e=>(0,H.jsx)(D.Z,{...e}),items:a}];return(0,H.jsx)(_.Z,{menuType:b.og.Popup,width:200,children:(0,H.jsx)(I.Z,{type:I.i.Vertical,onAccept:t,sections:l,initialFocus:0})})}function R(e){const{size:t,filePropertyLink:n}=e,r=(0,z.getIcon)(n.url),i=(0,a.yK)((e=>U(e)),[t]);return(0,H.jsxs)("div",{style:i.nonPreviewableValueInnerContainer,children:[(0,H.jsx)("div",{children:r(i.nonPreviewableValueIcon)}),(0,H.jsx)("div",{style:i.nonPreviewableValueText,children:n.name})]})}function O(e){const{size:t,filePropertyLink:n,blockStore:i}=e,o=(0,a.yK)((e=>U(e)),[t]),l=(0,r.useCallback)(((e,t)=>{if(t)return(0,H.jsx)("img",{src:t,style:o.previewableImagePropertyImage})}),[o.previewableImagePropertyImage]);return(0,H.jsx)("div",{style:o.previewableImagePropertyValueContainer,children:(0,H.jsx)(k.Z,{url:n.url,width:155,isAuthenticated:!0,permissionRecord:i.pointer,render:l})})}function $(e,t){return`${e}-${t}`}function E(e,t,n){return`${$(e,t)}-${n}`}function G(e,t){const n=e.getPropertyValue(t);return l.g(n)}let N=function(e){return e.MediumCard="medium-card",e}({});const W=r.memo((function(e){const{store:t,property:n,size:a=N.MediumCard}=e,m=(0,i.O7)(),g=(0,o.VK)((()=>G(t,n)),[t,n]),h=(0,o.VK)((()=>{const e=p.default.getState(),r=(0,s.oA)(Object.keys(e)),i=(0,s.oA)(r.filter((e=>function(e,t,n){const r=$(t,n);return e.startsWith(r)}(e,t.pointer.id,n))));return i.sort().map((e=>p.default.getKeyState(e)))}),[t.pointer.id,n]),f=(0,r.useCallback)((e=>{u.createAndCommit({userAction:"FilePropertyModule.updateFiles",environment:m,perform:r=>{const i=l.CC(e);c.sO({environment:m,editorMode:"default",store:t.getNormalizedPropertyStore(n),value:i,transaction:r})}})}),[t,m,n]),v=(0,r.useCallback)((e=>{const r=G(t,n);if(e>=r.length)throw new Error(`filePropertyModule cannot delete file at index ${e}. Out of bounds index`);const i=[...r];i.splice(e,1),f(i)}),[t,n,f]),y=(0,r.useCallback)((e=>{const r=[e,...G(t,n)];f(r)}),[t,n,f]),x=(0,r.useCallback)((e=>{d.IL({environment:m,files:e,bucket:"secure",record:t.pointer,onSingleFileStart:(e,r)=>{const i=E(t.pointer.id,n,r);p.default.setKeyState(i,{progressPercent:0,file:e.file,name:e.name,size:e.size})},onSingleFileProgress:(e,r)=>{let{progressPercent:i}=e;const o=E(t.pointer.id,n,r),a=p.default.getKeyState(o);if(!a)throw new Error("uploading file cannot be found in global file upload state");p.default.setKeyState(o,{...a,progressPercent:i})},onSingleFileComplete:(e,r)=>{const i=E(t.pointer.id,n,r),o=p.default.getKeyState(i);if(p.default.setKeyState(i,void 0),!o||null==o||!o.name)throw new Error("completed file upload cannot be found in global file upload state");y({name:null==o?void 0:o.name,url:e})},onSingleFileError:(e,r)=>{const i=E(t.pointer.id,n,r);p.default.setKeyState(i,void 0)}})}),[y,t.pointer,m,n]),w=(0,r.useCallback)((e=>x([e])),[x]);return(0,H.jsx)(Y,{size:a,blockStore:t,filePropertyLinks:g,deletePropertyValueAtIndex:v,uploadingFiles:h,uploadFilesAndUpdateProperty:x,uploadFileAndUpdateProperty:w,updateEntireFilePropertyWithTransaction:f})}));function Y(e){const{blockStore:t,uploadingFiles:n,filePropertyLinks:i,uploadFilesAndUpdateProperty:o,uploadFileAndUpdateProperty:l,deletePropertyValueAtIndex:s}=e,c=L.MediumCard,u=(0,r.useCallback)((e=>{let{files:t}=e;return o(t)}),[o]),d=(0,a.yK)((e=>({moduleValuesContainer:{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"flex-start",rowGap:10,columnGap:10,width:"100%",minHeight:40,padding:8},moduleValuesDropzone:{borderRadius:8}})),[]),p=0===n.length?void 0:(0,H.jsx)(H.Fragment,{children:n.map((e=>void 0===e?void 0:(0,H.jsx)(B,{blockStore:t,size:c,uploadingFile:e},e.name)))}),g=i.map(((e,n)=>(0,H.jsx)(A,{size:c,blockStore:t,filePropertyLink:e,deleteFile:()=>{s(n)},renameFile:()=>{alert("Beau has not built property renaming yet")},viewFile:()=>{alert("Beau has not built viewing originals yet")}},e.url))),h=(0,H.jsx)(T,{size:c,uploadFile:l,isLoading:n.length>0});return(0,H.jsx)(m.G,{dropTargetKey:"foobar",canAcceptDrop:e=>{let{isNativeDrag:t}=e;return t},onNativeDrop:u,dropzoneStyle:d.moduleValuesDropzone,shouldShowDropZone:!0,canNativeDropOnto:!0,children:(0,H.jsxs)("div",{style:d.moduleValuesContainer,children:[h,p,g]})})}},40304:(e,t,n)=>{n.d(t,{w:()=>o});n(67294);var r=n(45238),i=n(85893);const o=(0,r.IU)("document",{viewBox:"0 0 23.5 23.5",svg:(0,i.jsx)("path",{d:"M9.14 8.156a.494.494 0 01-.5-.5c0-.14.047-.258.141-.351a.487.487 0 01.36-.14h5.718a.477.477 0 01.492.492.494.494 0 01-.14.35.464.464 0 01-.352.15H9.141zm0 2.664a.487.487 0 01-.359-.14.504.504 0 01-.14-.36c0-.135.046-.25.14-.343a.487.487 0 01.36-.141h5.718a.477.477 0 01.493.484c0 .14-.047.26-.141.36a.477.477 0 01-.352.14H9.141zm0 2.672a.487.487 0 01-.359-.14.468.468 0 01-.14-.344c0-.14.046-.258.14-.352a.473.473 0 01.36-.148h2.765c.146 0 .266.05.36.148a.48.48 0 01.14.352c0 .135-.047.25-.14.344a.487.487 0 01-.36.14H9.141zm-3.843 4.266V5.968c0-.838.213-1.473.64-1.905.428-.438 1.06-.657 1.899-.657h8.32c.839 0 1.472.219 1.899.656.427.433.64 1.068.64 1.907v11.789c0 .844-.213 1.482-.64 1.914-.427.432-1.06.648-1.899.648h-8.32c-.839 0-1.471-.216-1.899-.648-.427-.432-.64-1.07-.64-1.914zm1.539-.094c0 .36.094.635.281.828.188.193.472.29.852.29h8.062c.38 0 .664-.097.852-.29.187-.193.281-.469.281-.828V6.07c0-.364-.094-.643-.281-.836-.188-.198-.471-.296-.852-.296H7.97c-.38 0-.664.098-.852.296-.187.193-.281.472-.281.836v11.594z"})})},52455:(e,t,n)=>{n.d(t,{X:()=>o});n(67294);var r=n(45238),i=n(85893);const o=(0,r.IU)("fileAttachment",{viewBox:"0 0 28 28",svg:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("rect",{width:"28",height:"28",fill:"none"}),(0,i.jsx)("path",{d:"M7.70703 27.3799H21.2783C23.7412 27.3799 24.9854 26.1104 24.9854 23.6348V11.7266C24.9854 10.3555 24.8076 9.74609 23.9697 8.88281L16.5049 1.3418C15.6924 0.516602 15.0322 0.326172 13.8008 0.326172H7.70703C5.26953 0.326172 4 1.58301 4 4.05859V23.6348C4 26.1104 5.25684 27.3799 7.70703 27.3799ZM7.7832 25.8057C6.32324 25.8057 5.57422 25.0312 5.57422 23.5967V4.09668C5.57422 2.7002 6.32324 1.8877 7.7959 1.8877H13.7246V9.53027C13.7246 10.9775 14.4609 11.6631 15.8701 11.6631H23.4238V23.5967C23.4238 25.0312 22.6621 25.8057 21.2021 25.8057H7.7832ZM16.0352 10.1777C15.4512 10.1777 15.21 9.94922 15.21 9.36523V2.20508L23.1064 10.1777H16.0352Z"})]})})},75071:(e,t,n)=>{n.d(t,{f:()=>o});n(67294);var r=n(45238),i=n(85893);const o=(0,r.IU)("plusThick",{viewBox:"0 0 14 14",svg:(0,i.jsx)("path",{d:"M2 7.16357C2 7.59692 2.36011 7.95093 2.78735 7.95093H6.37622V11.5398C6.37622 11.9731 6.73022 12.3271 7.16357 12.3271C7.59692 12.3271 7.95093 11.9731 7.95093 11.5398V7.95093H11.5398C11.9731 7.95093 12.3271 7.59692 12.3271 7.16357C12.3271 6.73022 11.9731 6.37622 11.5398 6.37622H7.95093V2.78735C7.95093 2.36011 7.59692 2 7.16357 2C6.73022 2 6.37622 2.36011 6.37622 2.78735V6.37622H2.78735C2.36011 6.37622 2 6.73022 2 7.16357Z"})})},61646:(e,t,n)=>{n.d(t,{Y:()=>o});n(67294);var r=n(45238),i=n(85893);const o=(0,r.IU)("spreadsheet",{viewBox:"0 0 23 24",svg:(0,i.jsx)("path",{d:"M3.32 10.43V8.96h17.422v1.47H3.32zm0 4.343v-1.468h17.422v1.468H3.32zm7.93 3.758V5.203h1.5v13.328h-1.5zm-5.945.625c-.844 0-1.482-.213-1.914-.64-.433-.427-.649-1.058-.649-1.891V7.109c0-.833.216-1.463.649-1.89.432-.433 1.07-.649 1.914-.649H18.68c.849 0 1.49.216 1.922.649.432.427.648 1.057.648 1.89v9.516c0 .833-.216 1.463-.648 1.89-.433.428-1.073.641-1.922.641H5.305zm.093-1.531h13.196c.36 0 .635-.094.828-.281.193-.193.289-.477.289-.852v-9.25c0-.375-.096-.656-.29-.844-.192-.192-.468-.289-.827-.289H5.398c-.364 0-.643.097-.835.29-.188.187-.282.468-.282.843v9.25c0 .375.094.659.282.852.192.187.47.281.835.281z"})})}}]);