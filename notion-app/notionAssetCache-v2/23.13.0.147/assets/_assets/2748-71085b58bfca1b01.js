"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[2748],{41883:(e,t,r)=>{r.d(t,{Z:()=>Z});r(57658);var o=r(67294),i=r(58573),l=r(9291),n=r(79131),a=r(87167),s=r(65091),p=r(1302),c=r(480),d=r(86628),y=r(99036),u=r(53965),h=r(51365),g=r(10906),S=r(66890),m=r(78030),P=r(13654),f=r(24405),v=r(80951),x=r(42875),b=r(47453),C=r(33929),k=r(1018),w=r(85526),j=r(97039),I=r(52275),M=r(85893);function O(e){const{property:t,store:r,disabled:i,canConfigureCollection:n,onTab:a,onUntab:s,schema:p,blockPropertyValueOverlayStore:y,collectionStore:u}=e,g=(0,c.O7)(),{device:P,currentUser:O}=g,R=(0,f.Fg)(),T=(0,S.Y$)(),B=p[t],Z=(0,f.yK)((()=>({propertyOuter:{display:"flex",alignItems:"left",marginLeft:4,height:"100%",flex:"auto",flexDirection:"column",minWidth:0},property:{display:"flex",alignItems:"center",marginLeft:4,height:"100%",flex:"auto",minWidth:0},addPageButton:{fontSize:14,minHeight:k.wI,color:R.lightTextColor,background:void 0,boxShadow:void 0}})),[R.lightTextColor]),_=(0,o.useCallback)((()=>{w.Z.setState({...w.Z.state,hoveredProperty:e.property})}),[e.property]),A=(0,o.useCallback)((()=>{w.Z.setState({...w.Z.state,hoveredProperty:void 0})}),[]),V=(0,o.useCallback)((()=>{h.bA({environment:g,blockPropertyValueOverlayStore:y,store:r,property:t,format:m.C.Page,collectionContextStore:T})}),[g,y,r,t,T]),E=(0,d.VK)((()=>P.isMobile&&!i&&"relation"===(null==B?void 0:B.type)&&r.isDefined()&&!v.wV({block:r.getModel(),property:t,schema:p,getRecordModel:r.getRecordModel,userId:O.id,userTimeZone:(0,x.r)(),intl:C.default.getIntl()})),[O.id,P.isMobile,i,t,B,p,r]);return(0,M.jsxs)("div",{role:"cell",style:Z.propertyOuter,children:[(0,M.jsx)("div",{style:Z.property,onMouseMove:_,onMouseLeave:A,children:(0,M.jsx)(j.Z,{store:r,property:t,locked:!n,disabled:i,format:m.C.Page,onTab:a,onUntab:s,tableWrap:!1,blockPropertyValueOverlayStore:y,onOpenProperty:V,collectionStore:u})},t),E&&(0,M.jsx)(I.Z,{focused:!1,icon:(0,b.R)({width:14,fill:R.lightIconColor}),buttonStyle:{marginRight:0,width:"calc(100% - 4px)"},style:Z.addPageButton,title:(0,M.jsx)(l.FormattedMessage,{id:"pagePropertyRowValue.addRelationButtonMessage",defaultMessage:"Add page"}),onClick:V})]})}const R=o.memo(O);function T(e){const{schema:t,format:r,store:i,collectionStore:l,disabled:n,locked:s,blockPropertyValueOverlayStore:y,isInPeekRenderer:f,property:v,mergedProperties:x,dragHandleStyle:b,hideDragHandle:C,disablePropertyName:k,opacity:w}=e,j=(0,o.useId)(),I=(0,c.O7)(),O=(0,S.Y$)(),T=(0,a.vg)(l),Z=(0,d.VK)((()=>(0,g.p1)(l)),[l]),_=(0,o.useCallback)((()=>{const e=y.state;if(!e.isOpen)return;const r=x,o=r.findIndex((t=>t.property===e.property)),l=r.find(((e,r)=>r>o&&B(t,e.property)))||r.find(((e,r)=>B(t,e.property)));l&&p.default.afterNextFlush((()=>{h.bA({environment:I,blockPropertyValueOverlayStore:y,store:i,property:l.property,format:m.C.Page,collectionContextStore:O})})),h.xv({environment:I,blockPropertyValueOverlayStore:y})}),[y,O,I,x,t,i]),A=(0,o.useCallback)((()=>{const e=y.state;if(!e.isOpen)return;const r=x,o=r.findIndex((t=>t.property===e.property)),l=u.dF(r,((e,r)=>r<o&&B(t,e.property)))||u.dF(r,((e,r)=>B(t,e.property)));l&&p.default.afterNextFlush((()=>{h.bA({environment:I,blockPropertyValueOverlayStore:y,store:i,property:l.property,format:m.C.Page,collectionContextStore:O})})),h.xv({environment:I,blockPropertyValueOverlayStore:y})}),[y,O,I,x,t,i]);return(0,M.jsxs)("div",{role:"row","aria-labelledby":j,style:{display:"flex",paddingBottom:4,width:"100%",opacity:w??1},children:[(0,M.jsx)(P.ZP,{schema:t,format:r,property:v,collectionStore:l,disabled:Boolean(n||k),locked:s||Z,canConfigureCollection:T,isInPeekRenderer:f,dragHandleStyle:b,hideDragHandle:C,propertyNameAriaId:j,blockStore:i}),(0,M.jsx)(R,{schema:t,property:v,store:i,collectionStore:l,disabled:n||s,canConfigureCollection:T,onTab:_,onUntab:A,blockPropertyValueOverlayStore:y})]},v)}function B(e,t){const r=e[t];return Boolean(r&&!y.uk.includes(r.type))}function Z(e){const{disabled:t,locked:r,collectionStore:p,format:c,mergedProperties:d,showHiddenProperties:y,hideDragHandle:u,propertySearchState:h}=e,g=(0,l.useIntl)(),S=d,m=(0,a.vg)(p),P=null!=h&&h.open&&h.query.length>0?h.query:void 0,f=(0,a.G_)({collectionStore:p,format:c}),v=g.formatMessage({id:"pageProperties.tableLabel",defaultMessage:"Page properties"}),x=function(e){const{properties:t,pagePropertyQuery:r}=e;return(0,o.useMemo)((()=>r?(0,i.ZP)(r,t,(e=>e.name)).map((e=>e.property)):[]),[t,r])}({properties:S,pagePropertyQuery:P}),b=function(e){const{properties:t,showHiddenProperties:r}=e;return(0,o.useMemo)((()=>{const e=[];let o=0;return t.forEach((t=>{if("section"!==t.visibility)return r?(e.splice(o,0,t.property),void(o+=1)):void("hide"!==t.visibility&&("hide_if_empty"!==t.visibility||t.hasValue)?(e.splice(o,0,t.property),o+=1):e.push(t.property));e.push(t.property)})),{all:e,visible:e.slice(0,o)}}),[t,r])}({properties:S,showHiddenProperties:y}),C=(0,o.useMemo)((()=>new Set(x)),[x]),k=function(e){const{propertySearch:t,properties:r}=e;return(0,o.useMemo)((()=>{if(t.query||t.open){const e=[],t=Math.min(r.all.length,s.sw.MIN_PROPERTIES_TO_RENDER),o=Math.max(t,r.visible.length),i=r.query.length,l=Math.max(0,o-i),n=r.all.filter((e=>!r.querySet.has(e)));r.query.slice(0,o).forEach((t=>{e.splice(0,0,t)}));for(let r=0;r<l&&r<n.length;r++){const t=n[r];e.splice(r,0,t)}return e}return r.visible}),[t,r])}({properties:{all:b.all,visible:b.visible,query:x,querySet:C},propertySearch:{open:(null==h?void 0:h.open)??!1,query:P}});return t||r||!m||u||P?(0,M.jsx)("div",{role:"table","aria-label":v,style:n.yA,children:k.map(((t,r)=>{const o=void 0===P||C.has(t)?1:.4;return(0,M.jsx)("div",{children:(0,M.jsx)(T,{...e,opacity:o,property:t})},r)}))}):(0,M.jsx)(n.ZP,{role:"table","aria-label":v,direction:"vertical",keys:k,renderKey:t=>{const r=void 0===P||C.has(t)?1:.4;return(0,M.jsx)(T,{...e,opacity:r,property:t})},onDrop:f})}},12867:(e,t,r)=>{r.d(t,{Uv:()=>R,ZP:()=>T});var o=r(67294),i=r(480),l=r(86628),n=r(24405),a=r(56666),s=r(47453),p=r(9291),c=r(16956),d=r(5149),y=r(7801),u=r(66890),h=r(68641),g=r(98742),S=r(61766),m=r(97039),P=r(78030),f=r(23063),v=r(64921),x=r(31945),b=r(1743),C=r(53437),k=r(26388),w=r(13654),j=r(87167),I=r(41883),M=r(65091),O=r(85893);const R=130;function T(e){const{store:t,collectionStore:r,blockPropertyValueOverlayStore:a,compactProperties:s,disabled:p,locked:c,format:d,isInPeekRenderer:y,hiddenProperties:h,rowLength:g,variant:v}=e,x=(0,l.VK)((()=>r.getSchema()),[r]),[b,C]=(0,o.useState)(!1),k=(0,j.vg)(r),I=(0,i.Fy)(),M=(0,l.qz)(void 0,S.Z),R=(0,u.Y$)(),T=(0,n.yK)((()=>({PagePropertiesCompactRow:{display:s.length>g?"grid":"flex",justifyContent:"flex-start",gridTemplateColumns:`repeat(${g}, 1fr)`,columnGap:10,rowGap:4,marginTop:2,marginBottom:6}})),[s.length,g]),Z=(0,o.useCallback)((()=>{C(!0)}),[]),_=(0,o.useCallback)((()=>{C(!1)}),[]);return(0,O.jsx)("div",{style:T.PagePropertiesCompactRow,onMouseEnter:Z,onMouseLeave:_,children:s.map(((e,o)=>{const i=o===s.length-1;return(0,O.jsxs)("span",{style:{flexShrink:1,display:i?"flex":void 0},children:[(0,O.jsxs)("span",{style:{flex:1,overflow:"hidden"},children:["pinned"!==v&&(0,O.jsx)(w.ZP,{schema:x,format:d,hideIcon:!0,hideDragHandle:!0,property:e.property,blockStore:t,collectionStore:r,disabled:p,locked:c,canConfigureCollection:k,isInPeekRenderer:y,style:{height:24,width:"100%"}}),(0,O.jsx)(m.Z,{store:t,collectionStore:r,blockPropertyValueOverlayStore:a,property:e.property,format:"pinned"===v?P.C.Mini:P.C.CompactPage,disabled:p,locked:c,tableWrap:!1})]}),i&&"pinned"!==v&&(0,O.jsx)(f.Z,{isVisible:b||I.isMobile,enterAnimationStyle:{opacity:0},animationStyle:{opacity:1,marginLeft:"auto"},exitAnimationStyle:{opacity:0},render:()=>(0,O.jsx)(B,{onClose:_,hiddenProperties:h,canConfigureCollection:k,store:t,collectionStore:r,collectionContextStore:R,blockPropertyValueOverlayStore:a,disabled:p,locked:c,isInPeekRenderer:y,format:d,buttonPopupStore:M})})]},e.property)}))})}const B=o.memo((e=>{const{hiddenProperties:t,canConfigureCollection:r,collectionStore:u,isInPeekRenderer:S,buttonPopupStore:m,collectionContextStore:P,hideDragHandle:f,overflowButtonWrapperStyle:w,overflowButtonStyle:j}=e,R=(0,i.Fy)(),T=(0,i.O7)(),B=(0,l.VK)((()=>u.getSchema()),[u]),Z=(0,n.yK)((e=>({overflowIcon:{width:16,height:16,fill:e.mediumIconColor},pagePropertiesOverflow:{width:"100%",fontSize:14,padding:f?"10px":"10px 10px 10px 28px",maxHeight:500,overflowY:"scroll"},overflowButtonWrapper:{display:"flex",alignItems:"center",paddingBottom:8,...w},overflowButton:{display:"flex",width:32,height:32,borderRadius:4,justifyContent:"center",alignItems:"center",...j}})),[f,w,j]),_=(0,o.useCallback)((()=>{c.fH({environment:T,collectionContextStore:P,collectionStore:u,isInPeekRenderer:S,onCloseMenu:()=>{m.setState({open:!1})}})}),[T,P,u,S,m]);return t.length?(0,O.jsx)(x.ZP,{onClose:e.onClose,popupWrapStyle:{width:500},buttonPopupStore:m,popupType:R.isMobile?C.kQ.SlideUp:C.kQ.Popup,render:()=>(0,O.jsx)(b.Z,{debugName:"PagePropertiesCompact",capture:!0,children:(0,O.jsxs)("div",{style:Z.pagePropertiesOverflow,children:[(0,O.jsx)(I.Z,{showHiddenProperties:!0,schema:B,mergedProperties:t,format:e.format,store:e.store,collectionStore:e.collectionStore,disabled:e.disabled,locked:e.locked,blockPropertyValueOverlayStore:e.blockPropertyValueOverlayStore,isInPeekRenderer:e.isInPeekRenderer,hideDragHandle:f}),r&&(0,O.jsx)(M.le,{collectionStore:u,isInPeekRenderer:S})]})}),renderOrigin:e=>(0,O.jsx)("div",{style:Z.overflowButtonWrapper,children:(0,O.jsx)(k.ZP,{renderTooltip:()=>(0,O.jsx)(p.FormattedMessage,{defaultMessage:"{num, plural, one {1 more property} other {{num} more properties}}",id:"database.pageProperties.compact.showMoreTooltip",values:{num:t.length}}),placement:k.ug.Bottom,render:t=>(0,O.jsx)(v.Z,{style:Z.overflowButton,mobileFeedback:R.isMobile,...(0,g.Z)(e,t),children:(0,a.o)(Z.overflowIcon)})})})}):r?(0,O.jsx)("div",{style:Z.overflowButtonWrapper,children:(0,O.jsx)(k.ZP,{renderTooltip:()=>(0,O.jsx)(p.FormattedMessage,{defaultMessage:"Add a property",id:"database.pageProperties.compact.addPropertyButtonTitle"}),placement:k.ug.Bottom,render:t=>(0,O.jsx)(x.ZP,{popupType:T.device.isMobile?C.kQ.SlideUp:C.kQ.Popup,onClose:e.onClose,buttonPopupStore:m,originGap:1,alignmentToOrigin:x.vR.Start,render:()=>(0,O.jsx)(y.P,{context:h.HV.TopbarFilterPopup,collectionContextStore:P,collectionSettingsStore:P.settingsStore,hideDesktopHeader:!0}),onClick:_,onDismiss:()=>{const e=P.settingsStore;d.E3({collectionSettingsStore:e})},renderOrigin:e=>(0,O.jsx)(v.Z,{style:Z.overflowButton,mobileFeedback:R.isMobile,...(0,g.Z)(e,t),children:(0,s.R)(Z.overflowIcon)})})})}):null}))},65091:(e,t,r)=>{r.d(t,{ZP:()=>T,le:()=>B,sw:()=>V});r(57658);var o=r(67294),i=r(480),l=r(86628),n=r(24405),a=r(72787),s=r(49019),p=r(47453),c=r(9291),d=r(37810),y=r(16956),u=r(5149),h=r(7801),g=r(66890),S=r(68641),m=r(12534),P=r(33929),f=r(61766),v=r(77080),x=r(85526),b=r(23063),C=r(64921),k=r(31945),w=r(73063),j=r(36488),I=r(74194),M=r(53437),O=r(87167),R=r(85893);function T(e){const{locked:t,disabled:r,collectionStore:o,mergedProperties:i,schema:n,isCompact:a,propertySearchState:s,setPropertySearchState:p}=e,c=(0,l.VK)((()=>x.Z.state.forceShowProperties),[]),d=N(i,n,a),y=(0,O.vg)(o),u=[];return(c||0===d)&&(!t&&!r&&y)&&u.push((0,R.jsx)(B,{...e},"add-property")),d>0&&(c?u.push((0,R.jsx)(_,{mergedProperties:i,schema:n,isCompact:a,propertySearchState:s,setPropertySearchState:p},"hide-properties")):u.push((0,R.jsx)(Z,{mergedProperties:i,schema:n,isCompact:a,propertySearchState:s,setPropertySearchState:p},"show-more"))),(0,R.jsx)(R.Fragment,{children:u})}function B(e){const{collectionStore:t,isInPeekRenderer:r}=e,n=(0,g.Y$)(),a=(0,i.O7)(),s=(0,l.qz)(void 0,f.Z),d=L(),m=(0,l.VK)((()=>n.settingsStore.state.open),[n.settingsStore]);(0,o.useEffect)((()=>{m||s.setState({...s.state,open:!1})}),[s,m]);const P=(0,o.useCallback)((()=>{y.fH({environment:a,collectionContextStore:n,collectionStore:t,isInPeekRenderer:r,onCloseMenu:()=>{s.setState({open:!1})}})}),[s,n,t,a,r]);return(0,R.jsx)("div",{style:{display:"flex"},children:(0,R.jsx)("div",{style:d.AddOrToggleOrSearchContainerStyle,children:(0,R.jsx)(k.ZP,{popupType:a.device.isMobile?M.kQ.SlideUp:M.kQ.Popup,buttonPopupStore:s,originGap:1,alignmentToOrigin:k.vR.Start,render:()=>(0,R.jsx)(h.P,{context:S.HV.TopbarFilterPopup,collectionContextStore:n,collectionSettingsStore:n.settingsStore,hideDesktopHeader:!0}),onClick:P,onClose:()=>{const e=n.settingsStore;u.E3({collectionSettingsStore:e})},renderOrigin:t=>(0,R.jsxs)(C.Z,{style:{...d.AddOrTogglePropertyButtonStyle,...e.style},...t,children:[(0,p.R)(d.ActionPropertyButtonIconStyle),(0,R.jsx)("div",{style:d.AddPropertyButtonTitleStyle,children:(0,R.jsx)(c.FormattedMessage,{defaultMessage:"Add a property",id:"database.pageProperties.addPropertyButtonTitle"})})]})})})})}function Z(e){const{mergedProperties:t,schema:r,isCompact:i,propertySearchState:l,setPropertySearchState:n}=e,s=L(l.open),p=N(t,r,i),d=(0,o.useCallback)((()=>{x.Z.setState({...x.Z.state,forceShowProperties:!0})}),[]),y=t.length>=V.MIN_PROPERTIES_TO_ENABLE_SEARCH;return(0,R.jsxs)("div",{style:{display:"flex"},children:[y?(0,R.jsx)(E,{setPropertySearchState:n}):null,(0,R.jsxs)("div",{style:s.AddOrToggleOrSearchContainerStyle,children:[(0,R.jsxs)(C.Z,{style:{...s.AddOrTogglePropertyButtonStyle,...e.style},onClick:d,children:[(0,a.Y)(s.ActionPropertyButtonIconStyle),(0,R.jsx)("div",{style:s.AddPropertyButtonTitleStyle,children:(0,R.jsx)(c.FormattedMessage,{defaultMessage:"{num, plural, one {1 more property} other {{num} more properties}}",id:"database.pageProperties.showMorePropertyTitle",values:{num:p}})})]},"show-more"),(0,R.jsx)(H,{propertySearchState:l,setPropertySearchState:n})]})]})}function _(e){const{mergedProperties:t,schema:r,isCompact:i,propertySearchState:l,setPropertySearchState:n}=e,s=N(t,r,i),p=L(l.open),d=(0,o.useCallback)((()=>{x.Z.setState({...x.Z.state,forceShowProperties:!1})}),[]),y=t.length>=V.MIN_PROPERTIES_TO_ENABLE_SEARCH;return(0,R.jsxs)("div",{style:{display:"flex"},children:[y?(0,R.jsx)(E,{setPropertySearchState:n}):null,(0,R.jsxs)("div",{style:p.AddOrToggleOrSearchContainerStyle,children:[(0,R.jsxs)(C.Z,{style:{...p.AddOrTogglePropertyButtonStyle,...e.style},onClick:d,children:[(0,a.Y)({...p.ActionPropertyButtonIconStyle,transform:"rotate(180deg)"}),(0,R.jsx)("div",{style:p.AddPropertyButtonTitleStyle,children:(0,R.jsx)(c.FormattedMessage,{defaultMessage:"{num, plural, one {Hide 1 property} other {Hide {num} properties}}",id:"database.pageProperties.hidePropertyTitle",values:{num:s}})})]},"hide-properties"),(0,R.jsx)(H,{propertySearchState:l,setPropertySearchState:n})]})]})}const A=(0,c.defineMessages)({propertySearchInputPlaceholder:{defaultMessage:"Search properties...",id:"databasePage.propertySearchInputPlaceholder"}}),V={MIN_PROPERTIES_TO_ENABLE_SEARCH:8,MIN_PROPERTIES_TO_RENDER:3},E=o.memo((e=>{const{setPropertySearchState:t}=e,r=(0,n.yK)((e=>({SearchPropertiesButtonIconStyle:{width:14,height:void 0,fill:e.lightIconColor},SearchPropertiesButtonStyle:{display:"flex",alignItems:"center",fontSize:14,paddingTop:6,paddingBottom:6,paddingLeft:2,marginLeft:2,marginRight:2,height:34,width:24,color:e.lightIconColor,fontWeight:d.Z.fontWeight.regular,lineHeight:1,borderRadius:4}})),[]),i=(0,l.VK)((()=>v.default.checkGate("page_property_search")),[]),a=(0,o.useCallback)((()=>{t((e=>({...e,open:!e.open})))}),[t]);return i?(0,R.jsx)(w.Z,{ariaLabel:P.default.formatMessage(A.propertySearchInputPlaceholder),icon:s.e,iconStyle:r.SearchPropertiesButtonIconStyle,style:r.SearchPropertiesButtonStyle,onClick:a}):(0,R.jsx)(R.Fragment,{})})),H=o.memo((e=>{const{propertySearchState:t,setPropertySearchState:r}=e,l=(0,i.O7)(),a=(0,n.yK)((e=>{const{device:t}=l;return{SearchPropertiesInputContainerStyle:{gridRow:1,gridColumn:1,minWidth:t.isMobile?128:168},SearchPropertiesInputStyle:{fontSize:14,lineHeight:1,paddingRight:4,color:e.regularTextColor,height:34}}}),[l]),s=t.open,p=t.query,c=(0,o.useCallback)((()=>{r({open:!1,query:""})}),[r]),d=(0,o.useCallback)((e=>{27===e.keyCode&&r({open:!1,query:""})}),[r]),y=(0,o.useCallback)((e=>{r({open:!0,query:e.target.value})}),[r]);return(0,R.jsx)(b.Z,{isVisible:s,animationStyle:{width:150,opacity:1},enterAnimationStyle:{width:0,opacity:0},exitAnimationStyle:{width:0,opacity:0},render:()=>(0,R.jsx)(j.Z,{capture:s,allowEsc:!0,render:e=>(0,R.jsx)("div",{...e,style:a.SearchPropertiesInputContainerStyle,children:(0,R.jsx)("div",{style:{display:"flex",alignItems:"center",overflow:"hidden"},children:(0,R.jsx)(I.Z,{style:a.SearchPropertiesInputStyle,format:I.B.Transparent,value:p,onChange:y,placeholder:P.default.formatMessage(A.propertySearchInputPlaceholder),focusInitial:s,forceShowClearButton:!0,onCancel:c,onClick:m.Wi,onClearButtonClick:c,onKeyDown:d})})})})})}));function L(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=(0,i.O7)();return(0,n.yK)((r=>{const{device:o}=t;return{AddOrToggleOrSearchContainerStyle:{display:"grid"},AddOrTogglePropertyButtonStyle:{display:"flex",alignItems:"center",color:r.lightTextColor,borderRadius:4,paddingLeft:6,paddingRight:6,height:34,width:o.isMobile?"100%":"auto",gridColumn:1,gridRow:1,visibility:e?"hidden":"visible"},ActionPropertyButtonIconStyle:{width:16,height:16,marginRight:9,marginTop:1,fill:r.lightIconColor},AddPropertyButtonTitleStyle:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",minWidth:0,lineHeight:"16px"}}}),[t,e])}function N(e,t,r){return(0,o.useMemo)((()=>e.filter((e=>"hide"===e.visibility||"hide_if_empty"===e.visibility&&!e.hasValue)).length),[e])}},87167:(e,t,r)=>{r.d(t,{G_:()=>m,nd:()=>S,vg:()=>g});var o=r(67294),i=r(480),l=r(86628),n=r(80951),a=r(6695),s=r(42875),p=r(9291),c=r(53965),d=r(96802),y=r(13447),u=r(10906),h=r(77080);function g(e){return(0,l.VK)((()=>u.eD({collectionStore:e,collectionViewBlockStore:e.getParentBlockStore(),checkNavigableAncestorLocked:!1})),[e])}function S(e){let{store:t,format:r,schema:c,collectionStore:d,propertyIds:y}=e;const u=(0,i.O7)(),g=(0,p.useIntl)(),S=function(e){let{propertyIds:t,format:r}=e;return(0,o.useMemo)((()=>(t?t.map((e=>({property:e,visible:!0}))):void 0)??(r.collection_page_properties||[]).filter((e=>{var t;return null===(t=r.collection_page_sections)||void 0===t||!t.some((t=>t.section===e.property&&("inline"===t.visibility||"minimal"===t.visibility)))}))),[r.collection_page_properties,r.collection_page_sections,t])}({propertyIds:y,format:r});return(0,l.VK)((()=>{const e=t.getModel(),o="on"===h.default.getGroup("default-new-page-property-to-hide-when-empty")?a.iB(r,c,void 0,a.j5.Collection):d.getFormat(),i=o&&o.property_visibility;if(i){return S.map((r=>{var o;return{visibility:"show",hasValue:!Boolean(e&&n.wV({block:e,property:r.property,schema:c,getRecordModel:t.getRecordModel,userId:u.currentUser.id,userTimeZone:(0,s.r)(),intl:g})),name:(null===(o=c[r.property])||void 0===o?void 0:o.name)??"",...r,...i.find((e=>e.property===r.property))}}))}return S?S.map((e=>{var r;return{...e,visibility:"show",hasValue:Boolean(t.getPropertyValue(e.property)),name:(null===(r=c[e.property])||void 0===r?void 0:r.name)??""}})):[]}),[t,r,c,d,S,g,u.currentUser.id])}function m(e){let{collectionStore:t,format:r}=e;const l=(0,i.O7)();return(0,o.useCallback)((e=>{const o=r.collection_page_properties||[],i=[...(0,c.oA)(e.map((e=>o.find((t=>t.property===e))))),...o.filter((t=>!e.includes(t.property)))];y.createAndCommit({userAction:"PageProperties.handleReorder",environment:l,perform:e=>{d.FH({stores:[t],update:{collection_page_properties:i},transaction:e})}})}),[t,l,r.collection_page_properties])}},51741:(e,t,r)=>{r.d(t,{NW:()=>n,Qi:()=>i,Rt:()=>o,WO:()=>a,wI:()=>l});let o=function(e){return e[e.SelectedPage=0]="SelectedPage",e[e.SearchPage=1]="SearchPage",e[e.NewPage=2]="NewPage",e}({});const i=4,l=32,n=400,a=20},1018:(e,t,r)=>{r.d(t,{NW:()=>o.NW,Qi:()=>o.Qi,ev:()=>i.LazyRelationPropertyMenu,pG:()=>i.LazyRelationPropertyMenuOld,wI:()=>o.wI});var o=r(51741),i=r(77907)},72787:(e,t,r)=>{r.d(t,{Y:()=>l});r(67294);var o=r(45238),i=r(85893);const l=(0,o.IU)("chevronDownThin",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M8.004 12a.72.72 0 00.54-.237l6.238-6.487A.735.735 0 0015 4.753c0-.426-.314-.753-.733-.753a.76.76 0 00-.524.213l-5.739 5.955-5.747-5.955A.73.73 0 001.733 4C1.314 4 1 4.327 1 4.753c0 .204.08.384.218.531l6.238 6.479a.751.751 0 00.548.237z"})})},27714:(e,t,r)=>{r.d(t,{N:()=>l});r(67294);var o=r(45238),i=r(85893);const l=(0,o.IU)("link",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M7.69922 10.8945L8.73828 9.84863C7.91797 9.77344 7.34375 9.51367 6.91992 9.08984C5.76465 7.93457 5.76465 6.29395 6.91309 5.14551L9.18262 2.87598C10.3379 1.7207 11.9717 1.7207 13.127 2.87598C14.2891 4.04492 14.2822 5.67188 13.1338 6.82031L11.958 7.99609C12.1768 8.49512 12.2451 9.10352 12.1289 9.62988L14.0908 7.6748C15.7725 6 15.7793 3.62109 14.084 1.92578C12.3887 0.223633 10.0098 0.237305 8.33496 1.91211L5.95605 4.29785C4.28125 5.97266 4.26758 8.35156 5.96289 10.0469C6.36621 10.4434 6.90625 10.7441 7.69922 10.8945ZM8.30078 5.13184L7.26855 6.17773C8.08203 6.25293 8.66309 6.51953 9.08008 6.93652C10.2422 8.09863 10.2422 9.73242 9.08691 10.8809L6.81738 13.1504C5.66211 14.3057 4.03516 14.3057 2.87305 13.1504C1.71094 11.9883 1.71777 10.3545 2.87305 9.20605L4.04199 8.03027C3.83008 7.53125 3.75488 6.92969 3.87109 6.39648L1.91602 8.35156C0.234375 10.0264 0.227539 12.4121 1.92285 14.1074C3.61816 15.8027 5.99707 15.7891 7.67188 14.1143L10.0439 11.7354C11.7256 10.0537 11.7324 7.6748 10.0371 5.98633C9.64062 5.58301 9.10059 5.28223 8.30078 5.13184Z"})})}}]);