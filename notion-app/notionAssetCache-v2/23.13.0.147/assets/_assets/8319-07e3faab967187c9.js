"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[8319],{45257:(e,t,n)=>{n.d(t,{Z:()=>a});n(67294);var i=n(480),o=n(24405),r=n(42853),s=n(64921),l=n(85893);function a(e){const{icon:t,title:n,on:a,hasDiff:u,wrapStyle:c,innerStyle:p,hideChevron:m}=e,h=(0,o.Fg)(),g=(0,i.O7)();return(0,l.jsxs)("div",{style:{borderRadius:14,marginRight:6,display:"inline-flex",...u&&{position:"relative"},...c},children:[(0,l.jsxs)(s.Z,{disabled:e.disabled,style:d(Boolean(a),h,p,g.device.isMobile),hoveredStyle:a?{background:h.outlineBlueButtonHoveredBackground}:void 0,pressedStyle:a?{background:h.outlineBlueButtonPressedBackground}:void 0,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,onClick:e.onClick,onDoubleClick:e.onDoubleClick,children:[t,n,!m&&(0,r.i)({width:10,marginLeft:4,marginTop:1,fill:a?h.blueColor:h.lightIconColor})]}),u&&(0,l.jsx)("div",{style:{position:"absolute",top:-2,right:-2,background:"dark"===h.mode?h.accentColors.orange[500]:h.accentColors.orange[300],border:`1px solid ${h.contentBackground}`,width:9,height:9,borderRadius:9}})]})}function d(e,t,n,i){return{fontSize:14,display:"inline-flex",alignItems:"center",justifyContent:"center",whiteSpace:"nowrap",borderRadius:32,height:i?28:24,lineHeight:i?"28px":"24px",padding:"0 8px",border:`1px solid ${t.outlineButtonBorder}`,color:t.mediumTextColor,...e&&{color:t.blueColor,border:`1px solid ${t.filterPillBorder}`,background:t.filterPillBackground},...n}}},255:(e,t,n)=>{n.d(t,{Z:()=>l});n(67294);var i=n(480),o=n(53465),r=n(73063),s=n(85893);const l=function(e){const t=(0,i.O7)(),n={removeFilterButton:{height:void 0,width:void 0},removeFilterButtonMobile:{marginRight:-12,marginTop:-12,marginBottom:-12,paddingRight:12,paddingTop:12,paddingBottom:12}},{onClick:l,disabled:a}=e,{device:d}=t,u=d.isMobile?{...n.removeFilterButton,...n.removeFilterButtonMobile}:n.removeFilterButton;return(0,s.jsx)(r.Z,{icon:o.X,onClick:l,disabled:a,disableBackground:!0,style:u})}},8319:(e,t,n)=>{n.d(t,{z:()=>q,Z:()=>V});var i=n(67294),o=n(83355),r=n(480),s=n(86628),l=n(47453),a=n(9291),d=n(53965),u=n(1898),c=n(45257),p=n(75024),m=n(49085);class h extends m.default{getInitialState(){return{isMenuOpen:!1,inputTemporaryValue:"",indexToReplace:void 0,popupOriginRect:void 0}}}const g=h;var f=n(52275),b=n(89728),x=n(53437),v=n(58297),C=n(72495),k=n(75689),S=n(91642),T=n(68626),y=n(52629),M=n(23586),j=n(60709),R=n(29798),F=n(72087),B=n(78140),I=n(32163),O=n(43765),Z=n(40721),P=n(47082),w=n(85893);const L={input:{marginTop:8,marginLeft:8,marginRight:8,boxSizing:"border-box",width:"auto"},menu:{width:250,maxHeight:"40vh"},inputMenu:{maxHeight:"20vh"}};const D=function(e){let{labelText:t,value:n,renderResultMenuItem:o,onConfirm:l,items:a,performRequest:d,onDismiss:u,onChange:c,renderToken:p,onRemove:m,onClear:h,disabled:g}=e;const f=(0,r.O7)(),b=(0,s.qz)(void 0,R.Z),x=(0,s.qz)(void 0,F.Z),v=(0,i.useCallback)(((e,i,r)=>(0,w.jsx)(z,{error:e,data:i,ready:r,labelText:t,value:n,renderResultMenuItem:o,onConfirm:l,menuListStore:b})),[t,n,o,l,b]),C={query:n,current:a};return(0,w.jsx)(B.Z,{...N(f,u,t,n,a,c,p,m,h,g),children:(0,w.jsx)(M.Z,{debounce:100,requestStore:x,request:C,performRequest:d,render:v})})};function A(e){const{device:t}=e;return t.isMobile}function _(e){let{labelText:t,value:n,items:i,disabled:o,onChange:s,renderToken:l,onRemove:a,onClear:u}=e;const c=(0,r.O7)(),p=i.map((e=>l(e,{onRemove:()=>a(e)})));return(0,w.jsx)(P.Z,{focus:!A(c)||void 0,focusAfterAnimation:!0,format:P.U.FilterValue,tokens:p,placeholder:t.tokenInputPlaceholder,onRemoveLastToken:()=>function(e,t){const n=d.Z$(e);n&&t(n)}(i,a),onClearButtonClick:u,value:n,onChange:s,showClearButton:!0,disabled:Boolean(o),style:L.inputMenu})}function N(e,t,n,i,o,r,s,l,a,d){if(A(e)){return{menuType:j.og.Modal,title:n.title,right:(0,w.jsx)(Z.DoneMenuText,{}),onClickRight:t,header:(0,w.jsx)(_,{labelText:n,value:i,items:o,disabled:d,onChange:r,renderToken:s,onRemove:l,onClear:a})}}return{menuType:j.og.Popup,onClickOutside:t,header:(0,w.jsx)(_,{labelText:n,value:i,items:o,disabled:d,onChange:r,renderToken:s,onRemove:l,onClear:a}),...L.menu}}function z(e){let{error:t,data:n,ready:o,labelText:r,value:l,renderResultMenuItem:d,onConfirm:u,menuListStore:c}=e;const p=(0,s.qz)(c,R.Z),m=(0,i.useCallback)((e=>(0,w.jsx)(C.Z,{...e,title:r.resultSectionTitle,loading:!o})),[r,o]);if(t)return T.log({level:"error",from:r.componentDebugName,type:"requestFailed",error:(0,y.Ui)(t),data:{miscDataToConvertToString:{query:l}}}),(0,w.jsx)(m,{children:(0,w.jsx)(O.Z,{title:(0,w.jsx)(a.FormattedMessage,{defaultMessage:"Something went wrong.",id:"search.inputMenu.errorMessage"})})});if(!n)return(0,w.jsx)(m,{children:(0,w.jsx)(O.Z,{title:(0,w.jsx)(a.FormattedMessage,{defaultMessage:"Loadingâ€¦",id:"search.inputMenu.loading.message"})})});if(n&&0===n.length)return(0,w.jsx)(m,{children:(0,w.jsx)(O.Z,{title:(0,w.jsx)(a.FormattedMessage,{defaultMessage:"No results found.",id:"search.inputMenu.noResults.message"})})});const h={key:"results",items:n.map((e=>function(e,t,n){return{key:e,action:()=>n(e),render:n=>t(e,n)}}(e,d,u))),render:m};return(0,w.jsx)(I.Z,{type:I.i.Vertical,store:p,initialFocus:0,sections:[h]})}let q=function(e){return e.Button="Button",e.Section="Section",e.Pill="Pill",e}({});class U extends o.Z{constructor(){super(...arguments),this.animationFrameRef={current:void 0},this.originRef=i.createRef(),this.storeTypes={componentStore:g},this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleMenuClose=e=>Q(this.stores.componentStore,this.props.onMenuDismiss,e),this.scheduleMeasurement=(e,t)=>{this.animationFrameRef.current=requestAnimationFrame(function(e,t,n){return i=>{if(!n)return;if(!n.current)return;const o=e?e(t.state):t.state;t.setState({...o,popupOriginRect:n.current.getBoundingClientRect()})}}(t,this.stores.componentStore,this.originRef))}}didMount(){window.addEventListener("resize",this.scheduleMeasurement)}willUnmount(){window.removeEventListener("resize",this.scheduleMeasurement),this.animationFrameRef.current&&(cancelAnimationFrame(this.animationFrameRef.current),this.animationFrameRef.current=void 0)}didUpdate(e){(e.items.length!==this.props.items.length||e.mode!==this.props.mode)&&this.scheduleMeasurement()}renderComponent(){const{device:e}=this.environment,{mode:t}=this.props;return e.isMobile?(0,w.jsx)(ie,{searchTokenFilterProps:this.props,componentStore:this.stores.componentStore}):this.renderDesktop(t)}renderDesktop(e){const{title:t,disabled:n}=this.props,{componentStore:{state:i}}=this.stores,o=n||i.isMenuOpen;let r;const s=(()=>e===q.Section?(r=t,this.renderSectionOrigin()):e===q.Button?this.renderButtonOrigin():e===q.Pill?this.renderPillOrigin():void(0,u.t1)(e))();return(0,w.jsxs)(S.Z,{title:r,marginAfter:e===q.Section,style:K(this.environment,this.props.mode).sectionMenuItem,children:[e!==q.Pill&&this.renderFilters({disableFilters:o,showLabel:!1}),s,(0,w.jsx)(x.ZP,{popupType:x.ZP.PopupType.Popup,placementToOrigin:x.ZP.Placement.Bottom,alignmentToOrigin:x.ZP.Alignment.Start,open:G(this.stores.componentStore),originRect:i.popupOriginRect,render:()=>(0,w.jsx)(ne,{searchTokenFilterProps:this.props,componentStore:this.stores.componentStore}),onDismiss:this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleMenuClose,keepFocus:!0,preventScaleTransition:!0})]})}renderButtonOrigin(){const{icon:e,title:t,disabled:n,focused:i}=this.props,o=K(this.environment,this.props.mode),r=W(this.theme),s={...o.menuItem,...r.buttonMenuItem};return(0,w.jsx)("div",{ref:this.originRef,style:o.menuItemWrapper,children:(0,w.jsx)(f.Z,{disabled:n||G(this.stores.componentStore),icon:e(o.icon),title:t,focused:i,onClick:e=>oe(this.scheduleMeasurement,void 0,this.props.onMenuOpen),style:s})})}renderPillOrigin(){const{icon:e,title:t,disabled:n,iconStyles:i}=this.props,o=K(this.environment,this.props.mode),r=this.props.mode===q.Pill&&this.props.hasItemsSelected;return(0,w.jsx)("div",{ref:this.originRef,style:o.menuItemWrapper,children:(0,w.jsx)(c.Z,{on:r,icon:e({...o.icon,...i}),title:(0,w.jsx)("span",{children:t}),onClick:e=>oe(this.scheduleMeasurement,void 0,this.props.onMenuOpen),wrapStyle:{opacity:n?.4:1}})})}renderSectionOrigin(){const{addItemLabel:e,disabled:t}=this.props,n=K(this.environment,this.props.mode),o=W(this.theme);return(0,w.jsxs)(i.Fragment,{children:[(0,w.jsx)("div",{ref:this.originRef,style:n.menuItemWrapper}),(0,w.jsx)(f.Z,{disabled:t||G(this.stores.componentStore),icon:(0,l.R)(n.iconSmall),title:e,focused:!1,onClick:e=>oe(this.scheduleMeasurement,void 0,this.props.onMenuOpen),style:{...n.appendListItemButton,...o.appendListItemButton}})]})}renderFilters(e){const{items:t,renderFilter:n}=this.props,{device:i}=this.environment,o=t.map(((t,o)=>(0,w.jsx)("li",{children:n(t,{disabled:e.disableFilters,onRemove:()=>$(t,this.props.items,this.props.onChange),onClick:()=>i.isMobile?X(this.stores.componentStore):oe(this.scheduleMeasurement,o,this.props.onMenuOpen)})},`${t}_${o}`)));return(0,w.jsx)("ul",{style:p.mK,children:o})}}U.displayName="SearchTokenFilter";const V=U;function H(e,t,n){n(t.filter((t=>t!==e)))}function E(e){e([])}function W(e){return{buttonMenuItem:{color:e.mediumTextColor},appendListItemButton:{color:e.lightTextColor}}}function $(e,t,n){H(e,t,n)}function K(e,t){return{menuItem:{minHeight:void 0,paddingTop:e.device.isMobile?12:4,paddingBottom:e.device.isMobile?12:4},menuItemWrapper:{display:"flex"},sectionMenuItem:{display:"flex"},appendListItemButton:{minHeight:void 0,paddingTop:4,paddingBottom:4,fontSize:p.yv(e,"UIRegular")},icon:{height:16,width:16,marginRight:"Pill"===t?6:-2,fill:"currentColor"},iconSmall:{height:12,width:12},summary:{display:"inline"},summaryItem:{display:"inline"}}}function X(e){e.setState({...e.state,isMenuOpen:!0})}function G(e){return e.state.isMenuOpen}function J(e){e.setState({...e.state,inputTemporaryValue:"",indexToReplace:void 0})}function Q(e,t,n){J(e),e.setState({...e.state,isMenuOpen:!1,indexToReplace:void 0}),t&&t(n)}function Y(e,t,n,i,o){const{indexToReplace:r}=o.state;"number"==typeof r&&r<t.length?function(e,t,n,i){i(n.slice(0,e).concat(t,n.slice(e+1)))}(r,e,t,n):t.includes(e)&&q.Pill?H(e,t,n):function(e,t,n){const i=t.concat(e);n(d.jj(i))}(e,t,n),i||J(o)}function ee(e){let{disableFilters:t,icon:n,title:i,mode:o,componentStore:s}=e;const l=K((0,r.O7)(),o);return(0,w.jsx)(f.Z,{disabled:t,focused:!1,icon:n({...l.icon}),title:i,onClick:e=>X(s)})}function te(e){let{disableFilters:t,title:n,items:o,renderItemForSummary:s,mode:l,onChange:a,componentStore:d}=e;const u=(0,r.O7)(),c=(0,i.useCallback)((()=>X(d)),[d]),m=K(u,l),h={...p.mK,...m.summary},g=o.length-1,f=(0,w.jsx)("ul",{style:h,children:o.map(((e,t)=>(0,w.jsx)("li",{style:m.summaryItem,children:(0,w.jsxs)(i.Fragment,{children:[s(e),t!==g&&","," "]})},e)))});return(0,w.jsx)(k.Z,{disabled:t,onClick:c,onClickClear:()=>E(a),label:n,title:f})}function ne(e){let{searchTokenFilterProps:t,componentStore:n}=e;const{items:o,onChange:r,keepInputOnItemConfirm:l,onMenuDismiss:d,renderToken:u,renderFooter:c,allowApplyBatchSelection:p}=t,m=(0,i.useCallback)((e=>Y(e,o,r,l,n)),[o,r,l,n]),h=(0,i.useCallback)((e=>Q(n,d,e)),[n,d]),g=(0,i.useCallback)((e=>function(e,t){const{target:n}=e;t.setState({...t.state,inputTemporaryValue:String(n.value)})}(e,n)),[n]),f=(0,s.VK)((()=>n.state),[n]);return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(D,{...t,value:f.inputTemporaryValue,onChange:g,onDismiss:h,onConfirm:m,onClear:()=>{!function(e){e.setState({...e.state,inputTemporaryValue:""})}(n),E(r)},onRemove:e=>$(e,o,r),renderToken:u}),c&&(0,w.jsxs)(C.Z,{topBorder:!0,style:{padding:6,justifyContent:"space-between",display:"flex"},children:[(0,w.jsx)(b.Z,{onClick:()=>{E(r)},children:(0,w.jsx)(a.FormattedMessage,{id:"searchTokenFilter.clearButton",defaultMessage:"Clear"})}),p&&(0,w.jsx)(v.Z,{onClick:()=>{Q(n,d,"applyButton")},children:(0,w.jsx)(a.FormattedMessage,{id:"searchTokenFilter.applyButton",defaultMessage:"Apply"})})]})]})}function ie(e){let{searchTokenFilterProps:t,componentStore:n}=e;const{mode:o,onMenuDismiss:r,disabled:l,title:a,items:d,renderItemForSummary:u,onChange:c,icon:p}=t,m=(0,i.useCallback)((e=>Q(n,r,e)),[n,r]),h=(0,i.useCallback)((()=>(0,w.jsx)(ne,{searchTokenFilterProps:t,componentStore:n})),[t,n]),g=(0,s.VK)((()=>G(n)),[n]),f=l||g,b=o===q.Section?(0,w.jsx)(te,{title:a,items:d,renderItemForSummary:u,mode:o,onChange:c,componentStore:n,disableFilters:f}):(0,w.jsx)(ee,{icon:p,title:a,mode:o,componentStore:n,disableFilters:f});return(0,w.jsx)(x.ZP,{popupType:x.ZP.PopupType.SlideUp,open:g,origin:b,render:h,onDismiss:m,keepFocus:!0})}function oe(e,t,n){n&&n(),e(void 0,(e=>({...e,isMenuOpen:!0,indexToReplace:t})))}},75689:(e,t,n)=>{n.d(t,{Z:()=>u});n(67294);var i=n(480),o=n(24405),r=n(37810),s=n(52275),l=n(24006),a=n(255),d=n(85893);const u=function(e){const{disabled:t,label:n,title:r,onClick:l,isToggle:a,isToggleActive:u,onClickClear:m,...h}=e,g=(0,o.Fg)(),f=(0,i.O7)(),b=function(e){return{menuItemLabel:{color:e.lightTextColor}}}(g),x=c(f),v=(0,d.jsx)("span",{style:b.menuItemLabel,children:n});return(0,d.jsx)(s.Z,{focused:!1,...h,inline:a,disabled:t,icon:v,title:r,right:(0,d.jsx)(p,{disabled:!!t,isToggle:!!a,isToggleActive:!!u,onClick:l,onClickClear:m}),onClick:l,dontShrinkIcon:!0,dontShrinkRight:!0,shouldWrapTitle:!0,style:x.menuItem,desktopIconStyle:x.menuItemLabel})};function c(e){return{menuItem:{background:void 0,minHeight:void 0,fontSize:e.device.isMobile?r.Z.fontSize.UISmall.mobile:r.Z.fontSize.UIRegular.desktop,paddingTop:e.device.isMobile?12:4,paddingBottom:e.device.isMobile?12:4},labeledMenuItemTitle:{display:"inline-flex",alignItems:"center"},menuItemLabel:{marginTop:0},rightWrapper:{display:"flex",alignItems:"center",marginTop:"-50%",marginBottom:"-50%",height:44}}}function p(e){let{disabled:t,isToggle:n,isToggleActive:o,onClick:r,onClickClear:s=(()=>{})}=e;const u=c((0,i.O7)()).rightWrapper;return n?(0,d.jsx)("div",{style:u,children:(0,d.jsx)(l.Z,{on:!!o,onClick:r})}):(0,d.jsx)(a.Z,{disabled:t,onClick:s})}},91642:(e,t,n)=>{n.d(t,{Z:()=>r});n(67294);var i=n(72495),o=n(85893);const r=function(e){const t={desktopTitleStyle:{marginBottom:4},marginAfter:{marginBottom:16}},{title:n,marginAfter:r,desktopStyle:s,desktopTitleStyle:l,...a}=e,d=(r||s)&&{...r&&t.marginAfter,...s},u=l?{...t.desktopTitleStyle,...l}:t.desktopTitleStyle;return(0,o.jsx)(i.Z,{isTitleUppercase:!0,disableDesktopPadding:!0,enableActionSheetTitle:!0,desktopStyle:d,desktopTitleStyle:u,shouldShowBottomDivider:!1,title:n,...a})}}}]);