"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[3370],{76463:(e,t,i)=>{i.d(t,{P0:()=>A,RN:()=>T,VG:()=>P,Yw:()=>k,jX:()=>F,k2:()=>z,lz:()=>I,v2:()=>_});var a=i(87479),n=i(72141),o=i(45953),s=i(21202),r=i(77420),l=i(75246),d=i(19889),c=i(9291),p=i(1898),u=i(47307),m=i(33929),g=i(46654),h=i(6258),b=i(54642),f=i(92625),x=i(76464),v=i(9953),y=i(64964),w=i(28014),M=i(13447),S=i(61202);const j=(0,c.defineMessages)({duplicatingTemplate:{id:"botActions.duplicatingTemplate.loadingMessage",defaultMessage:"Duplicating template..."},duplicatingTemplateError:{id:"botActions.duplicateTemplateAndShareWithBot.snackbar.failure",defaultMessage:"Failed to duplicate template for to your workspace"}});function C(e,t){const{environment:i,spaceStore:a,spaceRole:n}=t,o=function(e){const{name:t,spaceStore:i,userId:a,icon:n,type:o}=e,s=Date.now(),r={name:t,created_at:s,created_by_table:d.KJ,created_by_id:a,alive:!0,icon:n,space_id:i.id,last_edited_at:s,last_edited_by_id:a,last_edited_by_table:d.KJ};switch(o){case"guest":return{...r,type:"guest",capabilities:e.capabilities,parent_table:l.bx,parent_id:i.id,integration_id:void 0};case"scim":return{...r,type:"scim",parent_table:d.KJ,parent_id:a};default:(0,p.t1)(o)}}(t),s=v.ae({environment:i,table:r.cZ,value:o,inMemoryRecordCache:i.defaultRecordCache.inMemoryRecordCache,transaction:e});return x.ep({environment:i,store:a,permissionItems:[{type:"bot_permission",role:n,bot_id:s.id}],transaction:e}),{botStore:s}}function I(e){const{environment:t}=e,{serverCommitResult:i,performResult:{botStore:a}}=M.createAndCommit({userAction:"botActions.createSpaceBot",environment:t,perform:t=>C(t,e)});return{botStore:a,transactionPromise:i}}async function A(e){const{environment:t,botId:i,onSuccess:a}=e,n=await b.deleteBot(t,{botId:i});"failed"===n.type?u.showError(n):"success"===n.type&&a&&(await S.pJ({environment:t}),a())}async function k(e){const{environment:t,table:i,id:a,type:n}=e,o=await b.getBots(t,{table:i,id:a,type:n});if("failed"===o.type)throw u.showError(o),o;return{botIds:o.data.botIds,recordMap:o.data.recordMap}}async function P(e){const{environment:t,botId:i}=e,a=await b.getBotToken(t,{botId:i});if("failed"!==a.type)return a.data.token;u.showError(a)}function _(e){const{botValue:t,store:i,environment:n}=e,{id:o,parent_id:s,parent_table:r,capabilities:l}=t,d={type:"bot_permission",bot_id:o,parent_id:s,parent_table:r,role:(0,a.uH)(l)};M.createAndCommit({userAction:"TopbarMoreButton.handleAddingConnection",environment:n,perform:e=>{x.ep({environment:n,store:i,permissionItems:[d],transaction:e})}})}function T(e){const{botId:t,store:i,environment:a}=e,o=i.getPermissionItems().filter((0,p.AO)((e=>(0,n.FB)(e)?{true:e}:{false:e})));for(const n of o)if(n.bot_id===t){const e={...n,role:"none"};M.createAndCommit({userAction:"TopbarMoreButton.handleRemovingConnection",environment:a,perform:t=>{x.ep({environment:a,store:i,permissionItems:[e],transaction:t})}})}}function F(e){const{currentSpaceStore:t,environment:i,pages:a,botStore:n,addPermission:o}=e;if(!t)return;const r=(0,g.zT)({botStore:n,addPermission:o});a.forEach((e=>{const a=h.t1.createChildStore(t,{table:s.iU,id:e});M.createAndCommit({userAction:"botActions.updateBlockPermissionsForBot",environment:i,perform:e=>{x.ep({environment:i,store:a,permissionItems:[r],transaction:e})}})}))}async function z(e){const{environment:t,spaceStore:i,spaceViewStore:a,templatePageId:n,botValue:s,pages:l}=e;if(!i)return;const d=h.t1.createChildStore(i,{table:r.cZ,id:s.id});if(n)return await async function(e){const{environment:t,spaceStore:i,spaceViewStore:a,templatePageId:n,botStore:s}=e;if(!i||!a)return;try{f.j({message:j.duplicatingTemplate});const e=await b.loadBlockSubtree(t,{block:{id:n,spaceId:i.id},shallow:!1});if("failed"===e.type)return;const r=o.PF.create(e.data.subtreeRecordMap),{performResult:l}=M.createAndCommit({userAction:"botActions.duplicateTemplateAndShareWithBot",environment:t,perform:e=>{const o=w.cc({environment:t,recordMap:r,copyPageId:n,isPrivate:!0,spaceStore:i,spaceViewStore:a,transaction:e,allowCopyExternalObjectInstances:!1}),l=a.getPrivatePageIds();l.length>0&&v.sW({store:a,data:{private_pages:[o.id,...l]},transaction:e});const d=(0,g.zT)({botStore:s,addPermission:!0});return x.ep({environment:t,store:o,permissionItems:[d],transaction:e}),o}});return l}catch(r){y.oV({label:m.default.formatMessage(j.duplicatingTemplateError)})}finally{f.x()}}({environment:t,templatePageId:n,botStore:d,spaceStore:i,spaceViewStore:a});F({environment:t,currentSpaceStore:i,botStore:d,pages:l,addPermission:!0})}},15025:(e,t,i)=>{i.d(t,{VR:()=>p,ac:()=>c,zq:()=>d});i(67294);var a=i(24405),n=i(13148),o=i(98519),s=i(9291),r=i(85893);function l(e){const{enabled:t,labelIfEnabled:i,labelIfDisabled:n}=e,o=(0,a.yK)((e=>({container:{color:t?e.mediumTextColor:e.lightTextColor}})),[t]);return(0,r.jsxs)("div",{style:o.container,children:[u(t)," ",t?i:n]})}function d(e){const t="none"!==e;return[(0,r.jsx)(l,{enabled:t&&e.read_content,labelIfEnabled:(0,r.jsx)(s.FormattedMessage,{id:"capabilitiesTooltip.mixedAccess.readContent.enabled",defaultMessage:"Can read content."}),labelIfDisabled:(0,r.jsx)(s.FormattedMessage,{id:"capabilitiesTooltip.mixedaccess.readContent.disabled",defaultMessage:"Cannot read content."})},"read_content"),(0,r.jsx)(l,{enabled:t&&e.insert_content,labelIfEnabled:(0,r.jsx)(s.FormattedMessage,{id:"capabilitiesTooltip.mixedaccess.insertContent.enabled",defaultMessage:"Can insert content."}),labelIfDisabled:(0,r.jsx)(s.FormattedMessage,{id:"capabilitiesTooltip.mixedaccess.insertContent.disabled",defaultMessage:"Cannot insert content."})},"insert_content"),(0,r.jsx)(l,{enabled:t&&e.update_content,labelIfEnabled:(0,r.jsx)(s.FormattedMessage,{id:"capabilitiesTooltip.mixedaccess.updateContent.enabled",defaultMessage:"Can update content."}),labelIfDisabled:(0,r.jsx)(s.FormattedMessage,{id:"capabilitiesTooltip.mixedaccess.updateContent.disabled",defaultMessage:"Cannot update content."})},"update_content"),(0,r.jsx)(l,{enabled:t&&e.insert_comment,labelIfEnabled:(0,r.jsx)(s.FormattedMessage,{id:"capabilitiesTooltip.insertComment.enabled",defaultMessage:"Can comment."}),labelIfDisabled:(0,r.jsx)(s.FormattedMessage,{id:"capabilitiesTooltip.insertComment.disabled",defaultMessage:"Cannot comment."})},"insert_comment"),(0,r.jsx)(l,{enabled:t&&e.read_comment,labelIfEnabled:(0,r.jsx)(s.FormattedMessage,{id:"capabilitiesTooltip.readComment.enabled",defaultMessage:"Can read comments."}),labelIfDisabled:(0,r.jsx)(s.FormattedMessage,{id:"capabilitiesTooltip.readComment.disabled",defaultMessage:"Cannot read comments."})},"read_comment")]}function c(e){return[(0,r.jsx)(l,{enabled:e.read_user_without_email,labelIfEnabled:(0,r.jsx)(s.FormattedMessage,{id:"capabilitiesTooltip.userAccess.readUsers.enabled",defaultMessage:"Can view users."}),labelIfDisabled:(0,r.jsx)(s.FormattedMessage,{id:"capabilitiesTooltip.userAccess.readUsers.disabled",defaultMessage:"Cannot view users."})},"read_user_without_email"),(0,r.jsx)(l,{enabled:e.read_user_with_email,labelIfEnabled:(0,r.jsx)(s.FormattedMessage,{id:"capabilitiesTooltip.userAccess.readUserEmailAddresses.enabled",defaultMessage:"Can view user email addresses."}),labelIfDisabled:(0,r.jsx)(s.FormattedMessage,{id:"capabilitiesTooltip.userAccess.readUserEmailAddresses.disabled",defaultMessage:"Cannot view user email addresses."})},"read_user_with_email")]}function p(e){return[(0,r.jsx)(l,{enabled:e.link_preview,labelIfEnabled:(0,r.jsx)(s.FormattedMessage,{id:"capabilitiesTooltip.linkPreview.enabled",defaultMessage:"Can preview links."}),labelIfDisabled:(0,r.jsx)(s.FormattedMessage,{id:"capabilitiesTooltip.linkPreview.disabled",defaultMessage:"Cannot preview links."})},"link_preview"),(0,r.jsx)(l,{enabled:e.synced_database,labelIfEnabled:(0,r.jsx)(s.FormattedMessage,{id:"capabilitiesTooltip.syncedDatabase.enabled",defaultMessage:"Can sync databases."}),labelIfDisabled:(0,r.jsx)(s.FormattedMessage,{id:"capabilitiesTooltip.syncedDatabase.disabled",defaultMessage:"Cannot sync databases."})},"synced_database")]}function u(e){const t={width:12,display:"inline",verticalAlign:"middle"};return e?(0,o.k)(t):(0,n.U)(t)}},18330:(e,t,i)=>{i.r(t),i.d(t,{default:()=>Le});var a=i(67294),n=i(480),o=i(86628),s=i(24405),r=i(63123),l=i(49085),d=i(15070),c=i(59054),p=i(56589),u=i(77420),m=i(9844),g=i(19889),h=i(90965),b=i(94826),f=i(31701),x=i(7032),v=i(1898),y=i(37810),w=i(18265),M=i(12714),S=i(29974),j=i(91924),C=i(48779),I=i(97852),A=i(80444),k=i(6258),P=i(81023),_=i(88893),T=i(88280),F=i(3403),z=i(80750),N=i(82036),V=i(9291),B=i(36110),Z=i(63296),L=i(58297),R=i(42402),W=i(85893);function U(e){const{integrationValue:t,oauthParams:i}=e,a=(0,n.O7)(),{oauthErrorType:o,title:r,body:l,primaryAction:d}=function(e){const t=(0,W.jsx)(V.FormattedMessage,{id:"oauthAuthorizationPage.error.genericError.title",defaultMessage:"Something went wrong"});if("invalidClientId"===e.type)return{oauthErrorType:N._.invalid_request,title:t,body:(0,W.jsx)(V.FormattedMessage,{id:"oauthAuthorizationPage.error.invalidClientId.body",defaultMessage:"Missing or incomplete Client ID. See <inlinetextlink>developer docs</inlinetextlink> for more help.",values:{inlinetextlink:e=>(0,W.jsx)(R.Z,{href:"https://developers.notion.com/#handling-errors",children:e})}})};if("clientNotFound"===e.type)return{oauthErrorType:N._.invalid_request,title:t,body:(0,W.jsx)(V.FormattedMessage,{id:"oauthAuthorizationPage.error.clientNotFound.body",defaultMessage:"Missing or incomplete Client ID. See <inlinetextlink>developer docs</inlinetextlink> for more help.",values:{inlinetextlink:e=>(0,W.jsx)(R.Z,{href:"https://developers.notion.com/#handling-errors",children:e})}})};if("invalidResponseType"===e.type)return{oauthErrorType:N._.invalid_request,title:t,body:(0,W.jsx)(V.FormattedMessage,{id:"oauthAuthorizationPage.error.invalidResponseType",defaultMessage:"Missing or invalid response_type. See <inlinetextlink>developer docs</inlinetextlink> for more help.",values:{inlinetextlink:e=>(0,W.jsx)(R.Z,{href:"https://developers.notion.com/#handling-errors",children:e})}})};if("integrationAlreadyInstalled"===e.type)return{oauthErrorType:N._.access_denied,title:(0,W.jsx)(V.FormattedMessage,{id:"oauthAuthorizationPage.error.integrationAlreadyInstalled.title",defaultMessage:"This integration has already been added to {workspaceName}",values:{workspaceName:e.spaceName}}),body:(0,W.jsx)(V.FormattedMessage,{id:"oauthAuthorizationPage.error.integrationAlreadyInstalled.body",defaultMessage:"You can review and remove added integrations in Settings."}),primaryAction:{onClick:e.primaryAction,title:(0,W.jsx)(V.FormattedMessage,{id:"oauthAuthorizationPage.error.integrationAlreadyInstalled.openWorkspaceSettingsButton.label",defaultMessage:"Open Settings"})}};if("notAnAdmin"===e.type)return{oauthErrorType:N._.access_denied,title:(0,W.jsx)(V.FormattedMessage,{id:"oauthAuthorizationPage.error.notAnAdmin.title",defaultMessage:"As a guest, you can't install this integration to {workspaceName}.",values:{workspaceName:e.spaceName}}),body:(0,W.jsx)(V.FormattedMessage,{id:"oauthAuthorizationPage.error.notAnAdmin.body",defaultMessage:"You can ask a workspace owner to install the integration, or ask to be upgraded as a member."}),primaryAction:{onClick:e.primaryAction,title:(0,W.jsx)(V.FormattedMessage,{id:"oauthAuthorizationPage.error.notAnAdmin.switchWorkspaceButton.label",defaultMessage:"Switch workspace"})}};if("integrationNotApproved"===e.type)return{oauthErrorType:N._.access_denied,title:(0,W.jsx)(V.FormattedMessage,{id:"oauthAuthorizationPage.error.integrationNotApproved.title",defaultMessage:"As a member, you can't install this integration to {workspaceName}",values:{workspaceName:e.spaceName}}),body:(0,W.jsx)(V.FormattedMessage,{id:"oauthAuthorizationPage.error.integrationNotApproved.body",defaultMessage:"You can ask a workspace owner to install the integration for you."}),primaryAction:{onClick:e.primaryAction,title:(0,W.jsx)(V.FormattedMessage,{id:"oauthAuthorizationPage.error.notAnAdmin.switchWorkspaceButton.label",defaultMessage:"Switch workspace"})}};if("invalidRedirectUri"===e.type)return{oauthErrorType:N._.invalid_request,title:t,body:(0,W.jsx)(V.FormattedMessage,{id:"oauthAuthorizationPage.error.invalidRedirectUri.body",defaultMessage:"Missing or invalid redirect_uri. See <inlinetextlink>developer docs</inlinetextlink> for more help.",values:{inlinetextlink:e=>(0,W.jsx)(R.Z,{href:"https://developers.notion.com/#handling-errors",children:e})}})};(0,v.t1)(e.type)}(e),c=function(){const{isMobile:e}=(0,n.Fy)(),t=e?25:48,i=e?18:20;return(0,s.yK)((()=>({container:{textAlign:"center",flex:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},icon:{fill:f.ZP.red,width:t,height:t,marginBottom:20,display:"inline-block"},title:{fontSize:i,margin:"0 50px 32px",textAlign:"center",fontWeight:y.Z.fontWeight.medium,marginBottom:12},body:{marginTop:0,marginBottom:24,width:"80%"}})),[t,i])}();return(0,W.jsxs)("section",{style:c.container,children:[(0,z.l)(c.icon),(0,W.jsx)("header",{style:c.title,children:r}),(0,W.jsx)("p",{style:c.body,children:l}),d&&(0,W.jsx)("div",{style:c.body,children:(0,W.jsx)(L.Z,{isLarge:!0,onClick:d.onClick,children:d.title})}),(0,W.jsx)(Z.Z,{onClick:()=>{B.V({environment:a,integration:t,errorType:o,params:i})},children:(0,W.jsx)(V.FormattedMessage,{id:"oauthAuthorizationPage.error.cancelButton.label",defaultMessage:"Cancel"})})]})}var E=i(15145),K=i(59753),D=i(87479),O=i(37850),H=i(57549),Y=i(76463),G=i(47307),q=i(89475),J=i(92625),$=i(75754),X=i(8055),Q=i(41623),ee=i(33929),te=i(30874),ie=i(31278),ae=i(45238);const ne=(0,ae.IU)("pageAdd",{viewBox:"0 0 16 17",svg:(0,W.jsx)("path",{d:"M4.135 8.707c2.46 0 4.491 2.023 4.491 4.484 0 .828-.232 1.607-.636 2.277h5.647c1.463 0 2.221-.773 2.221-2.242V7.107h-5.113c-.854 0-1.265-.417-1.265-1.271V.668H6.356c-1.462 0-2.221.772-2.221 2.242v5.797zm6.733-2.598h4.915c-.04-.307-.266-.601-.615-.963l-3.74-3.794c-.334-.342-.642-.575-.956-.616V5.72c0 .26.136.39.396.39zM4.135 16.712c1.914 0 3.52-1.593 3.52-3.52 0-1.928-1.593-3.514-3.52-3.514-1.928 0-3.52 1.592-3.52 3.513a3.537 3.537 0 003.52 3.52zm0-1.285a.441.441 0 01-.465-.465v-1.299h-1.3a.441.441 0 01-.465-.465c0-.287.192-.471.465-.471h1.3v-1.292c0-.274.184-.465.465-.465.28 0 .465.184.465.465v1.292h1.298c.28 0 .465.184.465.471 0 .28-.184.465-.465.465H4.6v1.299a.441.441 0 01-.465.465z"})}),oe=(0,ae.IU)("taskList",{viewBox:"0 0 18 17",svg:(0,W.jsx)("path",{d:"M3.48438 7.29688C5.35938 7.29688 6.92188 5.73438 6.92188 3.85938C6.92188 1.96875 5.35938 0.40625 3.48438 0.40625C1.59375 0.40625 0.0390625 1.96875 0.0390625 3.85938C0.0390625 5.73438 1.60156 7.29688 3.48438 7.29688ZM3.07031 5.70312C2.89844 5.70312 2.77344 5.61719 2.65625 5.47656L1.78125 4.42969C1.69531 4.32812 1.66406 4.23438 1.66406 4.10156C1.66406 3.85938 1.85156 3.67188 2.08594 3.67188C2.24219 3.67188 2.35156 3.73438 2.45312 3.875L3.05469 4.625L4.44531 2.39062C4.54688 2.23438 4.67969 2.15625 4.83594 2.15625C5.07031 2.15625 5.26562 2.33594 5.26562 2.55469C5.26562 2.66406 5.24219 2.76562 5.16406 2.88281L3.5 5.46875C3.39844 5.61719 3.25 5.70312 3.07031 5.70312ZM9.39844 4.54688H17.2578C17.6406 4.54688 17.9531 4.24219 17.9531 3.85938C17.9531 3.47656 17.6406 3.17188 17.2578 3.17188H9.39844C9.01562 3.17188 8.71875 3.47656 8.71875 3.85938C8.71875 4.24219 9.01562 4.54688 9.39844 4.54688ZM3.48438 16.3281C5.35938 16.3281 6.92188 14.7656 6.92188 12.8828C6.92188 10.9922 5.35938 9.4375 3.48438 9.4375C1.59375 9.4375 0.0390625 11 0.0390625 12.8828C0.0390625 14.7656 1.60156 16.3281 3.48438 16.3281ZM3.48438 15C2.32812 15 1.36719 14.0312 1.36719 12.8828C1.36719 11.7344 2.33594 10.7578 3.48438 10.7578C4.625 10.7578 5.60156 11.7344 5.60156 12.8828C5.60156 14.0312 4.625 15 3.48438 15ZM9.39844 13.5859H17.2578C17.6406 13.5859 17.9531 13.2812 17.9531 12.8984C17.9531 12.5156 17.6406 12.2109 17.2578 12.2109H9.39844C9.01562 12.2109 8.71875 12.5156 8.71875 12.8984C8.71875 13.2812 9.01562 13.5859 9.39844 13.5859Z"})});var se=i(46654),re=i(86993);function le(e){const{integrationValue:t,validIntegrationTemplateId:i,botAccessOption:n,setBotAccessOption:o}=e,[{value:r}]=(0,c.r5)((async()=>!!i&&await(0,se.JI)(i)),[i]);a.useEffect((()=>{o(r?"duplicate_template":"pick_pages")}),[r,o]);const l=(0,s.yK)((()=>({container:{display:"grid",gridTemplateRows:"1fr 1fr",gap:8,marginTop:8},icon:{fill:f.ZP.red,width:20,height:20,marginRight:12},errorContainer:{display:"flex",alignItems:"center"}})),[]);return(0,W.jsxs)("div",{style:l.container,children:[(0,W.jsx)(de,{disabled:!r,title:(0,W.jsx)(V.FormattedMessage,{id:"oauthAuthorizationPage.botAccessOption.useTemplate.title",defaultMessage:"Use a template provided by the developer"}),subtitle:r?(0,W.jsx)(V.FormattedMessage,{id:"oauthAuthorizationPage.botAccessOption.useTemplate.subtitle",defaultMessage:"{integrationName} will duplicate this template into the Private pages of your workspace. The integration will then be able to {capabilities} content in this new page.",values:{capabilities:(0,W.jsx)(V.FormattedList,{value:(0,re.O)(t.capabilities),type:"conjunction"}),integrationName:t.name}}):(0,W.jsx)("div",{style:l.errorContainer,children:(0,W.jsx)("div",{children:(0,W.jsx)(V.FormattedMessage,{id:"oauthAuthorizationPage.error.invalidTemplate.body",defaultMessage:"The page template is no longer public. <inlinetextlink>Contact the developer</inlinetextlink> for more help.",values:{inlinetextlink:t=>(0,W.jsx)(R.Z,{href:`mailto:${e.integrationValue.info.email}`,children:t})}})})}),icon:ne,isSelected:"duplicate_template"===n,selectOption:()=>o("duplicate_template")}),(0,W.jsx)(de,{title:(0,W.jsx)(V.FormattedMessage,{id:"oauthAuthorizationPage.botAccessOption.pickPages.title",defaultMessage:"Select pages to share with {integrationName}",values:{integrationName:t.name}}),subtitle:(0,W.jsx)(V.FormattedMessage,{id:"oauthAuthorizationPage.botAccessOption.pickPages.subtitle",defaultMessage:"Select one or multiple pages to share with {integrationName}",values:{integrationName:t.name}}),icon:oe,isSelected:"pick_pages"===n,selectOption:()=>o("pick_pages")})]})}function de(e){const{title:t,subtitle:i,icon:a,isSelected:n,selectOption:o,disabled:r}=e,l=(0,s.yK)((e=>({button:{height:"none",padding:12,width:"100%",borderWidth:1,borderColor:e.outlineButtonBorder,borderRadius:4,cursor:r?"not-allowed":void 0},buttonSelected:{background:"white",borderWidth:2,borderColor:f.ZP.blue,padding:11,boxShadow:"0px 4px 8px rgba(66, 129, 219, 0.09), 0px 0px 2px rgba(0, 0, 0, 0.06), 0px 0px 1px rgba(0, 0, 0, 0.04)"},option:{width:"100%",whiteSpace:"normal",display:"grid",gridTemplateColumns:"min-content auto min-content",padding:6},text:{overflowWrap:"normal"},title:{fontSize:14,fontWeight:y.Z.fontWeight.medium,color:f.ZP.frontTextMedium,marginBottom:6},subtitle:{fontSize:12,lineHeight:"140%",color:e.mediumTextColor},icon:{width:14,height:14,color:f.ZP.regularIconColor,marginRight:12}})),[r]);return(0,W.jsx)(Z.Z,{onClick:o,style:l.button,hovered:n,hoveredStyle:l.buttonSelected,pressedStyle:l.buttonSelected,disabled:r,children:(0,W.jsxs)("div",{style:l.option,children:[a(l.icon),(0,W.jsxs)("div",{style:l.text,children:[(0,W.jsx)("div",{style:l.title,children:t}),(0,W.jsx)("div",{style:l.subtitle,children:i})]})]})})}var ce=i(74181),pe=i(73084);function ue(e){const{integrationValue:t,selectedBlockIdsStore:i}=e,a=(0,ce.VM)(t),n=(0,s.yK)((e=>({subtitle:{fontSize:14,textAlign:"center",fontWeight:y.Z.fontWeight.medium,marginBottom:16},linkPreviewSubtitle:{fontSize:14,textAlign:"left",marginBottom:16,color:e.lightTextColor}})),[]);return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)("div",{style:n.subtitle,children:(0,W.jsx)(V.FormattedMessage,{id:"oauthAuthorizationPage.selectPagesStep.title",defaultMessage:'Allow "{integrationName}" to access these pages',values:{integrationName:t.name}})}),(0,W.jsx)("div",{style:n.linkPreviewSubtitle,children:a&&(0,W.jsx)(V.FormattedMessage,{id:"oauthAuthorizationPage.selectPagesStep.linkPreviewSubtitle",defaultMessage:"Your selections here will not impact this integration's ability to unfurl links across your workspace"})}),(0,W.jsx)(pe.Z,{selectedBlockIdsStore:i})]})}var me=i(72787),ge=i(39132),he=i(61248);const be=(0,ae.IU)("scribble",{viewBox:"0 0 16 15",svg:(0,W.jsx)("path",{d:"M1.048 9.972c.424.41 1.237.505 1.866-.069.226-.198.67-.67 1.367-1.374 3.418-3.459 5.524-5.64 5.9-5.298.3.274-.862 1.921-2.024 3.535-2.126 2.946-3.917 5.1-2.57 6.446 1.053 1.053 2.652.096 5.216-2.153 1.374-1.21 2.33-2.106 2.57-1.873.15.15-.212.745-.677 1.544-.656 1.135-1.531 2.42-.676 3.275.594.595 1.729.335 3.048-.97.274-.267.335-.589.103-.814-.212-.212-.513-.178-.738.027-.855.82-1.49 1.176-1.593 1.06-.13-.123.232-.773.861-1.894.868-1.552 1.401-2.59.602-3.37-1.074-1.04-2.331.061-4.512 1.982-1.853 1.627-2.611 2.051-2.782 1.867-.246-.26.437-1.183 2.46-4.013 2.188-3.049 3.487-5.031 2.257-6.234-1.607-1.566-3.767-.41-9.12 4.887-.779.766-1.264 1.23-1.503 1.518-.623.718-.486 1.51-.055 1.92z"})}),fe=(0,ae.IU)("settingsMembersFilled",{viewBox:"0 0 20 13",svg:(0,W.jsx)("path",{d:"M13.582 6.00293C15.0723 6.00293 16.3369 4.67676 16.3369 2.96094C16.3369 1.28613 15.0654 0.0078125 13.582 0.0078125C12.0986 0.0078125 10.8203 1.30664 10.8271 2.97461C10.8271 4.67676 12.0918 6.00293 13.582 6.00293ZM5.67969 6.16016C6.97852 6.16016 8.0791 4.99805 8.0791 3.50781C8.0791 2.04492 6.97168 0.9375 5.67969 0.9375C4.3877 0.9375 3.27344 2.06543 3.28027 3.52148C3.28027 4.99805 4.38086 6.16016 5.67969 6.16016ZM1.91309 12.3604H7.0332C6.30859 11.3145 7.1084 9.25 8.64648 8.04688C7.89453 7.55469 6.91016 7.19922 5.67969 7.19922C2.62402 7.19922 0.648438 9.44824 0.648438 11.3076C0.648438 11.9775 0.990234 12.3604 1.91309 12.3604ZM9.31641 12.3604H17.8408C18.9619 12.3604 19.3516 12.0186 19.3516 11.3965C19.3516 9.63281 17.123 7.21289 13.5752 7.21289C10.0342 7.21289 7.80566 9.63281 7.80566 11.3965C7.80566 12.0186 8.19531 12.3604 9.31641 12.3604Z"})});var xe=i(41219),ve=i(47560);function ye(e){var t,i;const{integrationValue:a,spaceName:n}=e,o=a.info.website_url,r=(0,D.FD)(a.capabilities),l=(0,b.uw)(a.id),d=a.capabilities,c=(0,s.yK)((()=>({inlineTextLink:{color:"black",textDecoration:"none"}})),[]);return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)("div",{children:(0,W.jsx)(V.FormattedMessage,{id:"oauthAuthorizationPage.permissionStep.intro",defaultMessage:"<inlinetextlink>{integrationName}</inlinetextlink> will have permission to",values:{integrationName:a.name,inlinetextlink:e=>o?(0,W.jsx)(R.Z,{href:o,style:c.inlineTextLink,children:e}):e}})}),(null==d?void 0:d.read_content)&&(0,W.jsx)(we,{icon:ge.c,title:r?(0,W.jsx)(V.FormattedMessage,{id:"oauthAuthorizationPage.permissionStep.permissionListItem.readContentWithInheritedAccess",defaultMessage:"View pages you have access to"}):l?(0,W.jsx)(V.FormattedMessage,{id:"oauthAuthorizationPage.permissionStep.permissionListItem.readContentWithAdminAccess",defaultMessage:"View all pages"}):(0,W.jsx)(V.FormattedMessage,{id:"oauthAuthorizationPage.permissionStep.permissionListItem.readContent",defaultMessage:"View pages you select"}),children:r?(0,W.jsx)(V.FormattedMessage,{id:"oauthAuthorizationPage.permissionStep.permissionListItem.readContentWithInheritedAccess.description",defaultMessage:"{integrationName} will be able to view pages you can view.",values:{integrationName:a.name}}):l?(0,W.jsx)(V.FormattedMessage,{id:"oauthAuthorizationPage.permissionStep.permissionListItem.readContentWithAdminAccess.description",defaultMessage:"{integrationName} will be able to view all pages in your workspace",values:{integrationName:a.name}}):(0,W.jsx)(V.FormattedMessage,{id:"oauthAuthorizationPage.permissionStep.permissionListItem.readContent.description",defaultMessage:"{integrationName} will be able to view pages you select in the next step. You can also share pages later with {integrationName} in Notion",values:{integrationName:a.name}})}),(null==d?void 0:d.update_content)&&(0,W.jsx)(we,{icon:be,title:r?(0,W.jsx)(V.FormattedMessage,{id:"oauthAuthorizationPage.permissionStep.permissionListItem.updateContentWithInheritedAccess",defaultMessage:"Edit pages you have access to"}):l?(0,W.jsx)(V.FormattedMessage,{id:"oauthAuthorizationPage.permissionStep.permissionListItem.updateContentWithAdminAccess",defaultMessage:"Edit all pages"}):(0,W.jsx)(V.FormattedMessage,{id:"oauthAuthorizationPage.permissionStep.permissionListItem.updateContent",defaultMessage:"Edit pages you select"}),children:r?(0,W.jsx)(V.FormattedMessage,{id:"oauthAuthorizationPage.permissionStep.permissionListItem.updateContentWithInheritedAccess.description",defaultMessage:"{integrationName} will be able to edit pages you can edit",values:{integrationName:a.name}}):l?(0,W.jsx)(V.FormattedMessage,{id:"oauthAuthorizationPage.permissionStep.permissionListItem.updateContentWithAdminAccess.description",defaultMessage:"{integrationName} will be able to edit all pages",values:{integrationName:a.name}}):(0,W.jsx)(V.FormattedMessage,{id:"oauthAuthorizationPage.permissionStep.permissionListItem.updateContent.description",defaultMessage:"{integrationName} will be able to edit pages you select in the next step. You can also share pages later with {integrationName} in Notion",values:{integrationName:a.name}})}),(null==d?void 0:d.insert_content)&&(0,W.jsx)(we,{icon:ne,title:r?(0,W.jsx)(V.FormattedMessage,{id:"oauthAuthorizationPage.permissionStep.permissionListItem.insertContentWithInheritedAccess",defaultMessage:"Create new content within pages you have access to"}):(0,W.jsx)(V.FormattedMessage,{id:"oauthAuthorizationPage.permissionStep.permissionListItem.insertContent",defaultMessage:"Create new content within pages you select"}),children:r?(0,W.jsx)(V.FormattedMessage,{id:"oauthAuthorizationPage.permissionStep.permissionListItem.insertContentWithInheritedAccess.description",defaultMessage:"{integrationName} will be able to add new content or sub-pages wherever you have permission to add new content or sub-pages",values:{integrationName:a.name,workspaceName:n}}):(0,W.jsx)(V.FormattedMessage,{id:"oauthAuthorizationPage.permissionStep.permissionListItem.insertContent.description",defaultMessage:"{integrationName} will be able to add new content or sub-pages to pages you select in the next step. You can also share pages later with {integrationName} in Notion",values:{integrationName:a.name,workspaceName:n}})}),(null==d?void 0:d.read_comment)&&(0,W.jsx)(we,{icon:xe.L,title:r?(0,W.jsx)(V.FormattedMessage,{id:"oauthAuthorizationPage.permissionStep.permissionListItem.readCommentWithInheritedAccess",defaultMessage:"View comments within pages you have access to"}):l?(0,W.jsx)(V.FormattedMessage,{id:"oauthAuthorizationPage.permissionStep.permissionListItem.readCommentWithAdminAccess",defaultMessage:"View all comments"}):(0,W.jsx)(V.FormattedMessage,{id:"oauthAuthorizationPage.permissionStep.permissionListItem.readComment",defaultMessage:"View comments within pages you select"}),children:r?(0,W.jsx)(V.FormattedMessage,{id:"oauthAuthorizationPage.permissionStep.permissionListItem.readCommentWithInheritedAccess.description",defaultMessage:"{integrationName} will be able to view comments within pages you can access",values:{integrationName:a.name}}):l?(0,W.jsx)(V.FormattedMessage,{id:"oauthAuthorizationPage.permissionStep.permissionListItem.readCommentWithAdminAccess.description",defaultMessage:"{integrationName} will be able to view comments within all pages",values:{integrationName:a.name}}):(0,W.jsx)(V.FormattedMessage,{id:"oauthAuthorizationPage.permissionStep.permissionListItem.readComment.description",defaultMessage:"{integrationName} will be able to view comments within pages you select in the next step. You can also share pages later with {integrationName} in Notion",values:{integrationName:a.name}})}),(null==d?void 0:d.insert_comment)&&(0,W.jsx)(we,{icon:ve.o,title:r?(0,W.jsx)(V.FormattedMessage,{id:"oauthAuthorizationPage.permissionStep.permissionListItem.insertCommentWithInheritedAccess",defaultMessage:"Create comments within pages you have access to"}):(0,W.jsx)(V.FormattedMessage,{id:"oauthAuthorizationPage.permissionStep.permissionListItem.insertComment",defaultMessage:"Create comments within pages you select"}),children:r?(0,W.jsx)(V.FormattedMessage,{id:"oauthAuthorizationPage.permissionStep.permissionListItem.insertCommentWithInheritedAccess.description",defaultMessage:"{integrationName} will be able to create comments within pages you can access",values:{integrationName:a.name}}):(0,W.jsx)(V.FormattedMessage,{id:"oauthAuthorizationPage.permissionStep.permissionListItem.insertComment.description",defaultMessage:"{integrationName} will be able to create comments within pages you select in the next step. You can also share pages later with {integrationName} in Notion",values:{integrationName:a.name}})}),((null==d?void 0:d.read_user_without_email)||(null==d?void 0:d.read_user_with_email))&&(0,W.jsx)(we,{icon:fe,title:null!==(t=a.capabilities)&&void 0!==t&&t.read_user_with_email?(0,W.jsx)(V.FormattedMessage,{id:"oauthAuthorizationPage.permissionStep.permissionListItem.viewUsersAndEmail",defaultMessage:"View workspace users and their emails"}):(0,W.jsx)(V.FormattedMessage,{id:"oauthAuthorizationPage.permissionStep.permissionListItem.viewUsers",defaultMessage:"View workspace users"}),children:null!==(i=a.capabilities)&&void 0!==i&&i.read_user_with_email?(0,W.jsx)(V.FormattedMessage,{id:"oauthAuthorizationPage.permissionStep.permissionListItem.viewUsersAndEmail.detail",defaultMessage:"{integrationName} will be able to see basic information about all workspace members and guest data, including their names, profile images, and email addresses",values:{integrationName:a.name}}):(0,W.jsx)(V.FormattedMessage,{id:"oauthAuthorizationPage.permissionStep.permissionListItem.viewUsers.detail",defaultMessage:"{integrationName} will be able to see basic information about all workspace members and guests, like their names and profile images, but not their email addresses",values:{integrationName:a.name}})}),(null==d?void 0:d.webhooks)&&(0,W.jsx)(we,{icon:he.F,title:(0,W.jsx)(V.FormattedMessage,{id:"oauthAuthorizationPage.permissionStep.permissionListItem.sendWebhooks",defaultMessage:"Receive updates on workspace activity"}),children:(0,W.jsx)(V.FormattedMessage,{id:"oauthAuthorizationPage.permissionStep.permissionListItem.sendWebhooks.description",defaultMessage:"Changes to pages, permissions, or workspace settings will be shared with {integrationName}",values:{integrationName:a.name}})})]})}function we(e){const[t,i]=a.useState(!1),n=(0,s.yK)((e=>({permissionItem:{border:`1px ${f.FN.dark.gray[850]} solid`,borderRadius:4,marginTop:8},permissionItemTitle:{display:"flex",justifyContent:"space-between",padding:"6px 12px",cursor:"pointer",userSelect:"none"},permissionItemHeading:{display:"flex",alignItems:"center"},permissionItemDetails:{paddingLeft:38,paddingRight:24,transition:"all 0.2s ease",color:e.mediumTextColor},rightStyle:{width:22,height:18},sharedIconStyle:{width:24,height:16,textAlign:"center"}})),[]);return(0,W.jsxs)("div",{style:n.permissionItem,children:[(0,W.jsxs)("div",{style:n.permissionItemTitle,onClick:()=>i(!t),children:[(0,W.jsxs)("div",{style:n.permissionItemHeading,children:[(0,W.jsx)("div",{style:n.sharedIconStyle,children:e.icon({width:16,height:16,color:f.ZP.regularIconColor})}),(0,W.jsx)("div",{children:e.title})]}),e.children&&(0,W.jsx)("div",{style:{display:"flex",alignItems:"center"},children:(0,me.Y)({width:12,height:12,color:f.ZP.lightIconColor,transform:t?"rotate(180deg)":void 0,transition:"transform 0.2s ease"})})]}),(0,W.jsx)("div",{style:{...n.permissionItemDetails,opacity:t?1:0,flex:t?1:0,paddingBottom:t?8:0,transform:t?"translate3d(0,-4px,0)":"translate3d(0,-8px,0)"},children:t&&e.children})]})}const Me={permissions:{header:!0,warning:!0,footer:!0},bot_access_option:{header:!0,warning:!1,footer:!0},page_picker:{header:!1,warning:!1,footer:!1}},Se=(0,V.defineMessages)({loadingMessage:{id:"oauthAuthorization.loadingMessage",defaultMessage:"Authorizingâ€¦"},redirectToIntegrationTimeout:{id:"oauthAuthorization.redirectToIntegrationTimeout",defaultMessage:"Integration appears to have timed out. Please refresh and try again."}});function je(e){const{showApprovalWarning:t}=e,[i,n]=a.useState("permissions"),[o,s]=a.useState("duplicate_template"),[r,l]=a.useState(void 0),d=Me[i].header,c=t&&Me[i].warning,p=Me[i].footer;return(0,W.jsxs)(W.Fragment,{children:[d&&(0,W.jsx)(ke,{...e}),(0,W.jsx)(Pe,{...e,currentStep:i,botAccessOption:o,setBotAccessOption:s}),(0,W.jsx)(_e,{...e,currentStep:i,setCurrentStep:n,acceptedIntegrationCapabilities:r,setAcceptedIntegrationCapabilities:l,botAccessOption:o}),c&&(0,W.jsx)("div",{style:{display:"flex",alignItems:"center",marginTop:20},children:(0,W.jsx)(V.FormattedMessage,{id:"oauthAuthorizationPage.permissionStep.integrationApprovalNotice",defaultMessage:"Authorizing this integration will add it to your workspace's approval list. Other workspace members will be able to install this integration."})}),p&&(0,W.jsx)(Fe,{...e})]})}function Ce(){const{isMobile:e}=(0,n.Fy)();return(0,s.yK)((t=>({title:{fontSize:e?18:20,margin:"0 50px 32px",textAlign:"center",fontWeight:y.Z.fontWeight.medium},inlineTextLink:{color:"black",textDecoration:"none"},buttonGroup:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8,marginTop:24},footer:{fontSize:y.Z.fontSize.UISmall.desktop,color:t.mediumTextColor,paddingTop:32,paddingBottom:16},innerFooterContainer:{color:t.regularTextColor,fontWeight:y.Z.fontWeight.semibold,marginBottom:4}})),[e])}const Ie={cancel:(0,W.jsx)(V.FormattedMessage,{id:"oauthAuthorizationPage.permissionStep.cancelButton.label",defaultMessage:"Cancel"}),back:(0,W.jsx)(V.FormattedMessage,{id:"oauthAuthorizationPage.selectPagesStep.backButton.label",defaultMessage:"Back"})},Ae={bot_access_option:(0,W.jsx)(V.FormattedMessage,{id:"oauthAuthorizationPage.permissionStep.nextButton.label",defaultMessage:"Next"}),page_picker:(0,W.jsx)(V.FormattedMessage,{id:"oauthAuthorizationPage.permissionStep.continueButton.label",defaultMessage:"Select pages"}),authorize:(0,W.jsx)(V.FormattedMessage,{id:"oauthAuthorizationPage.selectPagesStep.finishButton.label",defaultMessage:"Allow access"})};function ke(e){const{integrationValue:t,spaceName:i}=e,a=t.info.website_url,n=t.info.icon?{pointer:{table:m.K2,id:t.id},icon:t.info.icon}:void 0,o=Ce();return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)("div",{style:{padding:15},children:(0,W.jsx)(ie.Z,{icon:n,disabled:!0,title:t.name,size:54,isEmptyPage:!1,style:{margin:"auto"}})}),(0,W.jsx)("div",{style:o.title,children:(0,W.jsx)(V.FormattedMessage,{id:"oauthAuthorizationPage.permissionStep.title",defaultMessage:"<inlinetextlink>{integrationName}</inlinetextlink> is requesting access to {workspaceName}",values:{integrationName:t.name,workspaceName:i,inlinetextlink:e=>a?(0,W.jsx)(R.Z,{style:o.inlineTextLink,href:a,children:e}):e}})})]})}function Pe(e){const{currentStep:t,integrationValue:i,spaceName:a}=e;return"permissions"===t?(0,W.jsx)(ye,{integrationValue:i,spaceName:a}):"bot_access_option"===t?(0,W.jsx)(le,{...e,integrationValue:i}):"page_picker"===t?(0,W.jsx)(ue,{...e,integrationValue:i}):void(0,v.t1)(t)}function _e(e){const{currentStep:t,setCurrentStep:i,acceptedIntegrationCapabilities:s,setAcceptedIntegrationCapabilities:r,integrationValue:l,validIntegrationTemplateId:d,oauthParams:c,botAccessOption:p,spaceId:u,selectedBlockIdsStore:g}=e,h=(0,n.O7)(),[f,x]=a.useState(!1),y=(0,o.VK)((()=>g.state),[g]),w=(0,o.VK)((()=>{const e=te.Z.state;return(0,Q.yh)({integrationId:l.id,externalIntegrationStoreState:e})}),[l]),M=function(e){const{integrationValue:t,validIntegrationTemplateId:i,botAccessOption:a}=e;if((0,D.FD)(t.capabilities))return["permissions"];if(i){if("duplicate_template"===a)return["permissions","bot_access_option"];if("pick_pages"===a)return["permissions","bot_access_option","page_picker"];if("admin"===a)return["permissions"];(0,v.t1)(a)}return["permissions","page_picker"]}({integrationValue:l,validIntegrationTemplateId:d,botAccessOption:p}),S=M.indexOf(t),j=(0,b.z6)(l.id),C=M[S-1],I=j?void 0:M[S+1],k=C?Ie.back:Ie.cancel,P=C?()=>{i(C)}:()=>{!function(e){const{environment:t,oauthParams:i,integrationValue:a,createdBotValue:n}=e;n?X.iy(t):B.V({environment:t,params:i,integration:a,errorType:N._.access_denied})}({environment:h,oauthParams:c,integrationValue:l,createdBotValue:w})},_=I?Ae[I]:Ae.authorize,T=I?()=>{"permissions"===t&&r(l.capabilities),i(I)}:async()=>{j?(await q.$$({environment:h,spaceId:u,from:"workspace_connections_redirect",integration:K.kk.fromValue(m.K2,l)}),close()):async function(e){const{environment:t,botAccessOption:i,integrationValue:a,acceptedIntegrationCapabilities:n,setIsLoading:o,oauthParams:s,spaceId:r,selectedBlockIds:l,createdBotValue:d}=e;let c;"duplicate_template"===i&&(c=a.info.template_page_id),o(!0),J.j({message:Se.loadingMessage});const p=c?[]:Object.keys(l).filter((e=>l[e])),{currentSpaceStore:u,currentSpaceViewStore:m}=A.default.state;if(d){const e=await Y.k2({environment:t,templatePageId:c,botValue:d,spaceStore:u,spaceViewStore:m,pages:p});e?$._c({environment:t,store:e,pageVisitSource:E.tY.Duplicate}):X.iy(t),J.x(),o(!1)}else await B.V({environment:t,params:s,integration:a,acceptedIntegrationCapabilities:n,spaceId:r,blockIdsForBot:p,templatePageId:c}),H.D(t,{selection:i}),await(0,O.Vs)(3e4),J.x(),o(!1),G.showErrorMessage(ee.default.formatMessage(Se.redirectToIntegrationTimeout))}({environment:h,botAccessOption:p,integrationValue:l,setIsLoading:x,oauthParams:c,spaceId:u,selectedBlockIds:y,createdBotValue:w,acceptedIntegrationCapabilities:s})},F=Ce();return(0,W.jsxs)("div",{style:F.buttonGroup,children:[(0,W.jsx)(Z.Z,{isLarge:!0,onClick:P,style:{height:32},children:k}),(0,W.jsx)(L.Z,{isLarge:!0,onClick:T,disabled:f,children:_})]})}const Te="https://notion.notion.site/Integration-Gallery-Terms-of-Service-b74cada95062442d98c2abb1fe3efd9b";function Fe(e){const{integrationValue:t,oauthParams:i}=e,a=t.info.terms_of_use_url,n=t.info.privacy_policy_url,o=(i.redirectUri||t.redirect_uris[0]||"").replace("http://","").replace("https://","").split(/[/?#]/)[0],s=Ce(),r=(0,b.z6)(t.id)?(0,W.jsx)(V.FormattedMessage,{id:"oauthAuthorizationPage.permissionStep.warning.body.partnerIntegration",defaultMessage:"The third-party products or services to which this integration connects are non-Notion Applications. By enabling this integration, you agree to Notion's <notiontermslink>Integration Gallery Terms</notiontermslink>.",values:{notiontermslink:e=>(0,W.jsx)(R.Z,{href:Te,children:e})}}):(0,W.jsx)(V.FormattedMessage,{id:"oauthAuthorizationPage.permissionStep.warning.body",defaultMessage:'If you continue, you may be sharing sensitive information. Notion does not review third party integrations such as "{integrationName}". Learn how "{integrationName}" handles your data by reviewing their <privacypolicylink>Privacy Policy</privacypolicylink> and <termsofservicelink>Terms of Service</termsofservicelink>.',values:{integrationName:t.name,privacypolicylink:e=>n?(0,W.jsx)(R.Z,{href:n,children:e}):e,termsofservicelink:e=>a?(0,W.jsx)(R.Z,{href:a,children:e}):e}});return(0,W.jsxs)("footer",{style:s.footer,children:[(0,W.jsxs)("div",{style:s.innerFooterContainer,children:[" ",(0,W.jsx)(V.FormattedMessage,{id:"oauthAuthorizationPage.permissionStep.warning.title",defaultMessage:"Make sure you trust {integrationName} ({redirectUriDomain})",values:{integrationName:t.name,redirectUriDomain:o}})]}),(0,W.jsx)("div",{children:r})]})}var ze=i(70954),Ne=i(22709);function Ve(e){const{onSpaceSwitch:t,disableAccountSwitcher:i,singleSpaceToSelect:a}=e,o=function(){const{isMobile:e}=(0,n.Fy)();return(0,s.yK)((()=>({container:{display:"flex",alignItems:"center",justifyContent:"space-between",height:60,paddingLeft:20,paddingRight:8,borderBottomWidth:1,borderBottomStyle:"solid",borderBottomColor:f.ZP.contentBorder},notionLogo:{width:e?28:30,height:e?28:30,marginRight:10,flexShrink:0},notionTitle:{fontWeight:y.Z.fontWeight.medium,fontSize:16},switcherButton:{borderRadius:4,marginBottom:0}})),[e])}();return(0,W.jsxs)("div",{style:o.container,children:[(0,ze.C)(o.notionLogo),(0,W.jsx)("div",{style:o.notionTitle,children:"Notion"}),(0,W.jsx)("div",{style:{flexGrow:1,flexShrink:1}}),(0,W.jsx)("div",{style:{flexShrink:0},children:(0,W.jsx)(Ne.ZP,{format:Ne._S.Regular,onSpaceClick:e=>{let{spaceViewStore:i}=e;return t(i)},shouldShowUnexpandButton:!1,disableLoginLink:!0,buttonStyle:{borderRadius:4,marginBottom:0},disabled:i,singleSpaceToSelect:a})})]})}const Be={"929cdebb-09e8-4c5c-bfe5-e8c3c3902987":"development","5dbd3ed0-1160-4532-b10a-1a6749748fc4":"staging"},Ze=["makenotion.com","qasource.com"];function Le(e){const t=e.userId,i=e.spaceId,a=(0,n.O7)(),r=(0,o.VK)((()=>A.default.state.currentUserRootStore),[]),l=(0,o.VK)((()=>A.default.state.currentSpaceStore),[]),d=(0,o.VK)((()=>A.default.state.currentSpaceViewStore),[]),c=(0,o.VK)((()=>{var e;return null===(e=A.default.state.currentUserStore)||void 0===e?void 0:e.getEmail()}),[]),p=(0,o.VK)((()=>!!(t&&i&&d)&&(d.getSpaceId()===i&&d.getUserRootParentId()===t)),[t,i,d]),u=function(e){const{WindowSizeStore:t}=e.environment,i=(0,o.VK)((()=>t.state.width>500),[t]),a=(0,o.VK)((()=>t.state.height<900),[t]);return(0,s.yK)((e=>({layoutContainer:{height:"100%",overflow:"auto",backgroundColor:i?f.ZP.frontCreamBackground:f.ZP.white},pageContainer:{display:"flex",justifyContent:"center"},contentBox:{width:"500px",minHeight:"600px",borderRadius:5,backgroundColor:f.ZP.white,boxShadow:i?e.lightBoxShadow:"none",display:"flex",flexDirection:"column",fontSize:y.Z.fontSize.UIRegular.desktop,marginTop:a?16:i?"calc((100vh - 900px) / 2)":0,marginBottom:40,transition:"all 0.2s ease"},contentBody:{paddingLeft:40,paddingRight:40,paddingTop:25,paddingBottom:25,flex:1,display:"flex",flexDirection:"column"}})),[i,a])}({environment:a});return(0,W.jsx)("div",{style:u.layoutContainer,children:(0,W.jsx)("div",{style:u.pageContainer,children:(0,W.jsxs)("div",{style:u.contentBox,children:[(0,W.jsx)(Ve,{disableAccountSwitcher:p,singleSpaceToSelect:i,onSpaceSwitch:async t=>{await S.ce({environment:a,spaceViewStore:t});const i=t.getSpaceId(),n=Ze.find((e=>null==c?void 0:c.endsWith(e)));if(i&&n&&Be[i]&&e.integrationId&&e.redirectUri){const t=(0,w.LH)({baseUrl:(0,j.k2)(Be[i]),clientId:e.integrationId,redirectUri:e.redirectUri,state:e.state});M.D({environment:a,url:t,targetSelf:!0})}}}),(0,W.jsx)("div",{style:u.contentBody,children:(0,W.jsx)(Re,{oauthParams:e,spaceStore:l,userRootStore:r})})]})})})}function Re(e){const{oauthParams:t,spaceStore:i,userRootStore:a}=e;return i&&a?(0,W.jsx)(We,{oauthParams:t,spaceStore:i,userRootStore:a}):(0,W.jsx)(F.Z,{})}function We(e){const{oauthParams:t,spaceStore:i,userRootStore:s}=e,{integrationId:f,responseType:y}=t,w=(0,n.O7)(),M=(0,o.VK)((()=>C.rn(w,i)),[w,i]),[S,j]=a.useState(),A=(0,o.VK)((()=>{if(f){return(0,k.Kv)(s,{id:f,table:m.K2}).getValue()}}),[f,s]),z=(0,r.V)({value:A,waitTimeInMs:1e3}),[{value:N}]=(0,c.r5)((async()=>{await P.bi(w);const e=T.subscriptionDataStoreInstance.state;return e?_.NM(e):[]}),[w]),V=(0,o.VK)((()=>{if(N&&N.length>0){return N.map((e=>{const t=(0,k.Kv)(s,{table:u.cZ,id:e.botId}).getValue();if(t&&t.alive&&(0,d.hA)(t)&&t.created_by_id===s.id&&t.created_by_table===g.KJ&&t.integration_id===f)return{botValue:t,pageIds:e.pageIds}})).filter(v.$K)[0]}}),[N,s,f]),B=(0,o.VK)((()=>{let e={};return V&&(e=V.pageIds.reduce(((e,t)=>(e[t]=!0,e)),{})),l.default.createValue(e)}),[V]),Z=(0,o.VK)((()=>{if(!f)return!1;const e=i.getBotSettingsStore().getValue();if(!e)return!0;if((0,h.CJ)(e)){const t=e.integration_approval_statuses;return!(!t||!t[f])&&Boolean("approved"===t[f].status)}return!0}),[f,i]),L=(0,o.VK)((()=>{const e=z.value;if(e)return e.info.template_page_id}),[z]),R=(0,o.VK)((()=>Boolean(f&&("datadog"===(0,b.EY)(f)||(0,b.uw)(f)))),[f]),E=(0,o.VK)((()=>C.Cx(i)),[i]),K=(0,o.VK)((()=>i.canAdmin()),[i]);a.useEffect((()=>{z.value&&!S&&j(A)}),[S,j,A,z]);const D=z.value??S;return"pending"===z.status?(0,W.jsx)(F.Z,{}):f&&(0,x.e)(f)||R?D?"code"===y||R?E?(0,W.jsx)(U,{oauthParams:t,spaceName:M,type:"notAnAdmin",integrationValue:D,primaryAction:()=>{I.Z.setState({...I.Z.state,open:!0})}}):K||Z?p._(D,t.redirectUri)||R?(0,W.jsx)(je,{integrationValue:D,validIntegrationTemplateId:L,spaceName:M,spaceId:i.id,oauthParams:t,showApprovalWarning:K&&!Z&&!R,selectedBlockIdsStore:B}):(0,W.jsx)(U,{oauthParams:t,spaceName:M,type:"invalidRedirectUri",integrationValue:D}):(0,W.jsx)(U,{oauthParams:t,spaceName:M,type:"integrationNotApproved",integrationValue:D,primaryAction:()=>{I.Z.setState({...I.Z.state,open:!0})}}):(0,W.jsx)(U,{type:"invalidResponseType",oauthParams:t,spaceName:M,integrationValue:D}):(0,W.jsx)(U,{type:"clientNotFound",oauthParams:t,spaceName:M}):(0,W.jsx)(U,{type:"invalidClientId",oauthParams:t,spaceName:M})}},27386:(e,t,i)=>{i.d(t,{Um:()=>p,ZP:()=>u,kN:()=>c});i(67294);var a=i(480),n=i(24405),o=i(34859),s=i(91754),r=i(61519),l=i(53336),d=i(85893);function c(e){return e?18:60}function p(){return(0,d.jsx)(r.Z,{size:37})}const u=function(e){let{children:t,controlRow:i,bannerText:r,controlRowPaddingTopBottom:p,removeBoxShadow:u,contentPaddingLeftRight:m,controlRowPaddingLeftRight:g,getPaddingTopBottom:h,disableScroller:b}=e;const f=(0,n.Fg)(),x=(0,a.O7)(),{device:v}=x,y=h?h():v.isMobile?18:36;return b?(0,d.jsxs)("div",{style:{paddingLeft:c(v.isMobile),paddingRight:c(v.isMobile)},children:[(0,d.jsx)("div",{style:{paddingTop:y,paddingBottom:y},children:t}),i&&(0,d.jsx)("div",{style:{paddingTop:p,paddingBottom:p,boxShadow:`0 -1px 0 ${f.regularDividerColor}`},children:i})]}):(0,d.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:"100%",height:"100%",backgroundColor:f.cardContentBackground},children:[r&&(0,d.jsx)(s.Z,{styleKey:s.v.Blue,isMobile:!1,children:r}),(0,d.jsx)(l.Z,{type:o.Z.All,style:{flexGrow:1,WebkitOverflowScrolling:"touch",transform:"translateZ(0)",paddingLeft:m??c(v.isMobile),paddingRight:m??c(v.isMobile),paddingTop:r?15:y,paddingBottom:r?22:y},children:t}),i&&(0,d.jsx)("div",{style:{flexGrow:0,flexShrink:0,paddingLeft:g??c(v.isMobile),paddingRight:g??c(v.isMobile),paddingTop:p,paddingBottom:p,boxShadow:u?void 0:`0 -1px 0 ${f.regularDividerColor}`},children:i})]})}},41623:(e,t,i)=>{i.d(t,{Nq:()=>n,f_:()=>o,yh:()=>s});var a=i(15070);function n(e,t){const i=t.getAlive(),n=(0,a.hA)(t),o=Boolean(!t.getIntegrationId()),s=Boolean(t.getIntegrationId()),r=Boolean(e.currentUser.id===t.getParentId());return i&&n&&(s&&r||o)}function o(e){return e.getAlive()&&(0,a.hA)(e)&&Boolean(e.getIntegrationId())}function s(e){const{externalIntegrationStoreState:t,integrationId:i}=e;if(!t.loaded)return;const n=t.externalAuthentications.map((e=>{let{parent_id:t}=e;return t})),o=new Set(n),s=t.bots.filter((e=>e.alive&&o.has(e.id)&&(0,a.U9)(e)&&e.integration_id===i));return s.length?s[0]:void 0}},14720:(e,t,i)=>{i.d(t,{Rv:()=>o,Ry:()=>c,cG:()=>d,p7:()=>l,rH:()=>r,tn:()=>n,vs:()=>s});var a=i(77907);const n=(0,a.lazyComponent)(a.deps.sidebar,(e=>e.SidebarTeamBrowserContent)),o=(0,a.lazyComponent)(a.deps.sidebar,(e=>e.SidebarSwitcherMultiAccountPopup)),s=(0,a.lazyComponent)(a.deps.sidebar,(e=>e.SidebarFooter)),r=(0,a.lazyComponent)(a.deps.sidebar,(e=>e.SidebarSectionWithPopup)),l=(0,a.lazyComponent)(a.deps.sidebar,(e=>e.TeamAddAppTemplateMenu)),d=(0,a.lazyComponent)(a.deps.sidebar,(e=>e.SidebarTourTutorialContent)),c={LazyTeamAddAppTemplateMenu:{width:250,paddingTop:8,paddingBottom:8,display:"flex",justifyContent:"center"}}},22709:(e,t,i)=>{i.d(t,{_S:()=>U,ZP:()=>O});var a=i(67294),n=i(480),o=i(86628),s=i(49085),r=i(80503),l=i(14720),d=i(66324),c=i(65452),p=i(64921),u=i(31945),m=i(39849),g=i(92955),h=i(24405),b=i(37240),f=i(37810),x=i(4708),v=i(48779),y=i(19034),w=i(56496),M=i(31278),S=i(14694),j=i(46783),C=i(85893);const I=function(e){const{showIcon:t}=e,i=(0,h.Fg)(),a=(0,h.yK)((e=>{const i=Math.ceil(60),a=Math.floor(85),n=`${Math.floor(Math.random()*(a-i+1))+i}%`;return{placeholderPageStyle:{height:28,display:"flex",alignItems:"center",width:"100%",padding:t?"0 15px":"0 0px"},placeholderTextWrapStyle:{flexGrow:1,marginLeft:t?10:0,height:28,display:"flex",alignItems:"center"},placeholderTextStyle:{height:4,background:e.buttonHoveredBackground,width:n}}}),[t]);return(0,C.jsxs)("div",{style:a.placeholderPageStyle,children:[t&&(0,j.w)({width:16,height:16,fill:i.buttonHoveredBackground}),(0,C.jsx)("div",{style:a.placeholderTextWrapStyle,children:(0,C.jsx)("div",{style:a.placeholderTextStyle})})]})},A={whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"};const k=function(e){const t=(0,h.Fg)(),i=(0,n.O7)(),{device:s}=i,r=(0,o.VK)((()=>"store"===e.type?(0,v.rn)(i,e.spaceStore):e.spaceName),[i,e]);return(0,a.useEffect)((()=>{"store"===e.type&&e.spaceStore.getValue()}),[e]),(0,C.jsxs)(S.Z,{style:{overflow:"hidden",...e.isMobile&&{fontSize:14,padding:0,marginRight:12},...!e.isMobile&&{paddingLeft:10,paddingRight:10},...e.style?e.style:{}},left:r?(0,C.jsx)(T,{title:r,icon:"store"===e.type?void 0:e.spaceIcon,isMobile:e.isMobile,spaceStore:"store"===e.type?e.spaceStore:void 0}):(0,C.jsx)(P,{}),disableMobileBorder:!0,children:[!r&&(0,C.jsx)(_,{}),r&&(0,C.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:e.activeUserEmailAddress?"space-between":"start"},className:"notranslate",children:[(0,C.jsxs)("div",{style:{display:"flex",flexDirection:"column",marginRight:6,marginTop:s.isAndroid?3:0,...A},children:[(0,C.jsx)("div",{style:{color:t.regularTextColor,fontWeight:f.Z.fontWeight.medium,...A},children:r}),(0,C.jsx)("div",{style:{color:t.mediumTextColor,fontSize:11,lineHeight:"12px",fontWeight:f.Z.fontWeight.regular,...A},children:e.activeUserEmailAddress})]}),e.showExpand&&(0,C.jsx)("div",{style:{flexGrow:0,flexShrink:0,width:10,height:10,fill:t.mediumIconColor},children:(0,b.s)()})]})]})};function P(){return(0,C.jsx)("div",{style:{opacity:.25},children:(0,C.jsx)(w.Z,{size:20,title:void 0})})}function _(){return(0,C.jsx)(I,{showIcon:!1})}function T(e){let{title:t,icon:i,isMobile:a,spaceStore:s}=e;const r=(0,h.Fg)(),l=(0,n.O7)(),d=(0,o.VK)((()=>s?(0,v.Wd)(l,s):i?{icon:i,pointer:{table:"space",id:"undefined"}}:void 0),[s,l,i]),c=(0,o.VK)((()=>s?(0,v.rn)(l,s):t),[s,l,t]),p=(0,o.VK)((()=>y.Z.getUnreadMentionsCountForOtherSpaces()>0&&(0,x.MC)()),[]);return(0,C.jsxs)("div",{style:{position:"relative"},children:[p&&(0,C.jsx)(F,{}),(0,C.jsx)(M.Z,{disabled:!0,icon:d,isEmptyPage:!1,title:c,size:a?24:22,style:{marginTop:1,color:r.regularTextColor,fontWeight:f.Z.fontWeight.medium}})]})}function F(){const e=(0,h.yK)((e=>({unreadBadge:{backgroundColor:e.redBadgeBackground,position:"absolute",right:-3,width:8,height:8,borderRadius:4}})),[]);return(0,C.jsx)("div",{style:e.unreadBadge})}var z=i(22165),N=i(43250),V=i(80444),B=i(30278),Z=i(85974),L=i(28517),R=i(97852),W=i(78861);let U=function(e){return e[e.Regular=0]="Regular",e[e.DesktopMac=1]="DesktopMac",e[e.Mobile=2]="Mobile",e}({});const E={[U.Regular]:r.Aj-8,[U.DesktopMac]:r.br,[U.Mobile]:"auto"},K={display:"flex",alignItems:"center",minWidth:0,height:"100%",width:"100%"},D=s.default.createClass(!1);const O=function(e){let{shouldShowUnexpandButton:t,disabled:i,format:a,buttonStyle:s,redirectURL:r,disableLoginLink:h,onSpaceClick:b}=e;const f=(0,n.O7)(),v=(0,o.qz)(void 0,D),w=(0,o.qz)(void 0,B.Z),M=(0,o.qz)(void 0,Z.Z),{device:S}=f,{currentSpaceStore:j,currentUserStore:I}=(0,o.VK)((()=>V.default.state),[]),A=f.currentUser.loggedInUserIds,P=(0,o.VK)((()=>A.length>1?null==I?void 0:I.getEmail():void 0),[A,I]),_=(0,o.VK)((()=>y.Z.getUnreadMentionsCountForOtherSpaces()),[]),T=(0,o.VK)((()=>v.state),[v]),F=(0,o.VK)((()=>(0,x.MC)()),[]);if(!j||!I)return null;const U=Boolean(i);return(0,C.jsx)(u.ZP,{popupType:S.isMobile?u.Z4.SlideUp:u.Z4.Popup,buttonPopupStore:R.Z,renderOrigin:()=>(0,C.jsxs)(p.Z,{style:{...K,height:E[a],marginLeft:4,marginRight:4,marginTop:S.isMobile?0:4,width:"calc(100% - 8px)",borderRadius:4,marginBottom:P?S.isMobile?0:8:0,padding:0,...s},mobileFeedback:S.isMobile,onClick:()=>function(e){R.Z.setState({...R.Z.state,open:!0}),d.ai(e),e.currentUser.loggedInUserIds.forEach((t=>{W.Z.getSpaceViewStores(e,t).forEach((i=>{const a=i.getSpaceId();a&&(c.h({environment:e,spaceId:a,userId:t}),L.I({environment:e,spaceId:a,userId:t}))}))}))}(f),disabled:U,className:N.rli,hovered:T,ignoreLocalHoverState:!0,onMouseEnter:()=>v.setState(!0),onMouseLeave:()=>v.setState(!1),children:[(0,C.jsx)(k,{isMobile:H(a),spaceStore:j,activeUserEmailAddress:P,showExpand:!U,type:"store",style:{marginLeft:0}}),(0,C.jsxs)("div",{className:N.JiD,style:{display:"flex",alignItems:"center",height:"100%",marginLeft:"auto",marginRight:_||F?0:12},children:[t&&(0,C.jsx)(z.V,{}),!F&&(0,C.jsx)(g.Z,{type:"otherSpaces",color:m.N.Red,style:{marginLeft:10,marginRight:10}})]})]}),originGap:0,disableMutationObserver:!0,forceInitialInbound:!0,style:S.isMobile?{}:{width:320,overflow:"hidden"},render:e=>(0,C.jsx)(l.Rv,{parent:e,redirectURL:r,disableLoginLink:h,onSpaceClick:b,loginStore:M,loginPermissionsStore:w})})};function H(e){return e===U.Mobile}},30278:(e,t,i)=>{i.d(t,{Z:()=>o});var a=i(49085);class n extends a.default{getInitialState(){return{contacts:!1}}}const o=n},61248:(e,t,i)=>{i.d(t,{F:()=>o});i(67294);var a=i(45238),n=i(85893);const o=(0,a.IU)("notificationUnread",{viewBox:"0 0 20 21.5",svg:(0,n.jsx)("path",{d:"M0 14.521c0 1.67.146 3.057 1.143 4.053.996.996 2.402 1.153 4.062 1.153h7.588c1.67 0 3.076-.157 4.072-1.153s1.143-2.383 1.143-4.053v-6.65c-.43.147-.899.225-1.387.205-.068.02-.117.02-.185.03v6.68c0 1.015-.127 2.05-.723 2.646-.586.586-1.64.722-2.647.722H4.941c-1.005 0-2.06-.136-2.656-.722-.586-.596-.713-1.631-.713-2.647V6.768c0-1.026.127-2.08.713-2.666.596-.596 1.66-.723 2.686-.723h6.738c0-.068.01-.127.02-.186-.02-.488.058-.957.205-1.386H5.186c-1.641 0-3.047.156-4.043 1.152C.146 3.955 0 5.352 0 6.982Zm16.426-7.744c1.846 0 3.379-1.533 3.379-3.388C19.805 1.533 18.27 0 16.425 0a3.403 3.403 0 0 0-3.388 3.389 3.403 3.403 0 0 0 3.389 3.388Z"})})},46783:(e,t,i)=>{i.d(t,{w:()=>o});i(67294);var a=i(45238),n=i(85893);const o=(0,a.IU)("templates",{viewBox:"0 0 20 20",svg:(0,n.jsxs)("g",{children:[(0,n.jsx)("path",{d:"M6.39733 5.67853C5.89764 5.50234 5.36002 5.40649 4.8 5.40649C2.14904 5.40649 0 7.55432 0 10.2038C0 12.8533 2.14904 15.0011 4.8 15.0011C6.52165 15.0011 8.0316 14.0952 8.87867 12.7343L5.26487 12.0975L6.39733 5.67853Z"}),(0,n.jsx)("path",{d:"M17.3126 3.66609L7.85843 2L6.19141 11.4489L10.6545 12.2354L14.3998 5.81854L16.3449 9.15116L17.3126 3.66609Z"}),(0,n.jsx)("path",{d:"M8.80078 17L14.4008 7.4054L20.0008 17H8.80078Z"})]})})},41219:(e,t,i)=>{i.d(t,{L:()=>o});i(67294);var a=i(45238),n=i(85893);const o=(0,a.IU)("topbarComment",{viewBox:"0 0 20 20",svg:(0,n.jsx)("path",{d:"M5.9375 18.4844C6.38281 18.4844 6.71094 18.2656 7.25 17.7891L9.92969 15.4297H14.6328C16.9844 15.4297 18.3047 14.0703 18.3047 11.75V5.67969C18.3047 3.35938 16.9844 2 14.6328 2H4.67188C2.32812 2 1 3.35938 1 5.67969V11.75C1 14.0781 2.36719 15.4297 4.61719 15.4297H4.9375V17.3438C4.9375 18.0391 5.30469 18.4844 5.9375 18.4844ZM6.32812 16.7344V14.5078C6.32812 14.0469 6.125 13.8672 5.6875 13.8672H4.72656C3.25781 13.8672 2.55469 13.125 2.55469 11.7031V5.72656C2.55469 4.30469 3.25781 3.5625 4.72656 3.5625H14.5859C16.0469 3.5625 16.75 4.30469 16.75 5.72656V11.7031C16.75 13.125 16.0469 13.8672 14.5859 13.8672H9.84375C9.36719 13.8672 9.13281 13.9453 8.80469 14.2891L6.32812 16.7344Z"})})}}]);