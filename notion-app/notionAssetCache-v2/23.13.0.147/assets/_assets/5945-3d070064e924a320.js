"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[5945],{46945:(t,e,n)=>{n.d(e,{Z:()=>v});var o=n(67294),i=n(13991),s=n(86628),r=n(24405),a=n(53877),d=n(42875),p=n(31701),l=n(37810),u=n(28020),h=n(77907),c=n(13854),g=n(85893);const f={monthControl:{position:"absolute",top:0,right:0,display:"flex"},selectedRange:{backgroundColor:p.ZP.blueWithAlpha(.15)},active:{backgroundColor:p.ZP.blue,color:p.ZP.white},inactive:{backgroundColor:p.ZP.blueWithAlpha(.43)},disabled:{pointerEvents:"none"},today:{fontWeight:l.Z.fontWeight.regular}};const v=function(t){let{readonly:e,store:n,value:l,validate:v,onUpdate:x,disabled:m,dateTimeStore:S}=t;const y=(0,r.Fg)(),D=(0,o.useRef)(),T=(0,s.VK)((()=>{if(n.state.displayMonth)return n.state.displayMonth.toJSDate();if("starting"===n.getFocus()){if(l.starting)return a.OQ.notionDateToJsDate(l.starting);if(l.ending)return a.OQ.notionDateToJsDate(l.ending)}if("ending"===n.getFocus()){if(l.ending)return a.OQ.notionDateToJsDate(l.ending);if(l.starting)return a.OQ.notionDateToJsDate(l.starting)}if(!D.current){const t=a.Lg((0,d.r)());D.current=a.OQ.notionDateToJsDate(t)}return D.current}),[D,n,l]),k=(0,s.VK)((()=>u.AK.state),[]),b=(0,s.VK)((()=>function(t,e,n){const o=function(t,e,n){if(n)return t=>!0;const o=t=>"ending"===e.getFocus()&&{before:t},i=t=>"starting"===e.getFocus()&&{after:t};if(t.starting&&t.ending){const e=a.OQ.notionDateToJsDate(t.starting),n=a.OQ.notionDateToJsDate(t.ending);return o(e)||i(n)}if(t.starting){return o(a.OQ.notionDateToJsDate(t.starting))}if(t.ending){return i(a.OQ.notionDateToJsDate(t.ending))}return!1}(e,t,n),{hovered:i}=t.state;if(n)return{disabled:o};if(e.starting&&e.ending){const t=a.OQ.notionDateToJsDate(e.starting),n=a.OQ.notionDateToJsDate(e.ending);return{range:{from:t,to:n},start:t,end:n,disabled:o}}if(e.starting){const t=a.OQ.notionDateToJsDate(e.starting);return{range:i&&{from:t,to:i},start:t,end:i,disabled:o,selected:[t,i]}}if(e.ending){const t=a.OQ.notionDateToJsDate(e.ending);return{range:i&&{from:i,to:t},start:i,end:t,disabled:o,selected:[t,i]}}}(n,l,m)),[n,l,m]),C=(0,s.VK)((()=>function(t,e){const n=f,o=function(t){return{disabled:{color:t.lightTextColor},today:{color:p.ZP.white}}}(e),i=t.getFocus(),s=n.selectedRange,r={...n.disabled,...o.disabled},a={...n.today,...o.today};return{range:s,start:"starting"===i?n.active:n.inactive,end:"ending"===i?n.active:n.inactive,disabled:r,today:a}}(n,y)),[n,y]);return(0,g.jsx)(h.LazyDayPicker,{className:"notion-calendar-picker",defaultMonth:T,month:T,numberOfMonths:1,weekStartsOn:k,locale:i.SP,showOutsideDays:!0,fixedWeeks:!0,onDayClick:t=>function(t,e,n,o,i,s,r,d){if(s||d)return;const p=e.getFocus(),l=a.OQ.toPersistedDate(t.valueOf()),u=o(p,{value:l}),h=u.error?u:{value:{[p]:u.value[p]}};i(h),e.setState({...e.state,hovered:void 0}),r&&r.setState({...r.state,hovered:void 0});if(u.error)return;"starting"!==p||n.ending||(e.setState({...e.state,focus:"ending"}),r&&r.setState({...r.state,focus:c.yO.ending}));const g="starting"===p?"ending":"starting";e.setState({...e.state,focus:g}),r&&r.setState({...r.state,focus:c.yO[g]})}(t,n,l,v,x,m,S,e),onDayMouseEnter:t=>function(t,e,n,o,i,s){const r=e.getFocus(),d=a.OQ.jsDateToLuxon(t);if(o||s)return;if("starting"===r&&n.ending&&!n.starting){a.OQ.notionDateToLuxon(n.ending)>=d&&(e.setState({...e.state,hovered:t}),i&&i.setState({...i.state,hovered:t}))}else if("ending"===r&&n.starting&&!n.ending){a.OQ.notionDateToLuxon(n.starting)<=d&&(e.setState({...e.state,hovered:t}),i&&i.setState({...i.state,hovered:t}))}}(t,n,l,m,S,e),onMonthSelected:t=>function(t,e,n){e.setState({...e.state,displayMonth:a.OQ.jsDateToLuxon(t)}),n&&n.setState({...n.state,displayMonth:a.OQ.jsDateToLuxon(t)})}(t,n,S),modifiers:b,modifiersStyles:C,disabled:!!e||void 0})}},47082:(t,e,n)=>{n.d(e,{U:()=>y,Z:()=>T});var o=n(67294),i=n(83355),s=n(480),r=n(24405),a=n(53465),d=n(53965),p=n(60709),l=n(98742),u=n(34859),h=n(64113),c=n(64921),g=n(37601),f=n(74194),v=n(3386),x=n(53336),m=n(64369),S=n(85893);let y=function(t){return t[t.Select=0]="Select",t[t.Person=1]="Person",t[t.Relation=2]="Relation",t[t.FilterValue=3]="FilterValue",t[t.Share=4]="Share",t[t.Group=5]="Group",t}({});class D extends i.Z{constructor(){super(...arguments),this.inputRef=o.createRef(),this.storeTypes={store:h.Z},this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleFocused=()=>{this.stores.store.setState({focused:!0})},this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleBlurred=()=>{this.stores.store.setState({focused:!1})},this.handleContainerClick=()=>{var t,e,n;this.props.disabled||(null===(t=this.inputRef.current)||void 0===t||t.focusInput(),null===(e=(n=this.props).onClick)||void 0===e||e.call(n))}}UNSAFE_willMount(){(this.props.focus||this.props.focusInitial)&&this.stores.store.setState({focused:!0})}UNSAFE_willUpdate(){void 0!==this.props.focus&&this.stores.store.setState({focused:this.props.focus})}renderComponent(){const{disabled:t}=this.props;return(0,S.jsx)(v.Z,{debugName:"TokenInputMenuItem",capture:!t,onLeft:d.yR,onRight:d.yR,onSelectAll:d.yR,onRedo:d.yR,onUndo:d.yR,onToggleBold:d.yR,onToggleItalics:d.yR,onToggleCode:d.yR,onCut:d.yR,onCopy:d.yR,onPaste:d.yR,onKeypress:d.yR,children:(0,S.jsx)(v.Z,{debugName:"TokenInputMenuItem",capture:!t&&this.props.value.length>0,onDelete:d.yR,onBackspace:d.yR,children:(0,S.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"stretch",flex:1,minWidth:0,gap:this.props.message?4:void 0},children:[this.renderTokenInput(),this.props.message&&(0,S.jsx)(m.Z,{isSmall:!0,children:this.props.message})]})})})}renderTokenInput(){const{right:t,showClearButton:e}=this.props;return t||e?(0,S.jsxs)(x.Z,{type:u.Z.All,style:{...w(this.environment,this.theme,this.props.format,this.props.focus,this.props.dontShowBorderBottom,this.props.disabled,this.props.showBorder,this.context.menu),flexWrap:"nowrap",...this.props.style},onClick:this.handleContainerClick,children:[(0,S.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",flexGrow:1,minWidth:0,...this.props.inputAndTokenWrapRightStyle},children:[this.props.tokens,!this.props.hideInput&&this.renderInput()]}),(0,S.jsx)("div",{style:{flexShrink:0},children:(0,S.jsx)(R,{showClearButton:this.props.showClearButton,right:this.props.right,onClearButtonClick:this.props.onClearButtonClick,tokens:this.props.tokens,value:this.props.value})})]}):this.environment.device.isMobile?(0,S.jsxs)("div",{style:{...w(this.environment,this.theme,this.props.format,this.props.focus,this.props.dontShowBorderBottom,this.props.disabled,this.props.showBorder,this.context.menu),flexWrap:"nowrap",...this.props.style},onClick:this.handleContainerClick,children:[(0,S.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",flexGrow:1,minWidth:0,overflow:"hidden",marginRight:k(this.props.format)?6:0},children:[this.props.tokens,!this.props.hideInput&&this.renderInput()]}),(0,S.jsx)(g.Z,{show:this.stores.store.state.focused})]}):(0,S.jsxs)(x.Z,{type:u.Z.All,style:{...w(this.environment,this.theme,this.props.format,this.props.focus,this.props.dontShowBorderBottom,this.props.disabled,this.props.showBorder,this.context.menu),...this.props.style},onClick:this.handleContainerClick,children:[this.props.tokens,!this.props.hideInput&&this.renderInput()]})}renderInput(){const t=0===this.props.tokens.length;return(0,S.jsx)(f.Z,{disabled:this.props.disabled,format:f.B.Transparent,...(0,l.Z)({onKeyDown:t=>function(t,e,n,o){"Backspace"===t.key&&0===e.length&&n();o&&o(t)}(t,this.props.value,this.props.onRemoveLastToken,this.props.onKeyDown)},{onChange:this.props.onChange}),value:this.props.value,focus:this.props.focus,focusInitial:this.props.focusInitial,focusAfterAnimation:this.props.focusAfterAnimation,style:(e=this.props.format,n=this.environment,o=this.theme,i=this.props.inputFullWidth,s=this.props.inputDivStyle,{flexGrow:1,flexShrink:1,flexBasis:i?"100%":60,minWidth:60,width:"auto",lineHeight:"20px",...n.device.isMobile?{margin:"0 8px 8px 0"}:O(o)[e].inputDivDesktopStyle,...s}),inputStyle:this.props.inputStyle||{height:this.environment.device.isMobile?24:k(this.props.format)?20:18},size:1,ref:this.inputRef,type:this.props.type,placeholder:t?this.props.placeholder:"",onSubmit:t=>function(t,e,n,o){0===e.length&&n&&n();o&&o(t)}(t,this.props.value,this.props.onEmptySubmit,this.props.onSubmit),onFocus:this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleFocused,onBlur:this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleBlurred,textarea:this.props.textarea,autoComplete:this.props.autoComplete});var e,n,o,i,s}}D.displayName="TokenInputMenuItem",D.contextTypes={...p.mw,...i.w};const T=D;function k(t){return t===y.Group}function b(t,e){return{display:"flex",flexWrap:"wrap",alignItems:"flex-start",background:e?"none":t.tokenInputMenuItemBackground,cursor:"text",overflow:"hidden"}}function C(t){return{display:"flex",flexWrap:"wrap",alignItems:"flex-start",flexShrink:0,minHeight:44,borderBottom:`1px solid ${t.regularDividerColor}`,fontSize:16,background:t.popoverBackground}}function O(t){const e={desktopWrapStyle:{padding:"8px 9px 1px",width:"100%",minHeight:34,fontSize:14},inputDivDesktopStyle:{margin:"0 6px 6px 0",borderTopLeftRadius:4,borderTopRightRadius:4},inputDivDesktopFocusStyle:{}};return{[y.Select]:e,[y.Person]:e,[y.Relation]:e,[y.Group]:e,[y.FilterValue]:{desktopWrapStyle:{padding:"6px 6px 1px",boxShadow:t.inputBoxShadow,background:t.inputBackground,margin:"6px 8px 2px 8px",minHeight:30,fontSize:12,borderRadius:4},inputDivDesktopStyle:{margin:"0 6px 4px 0"},inputDivDesktopFocusStyle:{boxShadow:"rgba(35, 131, 226, 0.57) 0px 0px 0px 1px inset, rgba(35, 131, 226, 0.35) 0px 0px 0px 2px"}},[y.Share]:{desktopWrapStyle:{padding:"8px 9px 1px",width:"100%",minHeight:34,fontSize:14},inputDivDesktopStyle:{margin:"0 0 0 2px",borderTopLeftRadius:4,borderTopRightRadius:4},inputDivDesktopFocusStyle:{}}}}function R(t){let{showClearButton:e,right:n,onClearButtonClick:o,tokens:i,value:d}=t;const p=(0,r.Fg)(),l=(0,s.O7)(),{isMobile:u}=l.device;return n?(0,S.jsx)(S.Fragment,{children:n}):e&&(i.length>0||d.length>0)?(0,S.jsx)(c.Z,{onClick:o,style:{flexShrink:0,flexGrow:0,borderRadius:u?24:20,marginTop:2},children:(0,a.X)({width:u?16:14,height:u?16:14,fill:p.lightIconColor})}):null}function w(t,e,n,o,i,s,r,a){const{WindowSizeStore:d}=t;return{...t.device.isMobile?{...C(e),paddingTop:14,paddingBottom:8,paddingLeft:(null==a?void 0:a.menuType)!==p.og.Popup?d.getSafePaddingLeftCSS(16):16,paddingRight:(null==a?void 0:a.menuType)!==p.og.Popup?d.getSafePaddingRightCSS(16):16,...i&&{borderBottom:"none"}}:{...b(e,s),...O(e)[n].desktopWrapStyle},...r&&{boxShadow:"rgba(15, 15, 15, 0.1) 0px 0px 0px 1px inset"},...r&&o&&{boxShadow:"rgba(35, 131, 226, 0.57) 0px 0px 0px 1px inset, rgba(35, 131, 226, 0.35) 0px 0px 0px 2px"},...!t.device.isMobile&&o&&O(e)[n].inputDivDesktopFocusStyle}}},67950:(t,e,n)=>{n.d(e,{B:()=>i,Z:()=>r});var o=n(49085);const i={INVALID_DATE:"Invalid date",INVALID_RANGE:"Invalid range"};class s extends o.default{getInitialState(){return{edited:!1,temporary:"",error:void 0}}}const r=s},76150:(t,e,n)=>{n.d(e,{Hv:()=>i,ZP:()=>a,pd:()=>s});var o=n(49085);let i=function(t){return t.StartDate="startDate",t.StartTime="startTime",t.EndDate="endDate",t.EndTime="endTime",t}({}),s=function(t){return t.InvalidDate="Invalid date",t.InvalidTime="Invalid time",t.InvalidRange="Invalid range",t}({});class r extends o.default{getInitialState(){return{focus:i.StartDate,inputIsFocused:!1,inputTemporaryValue:{startDate:void 0,startTime:void 0,endDate:void 0,endTime:void 0},error:{startDate:void 0,startTime:void 0,endDate:void 0,endTime:void 0}}}}const a=r},13854:(t,e,n)=>{n.d(e,{QJ:()=>s,ZP:()=>d,yO:()=>r});var o=n(49085),i=n(76150);const s={[i.Hv.StartDate]:"starting",[i.Hv.StartTime]:"starting",[i.Hv.EndDate]:"ending",[i.Hv.EndTime]:"ending"},r={starting:i.Hv.StartDate,ending:i.Hv.EndDate};class a extends o.default{getInitialState(){return{isOpen:!1,focus:i.Hv.StartDate,temporaryDateRange:{starting:void 0,ending:void 0},displayMonth:void 0,hovered:void 0,showTime:!1}}getFocus(){return this.state.focus}toggleShowTime(){this.setState({...this.state,showTime:!this.state.showTime})}clearTemporaryDateRange(){this.setState({...this.state,temporaryDateRange:{starting:void 0,ending:void 0}})}}const d=a},41558:(t,e,n)=>{n.d(e,{Z:()=>s});var o=n(49085);class i extends o.default{getInitialState(){return{isOpen:!1,focus:"starting",temporaryDateRange:{starting:void 0,ending:void 0},displayMonth:void 0,hovered:void 0,dateFilterType:"lastEditedTime"}}getFocus(){return this.state.focus}clearTemporaryDateRange(){this.setState({...this.state,temporaryDateRange:{starting:void 0,ending:void 0}})}}const s=i}}]);