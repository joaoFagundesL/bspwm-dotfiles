"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[2001],{93289:(e,t,o)=>{o.d(t,{Z:()=>i});var n=o(67294),r=o(13991),s=o(77907),l=o(85893);const i=function(e){let{firstDayOfWeek:t,value:o,selectValue:i=!0,onChange:a,disabledDays:d}=e;const u=(0,n.useMemo)((()=>new Date(o)),[o]),[c,p]=(0,n.useState)(u),m=(0,n.useRef)(o);(0,n.useLayoutEffect)((()=>{m.current!==o&&(p(new Date(o)),m.current=o)}),[o]);const h=(0,n.useCallback)(((e,t,o)=>{a(e.getTime())}),[a]);return(0,l.jsx)(s.LazyDayPicker,{locale:r.SP,className:"notion-calendar-picker",numberOfMonths:1,weekStartsOn:t,modifiers:i?{value:u}:{},showOutsideDays:!0,fixedWeeks:!0,onDayClick:h,onMonthSelected:p,disabled:d,month:c})}},78948:(e,t,o)=>{o.d(t,{Z:()=>l});o(67294);var n=o(68785),r=o(28992),s=o(85893);const l=function(){return(0,s.jsx)(r.Z,{title:(0,s.jsx)(n.Z,{})})}},69872:(e,t,o)=>{o.d(t,{L:()=>c,Z:()=>p});o(67294);var n=o(480),r=o(24405),s=o(12396),l=o(98519),i=o(65183),a=o(52275),d=o(28992),u=o(85893);let c=function(e){return e[e.Name=0]="Name",e[e.Type=1]="Type",e}({});const p=function(e){const{propertySchema:t,format:o,locked:p}=e,m=(0,r.Fg)(),h=(0,n.O7)(),{name:x,type:g,icon:y}=t,f=o===c.Name?x:i.SO[g];return p?(0,u.jsx)(d.Z,{title:f,icon:(0,u.jsx)(s.ZP,{icon:y,type:g,size:h.device.isMobile?18:16,theme:m,style:{fill:m.regularIconColor}}),...e}):(0,u.jsx)(a.Z,{title:f,icon:(0,u.jsx)(s.ZP,{icon:y,type:g,size:h.device.isMobile?18:16,theme:m,style:{fill:m.regularIconColor,marginLeft:6,marginRight:2}}),right:e.selected?(0,l.k)({width:14,height:14}):null,...e})}},97680:(e,t,o)=>{o.d(t,{Z:()=>y});var n=o(67294),r=o(480),s=o(86628),l=o(66897),i=o(9291),a=o(1898),d=o(98742),u=o(4023),c=o(52275),p=o(26388),m=o(70301),h=o(45653),x=o(85893);const g=n.forwardRef(((e,t)=>{const{actor:o,userTitle:n,useEmailAsTooltip:g,tooltip:y,tooltipPlacement:f}=e,v=(0,r.O7)(),C=(0,i.useIntl)(),j=(0,s.VK)((()=>o.asActor&&o.isUser()?o.email:void 0),[o]),b=g&&j?j:y,w=v.device.isMobile?24:20;let S;return(0,l.YU)(o)?S=(0,x.jsx)(m.Z,{botValue:null==o?void 0:o.asActor,size:w}):(0,l.$S)(o)?S=(0,x.jsx)(h.Z,{userValue:null==o?void 0:o.asActor,size:w}):(0,l.Iq)(o)?S=(0,x.jsx)(h.Z,{userValue:void 0,size:w}):(0,a.t1)(o),(0,x.jsx)(p.ZP,{ref:t,placement:f??u.u.Bottom,alignment:u.v.Start,textWrap:!0,render:t=>(0,x.jsx)(c.Z,{...(0,d.Z)(t,e),icon:S,title:n??(0,l.$4)(C,o),className:"notranslate",right:e.right}),disableTooltip:!b,renderTooltip:()=>b})}));g.displayName="UserMenuItem";const y=g},71086:(e,t,o)=>{o.r(t),o.d(t,{PersonPropertyModule:()=>E});o(57658);var n=o(67294),r=o(480),s=o(86628),l=o(24405),i=o(66897),a=o(80951),d=o(59054),u=o(13148),c=o(22686),p=o(47453),m=o(19889),h=o(70203),x=o(9291),g=o(53965),y=o(1898),f=o(37810),v=o(19584),C=o(8406),j=o(993),b=o(13447),w=o(60709),S=o(35314),Z=o(77907),k=o(35948),M=o(94043),V=o(4023),P=o(61766),L=o(49068),T=o(69582),R=o(8606),B=o(64921),A=o(52275),F=o(31945),z=o(73063),W=o(68894),O=o(68785),I=o(78140),_=o(32163),N=o(43765),K=o(72495),H=o(70301),U=o(64369),D=o(45653),$=o(97680),q=o(85893);const E=n.memo((function(e){let{property:t,store:o,propertyValues:r,propertySchema:s}=e;const[i,a]=(0,S.e)(),d=Math.floor((a+8)/208),u="person"===(null==s?void 0:s.type)&&((0,y.$K)(s.limit)&&0===r.length||(0,v.z4)(s.limit)),[c,p]=(0,n.useState)(!1),m=5*d-(u?1:0),h=(0,l.yK)((e=>({showAllFewerButton:{borderRadius:6,padding:"2px 8px",marginTop:10,display:"inline-flex",flexWrap:"nowrap",gap:8,color:e.mediumTextColor,fontWeight:f.Z.fontWeight.medium,fontSize:14,alignItems:"center",justifyContent:"start"}})),[]),g=(0,q.jsx)(B.Z,{onClick:()=>p(!c),style:h.showAllFewerButton,children:c?(0,q.jsx)(x.FormattedMessage,{id:"PersonPropertySectionValues.showMoreButton.text",defaultMessage:"Show fewer"}):(0,q.jsx)(x.FormattedMessage,{id:"PersonPropertySectionValues.showFewerButton.text",defaultMessage:"Show more"})});return(0,q.jsxs)("div",{ref:i,children:[(0,q.jsx)(M.a3,{minWidth:200,style:{gridGap:8},children:(0,q.jsx)(Y,{values:r,blockStore:o,propertyId:t,propertySchema:s,itemsShownPerRow:d,showAddButton:u,limit:c?void 0:m,setShowingAllValues:p})}),r.length>m&&g]})}));function Y(e){let{values:t,blockStore:o,propertyId:l,propertySchema:d,itemsShownPerRow:u,showAddButton:c,limit:p,setShowingAllValues:m}=e;const x=(0,r.O7)(),f=(0,r.Fy)(),{collectionContextStore:w}=(0,n.useContext)(R.O),S=(0,n.useCallback)((function(e){b.createAndCommit({userAction:"PersonPropertyModule.updateValue",environment:x,perform:t=>{const n=a.BY(e);j.sO({environment:x,editorMode:"default",store:o.getNormalizedPropertyStore(l),value:n,transaction:t})}});const t=o.getAssociatedCollectionStore();w&&d&&t&&C.rv({environment:x,collectionContextStore:w,block_id:o.id,property:l,property_type:null==d?void 0:d.type,from:"property_module",collection_id:t.id,isFromBulkActionsToolbar:!1})}),[o,w,x,l,d]),Z=(0,n.useCallback)((function(e){S(t.filter((t=>(0,i.Wk)(e)?(0,h.D4X)(t)||e.id!==t.id:e!==t)))}),[S,t]),k=(0,n.useCallback)((function(e){S([...t,e])}),[S,t]),M=(0,n.useCallback)((function(e){S([e])}),[S]),[L,T]=(0,n.useState)(""),A=(0,n.useMemo)((()=>new P.Z),[]),z=t.length<=u-1?(0,g.w6)(u-t.length).map((e=>(0,q.jsx)("div",{},e))):[],W=(0,s.VK)((()=>o.isTemplate()),[o]),O=(0,s.VK)((()=>o.canEdit()),[o]);if((0,v.z4)(d))return null;if("created_by"===(null==d?void 0:d.type)||"last_edited_by"===(null==d?void 0:d.type))return(0,q.jsx)(X,{personValues:t,disabled:!0,onRemove:g.ZT});const I=p?t.slice(0,p):t;return O?(0,q.jsxs)(q.Fragment,{children:[c?(0,q.jsx)(G,{menu:(0,q.jsx)(Q,{query:L,setQuery:T,current:t,onAdd:k,inTemplate:W,limit:d.limit}),onClose:()=>{T(""),m(!1)},onClick:()=>{(0,y.$K)(p)&&m(!0)}}):null,(0,y.$K)(d.limit)?(0,q.jsx)(q.Fragment,{children:(0,q.jsx)(F.ZP,{buttonPopupStore:A,alignmentToOrigin:V.v.Start,onClose:()=>{T("")},popupType:f.isMobile?F.Z4.SlideUp:F.Z4.Popup,renderOrigin:e=>(0,q.jsx)(B.Z,{...e,children:(0,q.jsx)(X,{personValues:t,onRemove:Z,disabled:!O})}),render:()=>(0,q.jsx)(Q,{query:L,setQuery:T,current:t,onAdd:e=>{M(e),A.setState({open:!1})},inTemplate:W,limit:d.limit})})}):(0,q.jsx)(X,{personValues:I,onRemove:Z,disabled:!O}),z]}):(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(X,{personValues:I,disabled:!0,onRemove:g.ZT}),z]})}const G=n.memo((function(e){let{menu:t,onClick:o,onClose:n}=e;const s=(0,r.Fy)(),i=(0,l.yK)((e=>({button:{borderRadius:6,padding:"5px 0 5px 4px",display:"flex",flexWrap:"nowrap",gap:8,color:e.mediumTextColor,fontSize:14,alignItems:"center"},buttonBorder:{padding:8,borderRadius:9999,border:`1px dashed ${e.mediumTextColor}`}})),[]);return(0,q.jsx)(F.ZP,{alignmentToOrigin:V.v.Start,onClick:o,onClose:n,popupType:s.isMobile?F.Z4.SlideUp:F.Z4.Popup,renderOrigin:e=>(0,q.jsxs)(B.Z,{...e,style:i.button,children:[(0,q.jsx)("div",{style:i.buttonBorder,children:(0,p.R)({width:14})}),(0,q.jsx)(x.FormattedMessage,{id:"personProperty.addPersonButtonText",defaultMessage:"Add person"})]}),render:()=>t})}));function Q(e){let{query:t,setQuery:o,onAdd:s,current:l,inTemplate:a,limit:u}=e;const c=(0,r.Fy)(),p=(0,x.useIntl)(),f=function(e){let{query:t}=e;const o=(0,r.O7)(),[n]=(0,d.r5)((async()=>{const e=await Z.deps.searchActions.loader(),{users:n}=await e.searchSpaceActors({environment:o,query:t,membersOnly:!1});return n.map((e=>(0,i.LU)({table:m.KJ,value:e})))}),[o,t]);return n}({query:t}),v=(0,n.useMemo)((()=>new Set(l.map((e=>{if((0,i.Wk)(e))return e.id})).filter(y.$K))),[l]),C=(0,n.useCallback)((e=>e.filter((e=>!v.has(e.id)))),[v]),j=(0,q.jsx)(K.Z,{isInput:!0,style:{padding:8},children:(0,q.jsx)(W.ZP,{textWrapperStyle:{margin:0},focus:!c.isMobile||void 0,focusAfterAnimation:!0,value:t||"",onChange:e=>o(e.target.value),placeholder:p.formatMessage({id:"personPropertySectionValues.search.placeholder",defaultMessage:"Search for a person..."})})}),b=h.s8k.filter((e=>!l.includes(e))),S={key:"shortcuts",items:b.length>0?b.map((e=>({key:`relative_person_shortcut_${e}`,action:()=>{},render:t=>(0,q.jsx)(A.Z,{...t,title:(0,q.jsx)(T.w,{templateVariableType:e}),inline:!0,onClick:()=>{s(e)}})}))):[{key:"no_template_variables",action:()=>{},render:e=>(0,q.jsx)(N.Z,{...e,style:{margin:"2px 0px 2px 6px",fontSize:12},title:(0,q.jsx)(x.FormattedMessage,{id:"database.personPropertyMenu.noShorcuts.message",defaultMessage:"No shortcuts"})})}],render:e=>(0,q.jsx)(K.Z,{...e,title:"Shortcuts"})},[k,M]=(0,n.useMemo)((()=>{const e=[];let t;if("pending"===f.status||"idle"===f.status)e.push({key:"loading",action:()=>{},render:e=>(0,q.jsx)(N.Z,{...e,title:(0,q.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:(0,q.jsx)(O.Z,{})})})});else if("resolved"===f.status){const n=C(f.value??[]);t=n.length>0?0:void 0,0===n.length?e.push({key:"no_results",action:()=>{},render:e=>(0,q.jsx)(N.Z,{...e,title:(0,q.jsx)(x.FormattedMessage,{id:"PersonPropertySectionValues.searchMenu.noResults",defaultMessage:"No results."})})}):e.push(...n.map((e=>({key:e.id,action:()=>{s(e.pointer),o("")},render:t=>(0,q.jsx)($.Z,{...t,actor:(0,i.dp)(e)})}))))}else"rejected"===f.status?e.push({key:"no_results",action:()=>{},render:e=>(0,q.jsx)(N.Z,{...e,title:(0,q.jsx)(x.FormattedMessage,{id:"PersonPropertySectionValues.searchMenu.somethingWentWrong",defaultMessage:"Something went wrong."})})}):(0,y.t1)(f);return[e,t]}),[s,C,o,f]);return(0,q.jsx)(I.Z,{menuType:c.isMobile?w.og.ActionSheet:w.og.Popup,header:j,width:275,maxHeight:400,minWidth:275,children:(0,q.jsx)(_.Z,{type:_.i.Vertical,sections:(0,g.oA)([a?S:void 0,{key:"results",items:k.slice(0,20),render:e=>(0,q.jsx)(K.Z,{...e,title:(0,L.$)(u)})}]),initialFocus:M})})}const X=n.memo((function(e){let{personValues:t,onRemove:o,disabled:n}=e;return(0,q.jsx)(q.Fragment,{children:t.map((e=>(0,i.Wk)(e)?(0,q.jsx)(ee,{actorPointer:e,handleRemove:o,disabled:n},e.id):(0,h.D4X)(e)?(0,q.jsx)(J,{value:e,handleRemove:o,disabled:n},`template_variable_${e}`):void(0,y.t1)(e)))})})),J=n.memo((function(e){let{value:t,handleRemove:o,disabled:n}=e;const[r,s]=(0,k.C)(),i=(0,l.yK)((e=>({actorName:{fontWeight:f.Z.fontWeight.regular,color:e.blueColor,lineHeight:1.1},uiToken:{display:"flex",gap:10,alignItems:"center",background:s&&!n?e.outlineBlueButtonPressedBackground:e.outlineBlueButtonHoveredBackground,color:e.blueColor,justifyContent:"space-between",position:"relative",padding:"5px 28px 5px 5px",borderRadius:4},avatar:{borderRadius:6,display:"flex",flexWrap:"nowrap",gap:8,fontSize:14,alignItems:"center"},avatarBorder:{padding:8,borderRadius:9999,background:e.accentColors.uiBlue[s&&!n?100:200],color:e.accentColors.uiBlue[600]}})),[n,s]);return(0,q.jsx)(q.Fragment,{children:(0,q.jsxs)("div",{ref:r,style:i.uiToken,children:[(0,q.jsx)("div",{style:i.avatar,children:(0,q.jsx)("div",{style:i.avatarBorder,children:(0,c.f)({width:14})})}),(0,q.jsx)("div",{style:{display:"flex",gap:4,flexGrow:1},children:(0,q.jsx)(U.Z,{className:"notranslate",style:i.actorName,isMultiline:!0,children:(0,q.jsx)(x.FormattedMessage,{id:"PropertyModulePersonTemplateVariableValue.templateVariables.text.me",defaultMessage:"Person who{br}duplicated page",values:{br:(0,q.jsx)("br",{})}})})}),s&&!n?(0,q.jsx)(z.Z,{icon:u.U,ariaLabel:"Close",style:{position:"absolute",right:4,top:"50%",transform:"translateY(-50%)",width:20,height:20},iconStyle:{width:11},onClick:()=>o(t)}):null]})})})),ee=n.memo((function(e){let{actorPointer:t,handleRemove:o,disabled:r}=e;const a=(0,x.useIntl)(),{store:d}=(0,n.useContext)(R.O),c=(0,s.VK)((()=>{const e=null==d?void 0:d.getRecordModel;if(e)return(0,i.Hl)({pointer:t,getRecordModel:e})}),[t,null==d?void 0:d.getRecordModel]),p=null==c?void 0:c.asActor,m=(0,s.VK)((()=>null==p?void 0:p.getDisplayName(a)),[p,a]),h=(0,l.yK)((()=>({actorName:{fontWeight:f.Z.fontWeight.medium}})),[]),g=(0,s.VK)((()=>null!=p&&p.isUser()?(0,q.jsx)(D.Z,{userValue:p,size:32}):null!=p&&p.isBot()?(0,q.jsx)(H.Z,{botValue:p,size:32}):null),[p]),[y,v]=(0,k.C)();return(0,q.jsx)(q.Fragment,{children:(0,q.jsxs)("div",{ref:y,style:{display:"flex",gap:10,alignItems:"center",justifyContent:"space-between",position:"relative",padding:"5px 28px 5px 5px",borderRadius:4,background:v&&!r?"rgba(0,0,0,0.05)":void 0},children:[g,(0,q.jsx)("div",{style:{display:"flex",gap:4,flexGrow:1,...f.Z.textOverflowStyle},children:(0,q.jsx)(U.Z,{className:"notranslate",style:h.actorName,showTooltipWhenTruncated:!0,children:m})}),v&&!r?(0,q.jsx)(z.Z,{icon:u.U,ariaLabel:"Close",style:{position:"absolute",right:4,top:"50%",transform:"translateY(-50%)",width:20,height:20},iconStyle:{width:11},onClick:()=>o(t)}):null]})})}))},36420:(e,t,o)=>{o.d(t,{n:()=>a,y:()=>i});o(21703);var n=o(67294),r=(o(77744),o(26249));let s,l;function i(e){s=s??new Map,l=l??function(e){let t=!1,o=[];return new ResizeObserver((n=>{o=o.concat(n),t||(t=!0,window.requestAnimationFrame((()=>{const n=new Set;[...o].reverse().filter((e=>{const t=n.has(e.target);return n.add(e.target),!t})).forEach((t=>{const o=e.get(t.target);null==o||o.forEach((e=>{const o=t.borderBoxSize[0];e({width:o.inlineSize,height:o.blockSize})}))})),o=[],t=!1})))}))}(s);const[t,o]=(0,n.useState)(void 0),i=(0,n.useCallback)((e=>{o((t=>(0,r.Z)(t,e)?t:e))}),[]);return(0,n.useLayoutEffect)((()=>{const t=e.current;if(!t)return;l.observe(t);const o=[...s.get(t)??[],i];return s.set(t,o),()=>{l.unobserve(t);const e=(s.get(t)??[]).filter((e=>e!==i));0===e.length?s.delete(t):s.set(t,e)}}),[i,e]),t}function a(e){const{children:t,onSizeChange:o}=e,r=(0,n.useRef)(null),s=i(r);(0,n.useEffect)((()=>{o&&s&&o(s)}),[s,o]);const l=n.Children.only(t);return n.cloneElement(l,{ref:r})}},64275:(e,t,o)=>{o.d(t,{D:()=>s});o(67294);var n=o(45238),r=o(85893);const s=(0,n.IU)("closeSmall",{viewBox:"0 0 16 16",svg:(0,r.jsx)("path",{d:"M3.732 11.052c-.303.308-.32.877.011 1.202.33.33.894.32 1.203.011L8 9.21l3.05 3.05c.32.325.872.32 1.197-.011a.857.857 0 00.01-1.197L9.21 8.002l3.05-3.056a.857.857 0 00-.01-1.197.857.857 0 00-1.198-.01L8 6.788 4.946 3.732c-.31-.303-.878-.32-1.203.01-.325.331-.314.895-.01 1.203l3.055 3.056-3.056 3.05z"})})},62208:(e,t,o)=>{o.d(t,{z:()=>s});o(67294);var n=o(45238),r=o(85893);const s=(0,n.IU)("loop",{viewBox:"0 0 16 16",svg:(0,r.jsx)("path",{d:"M5.80371 3.12305C5.81006 3.50391 6.05762 3.74512 6.47656 3.74512H11.3643C11.9546 3.74512 12.2783 4.0498 12.2783 4.66553V11.2925L11.377 10.3149L10.8628 9.80078C10.5962 9.54688 10.2344 9.52783 9.96777 9.78809C9.71387 10.0483 9.72021 10.4229 9.98047 10.6831L12.145 12.8413C12.6211 13.311 13.167 13.311 13.6431 12.8413L15.8076 10.6831C16.0679 10.4229 16.0742 10.0483 15.8203 9.78809C15.5537 9.52783 15.1919 9.54688 14.9253 9.80078L14.4111 10.3149L13.5161 11.2861V4.56396C13.5161 3.20557 12.8052 2.50098 11.4341 2.50098H6.47656C6.05762 2.50098 5.79736 2.74219 5.80371 3.12305ZM0.186035 7.05859C0.446289 7.3252 0.808105 7.30615 1.07471 7.0459L1.59521 6.53809L2.48389 5.56689V12.2891C2.48389 13.6475 3.19482 14.3521 4.56592 14.3521H9.52344C9.94238 14.3521 10.2026 14.1108 10.1963 13.73C10.1899 13.3428 9.94238 13.1079 9.52344 13.1079H4.64209C4.05176 13.1079 3.72803 12.7969 3.72803 12.1812V5.5542L4.62305 6.53809L5.14355 7.0459C5.40381 7.30615 5.77197 7.3252 6.03223 7.05859C6.29248 6.79834 6.28613 6.43018 6.01953 6.16992L3.85498 4.01172C3.37891 3.53564 2.83936 3.53564 2.36328 4.01172L0.19873 6.16992C-0.0678711 6.43018 -0.0742188 6.79834 0.186035 7.05859Z"})})},38715:(e,t,o)=>{o.d(t,{N:()=>s});o(67294);var n=o(45238),r=o(85893);const s=(0,n.IU)("save",{viewBox:"0 0 16 16",svg:(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("path",{d:"M7.99316 10.8877C8.16406 10.8877 8.31445 10.833 8.47168 10.6758L10.7686 8.46094C10.8848 8.34473 10.9463 8.22168 10.9463 8.05762C10.9463 7.74316 10.6934 7.51074 10.3857 7.51074C10.2285 7.51074 10.0713 7.5791 9.96191 7.70215L8.99805 8.7207L8.56055 9.21973L8.62891 8.20801V1.11914C8.62891 0.78418 8.3418 0.49707 7.99316 0.49707C7.65137 0.49707 7.36426 0.78418 7.36426 1.11914V8.20801L7.43262 9.22656L6.98828 8.7207L6.03125 7.70215C5.92188 7.5791 5.75781 7.51074 5.60059 7.51074C5.29297 7.51074 5.04004 7.74316 5.04004 8.05762C5.04004 8.22168 5.1084 8.34473 5.22461 8.46094L7.52148 10.6758C7.67871 10.833 7.8291 10.8877 7.99316 10.8877ZM4.0625 15.3174H11.9307C13.4072 15.3174 14.1729 14.5586 14.1729 13.1025V6.36914C14.1729 4.91309 13.4072 4.1543 11.9307 4.1543H10.0781V5.49414H11.8486C12.4775 5.49414 12.833 5.82227 12.833 6.48535V12.9863C12.833 13.6494 12.4775 13.9775 11.8486 13.9775H4.14453C3.50879 13.9775 3.16016 13.6494 3.16016 12.9863V6.48535C3.16016 5.82227 3.50879 5.49414 4.14453 5.49414H5.92871V4.1543H4.0625C2.58594 4.1543 1.82031 4.91309 1.82031 6.36914V13.1025C1.82031 14.5586 2.58594 15.3174 4.0625 15.3174Z"})})})}}]);