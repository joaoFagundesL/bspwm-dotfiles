"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[7345],{46084:(e,t,o)=>{o.r(t),o.d(t,{default:()=>w});var n=o(67294),i=o(480),l=o(86628),s=o(24405),c=o(3865),r=o(56666),a=o(9291),u=o(8406),d=o(5149),S=o(91851),p=o(40663),g=o(43250),f=o(12534),v=o(33929),C=o(80444),b=o(58421),x=o(73063),h=o(26388),k=o(85893);const m=(0,a.defineMessages)({tooltipLabel:{defaultMessage:"Edit view layout, grouping and more...",id:"database.collectionViewSettingsButton.openViewSettingsButton.tooltip"}});function w(e){const{collectionContextStore:t,hideTooltip:o}=e,a=(0,i.O7)(),w=(0,l.VK)((()=>t.collectionViewStore()),[t]),y=(0,l.VK)((()=>null==w?void 0:w.getType()),[w]),V=(0,l.VK)((()=>t.settingsStore),[t]),K=(0,l.VK)((()=>V.state.open),[V]),_=(0,l.VK)((()=>t.permissionScopes.state),[t]),T=(0,l.VK)((()=>(0,b.n)(V)),[V]),j=!(0,c.Cf)({tab:T}),L=(0,l.VK)((()=>t.contextType),[t]),M=(0,n.useCallback)((()=>{const e=C.default.state.currentUserSettingsStore,t=C.default.state.currentSpaceStore;if(e&&t){"click_view_settings"===(0,p.jH)(e,t)&&(0,S.uR)({environment:a,requiredCurrPhase:void 0,nextPhase:"complete",currentUserSettingsStore:e,currentSpaceStore:t})}}),[a]),P=(0,n.useCallback)((e=>{(0,f.ZP)({event:e,context:f.Af.CollectionSettingsClick,callback:()=>{const e=t.settingsStore,o=e.state.open,n=(0,b.n)(e);o&&"main"===(null==n?void 0:n.type)?d.E3({collectionSettingsStore:e}):d.r$({collectionContextStore:t,collectionSettingsStore:e})}}),u.wd({environment:a,collectionContextStore:t,action:"click_topbar_view_settings"}),M()}),[t,a,M]),E=(0,s.yK)((e=>({iconStyle:{width:void 0,height:3,fill:e.mediumIconColor}})),[]);if("page"===y||!_.canEditContent&&"collectionTypedView"!==L)return null;const U=(0,k.jsx)(x.Z,{ariaLabel:v.default.formatMessage(m.tooltipLabel),className:g.xvU,icon:r.o,style:e.style,iconStyle:E.iconStyle,hovered:K&&j,onClick:P});return o?U:(0,k.jsx)(h.ZP,{renderTooltip:()=>v.default.formatMessage(m.tooltipLabel),render:e=>(0,k.jsx)("div",{...e,children:U})})}}}]);