"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[5584,8721,5830],{9234:(e,t,n)=>{n.r(t),n.d(t,{AssistantWriterPopup:()=>Ne,assistantWriterActions:()=>s});var s={};n.r(s),n.d(s,{acceptCursorCompletionAssistant:()=>C,cancelAssistantCompletion:()=>y,cancelCursorCompletionAssistant:()=>h,moveAssistantWriterToCorner:()=>S,refreshAssistantCompletion:()=>g,triggerAssistantCompletion:()=>x,triggerAssistantSkillCompletion:()=>v});var o=n(1302),i=n(53965),a=n(7032),r=n(1898),l=n(24677),c=n(98104),d=n(27123),p=n(72909),u=n(98180),m=n(16772),f=n(27724);async function v(e){const{environment:t,context:n,clientSkill:s,skillSettings:i,updater:a,sessionId:r,from:d}=e;"textSelection"===n.type&&a((()=>{c.ZH(t),l.ZH(t)}));const p={type:"assistantCompletionPopup",stage:"results",loading:!0,sessionId:r,context:n,from:d,hasErrored:!1,clientSkill:s,skillSettings:i};a((()=>{m.default.setState(p)})),await o.default.afterNextFlush(),await g({...e,updater:a})}async function g(e){var t;const{environment:n,updater:s,humanText:o}=e,l=m.default.state;if("assistantCompletionPopup"!==l.type||"results"!==l.stage)return;const{clientSkill:c,skillSettings:p}=l,v=l.sessionId;u.Z.getSessionContext(v)||await d.resetAndInitializeAssistantSession({environment:n,completionContext:l.context,clientSkill:c,skillSettings:p,sessionId:v,makeActiveSession:!1}),(0,r.$K)(o)?await d.commitHumanStep({environment:n,text:o,sessionId:v}):null!==(t=l.clientSkill)&&void 0!==t&&null!==(t=t.inAppSkillTrigger)&&void 0!==t&&t.requiresInput||await d.sampleNextAssistantSteps({environment:n,sessionId:v,inferenceId:(0,a.ZP)()}),await s((()=>{const e=m.default.state;if("assistantCompletionPopup"!==e.type||"results"!==e.stage)return;const t=i.Z$(f.default.state.stores);m.default.setState({...e,context:{...e.context,origin:t||e.context.origin},loading:!1})}))}function y(e){const{environment:t,completionState:n}=e;d.clearActiveAssistantSession({environment:t,sessionId:n.sessionId})}async function C(e){const{environment:t,selectInsertion:n,exitType:s}=e,o=m.default.state;if("assistantCompletionPopup"!==o.type)return;const i=o.sessionId;m.default.invalidateLastUpdater(),m.default.resetStore(e),await d.commitPreviewAssistantStep({environment:t,sessionId:i}),await d.applyUncommittedOperations({environment:t,sessionId:i}),d.clearActiveAssistantSession({environment:t,sessionId:i})}function h(e){const{environment:t}=e,n=m.default.state;if("assistantCompletionPopup"!==n.type)return;const s=n.sessionId;m.default.invalidateLastUpdater(),m.default.resetStore(e),d.clearActiveAssistantSession({environment:t,sessionId:s})}function x(e){const{environment:t,context:n,prompt:s,additionalContext:o,updater:i,sessionId:a,from:r}=e;"textSelection"===n.type&&i((()=>{c.ZH(t),l.ZH(t)}));const d={type:"assistantCompletionPopup",stage:"initialPrompt",sessionId:a,context:n,from:r,loading:!1,hasErrored:!1};i((()=>{m.default.setState(d)}))}function S(e){const{environment:t}=e,n=m.default.state;"assistantCompletionPopup"===n.type&&(m.default.invalidateLastUpdater(),m.default.resetStore(e),p.openAssistantRightHandSideMenu({environment:t,makeActiveSessionId:n.sessionId,from:"assistant_writer"}))}var k=n(67294),w=n(480),I=n(86628),A=n(24405),b=n(41892),P=n(70203),M=n(9291),j=n(56863),V=n(92022),T=n(57819),N=n(83982),Z=n(47869),E=n(48019),L=n(3386),K=n(78140),_=n(43250),H=n(68657),R=n(60709),q=n(21273),W=n(29798),$=n(78141),B=n(12219),D=n(85803),F=n(16540),U=n(67973),J=n(80444),O=n(85893);function z(e){const t=(0,A.yK)((()=>({wrap:{minHeight:36,paddingLeft:8,paddingRight:8,marginTop:3,marginBottom:3}})),[]),n=(0,I.VK)((()=>J.default.state.currentSpaceStore),[]),s=(0,I.VK)((()=>(0,$.J)()),[]),o=(0,B.f6)(s),i=(0,I.qz)(void 0,U.d);return n&&s?(0,O.jsx)("div",{style:t.wrap,children:"searchResults"===(null==o?void 0:o.type)?(0,O.jsx)(F.N,{clientStep:o.step,parentStore:n,citationHoverStore:i,isQuickSearchMode:!1,renderAsFullPage:!1}):(0,O.jsx)(D.H,{clientStep:{type:"assistantLoading",inferenceId:"hard-coded"},parentStore:n,parentSpaceId:n.id,isQuickSearchMode:!1,renderAsFullPage:!1,latestStepCitationHoverStore:i})}):null}n(67635);var Q=n(84969),G=n(54615),X=n(37565),Y=n(54402),ee=n(17826),te=n(74003),ne=n(95330),se=n(56348),oe=n(59772),ie=n(57254),ae=n(19124);function re(e){const t=(0,M.useIntl)(),n=(0,w.Fy)(),s=(0,I.VK)((()=>J.default.state.currentSpaceStore),[]),o=(0,I.VK)((()=>(0,$.J)()),[]),i=(0,I.VK)((()=>(0,ae.lV)()),[]),a=(0,I.VK)((()=>(0,ae.Gw)()),[]),r=(0,I.VK)((()=>null==o?void 0:o.sessionId),[o]),l=(0,I.VK)((()=>{if(!o)return;const e=o.temporaryClientSteps.findLast((e=>"assistantChat"===e.type));return e&&!(0,ie.S)(e)?e:void 0}),[o],{useDeepEqual:!0}),c=(0,I.VK)((()=>o&&o.selectedSkill&&0===o.clientSteps.length&&oe.skillDefaultAssistantMessageMap[o.selectedSkill.skillType]),[o]),d=(0,I.VK)((()=>null==o?void 0:o.sessionId),[o]),p=(0,I.VK)((()=>(0,se.em)()),[]),f=(0,I.VK)((()=>{if(!o||!p)return;return o.getCombinedSteps().filter((e=>"labelerModeTurnIndicator"===e.type))}),[p,o],{useDeepEqual:!0});(0,k.useEffect)((()=>{const e=u.Z.state.activeAiSessionId;return!d||e&&d===e||u.Z.setActiveSessionId(d),()=>{e&&u.Z.setActiveSessionId(e)}}),[d]);const v=(0,I.VK)((()=>m.default.state),[]),g=(0,I.VK)((()=>{if(!o||"assistantCompletionPopup"===v.type&&v.loading)return;const e=o.previewingStepObservations.some((e=>"observation"===e.type&&"error"===e.observationType)),n=t.formatMessage({id:"AssistantWriterPopupRenderer.error",defaultMessage:"I’m sorry, I’m having trouble completing this request. Please click “try again” or type a new command."});return e?n:null}),[v,t,o]),y=(0,I.qz)(void 0,U.d),C=(0,A.yK)((e=>({messageWrap:{fontSize:n.isMobile?15:14,borderRadius:16,margin:"12px 10px 0 10px"},error:{fontSize:14,color:e.errorText,padding:8}})),[n]),h=(0,k.useRef)(null);if(!s)return null;const x=(0,O.jsxs)(O.Fragment,{children:[p&&(0,O.jsx)(G.G,{}),(i||a)&&o&&(0,O.jsx)(ee.Z,{sessionContext:o}),c&&(0,O.jsx)("div",{style:C.messageWrap,children:t.formatMessage(c)}),l&&(0,O.jsx)("div",{style:C.messageWrap,ref:h,children:(0,O.jsx)(Q.m,{clientStep:l,parentStore:s,isLatestStep:!0,isQuickSearchMode:!1,renderAsFullPage:!1,priorSearchResultsStep:void 0,citationHoverStore:y,disableWrap:!0,sessionId:d,wrapperRef:h})}),r&&f&&f.length>0&&(0,O.jsx)(O.Fragment,{children:f.map(((e,t)=>(0,O.jsx)(ne.Z,{clientStep:e,sessionId:r},t)))}),g?(0,O.jsx)("div",{style:C.error,children:g}):null,i&&o&&(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(X.y,{type:"chat",renderAsFullPage:!1,sessionContext:o}),(0,O.jsx)(Y.Z,{sessionContext:o})]})]});return(0,O.jsx)(te.p,{origin:x})}n(21703);var le=n(87205),ce=n(89598),de=n(41154),pe=n(30579),ue=n(88607),me=n(13148),fe=n(1230),ve=n(32240),ge=n(98519),ye=n(55863),Ce=n(31701),he=n(46564),xe=n(62967),Se=n(88202),ke=n(72495),we=n(68204);const Ie=(0,M.defineMessages)({moveToCorner:{id:"getAssistantActionSections.moveToCorner",defaultMessage:"Move chat to corner"}}),Ae="This string should never show up in analytics";function be(e){const{filter:t,state:n,from:s,context:o,intl:a,completionResultInfo:l}=e;let c;"initialPrompt"===n.stage?c=function(e){const{intl:t,from:n,type:s}=e,o=(0,oe.getFilteredClientSkills)({showCustomSkills:!1,hasCurrentPage:!0}),a="blockSelection"===s||"textSelection"===s?oe.writerSelectionSections:oe.writerCursorSections;return i.oA(a.map((e=>{const s=i.oA(e.skills.map((e=>o.find((t=>t.skillType===e)))));if(0===s.length)return;const a=(0,xe.$J)({key:e.key,title:e.title,render:e=>(0,O.jsx)(ke.Z,{...e}),actions:s.map((e=>"translate"===e.skillType?function(e){const{clientSkill:t,intl:n,from:s}=e;if("translate"!==t.skillType)throw new Error("Expected translate skill");const o=le.nI.map((e=>{let{key:o,name:i}=e;return(0,xe.cN)({key:`assistant.translate.${o}`,analyticsName:`Assistant - translate - ${o}`,displayName:i,validators:[],closeParentMenu:!1,right:(0,he.cx)("submitPrompt"),action:async e=>{let{environment:i}=e;const a=m.default.state;a&&"assistantCompletionPopup"===a.type&&"initialPrompt"===a.stage&&await v({environment:i,context:a.context,clientSkill:t,skillSettings:{language:o},intl:n,updater:m.default.createUpdater(),sessionId:(0,de.Oy)(),from:s})}})})),i=(0,xe.$J)({key:"translate language actions",render:e=>(0,O.jsx)(ke.Z,{...e}),actions:o}),a=()=>(0,O.jsx)(he.lA,{svg:Pe(ue.Q)});return(0,xe.MV)({key:"translate",displayName:oe.skillMessages.translate,analyticsName:`Assistant - ${t.skillType}`,validators:[],svg:a,subActions:()=>[i]})}({clientSkill:e,intl:t,from:n}):"change_tone"===e.skillType?function(e){const{clientSkill:t,intl:n,from:s}=e;if("change_tone"!==t.skillType)throw new Error("Expected change_tone skill");const o=le.vK.map((e=>{let{key:o,name:i}=e;return(0,xe.cN)({key:`assistant.changeTone.${o}`,analyticsName:`Assistant - changeTone - ${o}`,displayName:i,validators:[],closeParentMenu:!1,right:(0,he.cx)("submitPrompt"),action:async e=>{let{environment:i}=e;const a=m.default.state;a&&"assistantCompletionPopup"===a.type&&"initialPrompt"===a.stage&&await v({environment:i,context:a.context,clientSkill:t,skillSettings:{tone:o},intl:n,updater:m.default.createUpdater(),sessionId:(0,de.Oy)(),from:s})}})})),i=(0,xe.$J)({key:"changeTone actions",render:e=>(0,O.jsx)(ke.Z,{...e}),actions:o}),a=()=>(0,O.jsx)(he.lA,{svg:Pe(pe.p)});return(0,xe.MV)({key:"changeTone",displayName:oe.skillMessages.changeTone,analyticsName:`Assistant - ${t.skillType}`,validators:[],svg:a,subActions:()=>[i]})}({clientSkill:e,intl:t,from:n}):(0,xe.cN)({key:e.skillType,analyticsName:`Completions - ${e.skillType}`,displayName:oe.skillNameMap[e.skillType],validators:[],closeParentMenu:!1,svg:Pe(oe.skillIconMap[e.skillType]),right:(0,he.cx)("submitPrompt"),action:async s=>{let{environment:o}=s;const i=m.default.state;i&&"assistantCompletionPopup"===i.type&&"initialPrompt"===i.stage&&await v({environment:o,context:i.context,clientSkill:e,skillSettings:{},intl:t,updater:m.default.createUpdater(),sessionId:(0,de.Oy)(),from:n})}})))});return a})))}({intl:a,from:s,context:o,type:n.context.type}):"results"===n.stage?c=n.loading?[]:function(e){const t=ge.k,n=(0,$.J)();if(!n)return[];const s=n.sampledSteps.length>0,o=n.getAllPendingOperations().length>0,a=n.temporaryClientSteps.findLast(ce.qT),r=a?{key:"insert",analyticsName:Ae,displayName:Se.ow.insert,validators:[],closeParentMenu:!0,svg:fe.H,action(){e.onInsert({chatStep:a})}}:void 0,l={key:"moveToCorner",analyticsName:Ae,displayName:Ie.moveToCorner,validators:[],closeParentMenu:!1,svg:ve.y,action(){e.onMoveToCorner()}};return s?o?[(0,xe.$J)({key:"main",render:e=>(0,O.jsx)(ke.Z,{...e}),actions:i.oA([(0,xe.cN)({key:"keep",analyticsName:Ae,displayName:Se.ow.accept,validators:[],closeParentMenu:!0,svg:t,action(){e.onAccept({exitType:"accept"})}}),(0,xe.cN)({key:"tryAgain",analyticsName:Ae,displayName:Se.ow.tryAgain,validators:[],closeParentMenu:!1,svg:ye.s,action(){e.onRetry()}}),(0,xe.cs)({key:"close",analyticsName:Ae,displayName:Se.ow.delete,validators:[],closeParentMenu:!0,svg:me.U,shortcuts:["esc"],action(){e.onCancel()}})])}),(0,xe.$J)({key:"move_to_corner",render:e=>(0,O.jsx)(ke.Z,{...e}),actions:[(0,xe.cN)(l)]})]:[(0,xe.$J)({key:"main",render:e=>(0,O.jsx)(ke.Z,{...e}),actions:i.oA([r?(0,xe.cN)({...r,svg:t}):void 0,(0,xe.cN)({key:"tryAgain",analyticsName:Ae,displayName:Se.ow.tryAgain,validators:[],closeParentMenu:!1,svg:ye.s,action(){e.onRetry()}}),(0,xe.cs)({key:"close",analyticsName:Ae,displayName:Se.ow.close,validators:[],closeParentMenu:!0,svg:me.U,shortcuts:["esc"],action(){e.onCancel()}})])}),(0,xe.$J)({key:"move_to_corner",render:e=>(0,O.jsx)(ke.Z,{...e}),actions:[(0,xe.cN)(l)]})]:[]}({...l}):(0,r.t1)(n.stage);return(0,we.sG)({sections:c,context:o,query:t})}function Pe(e){return function(){return(0,O.jsx)(he.lA,{svg:e,svgFill:Ce.FN.light.purple[400]})}}var Me=n(10910),je=n(13447);const Ve="notion-assistant-writer-ui",Te=(0,M.defineMessages)({writeInputPlaceholder:{defaultMessage:"Ask or edit text…",id:"AssistantWriterPopup.writeInputPlaceholder"}});function Ne(e){const{completionState:t}=e,n=(0,I.VK)((()=>q.Z.showAtMentionMenu()),[]);(0,k.useEffect)((()=>{j.w()}),[]);const s=(0,w.O7)(),o=(0,M.useIntl)(),i=(0,I.VK)((()=>s.device.isMobile),[s]),a=(0,A.yK)((e=>({wrap:{display:"flex",borderRadius:22,background:e.popoverBackground,boxShadow:e.mediumBoxShadow,overflow:"hidden",isolation:"isolate",flexDirection:"column",gap:4,paddingTop:2,paddingBottom:2},inputWrap:{width:"100%",minHeight:i?50:42,padding:i?"0 16px 0 16px":"0 8px 0 8px",display:"flex",alignItems:"center",gap:8,fontSize:i?16:14},inputOverrides:{marginLeft:0,marginRight:0,boxShadow:"unset",borderRadius:0,padding:0},faceImgWrap:{width:24,height:24,borderRadius:"100%",background:"white",boxShadow:e.largeLightBoxShadow,overflow:"hidden"},faceImg:{width:24,pointerEvents:"none"},chatWrap:{padding:8,fontSize:i?15:14},menuPopup:{marginTop:4,marginBottom:4,borderRadius:6,background:e.popoverBackground,boxShadow:e.mediumBoxShadow,width:i?"100%":320,overflow:"hidden",isolation:"isolate"}})),[i]),r=(0,I.VK)((()=>{var e;const t=null===(e=(0,$.J)())||void 0===e?void 0:e.assistantConfigurationStore.state;return Boolean((null==t?void 0:t.sampling)||(null==t?void 0:t.evaluating))}),[]),{store:l}=(0,H.Cl)({initialValue:void 0}),u=(0,I.VK)((()=>l.getValue()),[l]),f=(0,I.VK)((()=>(0,P.Jcv)(u)),[u]),v=(0,k.useCallback)((async()=>{await(0,p.canDismissAssistantBasedOnEdits)({environment:s,humanInput:u,isWriter:!0})&&((0,T.Tq)(s),(0,V.closeInitialPromptAndEndSession)(),"results"===t.stage&&y({environment:s,completionState:t}))}),[s,t,u]),x=(0,k.useCallback)((()=>{S({environment:s})}),[s]),E=(0,k.useCallback)((async e=>{e&&(m.default.setState({...t,stage:"results"}),await g({environment:s,updater:m.default.createUpdater(),humanText:e}))}),[t,s]);(0,k.useEffect)((()=>{r||c.N_({store:l})}),[s,l,r]);const K=(0,k.useMemo)((()=>({environment:s,blocks:[],publicEditMode:void 0})),[s]);(0,I.VK)((()=>{r!==t.loading&&m.default.setState({...t,loading:r})}),[r,t]),(0,I.VK)((()=>{const e=(0,$.J)();e&&(0,$.g)(e.getAllPendingExecutableOperations())&&S({environment:s})}),[s]);const R=function(e){const{environment:t,sessionId:n}=e,s=(0,k.useCallback)((async e=>{let{exitType:s,selectInsertion:o}=e;const i=m.default.state;"assistantCompletionPopup"!==i.type||"results"!==i.stage||i.loading||(Me.HC(t,{session_id:n,inference_id:void 0,exit_type:s}),await C({environment:t,selectInsertion:o,exitType:s}))}),[t,n]),o=(0,k.useCallback)((e=>{const s=m.default.state;"assistantCompletionPopup"!==s.type||"results"!==s.stage||s.loading||((0,T.Tq)(t),Me.HC(t,{session_id:n,inference_id:void 0,exit_type:"insert"}),je.createAndCommit({userAction:"CompletionPopup.handleInsert",environment:t,perform:n=>{const o=s.sessionId;d.insertAssistantChatBelowSelection({environment:t,sessionId:o,transaction:n,chatStep:e.chatStep})}}),h({environment:t}))}),[t,n]),i=(0,k.useCallback)((()=>{console.warn("onReplace not implemented for assistant writer!")}),[]);return(0,k.useMemo)((()=>({onAccept:s,onInsert:o,onReplace:i})),[s,o,i])}({environment:s,sessionId:t.sessionId}),B=(0,k.useCallback)((async()=>{await N.f6({environment:s,sessionId:t.sessionId})}),[t,s]),D=(0,I.VK)((()=>be({intl:o,filter:f,state:t,from:t.from,context:K,completionResultInfo:{...R,onRetry:B,onCancel:v,onMoveToCorner:x}})),[K,R,t,B,v,x,f,o]),F=D.length>0,U=(0,I.qz)(void 0,W.Z);let J;return F&&(J=(0,O.jsx)("div",{style:a.menuPopup,className:Ve,children:(0,O.jsx)(Ze,{sections:D,context:K,menuListStore:U})})),(0,k.useEffect)((()=>{function e(e){var t;(t=e.target)instanceof Element&&(t.closest(`.${Ve}`)||t.closest(`.${_.YPt}`))||("click"!==e.type&&"contextmenu"!==e.type||v())}return window.addEventListener("click",e,!0),window.addEventListener("contextmenu",e,!0),()=>{window.removeEventListener("click",e,!0),window.removeEventListener("contextmenu",e,!0)}}),[v]),(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(L.Z,{capture:!0,onEsc:v,debugName:"AssistantWriterPopup"}),(0,O.jsxs)("div",{style:a.wrap,className:Ve,children:[(0,O.jsx)(re,{}),r?(0,O.jsx)(z,{}):(0,O.jsxs)("div",{style:a.inputWrap,children:[(0,O.jsx)("div",{style:a.faceImgWrap,children:(0,O.jsx)("img",{style:a.faceImg,src:b.Z.images.aiFaceLookleftPng})}),(0,O.jsx)(Z.H,{showAtMentionMenu:n,store:l,placeholder:o.formatMessage(Te.writeInputPlaceholder),onSubmit:E,onEsc:v,onBackspaceOnEmptyInput:v,textInputOverrideStyles:a.inputOverrides,suppressFocusable:!0})]})]}),J]})}function Ze(e){const{sections:t,context:n,menuListStore:s}=e,o=(0,w.O7)(),i=(0,I.VK)((()=>o.device.isPhone),[o]);return(0,O.jsx)(K.Z,{menuType:i?R.og.ActionSheet:R.og.Popup,width:"100%",maxHeight:i?"min(17vh, 160px)":"min(40vh, 320px)",maxWidth:"100%",children:(0,O.jsx)(E.Z,{keyboardPriority:1,menuListStore:s,sections:t,initialFocus:0,context:n})})}},11335:(e,t,n)=>{n.d(t,{Z:()=>m});n(67294);var s=n(86628),o=n(24405),i=n(80951),a=n(19255),r=n(32566),l=n(21202),c=n(1898),d=n(6258),p=n(14200),u=n(85893);function m(e){const t=e.propertySchema.type;switch(t){case"title":case"text":return(0,u.jsx)(f,{...e});case"relation":return(0,u.jsx)(v,{propertySchema:e.propertySchema,beforeValue:e.beforeValue,afterValue:e.afterValue,rootStore:e.rootStore});case"checkbox":case"number":case"person":case"file":case"url":case"email":case"phone_number":case"created_time":case"created_by":case"last_edited_time":case"last_edited_by":case"last_visited_time":case"formula":case"rollup":case"select":case"multi_select":case"date":case"button":case"status":case"auto_increment_id":case"location":case"verification":return(0,u.jsx)(g,{...e});default:(0,c.t1)(t)}}function f(e){const t={value:a.Mg({before:e.beforeValue.value,after:e.afterValue.value}),spaceId:e.beforeValue.spaceId};return(0,u.jsx)(p.Z,{value:t,propertySchema:e.propertySchema,rootStore:e.rootStore})}function v(e){const{beforeValue:t,afterValue:n,propertySchema:o,rootStore:a}=e,r=(0,s.VK)((()=>i.NT({beforeValue:t.value,afterValue:n.value,propertySchema:o,getRecordModel:a.getRecordModel,getBlockTitle:e=>d.G.createChildStore(a,{table:l.iU,id:e.id}).getPropertyValue("title")})),[t,n,o,a]);return(0,u.jsx)(p.Z,{value:{value:r,spaceId:t.spaceId},propertySchema:{type:"title",name:"Title"},rootStore:a})}function g(e){const t=(0,o.yK)((()=>({arrowDiffWrap:{display:"inline-flex",alignItems:"center"}})),[]);return(0,u.jsxs)("div",{style:t.arrowDiffWrap,children:[(0,u.jsx)(p.Z,{value:e.beforeValue,propertySchema:e.propertySchema,rootStore:e.rootStore}),(0,u.jsx)(y,{}),(0,u.jsx)(p.Z,{value:e.afterValue,propertySchema:e.propertySchema,rootStore:e.rootStore})]})}function y(){const e=(0,o.yK)((e=>({container:{padding:"0px 8px"},icon:{width:15,height:15,fill:e.mediumIconColor}})),[]);return(0,u.jsx)("div",{style:e.container,children:(0,r.k)(e.icon)})}},19255:(e,t,n)=>{n.d(t,{Mg:()=>u});n(30541),n(57658),n(21703);var s=n(67266),o=n.n(s),i=n(5242),a=n.n(i),r=n(53965),l=n(1898),c=n(15095),d=n(70203);let p=function(e){return e[e.removed=-1]="removed",e[e.added=1]="added",e[e.same=0]="same",e}({});function u(e){const{before:t,after:n,isIncompleteAfter:s,insertCursor:i}=e,u={count:0,encoding:{},decoding:{},annotationEncoding:{},annotationDecoding:{}},m=e=>{const t=u.encoding[e];if(t)return t;{const t=String.fromCharCode(u.count);return u.count++,u.encoding[e]=t,u.decoding[t]=e,t}},f=e=>{const t=o()(e),n=u.annotationEncoding[t];if(n)return n;{const n=String.fromCharCode(u.count);return u.count++,u.annotationEncoding[t]=n,u.annotationDecoding[n]=e,n}},v=e=>r.xH(d.lzi(e).map((e=>{const t=c.p4(e[0]).map(m);if(d.km_(e)){const n=d.hDy(e),s=d.I$B(n);s&&(t[0]=f({type:"mention",value:s}),n.forEach((e=>{d.ZAl(e)||d.kuv(e)||d.QVC(e)||(t.unshift(f({type:"start",value:e})),t.push(f({type:"end",value:e})))})))}else if(d.YrK(e)){const n=d.hDy(e),s=d.Ap(n);if(s){t[0]=f({type:"equation",value:s});for(const e of n)d.ZAl(e)||d.kuv(e)||d.QVC(e)||(t.unshift(f({type:"start",value:e})),t.push(f({type:"end",value:e})))}}else if(d.AJd(e)){d.hDy(e).forEach((e=>{t.unshift(f({type:"start",value:e})),t.push(f({type:"end",value:e}))}))}return t}))).join("");if(u.count>65535)throw new Error("This string has way too many different characters.");const g=function(e,t){const n=new(a())({timeout:2,editCost:6}),s=n.main(t,e);return n.cleanupSemantic(s),s}(v(n),v(t)),y=[];let C=[],h=0;const x=s?r.qr(g,(e=>0===e[0]||1===e[0])):0;let S=!1;const k=()=>e.insertedDeletedAnnotationEditId?["+",e.insertedDeletedAnnotationEditId]:["+"],w=()=>e.insertedDeletedAnnotationEditId?["-",e.insertedDeletedAnnotationEditId]:["-"];return g.forEach((e=>{let[t,n]=e;n.split("").forEach((e=>{if(u.decoding[e]){const n=u.decoding[e];t===p.added?y.push([n,[...C,k()]]):t===p.removed&&(!s||h<=x)?y.push([n,[...C,w()]]):(s&&i&&!S&&h===x+1&&(S=!0,y.push(["",[["tc"]]])),y.push([n,C]))}else{const n=u.annotationDecoding[e];if(t===p.added)if("mention"===n.type)y.push([d.qyI,[...C,k(),n.value]]);else if("start"===n.type)C=[...C,n.value];else if("end"===n.type)C=C.filter((e=>!r.Xy(e,n.value)));else if("equation"===n.type){const e=d.xey(n.value),t=d.qZ6(e,[...C,k()]);y.push(t)}else(0,l.t1)(n);else if(t===p.removed){if("mention"===n.type)y.push([d.qyI,[...C,w(),n.value]]);else if("equation"===n.type){const e=d.xey(n.value),t=d.qZ6(e,[...C,w()]);y.push(t)}}else if(t===p.same)if("mention"===n.type)y.push([d.qyI,[...C,n.value]]);else if("start"===n.type)C=[...C,n.value];else if("end"===n.type)C=C.filter((e=>!r.Xy(e,n.value)));else if("equation"===n.type){const e=d.xey(n.value),t=d.qZ6(e,C);y.push(t)}else(0,l.t1)(n)}})),s&&(h+=1)})),d.Zxt(y)}},32566:(e,t,n)=>{n.d(t,{k:()=>i});n(67294);var s=n(45238),o=n(85893);const i=(0,s.IU)("arrowRightSmaller",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M15.383 8.352a.877.877 0 01-.274.64l-5.156 5.14a.864.864 0 01-.617.266.831.831 0 01-.602-.234.795.795 0 01-.234-.586c0-.12.02-.232.063-.336a.912.912 0 01.187-.273l1.75-1.766 2.914-2.656.274.5-2.711.156H1.484c-.26 0-.471-.078-.632-.234a.851.851 0 01-.235-.617c0-.256.078-.461.235-.618a.856.856 0 01.632-.242h9.493l2.71.164-.273.508L10.5 5.5 8.75 3.727a.946.946 0 01-.188-.266.917.917 0 01-.062-.344c0-.234.078-.43.234-.586a.831.831 0 01.602-.234.79.79 0 01.328.07c.104.047.203.117.297.211l5.148 5.133a.877.877 0 01.274.64z"})})},30134:(e,t,n)=>{n.d(t,{c:()=>i});n(67294);var s=n(45238),o=n(85893);const i=(0,s.IU)("export",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M3.0625 15.8174C2.32422 15.8174 1.76595 15.6305 1.3877 15.2568C1.00944 14.8831 0.820312 14.3294 0.820312 13.5957V6.86914C0.820312 6.13997 1.00944 5.58854 1.3877 5.21484C1.76595 4.83659 2.32422 4.64746 3.0625 4.64746H4.92871V5.99414H3.14453C2.82552 5.99414 2.58171 6.07845 2.41309 6.24707C2.24902 6.41113 2.16699 6.65951 2.16699 6.99219V13.4795C2.16699 13.8122 2.24902 14.0605 2.41309 14.2246C2.58171 14.3932 2.82552 14.4775 3.14453 14.4775H10.8486C11.1631 14.4775 11.4046 14.3932 11.5732 14.2246C11.7464 14.0605 11.833 13.8122 11.833 13.4795V6.99219C11.833 6.65951 11.7464 6.41113 11.5732 6.24707C11.4046 6.07845 11.1631 5.99414 10.8486 5.99414H9.07812V4.64746H10.9375C11.6758 4.64746 12.234 4.83659 12.6123 5.21484C12.9906 5.58854 13.1797 6.13997 13.1797 6.86914V13.5957C13.1797 14.3249 12.9906 14.8763 12.6123 15.25C12.234 15.6283 11.6758 15.8174 10.9375 15.8174H3.0625ZM7 11.3877C6.91797 11.3877 6.83822 11.374 6.76074 11.3467C6.68327 11.3148 6.60124 11.2578 6.51465 11.1758L4.21777 8.96094C4.10384 8.84245 4.04688 8.70801 4.04688 8.55762C4.04688 8.39811 4.09928 8.26823 4.2041 8.16797C4.31348 8.06771 4.44792 8.01758 4.60742 8.01758C4.7806 8.01758 4.92188 8.0791 5.03125 8.20215L5.98828 9.2207L6.43262 9.71973L6.36426 8.70117V1.61914C6.36426 1.45052 6.42578 1.30469 6.54883 1.18164C6.67643 1.05859 6.82682 0.99707 7 0.99707C7.17318 0.99707 7.32129 1.05859 7.44434 1.18164C7.57194 1.30469 7.63574 1.45052 7.63574 1.61914V8.70117L7.56738 9.71973L8.00488 9.2207L8.96191 8.20215C9.07585 8.0791 9.21712 8.01758 9.38574 8.01758C9.54069 8.01758 9.67285 8.06771 9.78223 8.16797C9.89616 8.26823 9.95312 8.39811 9.95312 8.55762C9.95312 8.70801 9.89388 8.84245 9.77539 8.96094L7.47852 11.1758C7.39648 11.2578 7.31673 11.3148 7.23926 11.3467C7.16178 11.374 7.08203 11.3877 7 11.3877Z"})})},19981:(e,t,n)=>{n.d(t,{V:()=>i});n(67294);var s=n(45238),o=n(85893);const i=(0,s.IU)("handWave",{viewBox:"0 0 14 15",svg:(0,o.jsx)("path",{d:"M12.223 12.396c.888-.893 1.406-1.886 1.551-2.98.15-1.098-.08-2.288-.69-3.568l-1.552-3.275a2.264 2.264 0 00-.417-.594 1.28 1.28 0 00-.95-.404c-.36 0-.677.135-.95.404a1.211 1.211 0 00-.335.628c-.05.247-.023.502.082.766l.383.91c.013.031.011.056-.007.074-.023.019-.048.016-.075-.006L5.537.625C5.232.32 4.897.167 4.532.167c-.36-.005-.688.144-.984.444a1.115 1.115 0 00-.219.308 1.13 1.13 0 00-.096.349c-.291-.2-.59-.288-.895-.26-.3.023-.574.157-.82.403a1.278 1.278 0 00-.397.827c-.023.306.057.6.24.882a.876.876 0 00-.602.287c-.278.274-.415.584-.41.93.004.346.148.66.43.943l.458.458a.877.877 0 00-.348.09 1.115 1.115 0 00-.308.218 1.32 1.32 0 00-.37.615 1.29 1.29 0 00.021.684 1.6 1.6 0 00.397.635l4.231 4.232c.78.775 1.6 1.294 2.461 1.559.866.264 1.72.28 2.564.047.843-.232 1.622-.706 2.338-1.421zm-.841-.793c-.579.58-1.197.957-1.853 1.135-.651.178-1.317.15-1.996-.082-.674-.228-1.335-.663-1.982-1.305L1.497 7.297a.452.452 0 01-.143-.308.38.38 0 01.13-.3.403.403 0 01.3-.137c.119 0 .223.045.315.136l2.495 2.489a.45.45 0 00.355.15.476.476 0 00.342-.15.478.478 0 00.164-.349.461.461 0 00-.15-.362l-3.733-3.74a.446.446 0 01-.143-.3.38.38 0 01.13-.301.425.425 0 01.307-.137.45.45 0 01.315.137l3.48 3.486c.104.1.225.148.361.144a.476.476 0 00.342-.15c.1-.1.153-.22.157-.356a.47.47 0 00-.143-.362L2.283 2.799a.477.477 0 01-.143-.315.41.41 0 01.136-.307.39.39 0 01.301-.123c.119.004.223.05.315.136l4.04 4.034a.434.434 0 00.348.15.5.5 0 00.349-.15c.1-.1.153-.22.157-.356a.46.46 0 00-.137-.355L4.218 2.08a.425.425 0 01-.137-.308c0-.113.041-.216.123-.307a.41.41 0 01.308-.123c.114 0 .218.045.314.136L9.64 6.292c.136.141.282.212.437.212a.577.577 0 00.403-.178.71.71 0 00.192-.342c.032-.136.011-.298-.062-.485L9.748 3.25a.52.52 0 01-.014-.37.42.42 0 01.22-.232.362.362 0 01.32 0c.1.05.185.149.253.294l1.586 3.377c.52 1.121.702 2.108.547 2.96-.155.853-.58 1.627-1.278 2.325z"})})},28495:(e,t,n)=>{n.d(t,{v:()=>i});n(67294);var s=n(45238),o=n(85893);const i=(0,s.IU)("personCircle",{viewBox:"0 0 18 17",svg:(0,o.jsx)("path",{d:"M8.99219 16.6797C10.0964 16.6797 11.1354 16.4688 12.1094 16.0469C13.0833 15.6302 13.9427 15.0495 14.6875 14.3047C15.4323 13.5599 16.0156 12.7005 16.4375 11.7266C16.8594 10.7526 17.0703 9.71354 17.0703 8.60938C17.0703 7.50521 16.8594 6.46615 16.4375 5.49219C16.0156 4.51823 15.4323 3.66146 14.6875 2.92188C13.9427 2.17708 13.0833 1.59375 12.1094 1.17188C11.1354 0.75 10.0938 0.539062 8.98438 0.539062C7.88021 0.539062 6.84115 0.75 5.86719 1.17188C4.89844 1.59375 4.04167 2.17708 3.29688 2.92188C2.55729 3.66146 1.97656 4.51823 1.55469 5.49219C1.13281 6.46615 0.921875 7.50521 0.921875 8.60938C0.921875 9.71354 1.13281 10.7526 1.55469 11.7266C1.97656 12.7005 2.55729 13.5599 3.29688 14.3047C4.04167 15.0495 4.90104 15.6302 5.875 16.0469C6.84896 16.4688 7.88802 16.6797 8.99219 16.6797ZM8.99219 15.0859C8.09635 15.0859 7.25521 14.9193 6.46875 14.5859C5.6875 14.2526 5 13.7891 4.40625 13.1953C3.81771 12.6016 3.35677 11.9141 3.02344 11.1328C2.6901 10.3516 2.52344 9.51042 2.52344 8.60938C2.52344 7.71354 2.6901 6.875 3.02344 6.09375C3.35677 5.30729 3.81771 4.61719 4.40625 4.02344C4.99479 3.42969 5.67969 2.96615 6.46094 2.63281C7.2474 2.29948 8.08854 2.13281 8.98438 2.13281C9.88542 2.13281 10.7266 2.29948 11.5078 2.63281C12.2943 2.96615 12.9844 3.42969 13.5781 4.02344C14.1719 4.61719 14.6354 5.30729 14.9688 6.09375C15.3021 6.875 15.4688 7.71354 15.4688 8.60938C15.4688 9.51042 15.3021 10.3516 14.9688 11.1328C14.6354 11.9141 14.1719 12.6016 13.5781 13.1953C12.9844 13.7891 12.2969 14.2526 11.5156 14.5859C10.7344 14.9193 9.89323 15.0859 8.99219 15.0859ZM14.2031 13.7656L14.1719 13.6328C14.0052 13.2474 13.6849 12.8776 13.2109 12.5234C12.7422 12.1641 12.1484 11.8724 11.4297 11.6484C10.7161 11.4193 9.90365 11.3047 8.99219 11.3047C8.09115 11.3047 7.28125 11.4193 6.5625 11.6484C5.84375 11.8724 5.2474 12.1641 4.77344 12.5234C4.30469 12.8776 3.98698 13.2448 3.82031 13.625L3.78906 13.7656C4.27865 14.2188 4.83333 14.599 5.45312 14.9062C6.07292 15.2188 6.69271 15.4557 7.3125 15.6172C7.9375 15.7786 8.4974 15.8594 8.99219 15.8594C9.49219 15.8594 10.0521 15.7786 10.6719 15.6172C11.2917 15.4557 11.9115 15.2188 12.5312 14.9062C13.151 14.599 13.7083 14.2188 14.2031 13.7656ZM8.99219 10.0156C9.4974 10.0208 9.95312 9.89583 10.3594 9.64062C10.7656 9.38021 11.0885 9.02604 11.3281 8.57812C11.5677 8.125 11.6875 7.61979 11.6875 7.0625C11.6875 6.54167 11.5651 6.0625 11.3203 5.625C11.0807 5.18229 10.7578 4.82812 10.3516 4.5625C9.95052 4.29688 9.4974 4.16406 8.99219 4.16406C8.49219 4.16406 8.03646 4.29688 7.625 4.5625C7.21875 4.82812 6.89583 5.18229 6.65625 5.625C6.41667 6.0625 6.29948 6.54167 6.30469 7.0625C6.3099 7.61979 6.42969 8.1224 6.66406 8.57031C6.90365 9.01302 7.22656 9.36458 7.63281 9.625C8.03906 9.88021 8.49219 10.0104 8.99219 10.0156Z"})})}}]);