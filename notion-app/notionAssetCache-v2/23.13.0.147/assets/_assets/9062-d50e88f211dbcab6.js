"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[9062],{14694:(e,t,s)=>{s.d(t,{Z:()=>c});s(67294);var a=s(480),n=s(86628),o=s(24405),i=s(39567),r=s(50659),d=s(85893);function l(){const e=(0,o.yK)((e=>({icon:{position:"absolute",width:"50%",height:"50%",right:0,bottom:0,fill:"dark"===e.mode?e.regularTextColor:"#3E3C38",stroke:"dark"===e.mode?e.sidebarBackground:"white",strokeWidth:"dark"===e.mode?"1.85px":"1.5px"}})),[]);return(0,d.jsx)("div",{children:(0,i.Y)(e.icon)})}function c(e){var t;const s=(0,a.O7)(),i=s.device.isMobile,c=(0,n.VK)((()=>{var t,a;if(i)return s.WindowSizeStore.getSafePaddingLeftCSS("number"==typeof(null===(t=e.style)||void 0===t?void 0:t.paddingLeft)?null===(a=e.style)||void 0===a?void 0:a.paddingLeft:10)}),[s.WindowSizeStore,i,null===(t=e.style)||void 0===t?void 0:t.paddingLeft]),u=(0,o.yK)((t=>({wrapper:{...i?{display:"flex",alignItems:"center",width:"100%",minHeight:26,fontSize:16,paddingTop:8,paddingBottom:8,paddingLeft:c,paddingRight:10,userSelect:"none",WebkitUserSelect:"none",boxShadow:e.disableMobileBorder?void 0:`0 1px 0 ${t.regularDividerColor}`,marginBottom:e.shouldShowMobileMarginBottom?12:1}:{display:"flex",alignItems:"center",width:"100%",fontSize:e.isBottomItem?12:14,minHeight:e.isBottomItem?24:27,paddingTop:2,paddingBottom:2,marginTop:1,marginBottom:1,...(0,r.MF)()},...e.style},icon:{display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,flexGrow:0,width:i?28:22,height:i?24:18,marginLeft:-3,marginRight:4,position:"relative"},right:{display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,flexGrow:0,height:"100%",...e.rightStyle},left:{flexShrink:0,flexGrow:0,borderRadius:4,color:t.mediumTextColor,width:i?26:22,height:i?24:22,display:"flex",alignItems:"center",justifyContent:"center",marginRight:e.icon?0:8},children:{flexGrow:1,flexShrink:1,flexBasis:"auto",whiteSpace:"nowrap",minWidth:0,overflow:"hidden",textOverflow:e.right&&!i?"clip":"ellipsis",...e.childrenStyle}})),[i,c,e.disableMobileBorder,e.shouldShowMobileMarginBottom,e.style,e.rightStyle,e.icon,e.right,e.childrenStyle,e.isBottomItem]);return(0,d.jsxs)("div",{role:e.role,"aria-current":e["aria-current"],"aria-expanded":e["aria-expanded"],"aria-owns":e["aria-owns"],"aria-labelledby":e["aria-labelledby"],style:u.wrapper,onFocus:e.onFocus,onBlur:e.onBlur,onMouseMove:e.onMouseMove,onMouseLeave:e.onMouseLeave,onClick:e.onClick,className:e.className,children:[e.left&&(0,d.jsx)("div",{style:u.left,children:e.left}),e.icon&&(0,d.jsxs)("div",{style:u.icon,children:[e.icon,e.isAlias&&(0,d.jsx)(l,{})]}),(0,d.jsx)("div",{style:u.children,children:e.children}),e.right&&(0,d.jsx)("div",{style:u.right,children:e.right})]})}},97680:(e,t,s)=>{s.d(t,{Z:()=>f});var a=s(67294),n=s(480),o=s(86628),i=s(66897),r=s(9291),d=s(1898),l=s(98742),c=s(4023),u=s(52275),g=s(26388),m=s(70301),p=s(45653),h=s(85893);const x=a.forwardRef(((e,t)=>{const{actor:s,userTitle:a,useEmailAsTooltip:x,tooltip:f,tooltipPlacement:b}=e,y=(0,n.O7)(),j=(0,r.useIntl)(),v=(0,o.VK)((()=>s.asActor&&s.isUser()?s.email:void 0),[s]),M=x&&v?v:f,S=y.device.isMobile?24:20;let w;return(0,i.YU)(s)?w=(0,h.jsx)(m.Z,{botValue:null==s?void 0:s.asActor,size:S}):(0,i.$S)(s)?w=(0,h.jsx)(p.Z,{userValue:null==s?void 0:s.asActor,size:S}):(0,i.Iq)(s)?w=(0,h.jsx)(p.Z,{userValue:void 0,size:S}):(0,d.t1)(s),(0,h.jsx)(g.ZP,{ref:t,placement:b??c.u.Bottom,alignment:c.v.Start,textWrap:!0,render:t=>(0,h.jsx)(u.Z,{...(0,l.Z)(t,e),icon:w,title:a??(0,i.$4)(j,s),className:"notranslate",right:e.right}),disableTooltip:!M,renderTooltip:()=>M})}));x.displayName="UserMenuItem";const f=x},79921:(e,t,s)=>{s.d(t,{v:()=>o});s(67294);var a=s(24405),n=s(85893);function o(e){let{left:t,right:s}=e;const o=(0,a.yK)((e=>({grid:{display:"grid",gridTemplateColumns:"250px 1fr"},leftColumnFixed:{position:"relative",boxSizing:"border-box",maxHeight:"100vh",overflow:"auto"},rightColumn:{position:"relative",background:e.contentBackground,boxSizing:"border-box",maxHeight:"100vh",overflow:"auto"}})),[]);return(0,n.jsxs)("div",{style:o.grid,children:[(0,n.jsx)("div",{style:o.leftColumnFixed,children:t}),(0,n.jsx)("div",{style:o.rightColumn,children:s})]})}},84880:(e,t,s)=>{s.d(t,{g:()=>l,n:()=>c});var a=s(67294),n=s(480),o=s(84747),i=s(54642),r=s(68117),d=s(85893);const l=(0,a.createContext)({spaceIds:[],refreshOrganization:async()=>{}});function c(e){let{children:t,organizationId:s}=e;const c=(0,n.O7)(),[u,g]=(0,a.useState)([]),{updateCacheWithRecordMap:m}=(0,a.useContext)(r.V);(0,o.Z)((async()=>{const e=await i.getSpacesInOrganization(c,{organizationId:s});"success"===e.type&&(g(e.data.spaceIds),m({data:e.data}))}));const p=(0,a.useCallback)((async()=>{const e=await i.getSpacesInOrganization(c,{organizationId:s});"success"===e.type&&m({data:e.data})}),[c,s,m]);return(0,d.jsx)(l.Provider,{value:{spaceIds:u,refreshOrganization:p},children:t})}},86631:(e,t,s)=>{s.d(t,{Z:()=>x});s(67294);var a=s(86628),n=s(24405),o=s(9291),i=s(37810),r=s(50659),d=s(80444),l=s(11066),c=s(61519),u=s(69219),g=s(45653),m=s(82162),p=s(14694),h=s(85893);function x(e){let{items:t}=e;const s=(0,n.yK)((e=>({container:{background:e.sidebarBackground,boxShadow:e.sidebarBoxShadow,paddingBlock:4,width:"100%",height:"100vh",display:"flex",flexDirection:"column",gap:2},itemButton:{fontWeight:i.Z.fontWeight.medium,color:e.regularTextColor,...(0,r.G$)({isMobile:!1})},itemIcon:{fill:e.mediumIconColor,width:18},selectedItemIcon:{fill:e.regularIconColor,width:18},selectedItemButton:{background:e.buttonHoveredBackground},sidebarItemContainer:{display:"flex",alignItems:"center",justifyContent:"flex-start",flexDirection:"row"},divider:{color:e.lightDividerColor}})),[]);return(0,h.jsxs)("div",{style:s.container,children:[(0,h.jsx)(f,{}),(0,h.jsx)(c.Z,{size:1,dividerColor:s.divider.color}),t.map((e=>{const t=e.isSelected?{...s.itemButton,...s.selectedItemButton}:s.itemButton,a=e.isSelected?s.selectedItemIcon:s.itemIcon;return(0,h.jsx)(l.Z,{style:t,children:(0,h.jsx)(p.Z,{style:s.sidebarItemContainer,left:e.icon(a),onClick:e.onClick,children:e.name})},e.id)}))]})}function f(){const e=(0,o.useIntl)(),t=(0,n.yK)((e=>({container:{padding:"8px 16px 4px"},iconStyle:{color:e.lightTextColor,fontWeight:500},preamble:{display:"block",fontSize:12,fontWeight:500,color:e.lightTextColor}})),[]),s=(0,a.VK)((()=>d.default.state.currentUserStore),[]),i=(0,a.VK)((()=>{const t=d.default.state.currentUserStore;if(t)return{userName:t.getFullName(e),userEmail:t.getEmail()}}),[e]);return(0,h.jsxs)("div",{style:t.container,children:[(0,h.jsx)("div",{style:t.preamble,children:"Logged in as"}),s&&i?(0,h.jsx)(u.i,{useThinTitle:!0,title:i.userName,byline:i.userEmail,iconSize:40,icon:(0,h.jsx)(g.Z,{size:40,userStore:s,iconStyle:t.iconStyle})}):(0,h.jsx)(m.L,{iconSize:40})]})}},60370:(e,t,s)=>{s.d(t,{eT:()=>Ya,ow:()=>Qa,QV:()=>Xa,GF:()=>en});var a=s(67294),n=s(83176),o=s(82114),i=s(69628),r=s(93108),d=s(47409),l=s(18442),c=s(62397),u=s(56996),g=s(16001),m=s(48524),p=s(26774),h=s(9291),x=s(480),f=s(61149),b=s(12066),y=s(1898),j=s(8055),v=s(86628),M=s(24405),S=s(59054),w=s(54642),C=s(47307),I=s(33954),z=s(33929),k=s(36596),F=s(7124),U=s(24006),N=s(66661),T=s(84880),R=s(32566),A=s(98742),L=s(26388),O=s(85893);function _(e){let{children:t,direction:s}=e;const n=a.Children.count(t),o=(0,M.yK)((e=>({container:{display:"grid",gridTemplateColumns:"horizontal"===s?`repeat(${n}, 1fr)`:"1fr",border:`1px solid ${e.stroke.deemphasized}`,borderRadius:4,overflow:"hidden",margin:"12px 0"}})),[n,s]);return(0,O.jsx)("div",{style:o.container,children:t})}function B(e){let{children:t,onClick:s,tooltipText:n}=e;const[o,i]=(0,a.useState)(!1),r=(0,M.yK)((e=>({container:{position:"relative",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"flex-start",gap:8,borderRight:`1px solid ${e.stroke.deemphasized}`,marginRight:-1,padding:16,userSelect:s?"none":void 0,transition:"background 100ms ease-in-out"},containerHover:{cursor:"pointer",background:e.stroke.deemphasized},arrowContainer:{position:"absolute",right:16,top:"calc(50% - 8px - 8px)",animationName:"slideInFromLeft",animationDuration:"200ms",animationDirection:"forward",animationTimingFunction:"ease-in-out",background:e.stroke.deemphasized,borderRadius:4,padding:8},arrowIcon:{height:16,width:16,color:e.text.secondary}})),[s]),d=s&&o?{...r.container,...r.containerHover}:r.container;const l={onMouseEnter:function(){s&&i(!0)},onMouseLeave:function(){s&&i(!1)}};return(0,O.jsx)(L.ZP,{placement:L.ug.Bottom,disableTooltip:!n,renderTooltip:()=>n,render:e=>(0,O.jsxs)("div",{...(0,A.Z)(l,e),style:d,onClick:s,children:[t,o?(0,O.jsx)("div",{style:r.arrowContainer,children:(0,R.k)(r.arrowIcon)}):null]})})}function D(e){let{title:t,byline:s,item:a}=e;const n=(0,M.yK)((e=>({settingContainer:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",padding:16},settingLeft:{flex:3,display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"flex-start",gap:4},settingRight:{flex:1,display:"flex",flexDirection:"column",alignItems:"flex-end",justifyContent:"flex-start"}})),[]);return(0,O.jsxs)("div",{style:n.settingContainer,children:[(0,O.jsxs)("div",{style:n.settingLeft,children:[(0,O.jsx)(F.q,{styleName:"Body-14px/Regular",colorName:"primary",children:t}),(0,O.jsx)(F.q,{styleName:"Body-12px/Regular",colorName:"secondary",children:s})]}),(0,O.jsx)("div",{style:n.settingRight,children:a})]})}var P=s(97608),Z=s(81918),E=s(64964),V=s(63296),K=s(64369);function W(e){let{organizationStore:t}=e;const s=(0,x.O7)();return(0,O.jsx)(V.Z,{isRed:!0,onClick:async function(){Z.KF(s,{email_domains:t.getEmailDomains()});const{accept:e}=await C.confirmUserActionV2({message:(0,O.jsx)(K.Z,{style:C.dialogStyles.title,children:(0,O.jsx)(h.FormattedMessage,{id:"identityProvisioningSettings.managedAccounts.logoutAllUsers.confirmation.message",defaultMessage:"Log out all of your managed accounts?"})}),description:(0,O.jsx)(K.Z,{isMultiline:!0,isSecondaryColor:!0,children:(0,O.jsx)(h.FormattedMessage,{id:"identityProvisioningSettings.managedAccounts.logoutAllUsers.confirmation.description",defaultMessage:"You are about to log all of your managed accounts out of their current session, including you. The affected users will need to re-authenticate to log back into Notion."})}),acceptLabel:(0,O.jsx)(h.FormattedMessage,{id:"identityProvisioningSettings.managedAccounts.logoutAllUsers.confirmation.acceptLabel",defaultMessage:"Log out all managed accounts"}),cancelLabel:(0,O.jsx)(h.FormattedMessage,{id:"identityProvisioningSettings.managedAccounts.logoutAllUsers.confirmation.cancelLabel",defaultMessage:"Cancel"})});e&&(await w.logoutManagedUsers(s,{organizationId:t.id,target:{type:P.J.Domains,emailDomains:t.getEmailDomains()}}),E.oV({label:(0,O.jsx)(h.FormattedMessage,{id:"managedAccounts.toastMessage.logout.all.success",defaultMessage:"Successfully logged out all managed accounts"})}),Z._6(s,{email_domains:t.getEmailDomains()}))},children:(0,O.jsx)(h.FormattedMessage,{id:"identityProvisioningSettings.managedAccounts.logoutAllUsers.logoutButton",defaultMessage:"Log out all accounts"})})}function H(e){let{organizationStore:t}=e;const s=(0,x.O7)();return(0,O.jsx)(V.Z,{isRed:!0,onClick:async function(){Z.Jo(s,{email_domains:t.getEmailDomains()});const{accept:e}=await C.confirmUserActionV2({message:(0,O.jsx)(K.Z,{style:C.dialogStyles.title,children:(0,O.jsx)(h.FormattedMessage,{id:"identityProvisioningSettings.managedAccounts.forcePasswordReset.confirmation.message",defaultMessage:"Reset passwords for your managed accounts?"})}),description:(0,O.jsx)(K.Z,{isMultiline:!0,isSecondaryColor:!0,children:(0,O.jsx)(h.FormattedMessage,{id:"identityProvisioningSettings.managedAccounts.forcePasswordReset.confirmation.description",defaultMessage:"You are about to reset the passwords for of your managed accounts, including you. This will also remove any 2-step verification settings they might have and they will be logged out of of their current session.{br}{br}The affected users will need to re-authenticate via their email the next time they attempt to log back into Notion, and they will be prompted to set a new password upon logging in.",values:{br:(0,O.jsx)("br",{})}})}),acceptLabel:(0,O.jsx)(h.FormattedMessage,{id:"identityProvisioningSettings.managedAccounts.forcePasswordReset.confirmation.acceptLabel",defaultMessage:"Reset passwords for all managed accounts"}),cancelLabel:(0,O.jsx)(h.FormattedMessage,{id:"identityProvisioningSettings.managedAccounts.forcePasswordReset.confirmation.cancelLabel",defaultMessage:"Cancel"})});e&&(await w.resetPasswordsForManagedUsers(s,{organizationId:t.id,target:{type:P.J.Domains,emailDomains:t.getEmailDomains()}}),E.oV({label:(0,O.jsx)(h.FormattedMessage,{id:"managedAccounts.toastMessage.forcePasswordReset.all.success",defaultMessage:"Successfully reset passwords for all managed accounts"})}),Z.aT(s,{email_domains:t.getEmailDomains()}))},children:(0,O.jsx)(h.FormattedMessage,{id:"identityProvisioningSettings.managedAccounts.forcePasswordReset.logoutButton",defaultMessage:"Reset all passwords for all accounts"})})}var q=s(19639),$=s(58698),G=s(16402),J=s(55422);function Y(e){let{organizationStore:t}=e;const s=(0,x.O7)(),{refreshOrganization:n}=(0,a.useContext)(T.g),o=(0,a.useMemo)((()=>Object.entries(q.nb).map((e=>{let[t,s]=e;return{key:t,label:(0,O.jsx)(K.Z,{children:(0,G.hH)(0,s)})}}))),[]),i=(0,v.VK)((()=>{var e;return(0,$.K)(null===(e=t.getManagedUserSettings())||void 0===e?void 0:e.custom_session_duration)??q.gl}),[t]);return(0,O.jsx)(J.L,{isMobile:!1,disabled:!1,type:"dropdown",currentOption:i,options:o,onSelectOption:async function(e){var a;const o=(null===(a=t.getManagedUserSettings())||void 0===a?void 0:a.custom_session_duration)??q.nb[q.gl],i=q.nb[e];if(void 0===i)return;Z.LO(s,{custom_session_duration_ms:o});const{accept:r}=await C.confirmUserActionV2({message:(0,O.jsx)(K.Z,{style:C.dialogStyles.title,children:(0,O.jsx)(h.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.customSessionDuration.confirmation.message",defaultMessage:"Confirm change"})}),description:(0,O.jsxs)(K.Z,{isMultiline:!0,isSecondaryColor:!0,children:[(0,O.jsx)(h.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.customSessionDuration.confirmation.description",defaultMessage:"You are about to change the session duration for all of your managed users from <b>{oldDuration}</b> to <b>{newDuration}.</b>",values:{oldDuration:(0,G.hH)(0,o),newDuration:(0,G.hH)(0,i),b:function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,O.jsx)("b",{children:t})}}}),(0,O.jsx)("br",{}),(0,O.jsx)("br",{}),(0,O.jsx)(h.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.customSessionDuration.confirmation.secondDescription",defaultMessage:"This may log some users out of their current session, including you. The affected users will need to re-authenticate to log back into Notion."})]}),acceptLabel:(0,O.jsx)(h.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.customSessionDuration.confirmation.acceptLabel",defaultMessage:"Confirm change"}),cancelLabel:(0,O.jsx)(h.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.customSessionDuration.confirmation.cancelLabel",defaultMessage:"Cancel"})});if(!r)return;Z.l0(s,{new_session_duration_ms:i});const d=await w.updateEmailDomainSettings(s,{emailDomains:t.getEmailDomains(),customSessionDuration:(0,$.K)(i)});"success"===d.type?await n():C.showErrorMessage((0,I.wf)(z.default.getIntl(),d))},buttonStyle:{marginTop:0,marginBottom:0}})}function Q(e){let{organizationStore:t}=e;const s=(0,x.O7)(),n=(0,M.yK)((e=>({number:{borderRadius:4,height:22,width:40}})),[]),o=(0,v.VK)((()=>t.getEmailDomains()),[t]),i=function(e){const t=(0,x.O7)(),{refreshOrganization:s}=(0,a.useContext)(T.g),n=(0,v.VK)((()=>e.getManagedUserSettings()),[e]),[o,i]=(0,a.useState)({prevent_profile_edits:!1,workspace_creation_enum:!1,prevent_members_joining_external_workspace:!1,prevent_granting_support_access:!1});async function r(){i((e=>({...e,prevent_profile_edits:!0})));const a=await w.updateEmailDomainSettings(t,{emailDomains:e.getEmailDomains(),preventProfileEdits:!(null!=n&&n.prevent_profile_edits)});"success"===a.type?await s():C.showErrorMessage((0,I.wf)(z.default.getIntl(),a)),i((e=>({...e,prevent_profile_edits:!1})))}async function d(){i((e=>({...e,workspace_creation_enum:!0})));const a="admins_only"===(null==n?void 0:n.workspace_creation_enum)?"unrestricted":"admins_only",o=await w.updateWorkspaceCreationForEmailDomains(t,{emailDomains:e.getEmailDomains(),workspaceCreationEnum:a});"success"===o.type?await s():C.showErrorMessage((0,I.wf)(z.default.getIntl(),o)),i((e=>({...e,workspace_creation_enum:!1})))}async function l(){i((e=>({...e,prevent_members_joining_external_workspace:!0})));const a=await w.updateEmailDomainSettings(t,{emailDomains:e.getEmailDomains(),preventMembersJoiningExternalWorkspace:!(null!=n&&n.prevent_members_joining_external_workspace)});"success"===a.type?await s():C.showErrorMessage((0,I.wf)(z.default.getIntl(),a)),i((e=>({...e,prevent_members_joining_external_workspace:!1})))}async function c(){i((e=>({...e,prevent_granting_support_access:!0})));const a=await w.updateEmailDomainSettings(t,{emailDomains:e.getEmailDomains(),preventGrantingSupportAccess:!(null!=n&&n.prevent_granting_support_access)});"success"===a.type?await s():C.showErrorMessage((0,I.wf)(z.default.getIntl(),a)),i((e=>({...e,prevent_granting_support_access:!1})))}return{prevent_profile_edits:{value:null==n?void 0:n.prevent_profile_edits,loading:o.prevent_profile_edits,toggle:r},workspace_creation_enum:{value:null==n?void 0:n.workspace_creation_enum,loading:o.workspace_creation_enum,toggle:d},prevent_members_joining_external_workspace:{value:null==n?void 0:n.prevent_members_joining_external_workspace,loading:o.prevent_members_joining_external_workspace,toggle:l},prevent_granting_support_access:{value:null==n?void 0:n.prevent_granting_support_access,loading:o.prevent_granting_support_access,toggle:c}}}(t),r=(0,v.VK)((()=>t.id),[t]),[{status:d,value:l}]=(0,S.r5)((async()=>{const e=await w.getVerifiedUsersCountForOrganization(s,{organizationId:r});if("success"===e.type)return e.data.usersCount;if("failed"===e.type)throw e.error;return(0,y.t1)(e)}),[s,r]);return(0,O.jsxs)("div",{children:[(0,O.jsx)(F.q,{styleName:"Body-14px/Regular",colorName:"secondary",as:"p",children:(0,O.jsx)(h.FormattedMessage,{id:"settingsConsole.accounts.settings.description",defaultMessage:"A managed account is a Notion account using an email address from one of your organization's domains. Organization owners can reset passwords, change session duration, and control other permissions for all managed accounts, even if the account is not a member of an organization workspace"})}),(0,O.jsxs)(_,{direction:"horizontal",children:[(0,O.jsxs)(B,{onClick:()=>{j.c4({environment:s,url:(0,f.a5)({organizationId:t.id,tabRoute:b.C$,properties:{subtab:"managed-accounts"}})})},children:[(0,O.jsx)(F.q,{styleName:"Body-14px/Medium",colorName:"secondary",children:(0,O.jsx)(h.FormattedMessage,{id:"settingsConsole.accounts.settings.allManagedAccounts.title",defaultMessage:"All managed accounts"})}),(0,O.jsx)(F.q,{styleName:"Heading-17px/Regular",colorName:"primary",children:"resolved"===d?(0,O.jsx)(N.e,{num:l??0,abbreviateNumber:!1}):(0,O.jsx)(k.Z,{style:n.number})})]}),(0,O.jsxs)(B,{onClick:()=>{j.c4({environment:s,url:(0,f.a5)({organizationId:t.id,tabRoute:b.zc})})},children:[(0,O.jsx)(F.q,{styleName:"Body-14px/Medium",colorName:"secondary",children:(0,O.jsx)(h.FormattedMessage,{id:"settingsConsole.accounts.settings.emailDomains.title",defaultMessage:"Email domains"})}),(0,O.jsx)(F.q,{styleName:"Heading-17px/Regular",colorName:"primary",children:(0,O.jsx)(h.FormattedMessage,{id:"settingsConsole.accounts.settings.emailDomains",defaultMessage:"{numEmailDomains, plural, one {1 domain} other {{numEmailDomains} domains}}",values:{numEmailDomains:o.length}})})]})]}),(0,O.jsxs)(_,{direction:"vertical",children:[(0,O.jsx)(D,{title:(0,O.jsx)(h.FormattedMessage,{id:"settingsConsole.accounts.settings.toggles.changeProfileInformation.title",defaultMessage:"Change profile information"}),byline:(0,O.jsx)(h.FormattedMessage,{id:"settingsConsole.accounts.settings.toggles.changeProfileInformation.byline",defaultMessage:"Profile information includes preferred name, email address, and profile photo."}),item:(0,O.jsx)(U.Z,{on:Boolean(i.prevent_profile_edits.value),onClick:i.prevent_profile_edits.toggle,disabled:i.prevent_profile_edits.loading})}),(0,O.jsx)(D,{title:(0,O.jsx)(h.FormattedMessage,{id:"settingsConsole.accounts.settings.toggles.createNewWorkspaces.title",defaultMessage:"Create workspaces in your organization"}),byline:(0,O.jsx)(h.FormattedMessage,{id:"settingsConsole.accounts.settings.toggles.createNewWorkspaces.byline",defaultMessage:"If this is disabled, only managed accounts who are organization owners can create new workspaces."}),item:(0,O.jsx)(U.Z,{on:"admins_only"===i.workspace_creation_enum.value,onClick:i.workspace_creation_enum.toggle,disabled:i.workspace_creation_enum.loading})}),(0,O.jsx)(D,{title:(0,O.jsx)(h.FormattedMessage,{id:"settingsConsole.accounts.settings.toggles.joinExternalWorkspaces.title",defaultMessage:"Join external workspaces"}),byline:(0,O.jsx)(h.FormattedMessage,{id:"settingsConsole.accounts.settings.toggles.joinExternalWorkspaces.byline",defaultMessage:"Prevent managed accounts from joining workspaces that are not a part of your organization."}),item:(0,O.jsx)(U.Z,{on:Boolean(i.prevent_members_joining_external_workspace.value),onClick:i.prevent_members_joining_external_workspace.toggle,disabled:i.prevent_members_joining_external_workspace.loading})}),(0,O.jsx)(D,{title:(0,O.jsx)(h.FormattedMessage,{id:"settingsConsole.accounts.settings.toggles.grantSupportAccess.title",defaultMessage:"Grant support access to accounts"}),byline:(0,O.jsx)(h.FormattedMessage,{id:"settingsConsole.accounts.settings.toggles.grantSupportAccess.byline",defaultMessage:"Support access allows Notion's support team to troubleshoot problems or recover content on a user's behalf. Support access is temporary and can be revoked at any time."}),item:(0,O.jsx)(U.Z,{on:Boolean(i.prevent_granting_support_access.value),onClick:i.prevent_granting_support_access.toggle,disabled:i.prevent_granting_support_access.loading})})]}),(0,O.jsxs)(_,{direction:"horizontal",children:[(0,O.jsxs)(B,{children:[(0,O.jsx)(F.q,{styleName:"Body-14px/Regular",colorName:"primary",children:(0,O.jsx)(h.FormattedMessage,{id:"settingsConsole.accounts.settings.actions.sessionDuration.title",defaultMessage:"Session duration"})}),(0,O.jsx)(F.q,{styleName:"Body-12px/Regular",colorName:"secondary",children:(0,O.jsx)(h.FormattedMessage,{id:"settingsConsole.accounts.settings.actions.sessionDuration.byline",defaultMessage:"How long managed accounts are logged in before they need to re-authenticate."})}),(0,O.jsx)(Y,{organizationStore:t})]}),(0,O.jsxs)(B,{children:[(0,O.jsx)(F.q,{styleName:"Body-14px/Regular",colorName:"primary",children:(0,O.jsx)(h.FormattedMessage,{id:"settingsConsole.accounts.settings.actions.passwordManagement.title",defaultMessage:"Password management"})}),(0,O.jsx)(F.q,{styleName:"Body-12px/Regular",colorName:"secondary",children:(0,O.jsx)(h.FormattedMessage,{id:"settingsConsole.accounts.settings.actions.passwordManagement.byline",defaultMessage:"All managed accounts will have to set a new password the next time they log in."})}),(0,O.jsx)(H,{organizationStore:t})]}),(0,O.jsxs)(B,{children:[(0,O.jsx)(F.q,{styleName:"Body-14px/Regular",colorName:"primary",children:(0,O.jsx)(h.FormattedMessage,{id:"settingsConsole.accounts.settings.actions.sessionManagement.title",defaultMessage:"Session management"})}),(0,O.jsx)(F.q,{styleName:"Body-12px/Regular",colorName:"secondary",children:(0,O.jsx)(h.FormattedMessage,{id:"settingsConsole.accounts.settings.actions.sessionManagement.byline",defaultMessage:"All managed accounts will be logged out, and will need to re-authenticate."})}),(0,O.jsx)(W,{organizationStore:t})]})]})]})}s(57658);var X=s(75246),ee=s(37810),te=s(59016),se=s(6258),ae=s(66994),ne=s(33602),oe=s(28608),ie=s(68117),re=s(57347),de=s(53965);const le={managedUsers:[],filters:{query:"",multiFactorStatus:void 0,workspaceId:void 0},numPagesLoaded:0,hasNextPage:!0,paginationToken:void 0,loading:!1,error:void 0};var ce=s(22686),ue=s(93667);function ge(e){let{selectedAccountStatus:t,setSelectedAccountStatus:s}=e;return(0,O.jsx)(ue.u,{pillTitle:(0,O.jsx)(h.FormattedMessage,{id:"managedAccounts.table.filters.accountStatus.title",defaultMessage:"Account status"}),pillIcon:ce.f,selectedItem:t,setSelectedItem:s,items:me})}const me=[{key:"notSuspended",value:"notSuspended",title:(0,O.jsx)(h.FormattedMessage,{id:"managedAccounts.table.filters.accountStatus.active",defaultMessage:"Active"}),wrapCaption:!0},{key:"suspended",value:"suspended",title:(0,O.jsx)(h.FormattedMessage,{id:"managedAccounts.table.filters.accountStatus.suspended",defaultMessage:"Suspended"}),wrapCaption:!0}];var pe=s(61519),he=s(50506),xe=s(18261),fe=s(19927),be=s(92684);function ye(e){let{managedUser:t,onClose:s,removeWorkspaceFromUser:a}=e;const n=Boolean(t),{isAccessGranted:o,toggleDataAccessConsent:i,loading:r}=(0,fe.d)({userId:null==t?void 0:t.userId});return(0,O.jsx)(he.Z,{open:n,onDismiss:s,preventHideChildrenWhileOpening:!0,render:()=>t?(0,O.jsx)(xe.z,{managedUser:t,isAccessGranted:o,toggleDataAccessConsent:i,loadingSupportAccess:r,renderWorkspacesOverview:()=>(0,O.jsx)(je,{userId:t.userId,workspaces:t.workspaces,removeWorkspaceFromUser:a})}):null})}function je(e){const{userId:t,workspaces:s,removeWorkspaceFromUser:n}=e,o=(0,M.yK)((()=>({container:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%",gap:8,marginTop:12}})),[]);return(0,O.jsx)("div",{style:o.container,children:s.map(((e,o)=>(0,O.jsxs)(a.Fragment,{children:[(0,O.jsx)(be.U,{userId:t,spaceId:"",workspace:e,removeWorkspaceFromUser:n}),o<s.length-1?(0,O.jsx)(pe.Z,{size:8}):null]},e.id)))})}var ve=s(44495),Me=s(40394),Se=s(71291),we=s(53695),Ce=s(69219),Ie=s(55255),ze=s(58720),ke=s(52498),Fe=s(82162),Ue=s(19981),Ne=s(66466),Te=s(25651),Re=s(29851),Ae=s(2356),Le=s(37612);var Oe=s(19889),_e=s(20454),Be=s(45653);const De=28;function Pe(e){let{userId:t}=e;const s=(0,h.useIntl)(),a=(0,x.O7)(),n=(0,M.yK)((e=>({iconStyle:{color:e.lightTextColor,fontWeight:ee.Z.fontWeight.medium}})),[]),o=(0,v.VK)((()=>{const e=new _e.U(a,{table:Oe.KJ,id:t});return{userStore:e,isReady:e.isReady(),userName:e.getDisplayName(s),userEmail:e.getEmail()}}),[a,t,s]);return null!=o&&o.isReady?(0,O.jsx)(Ce.i,{useThinTitle:!0,title:o.userName,byline:o.userEmail,icon:(0,O.jsx)(Be.Z,{size:De,userStore:o.userStore,iconStyle:n.iconStyle})}):(0,O.jsx)(Ze,{})}function Ze(e){const t=(0,M.yK)((()=>({icon:{borderRadius:"100%",height:e.iconSize??De,width:e.iconSize??De,marginLeft:-4}})),[e.iconSize]);return(0,O.jsx)(Ce.H,{includeByline:!0,includeIcon:!0,iconStyles:t.icon})}var Ee=function(e){return e.ManagedUser="managed-user",e.Loading="loading",e}(Ee||{});const Ve={paddingInline:8},Ke={marginLeft:4,height:14,width:14,opacity:.5},We={id:"user",headerTitle:(0,O.jsx)(h.FormattedMessage,{id:"managedAccounts.table.user",defaultMessage:"Users"}),renderCell:e=>e.type===Ee.ManagedUser?(0,O.jsx)(Pe,{userId:e.managedUser.userId}):(0,O.jsx)(Fe.L,{}),widthData:{width:70},sortable:!1},He={id:"access",headerTitle:(0,O.jsx)("span",{style:Ve,children:(0,O.jsx)(h.FormattedMessage,{id:"managedAccounts.table.access",defaultMessage:"Workspaces"})}),renderCell:e=>e.type===Ee.ManagedUser?(0,O.jsx)(ze.m,{workspaceSummaries:e.managedUser.workspaces}):(0,O.jsx)(we.z,{}),widthData:{width:60},sortable:!1},qe={id:"lastActive",headerTitle:(0,O.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start"},children:[(0,O.jsx)(h.FormattedMessage,{id:"managedAccounts.table.lastActive",defaultMessage:"Last active"}),(0,O.jsx)(L.ZP,{render:e=>(0,O.jsx)("div",{...e,children:(0,ve.D)(Ke)}),renderTooltip:()=>(0,O.jsx)(h.FormattedMessage,{id:"managedAccounts.table.lastActive.tooltip",defaultMessage:"This may be delayed by several hours."})})]}),renderCell:e=>e.type===Ee.ManagedUser?(0,O.jsx)(Ie.B,{lastActiveAt:e.managedUser.lastActiveAt}):(0,O.jsx)(Se.I,{}),widthData:{width:60},sortable:!1},$e={id:"menu",headerTitle:null,renderCell:e=>e.type===Ee.ManagedUser?(0,O.jsx)(ke.G,{managedUser:e.managedUser,managedUserActionSections:e.managedUserActionSections}):null,widthData:{width:15},sortable:!1,hasClickableContents:!0},Ge=[We,{id:"accountStatus",headerTitle:(0,O.jsx)("span",{style:Ve,children:(0,O.jsx)(h.FormattedMessage,{id:"organization.managedAccounts.table.accountStatus",defaultMessage:"Account status"})}),renderCell:e=>e.type===Ee.ManagedUser?(0,O.jsx)(Xe,{status:e.managedUser.accountStatus}):(0,O.jsx)(Ce.H,{}),widthData:{width:60},sortable:!1},He,qe,$e],Je=[{id:"1",isClickable:!1,type:Ee.Loading},{id:"2",isClickable:!1,type:Ee.Loading},{id:"3",isClickable:!1,type:Ee.Loading}];function Ye(e){let{organizationStore:t,managedUsersState:s,onOpenDetailsModal:n}=e;const{getManagedUserActionSections:o,onEditDetails:i}=function(e){let{organizationStore:t,managedUsersState:s,onOpenDetailsModal:n}=e;const o=(0,x.O7)(),i=(0,h.useIntl)(),r=(0,a.useCallback)((async e=>{Z.rZ(o);const{accept:t}=await C.confirmUserActionV2({message:(0,O.jsx)(K.Z,{style:C.dialogStyles.title,children:(0,O.jsx)(h.FormattedMessage,{defaultMessage:"Suspend this user?",id:"identityAndProvisioning.managedUsers.table.menu.action.suspendUser.dialog.title"})}),acceptLabel:(0,O.jsx)(h.FormattedMessage,{defaultMessage:"Yes",id:"identityAndProvisioning.managedUsers.table.menu.action.suspendUser.dialog.acceptLabel"}),description:(0,O.jsx)(K.Z,{isMultiline:!0,isSecondaryColor:!0,children:(0,O.jsx)(h.FormattedMessage,{defaultMessage:"This user will not be able to log into Notion and their Notion integrations will stop working. They can be unsuspended at any time from the Managed Users dashboard.",id:"identityAndProvisioning.managedUsers.table.menu.action.suspendUser.dialog.description"})})});if(!t)return;const a=await w.updateUserSuspension(o,{userId:e.userId,suspend:!0});Z.rv(o),"failed"===a.type&&C.showErrorMessage((0,I.wf)(z.default.getIntl(),a)),s.updateManagedUserAccountStatus(e.userId,"suspended")}),[o,s]),d=(0,a.useCallback)((async e=>{Z.NF(o);const{accept:s}=await C.confirmUserActionV2({message:(0,O.jsx)(K.Z,{style:C.dialogStyles.title,children:(0,O.jsx)(h.FormattedMessage,{defaultMessage:"Log out this user?",id:"identityAndProvisioning.managedUsers.table.menu.action.logoutUser.dialog.title"})}),acceptLabel:(0,O.jsx)(h.FormattedMessage,{defaultMessage:"Log out user",id:"identityAndProvisioning.managedUsers.table.menu.action.logoutUser.dialog.acceptLabel"}),description:(0,O.jsx)(K.Z,{isMultiline:!0,isSecondaryColor:!0,children:(0,O.jsx)(h.FormattedMessage,{id:"identityAndProvisioning.managedUsers.table.menu.action.logoutUser.dialog.description",defaultMessage:"You are about to log out this user from their current session. They will need to re-authenticate to log back into Notion."})})});if(!s)return;const a=await w.logoutManagedUsers(o,{organizationId:t.id,target:{type:P.J.User,userId:e.userId}});if(Z._m(o),"failed"===a.type)return C.showErrorMessage((0,I.wf)(z.default.getIntl(),a)),void E.oV({label:(0,O.jsx)(h.FormattedMessage,{id:"managedUsers.toastMessage.logout.failed",defaultMessage:"Failed to logged out user"})});E.oV({label:(0,O.jsx)(h.FormattedMessage,{id:"managedUsers.toastMessage.logout.success",defaultMessage:"Successfully logged out user"})})}),[o,t.id]),l=(0,a.useCallback)((async e=>{Z.Zm(o);const{accept:s}=await C.confirmUserActionV2({message:(0,O.jsx)(K.Z,{style:C.dialogStyles.title,children:(0,O.jsx)(h.FormattedMessage,{defaultMessage:"Reset password for this user?",id:"identityAndProvisioning.managedUsers.table.menu.action.forcePasswordReset.dialog.title"})}),acceptLabel:(0,O.jsx)(h.FormattedMessage,{id:"identityAndProvisioning.managedUsers.table.menu.action.forcePasswordReset.dialog.acceptLabel",defaultMessage:"Reset passwords for user"}),description:(0,O.jsx)(K.Z,{isMultiline:!0,isSecondaryColor:!0,children:(0,O.jsx)(h.FormattedMessage,{id:"identityAndProvisioning.managedUsers.table.menu.action.forcePasswordReset.dialog.description",defaultMessage:"You are about to reset the password for this user. This will also remove any 2-step verification settings they might have and they will be logged out of of their current session.{br}{br}This user will need to re-authenticate via their email the next time they attempt to log back into Notion, and they will be prompted to set a new password upon logging in.",values:{br:(0,O.jsx)("br",{})}})})});if(!s)return;const a=await w.resetPasswordsForManagedUsers(o,{organizationId:t.id,target:{type:P.J.User,userId:e.userId}});if(Z.vC(o),"failed"===a.type)return C.showErrorMessage((0,I.wf)(i,a)),void E.oV({label:(0,O.jsx)(h.FormattedMessage,{id:"managedUsers.toastMessage.forcePasswordReset.fail",defaultMessage:"Failed to reset password for user"})});E.oV({label:(0,O.jsx)(h.FormattedMessage,{id:"managedUsers.toastMessage.forcePasswordReset.success",defaultMessage:"Successfully reset password for user"})})}),[o,i,t.id]),c=(0,a.useCallback)((async e=>{const t=await w.updateUserSuspension(o,{userId:e.userId,suspend:!1});Z.Ci(o),"failed"===t.type&&C.deprecatedShowErrorMessage(t.error.message),s.updateManagedUserAccountStatus(e.userId,"notSuspended")}),[o,s]),u=(0,a.useCallback)((async e=>{Z.P1(o,{user_status:e.accountStatus});const{accept:t}=await C.confirmUserActionV2({message:(0,O.jsx)(K.Z,{style:C.dialogStyles.title,children:(0,O.jsx)(h.FormattedMessage,{defaultMessage:"Delete this user?",id:"identityAndProvisioning.managedUsers.table.menu.action.deleteUser.dialog.title"})}),acceptLabel:(0,O.jsx)(h.FormattedMessage,{defaultMessage:"Yes",id:"identityAndProvisioning.managedUsers.table.menu.action.deleteUser.dialog.acceptLabel"}),description:(0,O.jsx)(K.Z,{isMultiline:!0,isSecondaryColor:!0,children:(0,O.jsx)(h.FormattedMessage,{defaultMessage:"This action cannot be undone. This will permanently delete the user's entire account. All private workspaces will be deleted, and they will be removed from all shared workspaces.",id:"identityAndProvisioning.managedUsers.table.menu.action.deleteUser.dialog.description"})})});if(!t)return;const a=await w.deleteManagedUser(o,{userId:e.userId});Z.j7(o,{user_status:e.accountStatus}),"failed"===a.type&&C.deprecatedShowErrorMessage(a.error.message),s.removeUserFromManagedUsers(e.userId)}),[o,s]),g=(0,a.useCallback)((e=>n(e,"row_click")),[n]),m=(0,v.VK)((()=>o.currentUser.id),[o]),p={onClick:e=>n(e,"dropdown_menu"),icon:Te.R,title:(0,O.jsx)(h.FormattedMessage,{id:"identityAndProvisioning.managedUsers.table.menu.action.userDetails",defaultMessage:"Edit details"})},f={onClick:e=>u(e),icon:Le.y,title:(0,O.jsx)(h.FormattedMessage,{id:"identityAndProvisioning.managedUsers.table.menu.action.deleteUser",defaultMessage:"Delete user"}),isDestructive:!0},b={onClick:d,icon:Ne.S,title:(0,O.jsx)(h.FormattedMessage,{id:"identityAndProvisioning.managedUsers.table.menu.action.logout",defaultMessage:"Log out"})},j={onClick:l,icon:Re.z,title:(0,O.jsx)(h.FormattedMessage,{id:"identityAndProvisioning.managedUsers.table.menu.action.passwordReset",defaultMessage:"Reset password"})},M={onClick:r,icon:Ue.V,title:(0,O.jsx)(h.FormattedMessage,{id:"identityAndProvisioning.managedUsers.table.menu.action.suspendUser",defaultMessage:"Suspend user"}),getDisabledState:e=>e.userId===m},S={onClick:e=>c(e),icon:Ae.u,title:(0,O.jsx)(h.FormattedMessage,{id:"identityAndProvisioning.managedUsers.table.menu.action.unSuspendUser",defaultMessage:"Reactivate user"})};return{getManagedUserActionSections:function(e){let t;switch(e.accountStatus){case"notSuspended":t=[[p,b,j],[M,f]];break;case"suspended":t=[[p],[S,f]];break;default:(0,y.t1)(e.accountStatus)}return t},onEditDetails:g}}({organizationStore:t,managedUsersState:s,onOpenDetailsModal:n}),r=s.managedUsers.map((e=>({id:e.userId,type:Ee.ManagedUser,managedUser:e,isClickable:!0,managedUserActionSections:o(e)}))),d=(0,M.yK)((e=>(0,Me.b)({columnRenderInfo:Ge,theme:e,containerMarginTop:0})),[]);const l=s.loading?[...r,...Je]:r;return(0,O.jsx)(O.Fragment,{children:(0,O.jsx)(Me.D,{hideHeaderRowPadding:!0,showRowBorders:!0,columnRenderInfo:Ge,rows:l,onRowClick:function(e){e.type===Ee.ManagedUser&&i(e.managedUser)},renderNoRowsComponent:()=>(0,O.jsx)(Qe,{loading:s.loading}),styles:d,onLoadMore:s.loadNextPage})})}function Qe(e){const t=(0,M.yK)((()=>({text:{marginTop:15,marginBottom:40,textAlign:"center"}})),[]);return(0,O.jsx)(K.Z,{isSmall:!0,style:t.text,children:!e.loading&&(0,O.jsx)(h.FormattedMessage,{id:"managedAccounts.table.empty",defaultMessage:"No users found."})})}function Xe(e){const t=(0,M.yK)((e=>({label:{paddingLeft:5}})),[]);return"notSuspended"===e.status?(0,O.jsx)(K.Z,{style:t.label,children:(0,O.jsx)(h.FormattedMessage,{id:"organization.managedAccounts.table.accountStatusValue.active",defaultMessage:"Active"})}):(0,O.jsx)(K.Z,{style:t.label,children:(0,O.jsx)(h.FormattedMessage,{id:"organization.managedAccounts.table.accountStatusValue.suspended",defaultMessage:"Suspended"})})}const et=(0,h.defineMessages)({placeholder:{id:"identityProvisioningSettings.managedUsers.searchInput.placeholder",defaultMessage:"Search name, email, or user ID"}});function tt(e){let{organizationStore:t}=e;const s=(0,x.O7)(),n=(0,te.S)()||0,o=(0,M.yK)((e=>({link:{fontSize:14,fontWeight:400,color:e.mediumTextColor,textDecoration:"none"},title:{marginTop:21,fontWeight:ee.Z.fontWeight.semibold,fontSize:17,display:"flex",justifyContent:"flex-start",alignItems:"center"},byline:{fontSize:14,fontWeight:ee.Z.fontWeight.regular,color:e.mediumTextColor,paddingBottom:20},count:{marginLeft:4,opacity:.5,fontWeight:400},tabBarMenu:{margin:"12px 0 0",boxShadow:"none"},filters:{display:"flex",justifyContent:"flex-start",alignItems:"center",width:"100%",margin:"0 auto 12px"}})),[]),i=function(e){let{organizationStore:t}=e;const s=(0,x.O7)(),[n,o]=(0,a.useState)(le),i=(0,a.useRef)(n.filters),r=(0,a.useRef)(!1),d=(0,v.VK)((()=>t.getEmailDomains()),[t]),l=(0,a.useRef)(d.length>0),c=(0,a.useCallback)((async e=>{if(0===d.length)return;let t=n.loading,a=n.error,r=n.hasNextPage,l=n.paginationToken;if(e.restartSearch&&(o((e=>({...le,filters:e.filters}))),t=le.loading,a=le.error,r=le.hasNextPage,l=le.paginationToken),r&&!t&&!a){o((e=>({...e,loading:!0}))),i.current=n.filters;try{var c;const e=await w.getManagedUsers(s,{query:n.filters.query,multiFactorStatus:n.filters.multiFactorStatus,workspaceId:n.filters.workspaceId,userStatus:n.filters.managedUserStatus,paginationToken:l,emailDomains:d});if(Z.HH(s,{filters:{multiFactorStatus:n.filters.multiFactorStatus,workspaceId:n.filters.workspaceId},query_length:(null===(c=n.filters.query)||void 0===c?void 0:c.length)??0,current_page:l}),"failed"===e.type)throw e.error;const t=e.data.nextPaginationToken,a=e.data.results;o((e=>{const s=[...e.managedUsers],n=new Set(e.managedUsers.map((e=>e.userId)));for(const t of a)n.has(t.userId)||s.push(t);return{...e,managedUsers:s,loading:!1,error:void 0,numPagesLoaded:e.numPagesLoaded+1,paginationToken:t,hasNextPage:Boolean(t)}}))}catch(u){const e=(0,re.t)(u);o((t=>({...t,loading:!1,error:e})))}}}),[s,n.loading,n.error,n.hasNextPage,n.paginationToken,n.filters,d]);(0,a.useEffect)((()=>{!l.current&&!r.current&&d.length>0&&(c({restartSearch:!0}),r.current=!0)}),[d,c]),(0,a.useEffect)((()=>{de.Xy(i.current,n.filters)||c({restartSearch:!0})}),[n.filters,c]);const u=(0,a.useCallback)((()=>c({restartSearch:!1})),[c]),g=(0,a.useCallback)((e=>{o((t=>({...t,filters:{...t.filters,...e}})))}),[]),m=(0,a.useCallback)(((e,t)=>{o((s=>({...s,managedUsers:s.managedUsers.map((s=>s.userId===e?{...s,workspaces:s.workspaces.filter((e=>e.id!==t))}:s))})))}),[]),p=(0,a.useCallback)(((e,t)=>{o((s=>({...s,managedUsers:s.managedUsers.map((s=>s.userId===e?{...s,accountStatus:t}:s))})))}),[]),h=(0,a.useCallback)((e=>{o((t=>({...t,managedUsers:t.managedUsers.filter((t=>t.userId!==e))})))}),[]);return{managedUsers:n.managedUsers,filters:n.filters,loading:n.loading,error:n.error,removeWorkspaceFromUser:m,removeUserFromManagedUsers:h,setFilters:g,hasNextPage:n.hasNextPage,loadNextPage:u,updateManagedUserAccountStatus:p}}({organizationStore:t}),{filters:r,setFilters:d,removeWorkspaceFromUser:l}=i,[c,u]=(0,a.useState)(),g=(0,a.useMemo)((()=>i.managedUsers.find((e=>{let{userId:t}=e;return t===c}))),[c,i.managedUsers]);const m=(0,a.useCallback)(((e,t)=>{Z.JX(s,{user_status:e.accountStatus,from:t}),u(e.userId)}),[s,u]),{organizationOwnerRecordCache:p}=(0,a.useContext)(ie.V),{spaceIds:h}=(0,a.useContext)(T.g),f=(0,v.VK)((()=>{const e=[];for(const t of h)e.push(new se.H2(s,{id:t,table:X.bx},{inMemoryRecordCache:p}));return e.map((e=>{var t;return{id:e.id,name:e.getName(),createdTime:e.getCreatedTime(),memberCount:n,icon:null===(t=e.getIcon())||void 0===t?void 0:t.icon,subscriptionTier:e.getSubscriptionTier()}}))}),[s,p,h,n]);return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(ae.O,{mode:ae.p.Button,query:r.query,setQueryFilter:e=>{d({query:e})},placeholderText:z.default.formatMessage(et.placeholder)}),(0,O.jsxs)("div",{style:o.filters,children:[(0,O.jsx)(oe.O,{selectedSpaceId:r.workspaceId,setSelectedSpaceId:e=>{d({workspaceId:e})},spaceData:f}),(0,O.jsx)(ne.V,{selectedMfaMethod:r.multiFactorStatus,setSelectedMfaMethod:e=>{d({multiFactorStatus:e})}}),(0,O.jsx)(ge,{selectedAccountStatus:r.managedUserStatus,setSelectedAccountStatus:e=>{d({managedUserStatus:e})}})]}),(0,O.jsx)(Ye,{organizationStore:t,managedUsersState:i,onOpenDetailsModal:m}),(0,O.jsx)(ye,{managedUser:g,onClose:function(){u(void 0)},removeWorkspaceFromUser:l})]})}var st=s(27386);function at(e){let{children:t}=e;return(0,O.jsx)(st.ZP,{getPaddingTopBottom:()=>36,contentPaddingLeftRight:24,children:t})}var nt=s(23189),ot=s(66957);function it(e){let{children:t,title:s,headerRight:a}=e;const n=dt(),o=t?{marginBottom:0,borderBottom:"none"}:{},i={...n.headingStyle,...o};return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)(nt.Z,{large:!0,style:i,children:[(0,O.jsx)("h1",{style:n.title,children:s}),a]}),t]})}function rt(e){let{tabConfig:t}=e;const s=dt(),{tabs:a,currentTabName:n,updateTab:o}=t;return(0,O.jsx)(ot.Z,{tabs:a.map((e=>e.tab)),selectedIndex:a.findIndex((e=>e.name===n)),onChange:e=>{o(a[e].name)},style:s.tabsStyle})}function dt(){return(0,M.yK)((e=>({headingStyle:{marginBottom:16,paddingBottom:8,display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:`1px solid ${e.stroke.deemphasized}`},title:{fontSize:20,fontWeight:ee.Z.fontWeight.medium,lineHeight:"150%",display:"flex",alignItems:"center",gap:0,margin:0},tabsStyle:{paddingLeft:0,paddingRight:0,marginTop:-6,marginBottom:14}})),[])}var lt=s(61220);function ct(e){let{organizationId:t}=e;const s=(0,x.O7)(),{organizationOwnerRecordCache:n}=(0,a.useContext)(ie.V);return(0,v.VK)((()=>{if(t)return new se.Om(s,{table:lt.V7,id:t},{inMemoryRecordCache:n})}),[s,t,n])}var ut=function(e){return e.Settings="settings",e.ManagedAccounts="managed-accounts",e}(ut||{});const gt=[{name:ut.Settings,tab:(0,O.jsx)(h.FormattedMessage,{id:"settingsConsole.accounts.subTab.settings.title",defaultMessage:"Settings"})},{name:ut.ManagedAccounts,tab:(0,O.jsx)(h.FormattedMessage,{id:"settingsConsole.accounts.subTab.table.title",defaultMessage:"Managed accounts"})}];function mt(e){let{organizationId:t,subtab:s,queryParams:n}=e;const o=(0,x.O7)(),i=(0,a.useMemo)((()=>function(e){switch(e){case ut.Settings:return ut.Settings;case ut.ManagedAccounts:return ut.ManagedAccounts;default:return ut.Settings}}(s)),[s]),r=ct({organizationId:t});if(!r)return null;return(0,O.jsx)(at,{children:(0,O.jsxs)(it,{title:(0,O.jsx)(h.FormattedMessage,{id:"settingsConsole.accounts.title",defaultMessage:"Accounts"}),children:[(0,O.jsx)(rt,{tabConfig:{tabs:gt,currentTabName:i,updateTab:function(e){j.c4({environment:o,url:(0,f.a5)({organizationId:t,tabRoute:b.C$,properties:{subtab:e},queryParams:n})})}}}),(0,O.jsx)(pt,{currentTab:i,organizationStore:r})]})})}function pt(e){switch(e.currentTab){case ut.Settings:return(0,O.jsx)(Q,{organizationStore:e.organizationStore});case ut.ManagedAccounts:return(0,O.jsx)(tt,{organizationStore:e.organizationStore});default:(0,y.t1)(e.currentTab)}}var ht=s(24026),xt=s(36591),ft=s(73039);var bt=s(80444),yt=s(81023),jt=s(52275),vt=s(88359),Mt=s(31278),St=s(14871);const wt="";function Ct(e){let{organizationId:t,currentTabRoute:s,currentTabProperties:n,shouldShowOrganizationOption:o,selectedSpaceStore:i}=e;const r=(0,x.O7)(),{spaceIds:d}=(0,a.useContext)(T.g),{itemIcon:l,itemName:c}=function(e){const t=kt(),{itemIcon:s,itemName:a}=(0,v.VK)((()=>{const s="Organization";return e?{itemIcon:(0,O.jsx)(Mt.Z,{disabled:!0,icon:e.getIcon(),isEmptyPage:!1,title:e.getName(),size:24,isLarge:!0}),itemName:e.getName()}:{itemIcon:(0,O.jsx)("div",{style:t.organizationIconContainer,children:(0,ft.K)(t.organizationIcon)}),itemName:s}}),[e,t]);return{itemIcon:s,itemName:a}}(i),u=null==i?void 0:i.id,g=(0,M.yK)((()=>({container:{display:"inline-flex",width:"fit-content"}})),[]);(0,a.useEffect)((()=>{i&&(bt.default.setState({...bt.default.state,currentSpaceStore:i}),(0,yt.OR)({environment:r,spaceId:i.id}))}),[i,r]);const m=(0,a.useCallback)((e=>{if(!e)return void function(e,t,s){j.c4({environment:e,url:(0,f.a5)({organizationId:t,tabRoute:s})})}(r,t,s);const a=(0,f.a5)({organizationId:t,tabRoute:s,properties:n,queryParams:{"space-id":e}});j.c4({environment:r,url:a})}),[s,n,r,t]),p=(0,a.useMemo)((()=>o?[wt,...d]:d),[d,o]);return(0,O.jsx)("div",{style:g.container,children:(0,O.jsx)(St.Z,{items:p,getKey:de.yR,selectedItem:u,onSelect:m,renderItem:e=>{const t=e.value;return t===wt?(0,O.jsx)(zt,{isSelected:!u,...e}):(0,O.jsx)(It,{spaceId:t,isSelected:u===t,...e})},renderOrigin:e=>(0,O.jsx)(vt.Z,{focused:!1,icon:l,title:c,style:{fontSize:"inherit"},desktopIconStyle:{marginLeft:4,marginRight:0},...e})})})}function It(e){let{spaceId:t,isSelected:s,...n}=e;const o=(0,x.O7)(),{organizationOwnerRecordCache:i}=(0,a.useContext)(ie.V),r=kt(),{icon:d,name:l}=(0,v.VK)((()=>{const e=new se.H2(o,{id:t,table:X.bx},{inMemoryRecordCache:i});return{icon:e.getIcon(),name:e.getName()}}),[t,i,o]);return(0,O.jsx)(jt.Z,{title:l,right:s?(0,xt.e)(r.checkIcon):null,icon:(0,O.jsx)(Mt.Z,{disabled:!0,icon:d,isEmptyPage:!1,title:l,size:24,isLarge:!0}),...n})}function zt(e){let{isSelected:t,...s}=e;const a=kt();return(0,O.jsx)(jt.Z,{title:"Organization",right:t?(0,xt.e)(a.checkIcon):null,icon:(0,O.jsx)("div",{style:a.organizationIconContainer,children:(0,ft.K)(a.organizationIcon)}),...s})}function kt(){return(0,M.yK)((e=>({checkIcon:{width:14,height:14},organizationIconContainer:{width:23,height:23,display:"flex",alignItems:"center",justifyContent:"center"},organizationIcon:{width:18,height:18}})),[])}var Ft=s(84169),Ut=s(24697),Nt=s(12714),Tt=s(18514),Rt=s(74523),At=s(88149),Lt=s(21697),Ot=s(93502),_t=s(35238);function Bt(e){let{spaceStore:t}=e;const s=(0,Ot.U)({spaceId:t.id}),a=(0,Lt.x)({spaceStore:t});return(0,O.jsx)(_t.Z,{spaceStore:t,teamStores:a,contentEngagement:s})}var Dt=s(31303),Pt=s(89426);function Zt(e){let{spaceStore:t,isOrganizationOwner:s}=e;const a=(0,v.VK)((()=>{var e;return null===(e=bt.default.state.currentUserStore)||void 0===e?void 0:e.id}),[]),n=(0,Dt.i)({spaceStore:t,userId:a,isOrganizationOwner:s}),o=(0,Ot.U)({spaceId:t.id});return(0,O.jsx)(Pt.Z,{spaceStore:t,contentEngagement:o,userEngagement:n,onUserTabFilterChange:()=>!1})}var Et=s(66673),Vt=s(83726),Kt=s(65552);function Wt(e){let{spaceStore:t,isOrganizationOwner:s}=e;const n=(0,v.VK)((()=>{var e;return null===(e=bt.default.state.currentUserStore)||void 0===e?void 0:e.id}),[]),{usersTabData:o,setFilters:i}=function(e){const t=(0,x.O7)(),[s,n]=(0,a.useState)(),{spaceStore:o}=e,i=(0,a.useRef)(!1),r=(0,Et.D9)(o.id),d=(0,a.useMemo)((()=>void 0!==r&&o.id!==r),[o.id,r]),l=(0,a.useCallback)((async e=>{const{currentSpaceStore:s,nextGraphFilter:a,nextTableFilter:o,nextSort:i}=e,r=await Vt.qA({environment:t,spaceStore:s,nextGraphFilter:a,nextTableFilter:o,nextSort:i});n(r)}),[t]);(0,a.useEffect)((()=>{i.current&&!d||(i.current=!0,l({currentSpaceStore:o,nextGraphFilter:null==s?void 0:s.graphFilter,nextTableFilter:null==s?void 0:s.tableFilter,nextSort:null==s?void 0:s.userTableSort}))}),[l,d,o,s]);const c=(0,a.useCallback)((e=>{const{tableFilter:t,graphFilter:a}=e;l({currentSpaceStore:o,nextGraphFilter:a??(null==s?void 0:s.graphFilter),nextTableFilter:t??(null==s?void 0:s.tableFilter),nextSort:null==s?void 0:s.userTableSort})}),[l,s,o]);return{usersTabData:s,setFilters:c}}({spaceStore:t}),r=(0,Lt.x)({spaceStore:t}),d=(0,Dt.i)({spaceStore:t,userId:n,isOrganizationOwner:s});return(0,O.jsx)(Kt.Z,{spaceStore:t,teamStores:r,usersTabData:o,userEngagement:d,onUserTabFilterChange:i})}const Ht=[{name:ht.x.Overview,tab:(0,O.jsx)(h.FormattedMessage,{id:"workspaceAnalyticsTabs.overview.title",defaultMessage:"Overview"})},{name:ht.x.Users,tab:(0,O.jsx)(h.FormattedMessage,{id:"workspaceAnalyticsTabs.members.title",defaultMessage:"Members"})},{name:ht.x.Content,tab:(0,O.jsx)(h.FormattedMessage,{id:"workspaceAnalyticsTabs.content.title",defaultMessage:"Content"})},{name:ht.x.Search,tab:(0,O.jsx)(h.FormattedMessage,{id:"workspaceAnalyticsTabs.search.title",defaultMessage:"Search"})}];function qt(e){let{spaceStore:t,spacePicker:s,navigateToTab:n,currentTab:o,isOrganizationOwner:i}=e;const r=(0,x.O7)(),d=(0,a.useCallback)((e=>{Ut.nK(r,{tab:e}),n(e)}),[r,n]),l=(0,v.VK)((()=>i||Boolean(null==t?void 0:t.canAdmin())),[t,i]),c=Ht.filter((e=>!(!l&&e.name!==ht.x.Content)));return(0,O.jsxs)(at,{children:[(0,O.jsx)(it,{title:(0,O.jsx)(Yt,{spaceStore:t,spacePicker:s}),headerRight:(0,O.jsx)(Jt,{}),children:(0,O.jsx)(rt,{tabConfig:{tabs:c,currentTabName:o,updateTab:d}})}),(0,O.jsx)($t,{currentTab:o,spaceStore:t,isOrganizationOwner:i})]})}function $t(e){const{currentTab:t,isOrganizationOwner:s,spaceStore:a}=e;switch(t){case ht.x.Content:return(0,O.jsx)(Bt,{spaceStore:a});case ht.x.Overview:return(0,O.jsx)(Zt,{spaceStore:a,isOrganizationOwner:s});case ht.x.Users:return(0,O.jsx)(Wt,{spaceStore:a,isOrganizationOwner:s});case ht.x.Search:return(0,O.jsx)(At.Z,{spaceStore:a});default:(0,y.t1)(t)}}function Gt(){const e=(0,M.yK)((()=>({helpInfo:{marginLeft:4}})),[]);return(0,O.jsx)(L.ZP,{placement:L.ug.Right,render:t=>(0,O.jsx)(Rt.Z,{...t,href:(0,Tt.UY)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq",style:e.helpInfo}),renderTooltip:()=>(0,O.jsx)(h.FormattedMessage,{id:"settings.workspaceAnalytics.dataDisclaimerTooltip",defaultMessage:"Data available from the start date of your Enterprise Plan"})})}function Jt(){const e=(0,x.O7)(),t=(0,a.useCallback)((()=>{Nt.D({environment:e,url:(0,Tt.UY)("guides.workspaceAnalytics")})}),[e]);return(0,O.jsx)(V.Z,{isSmall:!0,onClick:t,icon:Ft.m,children:(0,O.jsx)(h.FormattedMessage,{id:"workspaceAnalytics.title.helpButton",defaultMessage:"Learn more"})})}function Yt(e){let{spaceStore:t,spacePicker:s}=e;return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(h.FormattedMessage,{id:"settingsConsole.workspaceAnalytics.title",defaultMessage:"Workspace analytics for "}),s,(0,O.jsx)(Gt,{})]})}function Qt(e){let{spaceId:t,organizationId:s,subtab:n,queryParams:o,tabRoute:i}=e;const r=(0,x.O7)(),{spaceIds:d}=(0,a.useContext)(T.g);(0,a.useEffect)((()=>{!t&&d.length>0&&j.c4({environment:r,url:(0,f.a5)({organizationId:s,tabRoute:i,properties:{subtab:n},queryParams:{...o,"space-id":d[0]}})})}),[r,t,s,d,n,o,i])}function Xt(e){let{spaceId:t}=e;const s=(0,x.O7)(),{organizationOwnerRecordCache:n}=(0,a.useContext)(ie.V),{spaceIds:o}=(0,a.useContext)(T.g);return(0,v.VK)((()=>{if(t&&o.includes(t))return new se.H2(s,{id:t,table:X.bx},{inMemoryRecordCache:n})}),[t,o,n,s])}function es(e){let{spaceId:t,organizationId:s,subtab:a,queryParams:n,tabRoute:o}=e;const i=(0,x.O7)(),r=Xt({spaceId:t});if(Qt({spaceId:t,organizationId:s,subtab:a,queryParams:n,tabRoute:o}),!r||!t||!s)return null;return(0,O.jsx)(qt,{spaceStore:r,spacePicker:(0,O.jsx)(Ct,{organizationId:s,currentTabRoute:b.Zq,currentTabProperties:{subtab:a},selectedSpaceStore:r}),navigateToTab:e=>{j.c4({environment:i,url:(0,f.a5)({organizationId:s,tabRoute:b.Zq,properties:{subtab:e},queryParams:n})})},currentTab:ts(a),isOrganizationOwner:!0})}function ts(e){switch(e){case"content":return ht.x.Content;case"search":return ht.x.Search;case"users":return ht.x.Users;default:return ht.x.Overview}}var ss=s(23399),as=s(81549),ns=s(22326),os=s(53877),is=s(59730),rs=s(80085),ds=s(77420),ls=s(77907),cs=s(49085);class us extends cs.default{getInitialState(){return{auditLogPointer:void 0,allUserIds:new Set,allBotIds:new Set,removedUserIds:new Set,removedBotIds:new Set}}isUserOrBotRemoved(e){return Boolean(e&&(this.state.removedUserIds.has(e)||this.state.removedBotIds.has(e)))}}const gs=new us;class ms extends cs.default{getInitialState(){return{cachedResponses:{}}}getCursor(e,t,s){if(s<=1||!de.Xy(this.state.pointer,e))return;const a=(0,ns.r)(t);if(this.state.filterStr!==a)return;const n=this.state.cachedResponses[s-1];return"success"===n.status?null==n?void 0:n.nextCursor:void 0}startLoading(e,t){this.updateResultHelper(e,t,{status:"loading"})}updateLoadedResult(e,t,s){this.updateResultHelper(e,t,{...s,status:"success",loadedAt:Date.now()})}updateError(e,t){this.updateResultHelper(e,t,{status:"error"})}updateResultHelper(e,t,s){const a=(0,ns.r)(t);1!==t.pageNum&&de.Xy(this.state.pointer,e)&&this.state.filterStr===a?this.setState({pointer:e,filterStr:a,cachedResponses:{...this.state.cachedResponses,[t.pageNum]:{...s}}}):this.setState({pointer:e,filterStr:a,cachedResponses:{[t.pageNum||1]:{...s}}})}}const ps=new ms,hs=(0,h.defineMessages)({loadCurrentAuditLogError:{id:"auditlog.error.loadCurrentAuditLogError",defaultMessage:"Failed to load audit logs"}});async function xs(e){const{environment:t,request:s,auditLogPointer:a,filters:n}=e,o=await w.searchAuditLog(t,s);if("success"===o.type)ps.updateLoadedResult(a,n,o.data);else if(ps.updateError(a,n),(0,is.Jx)(o.body)){const e=(0,I.wf)(z.default.getIntl(),o);C.showErrorMessage(e)}else C.showErrorMessage(z.default.formatMessage(hs.loadCurrentAuditLogError))}async function fs(e){const{environment:t,parentStore:s}=e;if(!s)return void gs.reset();const a=gs.getState(),n={id:s.id,table:s.table};if(de.Xy(a.auditLogPointer,n)||gs.reset(),!n)return;let o;if(s.table===X.bx){const e=await ls.deps.searchActions.loader();o=await e.searchSpaceActorIds({environment:t,membersOnly:!1})}else if(s.table===lt.V7){var i;o={userIds:(null===(i=s.getModel())||void 0===i?void 0:i.getOwnerIds())||[],botIds:[]}}else(0,y.t1)(s);const r=await async function(e){const{environment:t,auditLogPointer:s}=e;if(s.table===X.bx){const e=await w.getHistoricalAuditLogUsers(t,{spaceId:s.id});return"success"!==e.type?[]:e.data.results}if(s.table===lt.V7){const e=await w.getHistoricalAuditLogUsers(t,{organizationId:s.id});return"success"!==e.type?[]:e.data.results}(0,y.t1)(s.table)}({environment:t,auditLogPointer:n}),d={auditLogPointer:n,allUserIds:new Set,allBotIds:new Set,removedUserIds:new Set,removedBotIds:new Set};for(const c of o.userIds)d.allUserIds.add(c);for(const c of o.botIds)d.allBotIds.add(c);for(const c of r)(l=c.actorId)!==ds._H.id&&l!==Oe.s$.id&&l!==Oe.el.id||d.allUserIds.has(c.actorId)?c.actorType!==Oe.KJ||d.allUserIds.has(c.actorId)?c.actorType!==ds.cZ||d.allBotIds.has(c.actorId)||(d.allBotIds.add(c.actorId),d.removedBotIds.add(c.actorId)):(d.allUserIds.add(c.actorId),d.removedUserIds.add(c.actorId)):d.allUserIds.add(c.actorId);var l;gs.setState(d)}var bs=s(69651),ys=s(86100),js=s(23096),vs=s(8319),Ms=s(66897),Ss=s(27617),ws=s(74136),Cs=s(97680);const Is=(0,h.injectIntl)((function(e){const{parentStore:t,auditLogHistoricalUserStore:s,selectedActors:n,onChange:o,intl:i}=e,r=(0,x.O7)(),[d,l]=a.useState(new Set(n.map(Ss.eW))),c=(0,O.jsx)(h.FormattedMessage,{id:"auditlogActorFilter.title",defaultMessage:"User"}),u={title:c,tokenInputPlaceholder:i.formatMessage({defaultMessage:"Search user...",id:"auditlogActorFilter.searchActor.placeholder"}),resultSectionTitle:i.formatMessage({defaultMessage:"Select users",id:"auditlogActorFilter.searchActor.resultsTitle"}),componentDebugName:"SearchActorFilter"};return(0,O.jsx)(vs.Z,{mode:vs.z.Pill,title:c,icon:ce.f,iconStyles:{marginRight:2},items:Array.from(d),hasItemsSelected:(null==n?void 0:n.length)>0,onChange:e=>{l(new Set(e))},renderFooter:!0,allowApplyBatchSelection:!0,keepInputOnItemConfirm:!0,onMenuDismiss:function(e){"applyButton"!==e?function(){const e=n.map(Ss.eW);l(new Set(e))}():function(){const e=Array.from(d).map(Ss.Ij).filter((e=>Boolean(e)));o(e)}()},labelText:u,performRequest:e=>async function(e){let{args:t,auditLogHistoricalUserStore:s,selectedActors:a,environment:n,parentStore:o}=e;const{query:i}=t,{allUserIds:r,allBotIds:d}=s.getState(),l=100,c=await ls.deps.searchActions.loader(),u=await c.searchActorsById({environment:n,query:i,userIds:[...r],botIds:[...d],store:o}),g=[...u.users.map((e=>`notion_user:${e.id}`)),...u.bots.map((e=>`bot:${e.id}`))];if(i.length>0)return g.slice(0,l);const m=a.map(Ss.eW),p=new Set(m),h=g.filter((e=>!p.has(e)));return[...m,...h].slice(0,Math.max(m.length,l))}({args:e,auditLogHistoricalUserStore:s,selectedActors:n,environment:r,parentStore:t}),renderResultMenuItem:(e,a)=>{var n;const o=function(e,t){const s=(0,Ss.Ij)(e);if(!s)return(0,Ms.m3)(void 0);if("notion_user"===s.actorType)return(0,Ms.m3)(function(e,t){const s=se.U6.createChildStore(t,{table:Oe.KJ,id:e});return s.getModel()}(s.actorId,t));return(0,Ms.ON)(function(e,t){const s=se.Qx.createChildStore(t,{table:ds.cZ,id:e});return s.getModel()}(s.actorId,t))}(e,t);return(0,O.jsx)(zs,{...a,item:e,tempActorSelections:d,showRemovedBadge:s.isUserOrBotRemoved(null===(n=o.asActor)||void 0===n?void 0:n.id),actor:o,intl:i})},renderToken:()=>null,renderFilter:()=>null,renderItemForSummary:()=>null,addItemLabel:null,focused:!1})}));function zs(e){const{item:t,intl:s,tempActorSelections:n,showRemovedBadge:o,actor:i}=e;return(0,a.createElement)(Cs.Z,{...e,key:t,actor:i,useEmailAsTooltip:!0,checkState:n.has(t),userTitle:(0,O.jsxs)("div",{style:{display:"flex",gap:4},children:[(0,Ms.$4)(s,i),o&&(0,O.jsx)(ws.Z,{children:(0,O.jsx)(h.FormattedMessage,{id:"auditlogActorFilter.removed_user",defaultMessage:"Removed"})})]})})}const ks=(0,h.injectIntl)((function(e){const{parentStore:t}=e,[s,a]=(0,v.AF)(ns.Z),[n,o,i]=(0,v.AF)(gs);return(0,O.jsxs)("div",{style:{display:"flex",flexDirection:"row",gap:4},children:[(0,O.jsx)(js.Z,{mode:vs.z.Pill,focused:!1,title:(0,O.jsx)(h.FormattedMessage,{id:"auditlogDateFilter.title",defaultMessage:"Date"}),icon:bs.C,value:s.timeRange,showButtons:"footer",onChange:e=>{a({...s,timeRange:e,pageNum:1})}}),(0,O.jsx)(Is,{parentStore:t,auditLogHistoricalUserStore:i,selectedActors:s.actors,onChange:e=>{a({...s,actors:e,pageNum:1})}}),(0,O.jsx)(ys.Z,{parentStore:t,selectedEvents:s.actions,onChange:e=>{a({...s,actions:e,pageNum:1})}})]})}));var Fs=s(61275),Us=s(75553),Ns=s(893),Ts=s(19044),Rs=s(33581),As=s(58015),Ls=s(64921),Os=s(4708),_s=s(77080),Bs=s(21752);function Ds(e){const{auditLogEntry:t,parentStore:s,id:n}=e,o=(0,h.useIntl)(),i=(0,v.VK)((()=>{if(t.actor.actorType===Oe.KJ){const e=se.U6.createChildStore(s,{id:t.actor.actorId,table:Oe.KJ});if(e.isDefined()&&!e.getIsDeleted())return{actorStore:e};if(t.actor.email)return{avatar:{name:t.actor.name,email:t.actor.email}}}else if(t.actor.actorType===ds.cZ){const e=se.Qx.createChildStore(s,{id:t.actor.actorId,table:ds.cZ});return e.isDefined()?{actorStore:e}:{avatar:{name:t.actor.name,email:t.actor.actorId}}}return{actorStore:void 0}}),[s,t]),r=(0,v.VK)((()=>{var e,t;if(i)return(null===(e=i.actorStore)||void 0===e?void 0:e.getDisplayName(o))??(null===(t=i.avatar)||void 0===t?void 0:t.name)}),[i,o]),d=(0,v.VK)((()=>{var e,t;if(i)return(null===(e=i.actorStore)||void 0===e?void 0:e.getDetail())??(null===(t=i.avatar)||void 0===t?void 0:t.email)}),[i]),l=(0,a.useMemo)((()=>{var e;if(t.actor.actorType===Oe.KJ)return(0,Bs.K)(null===(e=t.actor.meta)||void 0===e?void 0:e.spaceRole)}),[t]),c=(0,M.yK)((()=>({container:{display:"block",width:"100%",paddingBlock:6}})),[]),u=(0,a.createRef)();return(0,O.jsx)(L.ZP,{disableTooltip:Ps(u.current),renderTooltip:()=>(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)("div",{children:r}),(0,O.jsx)("div",{children:d})]}),placement:L.ug.Bottom,render:e=>(0,O.jsx)("div",{...e,style:c.container,children:(0,O.jsx)(Bs.Z,{id:n,...i,spaceRole:l})})})}function Ps(e){return!!e&&(e.scrollHeight>e.clientHeight||e.scrollWidth>e.clientWidth)}const Zs={id:"actor",headerTitle:(0,O.jsx)(h.FormattedMessage,{id:"auditlog.logTable.userColumn.header",defaultMessage:"User"}),renderCell:e=>{const t=`actor-${e.auditLogEntry.actionName}-${e.id}`;return(0,O.jsx)(Ds,{parentStore:e.parentStore,auditLogEntry:e.auditLogEntry,id:t})},widthData:{width:30},sortable:!1},Es={id:"event",headerTitle:(0,O.jsx)(h.FormattedMessage,{id:"auditlog.logTable.eventColumn.header",defaultMessage:"Event"}),renderCell:e=>{const t=`event-${e.auditLogEntry.actionName}-${e.id}`;return(0,O.jsx)(Rs.p,{auditLogEntry:e.auditLogEntry,id:t})},widthData:{width:40},sortable:!1},Vs={id:"dateTimeAndMenu",headerTitle:(0,O.jsx)(h.FormattedMessage,{id:"auditlog.logTable.dateColumn.header",defaultMessage:"Date"}),renderCell:e=>{const t=`actor-${e.auditLogEntry.actionName}-${e.id}`,s=`event-${e.auditLogEntry.actionName}-${e.id}`,a=`datetime-${e.auditLogEntry.actionName}-${e.id}`;return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(Ts.t,{auditLogEntry:e.auditLogEntry,id:a}),(0,O.jsx)(Hs,{auditLogEntry:e.auditLogEntry,ids:{actorColumnId:t,eventColumnId:s,dateTimeColumnId:a}})]})},widthData:{width:25},sortable:!0},Ks=[Zs,Es,Vs];function Ws(){return(0,O.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"40vh",flexDirection:"column"},children:[(0,O.jsx)("div",{children:(0,O.jsx)(K.Z,{isSecondaryColor:!0,style:{fontWeight:500},children:(0,O.jsx)(h.FormattedMessage,{id:"auditlog.logTable.noResults",defaultMessage:"No results"})})}),(0,O.jsx)(K.Z,{isSecondaryColor:!0,children:(0,O.jsx)(h.FormattedMessage,{id:"auditlog.logTable.noResultsHelpText",defaultMessage:"Try different filters. Logs may take some time to show up."})})]})}function Hs(e){const{auditLogEntry:t,ids:s}=e,a=(0,v.VK)((()=>(0,Os.F$)()),[]),n=(0,v.VK)((()=>_s.default.checkGate("audit_log_event_name_column")?Fs.pz:Fs.C9),[]),o=(0,h.useIntl)(),i=(0,x.O7)(),r=(0,M.Fg)(),d=(0,M.yK)((e=>({container:{display:"flex",alignItems:"center",justifyContent:"flex-end",width:"100%"},button:{display:"flex",alignItems:"center",justifyContent:"center",width:32,height:28,borderRadius:4}})),[]);return(0,O.jsx)(L.ZP,{delayThreshold:80,placement:L.ug.Bottom,render:e=>(0,O.jsx)("div",{style:d.container,...e,children:(0,O.jsx)(Ls.Z,{style:d.button,onClick:()=>{var e;Ns.RD({environment:i,stringValue:(0,Fs.eA)({auditLogEntry:t,intl:o,getAuditLogEventText:(e=s.eventColumnId,t=>{var s;return null===(s=document.getElementById(e))||void 0===s?void 0:s.textContent}),isTeamGuestsEnabled:a,csvColumnNames:n}),copiedMessage:Ns.tq.copiedToClipboard})},children:(0,Us.U)({width:16,height:16,fill:r.mediumIconColor})})}),renderTooltip:()=>(0,O.jsx)(h.FormattedMessage,{id:"AuditLogSettings.copyAuditLogEvent",defaultMessage:"Copy row"})})}const qs=(0,h.injectIntl)((function(e){const{searchResponse:t,parentStore:s}=e,[n,o]=(0,v.AF)(ns.Z),i=t.results||[],r=t.hasMoreResults,d=Boolean(i.length),l=e=>{const t={...n,pageNum:e};o(t)},c=(0,M.yK)((e=>(0,Me.b)({columnRenderInfo:Ks,theme:e,containerMarginTop:0})),[]),u=i.map(((e,t)=>({id:t.toString(),auditLogEntry:e,parentStore:s,isClickable:!1}))),g=(0,a.useCallback)((()=>{const e=n.sortOrder===rs.NQ.CreatedOldest?rs.NQ.CreatedNewest:rs.NQ.CreatedOldest;o({...n,sortOrder:e,pageNum:1})}),[n,o]),m=(0,a.useMemo)((()=>({column:Vs,sortAscending:n.sortOrder===rs.NQ.CreatedOldest})),[n]);return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(Me.D,{hideHeaderRowPadding:!0,showRowBorders:!0,columnRenderInfo:Ks,rows:u,sortState:m,onSortStateChanged:g,renderNoRowsComponent:Ws,styles:c}),d?(0,O.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:10},children:[(0,O.jsx)(As.v,{onClick:()=>{l(n.pageNum-1)},disabled:1===n.pageNum,children:(0,O.jsx)(h.FormattedMessage,{id:"auditlog.logTable.previousPage",defaultMessage:"Previous"})}),(0,O.jsx)(As.v,{disabled:!r,onClick:()=>{l(n.pageNum+1)},children:(0,O.jsx)(h.FormattedMessage,{id:"auditlog.logTable.nextPage",defaultMessage:"Next"})})]}):null]})}));function $s(e){let{parentStore:t,spacePicker:s}=e;const n=(0,x.O7)(),[o]=(0,v.AF)(ps),[i]=(0,v.AF)(ns.Z),r=(0,ns.r)(i)!==o.filterStr?void 0:o.cachedResponses[i.pageNum];return(0,a.useEffect)((()=>{t.id&&async function(e){var t,s;const{environment:a,auditLogPointer:n}=e,o=ns.Z.getState();ps.startLoading(n,o);const{sortOrder:i,pageSize:r,pageNum:d}=o,l={limit:r,cursor:ps.getCursor(n,o,d),filters:{timeRange:{starting:o.timeRange.starting?os.OQ.toUnixMs(o.timeRange.starting):void 0,ending:o.timeRange.ending?os.OQ.toUnixMs(o.timeRange.ending):void 0},...(null===(t=o.actors)||void 0===t?void 0:t.length)>0?{actors:o.actors}:void 0,...(null===(s=o.actions)||void 0===s?void 0:s.length)>0?{actions:o.actions}:void 0},sort:i||rs.NQ.CreatedNewest};n.table===X.bx?await xs({environment:a,request:{...l,spaceId:n.id},auditLogPointer:n,filters:o}):n.table===lt.V7?await xs({environment:a,request:{...l,organizationId:n.id},auditLogPointer:n,filters:o}):(0,y.t1)(n.table)}({environment:n,auditLogPointer:{id:t.id,table:t.table}})}),[n,t,i]),(0,a.useEffect)((()=>{fs({environment:n,parentStore:t})}),[n,t]),(0,O.jsxs)(at,{children:[(0,O.jsx)(it,{title:(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(h.FormattedMessage,{id:"settingsConsole.auditLog.title",defaultMessage:"Audit log for"}),s]})}),(0,O.jsxs)("div",{style:{justifyContent:"space-between",display:"flex",paddingTop:4,paddingBottom:12},children:[(0,O.jsx)(ks,{parentStore:t}),(0,O.jsx)(ss.Z,{})]}),"loading"===(null==r?void 0:r.status)&&(0,O.jsx)(as.Z,{}),"success"===(null==r?void 0:r.status)&&(0,O.jsx)(qs,{searchResponse:r,parentStore:t})]})}function Gs(e){const{organizationId:t,spaceId:s}=e,a=Xt({spaceId:s}),n=ct({organizationId:t}),o=a||n;return o&&t?(0,O.jsx)($s,{spacePicker:(0,O.jsx)(Ct,{shouldShowOrganizationOption:!0,organizationId:t,currentTabRoute:b.FW,selectedSpaceStore:a}),parentStore:o}):null}var Js=s(85579);function Ys(e){let{spaceStore:t,userStore:s,spacePicker:a,isOrganizationOwner:n}=e;const o=(0,M.yK)((()=>({headingStyle:{marginBottom:14,paddingBottom:0,fontSize:20,fontWeight:ee.Z.fontWeight.medium,display:"flex",justifyContent:"space-between",alignItems:"center"},title:{display:"flex",alignItems:"center",gap:0}})),[]);return(0,O.jsxs)(at,{children:[(0,O.jsx)(it,{title:(0,O.jsxs)("div",{style:o.title,children:[(0,O.jsx)(h.FormattedMessage,{id:"settingsConsole.spaceContentSearch.title",defaultMessage:"Content search for "}),a]})}),(0,O.jsx)(Js.a,{spaceStore:t,userStore:s,isOrganizationOwner:n},t.id)]})}function Qs(e){let{organizationId:t,spaceId:s,tabRoute:a,queryParams:n}=e;const o=(0,v.VK)((()=>bt.default.state.currentUserStore),[]),i=Xt({spaceId:s});return Qt({organizationId:t,spaceId:s,tabRoute:a,queryParams:n}),i&&o&&t?(0,O.jsx)(Ys,{spaceStore:i,userStore:o,spacePicker:(0,O.jsx)(Ct,{organizationId:t,currentTabRoute:a,selectedSpaceStore:i}),isOrganizationOwner:!0}):null}var Xs=s(73420);function ea(e){let{organizationStore:t}=e;const s=(0,x.O7)(),n=function(){const e=(0,x.O7)(),{organizationOwnerRecordCache:t}=(0,a.useContext)(ie.V),{spaceIds:s}=(0,a.useContext)(T.g);return(0,v.VK)((()=>s.map((s=>new se.H2(e,{id:s,table:X.bx},{inMemoryRecordCache:t})))),[s,t,e])}(),o=(0,v.VK)((()=>n.reduce(((e,t)=>e+((null==t?void 0:t.getMemberCountFromPublicSpaceData())||0)),0)),[n]);return(0,O.jsxs)("div",{children:[(0,O.jsx)(F.q,{styleName:"Body-14px/Medium",colorName:"secondary",children:(0,O.jsx)(h.FormattedMessage,{id:"settingsConsole.home.about.title",defaultMessage:"About your organization"})}),(0,O.jsxs)(_,{direction:"horizontal",children:[(0,O.jsxs)(B,{tooltipText:(0,O.jsx)(h.FormattedMessage,{id:"settingsConsole.home.about.members.tooltip",defaultMessage:"View all organization members"}),onClick:()=>{j.c4({environment:s,url:(0,f.a5)({organizationId:t.id,tabRoute:b.qR})})},children:[(0,O.jsx)(F.q,{styleName:"Body-14px/Medium",colorName:"secondary",children:(0,O.jsx)(h.FormattedMessage,{id:"settingsConsole.home.about.members.title",defaultMessage:"Members"})}),(0,O.jsx)(F.q,{styleName:"Heading-17px/Regular",colorName:"primary",children:(0,O.jsx)(N.e,{num:o,abbreviateNumber:!1})})]}),(0,O.jsxs)(B,{tooltipText:(0,O.jsx)(h.FormattedMessage,{id:"settingsConsole.home.about.guests.tooltip",defaultMessage:"View all organization guests"}),onClick:()=>{j.c4({environment:s,url:(0,f.a5)({organizationId:t.id,tabRoute:b.qR})})},children:[(0,O.jsx)(F.q,{styleName:"Body-14px/Medium",colorName:"secondary",children:(0,O.jsx)(h.FormattedMessage,{id:"settingsConsole.home.about.guests.title",defaultMessage:"Guests"})}),(0,O.jsx)(F.q,{styleName:"Heading-17px/Regular",colorName:"primary",children:(0,O.jsx)(N.e,{num:500,abbreviateNumber:!1})})]}),(0,O.jsxs)(B,{tooltipText:(0,O.jsx)(h.FormattedMessage,{id:"settingsConsole.home.about.workspaces.tooltip",defaultMessage:"View all workspaces within your organization"}),onClick:()=>{j.c4({environment:s,url:(0,f.a5)({organizationId:t.id,tabRoute:b.J7})})},children:[(0,O.jsx)(F.q,{styleName:"Body-14px/Medium",colorName:"secondary",children:(0,O.jsx)(h.FormattedMessage,{id:"settingsConsole.home.about.workspaces.title",defaultMessage:"Workspaces"})}),(0,O.jsx)(F.q,{styleName:"Heading-17px/Regular",colorName:"primary",children:(0,O.jsx)(N.e,{num:n.length,abbreviateNumber:!1})})]}),(0,O.jsxs)(B,{tooltipText:(0,O.jsx)(h.FormattedMessage,{id:"settingsConsole.home.about.domains.tooltip",defaultMessage:"View the statuses of all the domains within your organization"}),onClick:()=>{j.c4({environment:s,url:(0,f.a5)({organizationId:t.id,tabRoute:b.zc})})},children:[(0,O.jsx)(F.q,{styleName:"Body-14px/Medium",colorName:"secondary",children:(0,O.jsx)(h.FormattedMessage,{id:"settingsConsole.home.about.domains.title",defaultMessage:"Verified email domains"})}),(0,O.jsx)(F.q,{styleName:"Heading-17px/Regular",colorName:"primary",children:(0,O.jsx)(N.e,{num:3,abbreviateNumber:!1})})]}),(0,O.jsxs)(B,{tooltipText:(0,O.jsx)(h.FormattedMessage,{id:"settingsConsole.home.about.users.tooltip",defaultMessage:"View all of the verified users within your organization"}),onClick:()=>{j.c4({environment:s,url:(0,f.a5)({organizationId:t.id,tabRoute:b.C$,properties:{subtab:"managed-accounts"}})})},children:[(0,O.jsx)(F.q,{styleName:"Body-14px/Medium",colorName:"secondary",children:(0,O.jsx)(h.FormattedMessage,{id:"settingsConsole.home.about.users.title",defaultMessage:"Verified users"})}),(0,O.jsx)(F.q,{styleName:"Heading-17px/Regular",colorName:"primary",children:(0,O.jsx)(N.e,{num:2100,abbreviateNumber:!1})})]})]})]})}function ta(e){let{organizationStore:t}=e;return(0,O.jsxs)("div",{children:[(0,O.jsx)(F.q,{styleName:"Body-14px/Medium",colorName:"secondary",children:(0,O.jsx)(h.FormattedMessage,{id:"settingsConsole.home.recentActivity.title",defaultMessage:"Recent activity"})}),(0,O.jsxs)(_,{direction:"horizontal",children:[(0,O.jsxs)(B,{children:[(0,O.jsx)(F.q,{styleName:"Body-14px/Medium",colorName:"secondary",children:(0,O.jsx)(h.FormattedMessage,{id:"settingsConsole.home.recentActivity.activeMembers.title",defaultMessage:"Active members in last 90 days"})}),(0,O.jsx)(F.q,{styleName:"Heading-17px/Regular",colorName:"primary",children:(0,O.jsx)(N.e,{num:8290,abbreviateNumber:!1})})]}),(0,O.jsxs)(B,{children:[(0,O.jsx)(F.q,{styleName:"Body-14px/Medium",colorName:"secondary",children:(0,O.jsx)(h.FormattedMessage,{id:"settingsConsole.home.recentActivity.openRequests.title",defaultMessage:"Open requests"})}),(0,O.jsx)(F.q,{styleName:"Heading-17px/Regular",colorName:"primary",children:(0,O.jsx)(N.e,{num:3,abbreviateNumber:!1})})]})]})]})}var sa=s(84747),aa=s(72141),na=s(90965),oa=s(23124),ia=s(89728);const ra=5,da=23,la=38,ca=5,ua=3;function ga(e){let{organizationId:t,renderHeading:s,spacePageSize:n,hideHeaderSection:o}=e;const i=ha(),r=(0,M.yK)((e=>({linkButton:{fontWeight:ee.Z.fontWeight.medium,fontSize:ee.Z.fontSize.UIRegular.desktop,color:e.mediumTextColor}})),[]),d=n??ua,l=(0,x.O7)(),{spaceIds:c}=(0,a.useContext)(T.g),[u,g]=(0,a.useState)(d),m=c.slice(0,u),p=c.length-m.length;return(0,O.jsxs)("div",{children:[o?null:(0,O.jsxs)(Xs.X2,{alignItems:"center",justifyContent:"space-between",children:[s?s():(0,O.jsx)(F.q,{styleName:"Heading-17px/Semibold",as:"h2",children:(0,O.jsx)(h.FormattedMessage,{id:"organizationSettingsWorkspacesOverview.workspaces",defaultMessage:"Workspaces"})}),(0,O.jsx)(ia.Z,{onClick:()=>j.c4({environment:l,url:(0,f.a5)({organizationId:t,tabRoute:b.J7})}),style:r.linkButton,children:(0,O.jsx)(h.FormattedMessage,{id:"organizationSettingsWorkspacesOverview.workspaces.viewAll",defaultMessage:"View all →"})})]}),(0,O.jsxs)("div",{style:i.workpacesBox,children:[m.map(((e,t)=>(0,O.jsx)(ma,{spaceId:e,rowIndex:t},`workspaceRow-${e}`))),p>0&&(0,O.jsx)("div",{style:{...i.workspaceRow,paddingTop:6,paddingBottom:6},children:(0,O.jsx)(ia.Z,{onClick:()=>g(u+d),style:r.linkButton,children:(0,O.jsx)(h.FormattedMessage,{id:"organizationSettingsWorkspacesOverview.moreWorkspaces",defaultMessage:"{count, plural, one {+{count} more workspace} other {+{count} more workspaces}}",values:{count:p}})})})]})]})}function ma(e){let{spaceId:t,rowIndex:s}=e;const n=Xt({spaceId:t}),o=(0,x.O7)(),i=ha(),{updateCacheWithRecordMap:r}=(0,a.useContext)(ie.V),[d,l]=(0,a.useState)(),[c,u]=(0,a.useState)(!0);(0,sa.Z)((async()=>{const e=await w.getTeamsForOrganizationSpace(o,{spaceId:t});if("success"===e.type){const{teamIds:t}=e.data;r({data:e.data}),l(t.length)}u(!1)}));const[g,m]=(0,a.useState)([]),[p,f]=(0,a.useState)(!0);(0,sa.Z)((async()=>{const e=await w.getVisibleUsers(o,{spaceId:t});if("success"===e.type){let t;t="visibleUsers"in e.data?e.data.visibleUsers:e.data.users,m(t)}f(!1)}));const b=(0,v.VK)((()=>g.filter(na.du).filter((e=>!e.isTeamGuest&&e.isPageGuest)).length),[g]),{name:j,icon:M,ownerIds:S,memberCount:C}=(0,v.VK)((()=>{const e=g.filter((e=>(0,aa.zz)(e.role))).map((e=>{let{userId:t}=e;return t})),t=g.filter((e=>(0,aa.Jy)(e.role))).length;return{name:null==n?void 0:n.getName(),icon:null==n?void 0:n.getIcon(),ownerIds:e,memberCount:t}}),[g,n]),I=0!==s?i.workspaceRow:{...i.workspaceRow,borderTop:"none"};return(0,O.jsx)("div",{style:I,children:(0,O.jsxs)(oa.rj,{children:[(0,O.jsx)(oa.r8,{row:1,col:1,colEnd:5,children:(0,O.jsxs)(Xs.X2,{gap:12,alignItems:"center",grow:1,children:[(0,O.jsx)(Mt.Z,{disabled:!0,icon:M,isEmptyPage:!1,title:j,size:la,isLarge:!0}),(0,O.jsxs)(Xs.sg,{gap:4,children:[(0,O.jsx)(F.q,{styleName:"Heading-17px/Regular",children:j}),(0,O.jsx)(F.q,{styleName:"Body-12px/Regular",colorName:"secondary",children:C>0?(0,O.jsx)(h.FormattedMessage,{id:"organizationSettingsWorkspacesOverview.workspace.memberCount",defaultMessage:"{memberCount, plural, one {{memberCount} member} other {{memberCount} members}}",values:{memberCount:C}}):(0,O.jsx)(k.Z,{style:i.byline})})]})]})}),(0,O.jsx)(oa.r8,{row:1,col:5,children:(0,O.jsxs)(Xs.sg,{gap:8,children:[(0,O.jsx)(K.Z,{isSmall:!0,children:(0,O.jsx)(h.FormattedMessage,{id:"organizationSettingsWorkspacesOverview.workspaceOwners",defaultMessage:"Workspace owners"})}),(0,O.jsx)(Xs.X2,{children:p?(0,O.jsx)(k.Z,{style:i.owners}):(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(N.e,{num:S.length,abbreviateNumber:!1}),(0,O.jsx)(pa,{ownerIds:S})]})})]})}),(0,O.jsx)(oa.r8,{row:1,col:6,children:(0,O.jsxs)(Xs.sg,{gap:8,children:[(0,O.jsx)(K.Z,{isSmall:!0,children:(0,O.jsx)(h.FormattedMessage,{id:"organizationSettingsWorkspacesOverview.members",defaultMessage:"Members"})}),p?(0,O.jsx)(k.Z,{style:i.number}):(0,O.jsx)(N.e,{num:C,abbreviateNumber:!1})]})}),(0,O.jsx)(oa.r8,{row:1,col:7,children:(0,O.jsxs)(Xs.sg,{gap:8,children:[(0,O.jsx)(K.Z,{isSmall:!0,children:(0,O.jsx)(h.FormattedMessage,{id:"organizationSettingsWorkspacesOverview.guests",defaultMessage:"Guests"})}),p?(0,O.jsx)(k.Z,{style:i.number}):(0,y.$K)(b)?(0,O.jsx)(N.e,{num:b,abbreviateNumber:!1}):(0,O.jsx)(h.FormattedMessage,{id:"organizationSettingsWorkspacesOverview.guests.undefined",defaultMessage:"Unknown"})]})}),(0,O.jsx)(oa.r8,{row:1,col:8,children:(0,O.jsxs)(Xs.sg,{gap:8,children:[(0,O.jsx)(K.Z,{isSmall:!0,children:(0,O.jsx)(h.FormattedMessage,{id:"organizationSettingsWorkspacesOverview.teamspaces",defaultMessage:"Teamspaces"})}),c?(0,O.jsx)(k.Z,{style:i.number}):(0,y.$K)(d)?(0,O.jsx)(N.e,{num:d,abbreviateNumber:!1}):(0,O.jsx)(h.FormattedMessage,{id:"organizationSettingsWorkspacesOverview.teams.undefined",defaultMessage:"Unknown"})]})})]})})}function pa(e){let{ownerIds:t}=e;const s=ha(),a=(0,x.O7)(),n=(t??[]).slice(0,ca),o=(0,v.VK)((()=>n.map((e=>new se.U6(a,{table:Oe.KJ,id:e},{userId:e})))),[n,a]);return(0,O.jsx)("div",{style:s.ownerAvatars,children:o.map((e=>(0,O.jsx)(Be.Z,{userStore:e,style:s.avatar,size:da,avatarShouldShowShadow:!0,hasTooltip:!0},e.id)))})}function ha(){return(0,M.yK)((e=>({workpacesBox:{marginTop:6,borderRadius:6,border:`1px solid ${e.stroke.deemphasized}`},workspaceRow:{padding:"12px 16px",borderTop:`1px solid ${e.stroke.deemphasized}`},avatar:{width:da,height:da,borderRadius:da,marginRight:-ra,position:"relative"},ownerAvatars:{display:"flex",alignItems:"center",position:"relative",flexDirection:"row-reverse",marginLeft:4+ra,marginTop:-2,transform:"translateZ(0)"},number:{borderRadius:4,height:24,width:40},byline:{borderRadius:4,height:14,width:80},owners:{borderRadius:4,height:24,width:100}})),[])}function xa(e){let{organizationId:t}=e;const s=ct({organizationId:t});return s?(0,O.jsxs)(at,{children:[(0,O.jsx)(it,{title:(0,O.jsx)(h.FormattedMessage,{id:"organizationHome.title",defaultMessage:"Home"})}),(0,O.jsxs)(Xs.sg,{gap:16,children:[(0,O.jsx)(ta,{organizationStore:s}),(0,O.jsx)(ea,{organizationStore:s}),(0,O.jsx)(ga,{organizationId:s.id,renderHeading:()=>(0,O.jsx)(F.q,{styleName:"Body-14px/Medium",colorName:"secondary",children:(0,O.jsx)(h.FormattedMessage,{id:"organizationHome.workspaces.title",defaultMessage:"Workspaces in organization"})})})]})]}):null}const fa=[{id:"actor",headerTitle:(0,O.jsx)(h.FormattedMessage,{id:"organizationMembersTable.userColumn.header",defaultMessage:"User"}),renderCell:e=>null,widthData:{width:70},sortable:!0},{id:"role",headerTitle:(0,O.jsx)(h.FormattedMessage,{id:"organizationMembersTable.roleColumn.header",defaultMessage:"Role"}),renderCell:e=>null,widthData:{width:70},sortable:!0},{id:"spaces",headerTitle:(0,O.jsx)(h.FormattedMessage,{id:"organizationMembersTable.spacesColumn.header",defaultMessage:"Workspaces"}),renderCell:e=>null,widthData:{width:70},sortable:!0},{id:"groups",headerTitle:(0,O.jsx)(h.FormattedMessage,{id:"organizationMembersTable.groupsColumn.header",defaultMessage:"Groups"}),renderCell:e=>null,widthData:{width:70},sortable:!0},{id:"teamspaces",headerTitle:(0,O.jsx)(h.FormattedMessage,{id:"organizationMembersTable.teamsColumn.header",defaultMessage:"Teamspaces"}),renderCell:e=>null,widthData:{width:70},sortable:!0}];function ba(e){const t=(0,M.yK)((e=>(0,Me.b)({columnRenderInfo:fa,theme:e,containerMarginTop:0})),[]);return(0,O.jsx)(Me.D,{columnRenderInfo:fa,rows:[],renderNoRowsComponent:()=>(0,O.jsx)(ya,{loading:!1}),styles:t})}function ya(e){const t=(0,M.yK)((()=>({text:{marginTop:15,marginBottom:40,textAlign:"center"}})),[]);return(0,O.jsx)(K.Z,{isSmall:!0,style:t.text,children:!e.loading&&(0,O.jsx)(h.FormattedMessage,{id:"organizationMembersTable.empty",defaultMessage:"No members found."})})}var ja=function(e){return e.Members="members",e}(ja||{});const va=[{name:ja.Members,tab:(0,O.jsx)(h.FormattedMessage,{id:"settingsConsole.people.members.title",defaultMessage:"Members"})}];function Ma(e){const{organizationId:t,subtab:s}=e,n=(0,x.O7)(),o=(0,a.useMemo)((()=>function(e){ja.Members;return ja.Members}()),[s]),i=ct({organizationId:t});if(!i)return null;return(0,O.jsxs)(at,{children:[(0,O.jsx)(it,{title:(0,O.jsx)(h.FormattedMessage,{id:"settingsConsole.people.title",defaultMessage:"People"})}),(0,O.jsx)(rt,{tabConfig:{tabs:va,currentTabName:o,updateTab:function(e){j.c4({environment:n,url:(0,f.a5)({organizationId:t,tabRoute:b.qR,properties:{subtab:e}})})}}}),(0,O.jsx)(Sa,{currentTab:o,organizationStore:i})]})}function Sa(e){const{organizationStore:t}=e;if(e.currentTab===ja.Members)return(0,O.jsx)(ba,{organizationStore:t});(0,y.t1)(e.currentTab)}var wa=function(e){return e.OrganizationSettings="organization-settings",e.ByWorkspace="by-workspace",e.BySetting="by-setting",e}(wa||{});const Ca=[{name:wa.OrganizationSettings,tab:(0,O.jsx)(h.FormattedMessage,{id:"settingsConsole.security.subTab.organizationSettings.title",defaultMessage:"Organization Settings"})},{name:wa.ByWorkspace,tab:(0,O.jsx)(h.FormattedMessage,{id:"settingsConsole.security.subTab.byWorkspace.title",defaultMessage:"By Workspace"})},{name:wa.BySetting,tab:(0,O.jsx)(h.FormattedMessage,{id:"settingsConsole.security.subTab.bySetting.title",defaultMessage:"By Setting"})}];function Ia(e){let{organizationId:t,subtab:s,queryParams:n}=e;const o=(0,x.O7)(),i=(0,a.useMemo)((()=>function(e){switch(e){case"by-workspace":return wa.ByWorkspace;case"by-setting":return wa.BySetting;default:return wa.OrganizationSettings}}(s)),[s]),r=ct({organizationId:t});if(!r)return null;return(0,O.jsx)(at,{children:(0,O.jsxs)(it,{title:(0,O.jsx)(h.FormattedMessage,{id:"settingsConsole.security.title",defaultMessage:"Security"}),children:[(0,O.jsx)(rt,{tabConfig:{tabs:Ca,currentTabName:i,updateTab:e=>{j.c4({environment:o,url:(0,f.a5)({organizationId:t,tabRoute:b.HI,properties:{subtab:e},queryParams:n})})}}}),(0,O.jsx)(za,{currentTab:i,organizationStore:r})]})})}function za(e){switch(e.currentTab){case wa.OrganizationSettings:return(0,O.jsx)("div",{children:"Organization Settings"});case wa.ByWorkspace:return(0,O.jsx)("div",{children:"By Workspace"});case wa.BySetting:return(0,O.jsx)("div",{children:"By Setting"});default:(0,y.t1)(e.currentTab)}}var ka=s(29302);function Fa(e){let{onClick:t,children:s}=e;const a=(0,M.yK)((e=>({icon:{width:18,height:18,fill:e.lightIconColor,marginLeft:6},button:{marginLeft:-6,maxWidth:"max-content"}})),[]);return(0,O.jsxs)(ia.Z,{isSmall:!0,onClick:t,shouldShrink:!0,style:a.button,children:[s,(0,Te.R)(a.icon)]})}var Ua=s(21213),Na=s(74194),Ta=s(68785),Ra=s(58297);function Aa(e){let{isOpen:t,handleClose:s,currentOrganizationName:a,organizationId:n}=e;return(0,O.jsx)(he.Z,{open:t,onDismiss:s,showCloseIcon:!0,preventHideChildrenWhileOpening:!0,render:()=>(0,O.jsx)(La,{currentOrganizationName:a,handleClose:s,organizationId:n})})}function La(e){let{currentOrganizationName:t,handleClose:s,organizationId:n}=e;const o=(0,M.yK)((e=>({modalBody:{padding:20,minWidth:300,display:"flex",alignItems:"center",flexDirection:"column"},nameInput:{marginTop:24,marginBottom:24},icon:{height:36,width:36,fill:e.mediumIconColor,marginBottom:8},submitButton:{marginBottom:8,width:"100%"}})),[]),i=(0,x.O7)(),{updateCacheWithRecordMap:r}=(0,a.useContext)(ie.V),[d,l]=(0,a.useState)(t),[c,u]=(0,a.useState)(!1),g=(0,a.useCallback)((e=>{l(e.target.value)}),[]),m=(0,a.useCallback)((async e=>{if(!e)return;u(!0);const t=await w.updateOrganization(i,{organizationId:n,name:e});"success"===t.type?r({data:t.data}):C.showErrorMessage((0,I.wf)(z.default.getIntl(),t)),u(!1),s()}),[s,i,n,r]);return(0,O.jsxs)("div",{style:o.modalBody,children:[(0,Ua.T)(o.icon),(0,O.jsx)(F.q,{styleName:"Heading-17px/Medium",colorName:"primary",children:(0,O.jsx)(h.FormattedMessage,{id:"updateOrganizationNameModal.title",defaultMessage:"Change organization name"})}),(0,O.jsx)(Na.Z,{value:d,onChange:g,style:o.nameInput}),(0,O.jsx)(Ra.Z,{onClick:()=>m(d),isLarge:!0,disabled:!d,style:o.submitButton,children:c?(0,O.jsx)(Ta.Z,{}):(0,O.jsx)(h.FormattedMessage,{id:"updateOrganizationNameModal.changeName",defaultMessage:"Change name"})}),(0,O.jsx)(ia.Z,{onClick:s,isGray:!0,children:(0,O.jsx)(h.FormattedMessage,{id:"updateOrganizationNameModal.cancel",defaultMessage:"Cancel"})})]})}function Oa(e){let{organizationId:t}=e;const s=ct({organizationId:t}),{organizationName:n,organizationMembership:o}=(0,v.VK)((()=>({organizationName:null==s?void 0:s.getName(),organizationMembership:null==s?void 0:s.getMembership()})),[s]),[i,r]=(0,a.useState)(!1),d=null==o?void 0:o.filter((e=>(0,aa.zz)(e.role)));return(0,O.jsxs)(Xs.sg,{gap:12,children:[(0,O.jsxs)(Xs.sg,{gap:4,children:[(0,O.jsx)(K.Z,{isSmall:!0,children:(0,O.jsx)(h.FormattedMessage,{id:"organizationSettings.organizationName",defaultMessage:"Organization name"})}),(0,O.jsx)(Fa,{onClick:()=>r(!0),children:n}),(0,O.jsx)(Aa,{currentOrganizationName:n,organizationId:t,isOpen:i,handleClose:()=>r(!1)})]}),(0,O.jsxs)(Xs.sg,{gap:4,children:[(0,O.jsx)(K.Z,{isSmall:!0,children:(0,O.jsx)(h.FormattedMessage,{id:"organizationSettings.organizationOwners",defaultMessage:"Organization owners"})}),(0,O.jsx)(Xs.X2,{children:null==d?void 0:d.map((e=>{let{user_id:t}=e;return(0,O.jsx)(_a,{userId:t},t)}))})]})]})}function _a(e){let{userId:t}=e;const s=(0,x.O7)(),a=(0,M.yK)((e=>({userTag:{border:`1px solid ${e.stroke.deemphasized}`,borderRadius:3,padding:"2px 6px",marginRight:8,marginTop:4,marginBottom:4,background:e.contentBackground,fontSize:14,lineHeight:1.2}})),[]),n=new se.U6(s,{table:Oe.KJ,id:t},{userId:t});return(0,O.jsx)(ka.Z,{userStore:n,style:a.userTag})}var Ba=s(43169),Da=s(86249),Pa=s(5478);function Za(e){let{organizationId:t}=e;return(0,O.jsxs)("div",{children:[(0,O.jsx)(F.q,{styleName:"Heading-17px/Medium",as:"h2",children:(0,O.jsx)(h.FormattedMessage,{id:"organizationSettingsDomainsOverview.title",defaultMessage:"Verified email domains and users"})}),(0,O.jsx)(F.q,{styleName:"Body-14px/Regular",colorName:"secondary",as:"p",children:"[Copy WIP] Your organization can have multiple email domains. Email domains can be used to TKTKTK. Once you associate a verified email domain with your organization, you can manage all Notion accounts created using an email address with that email domain."}),(0,O.jsx)(Ha,{organizationId:t})]})}const Ea={height:53,display:"flex",alignItems:"center",justifyContent:"flex-start",width:"100%",gap:4};var Va=function(e){return e.Domain="domain",e.Loading="loading",e}(Va||{});const Ka=[{id:"domain",headerTitle:(0,O.jsx)(h.FormattedMessage,{id:"organizationSettingsDomainsOverview.table.domain",defaultMessage:"Email domain"}),renderCell:e=>e.type===Va.Domain?(0,O.jsx)(F.q,{styleName:"Body-14px/Regular",as:"span",customStyles:Ea,children:`@${e.verification.domain}`}):(0,O.jsx)(Ce.H,{titleStyles:{width:"100%"}}),widthData:{widthPercent:30,minWidth:80},sortable:!1},{id:"status",headerTitle:(0,O.jsx)(h.FormattedMessage,{id:"organizationSettingsDomainsOverview.table.status",defaultMessage:"Email domain status"}),renderCell:e=>e.type===Va.Domain?(0,O.jsx)(Da.zq,{status:Pa.YF.Success}):(0,O.jsx)(Ce.H,{}),widthData:{widthPercent:24,minWidth:60},sortable:!1},{id:"usersCount",headerTitle:(0,O.jsx)(h.FormattedMessage,{id:"organizationSettingsDomainsOverview.table.usersCount",defaultMessage:"All verified users"}),renderCell:e=>e.type===Va.Domain?(0,O.jsx)(F.q,{styleName:"Body-14px/Regular",as:"span",customStyles:Ea,children:(0,O.jsx)(h.FormattedMessage,{id:"organizationSettingsDomainsOverview.table.usersCount.cellCount",defaultMessage:"{formattedAmount} {usersCount, plural, one {verified user} other {verified users}}",values:{usersCount:e.usersCount,formattedAmount:(0,O.jsx)(N.e,{num:e.usersCount,abbreviateNumber:!1})}})}):(0,O.jsx)(Ce.H,{}),widthData:{widthPercent:24,minWidth:60},sortable:!1},{id:"loginMethod",headerTitle:(0,O.jsx)(h.FormattedMessage,{id:"organizationSettingsDomainsOverview.table.loginMethod",defaultMessage:"Login methods"}),renderCell:e=>e.type===Va.Domain?(0,O.jsx)(F.q,{styleName:"Body-14px/Regular",as:"span",customStyles:Ea,children:qa(e.loginMethod)}):(0,O.jsx)(Ce.H,{}),widthData:{widthPercent:24,minWidth:60},sortable:!1}],Wa=[{id:"1",isClickable:!1,type:Va.Loading},{id:"2",isClickable:!1,type:Va.Loading}];function Ha(e){let{organizationId:t}=e;const s=(0,x.O7)(),[{status:a,value:n}]=(0,S.r5)((async()=>{const e=await w.getVerifiedDomainsForOrganization(s,{organizationId:t});if("success"===e.type)return e.data;if("failed"===e.type)throw e.error;return(0,y.t1)(e)}),[s,t]),o=n?n.domainData.map((e=>({id:e.verification.domain,verification:e.verification,usersCount:e.usersCount,loginMethod:e.loginMethod,isClickable:!1,type:Va.Domain}))):[],i="resolved"!==a?Wa:o,r=(0,M.yK)((e=>(0,Me.b)({columnRenderInfo:Ka,theme:e,containerMarginTop:0})),[]);return(0,O.jsx)(Me.D,{hideHeaderRowPadding:!0,showRowBorders:!0,allowHorizontalScroll:!0,columnRenderInfo:Ka,rows:i,renderNoRowsComponent:()=>null,styles:r})}function qa(e){switch(e){case Ba.b.ConfiguredSSO:return(0,O.jsx)(h.FormattedMessage,{id:"organizationSettingsDomainsOverview.table.loginMethod.methodConfiguredSSO",defaultMessage:"SAML SSO or email"});case Ba.b.EnforcedSSO:return(0,O.jsx)(h.FormattedMessage,{id:"organizationSettingsDomainsOverview.table.loginMethod.methodEnforcedSSO",defaultMessage:"Only SAML SSO"});case Ba.b.Standard:return(0,O.jsx)(h.FormattedMessage,{id:"organizationSettingsDomainsOverview.table.loginMethod.methodStandard",defaultMessage:"Email"});case Ba.b.NotAvailable:return(0,O.jsx)(h.FormattedMessage,{id:"organizationSettingsDomainsOverview.table.loginMethod.methodNotAvailable",defaultMessage:"Not yet available"});default:(0,y.t1)(e)}}function $a(e){let{organizationId:t}=e;return t?(0,O.jsxs)(at,{children:[(0,O.jsx)(it,{title:(0,O.jsx)(h.FormattedMessage,{id:"organizationSettings.title",defaultMessage:"Organization settings"})}),(0,O.jsxs)(Xs.sg,{gap:16,children:[(0,O.jsx)(Oa,{organizationId:t}),(0,O.jsx)(ga,{organizationId:t}),(0,O.jsx)(Za,{organizationId:t})]})]}):null}function Ga(e){let{organizationStore:t}=e;return(0,O.jsx)(ga,{hideHeaderSection:!0,organizationId:t.id,spacePageSize:10})}function Ja(e){let{organizationId:t}=e;const s=ct({organizationId:t});return s?(0,O.jsxs)(at,{children:[(0,O.jsx)(it,{title:(0,O.jsx)(h.FormattedMessage,{id:"organizationWorkspaces.title",defaultMessage:"Workspaces"})}),(0,O.jsx)(F.q,{styleName:"Body-14px/Regular",colorName:"secondary",as:"p",children:"[Copy WIP] An organization can have multiple workspaces. You can create new workspaces in your organization or claim existing ones that have been created with a verified email address."}),(0,O.jsx)(Ga,{organizationStore:s})]}):null}const Ya={home:e=>{let{environment:t,currentUserStore:s,organizationId:a}=e;return!0},security:e=>{let{environment:t,currentUserStore:s,organizationId:a}=e;return!0},people:e=>{let{environment:t,currentUserStore:s,organizationId:a}=e;return!0},accounts:e=>{let{environment:t,currentUserStore:s,organizationId:a}=e;return!0},audit_log:e=>{let{environment:t,currentUserStore:s,organizationId:a}=e;return!0},analytics:e=>{let{environment:t,currentUserStore:s,organizationId:a}=e;return!0},organization_settings:e=>{let{environment:t,currentUserStore:s,organizationId:a}=e;return!0},content_search:e=>{let{environment:t,currentUserStore:s,organizationId:a}=e;return!0},workspaces:e=>{let{environment:t,currentUserStore:s,organizationId:a}=e;return!0},domains:e=>{let{environment:t,currentUserStore:s,organizationId:a}=e;return!0}},Qa={home:{tab:{icon:u.z,name:(0,O.jsx)(h.FormattedMessage,{id:"settingsConsole.organization.tabNames.home",defaultMessage:"Home"})},scene:e=>(0,O.jsx)(xa,{...e})},security:{tab:{icon:c.I,name:(0,O.jsx)(h.FormattedMessage,{id:"settingsConsole.organization.tabNames.security",defaultMessage:"Security"})},scene:e=>(0,O.jsx)(Ia,{subtab:e.properties.subtab,...e})},people:{tab:{icon:p.O,name:(0,O.jsx)(h.FormattedMessage,{id:"settingsConsole.organization.tabNames.people",defaultMessage:"People"})},scene:e=>(0,O.jsx)(Ma,{subtab:e.properties.subtab,...e})},accounts:{tab:{icon:o.p,name:(0,O.jsx)(h.FormattedMessage,{id:"settingsConsole.organization.tabNames.accounts",defaultMessage:"Accounts"})},scene:e=>(0,O.jsx)(mt,{subtab:e.properties.subtab,...e})},audit_log:{tab:{icon:d.N,name:(0,O.jsx)(h.FormattedMessage,{id:"settingsConsole.organization.tabNames.audit_log",defaultMessage:"Audit log"})},scene:e=>(0,O.jsx)(Gs,{...e,spaceId:e.queryParams["space-id"]})},content_search:{tab:{icon:r.p,name:(0,O.jsx)(h.FormattedMessage,{id:"settingsConsole.organization.tabNames.contentSearch",defaultMessage:"Content Search"})},scene:e=>(0,O.jsx)(Qs,{spaceId:e.queryParams["space-id"],...e})},analytics:{tab:{icon:n.z,name:(0,O.jsx)(h.FormattedMessage,{id:"settingsConsole.organization.tabNames.contentAnalytics",defaultMessage:"Analytics"})},scene:e=>(0,O.jsx)(es,{spaceId:e.queryParams["space-id"],subtab:e.properties.subtab,...e})},organization_settings:{tab:{icon:g.r,name:(0,O.jsx)(h.FormattedMessage,{id:"settingsConsole.organization.tabNames.organization_settings",defaultMessage:"Organization"})},scene:e=>(0,O.jsx)($a,{...e})},workspaces:{tab:{icon:i.n,name:(0,O.jsx)(h.FormattedMessage,{id:"settingsConsole.organization.tabNames.workspaces",defaultMessage:"Workspaces"})},scene:e=>(0,O.jsx)(Ja,{...e})},domains:{tab:{icon:m.n,name:(0,O.jsx)(h.FormattedMessage,{id:"settingsConsole.organization.tabNames.domains",defaultMessage:"Domains"})},scene:e=>(0,O.jsx)("div",{children:"domains"})}},Xa={members:e=>{let{environment:t,currentUserStore:s,workspaceId:a}=e;return!0},security:e=>{let{environment:t,currentUserStore:s,workspaceId:a}=e;return!0}},en={members:{tab:{icon:p.O,name:(0,O.jsx)(h.FormattedMessage,{id:"settingsConsole.workspace.tabNames.members",defaultMessage:"Members"})},scene:e=>(0,O.jsx)("div",{children:"members"})},security:{tab:{icon:l.H,name:(0,O.jsx)(h.FormattedMessage,{id:"settingsConsole.workspace.tabNames.security",defaultMessage:"Settings"})},scene:e=>(0,O.jsx)("div",{children:"security"})}}},73150:(e,t,s)=>{s.d(t,{b:()=>c});var a=s(67294),n=s(480),o=s(86628),i=s(89101),r=s(8055),d=s(77080),l=s(85893);function c(e){return function(t){const s=(0,n.O7)(),c=(0,o.VK)((()=>d.default.checkGate("admin_console_enabled")),[]);return(0,a.useEffect)((()=>{c||r.c4({environment:s,url:i._j.root})}),[s,c]),c?(0,l.jsx)(e,{...t}):null}}},50659:(e,t,s)=>{s.d(t,{G$:()=>o,MF:()=>i,Z3:()=>n});const a=4;function n(e){let{isMobile:t}=e;return{...!t&&{borderRadius:3}}}function o(e){let{isMobile:t}=e;return t?{}:{...n({isMobile:t}),marginLeft:a,marginRight:a,width:`calc(100% - ${2*a}px)`,transition:"background 100ms ease-out"}}function i(){return{paddingLeft:14-a,paddingRight:14-a}}},35314:(e,t,s)=>{s.d(t,{e:()=>i});var a=s(67294),n=s(86628),o=s(77794);function i(){const[e,t]=(0,a.useState)(0),[s]=(0,a.useState)((()=>new o.E)),i=(0,a.createRef)();return(0,a.useEffect)((()=>{if(i.current)return s.observe(i.current),()=>{s.destroy()}}),[i,s]),(0,n.VK)((()=>{e!==s.rect.state.width&&t(s.rect.state.width)}),[e,s.rect]),[i,e]}},59016:(e,t,s)=>{s.d(t,{S:()=>o});var a=s(86628),n=s(80444);function o(){return(0,a.VK)((()=>{const{currentSpaceStore:e}=n.default.state;return(null==e?void 0:e.getMemberCountFromPublicSpaceData())||null}),[])}},32856:(e,t,s)=>{s.d(t,{D:()=>o});var a=s(86628),n=s(77080);function o(e){const{experimentId:t,groups:s,disableExposureLogging:o}=e,i=function(e){const{experimentId:t,disableExposureLogging:s,defaultGroup:o}=e;return(0,a.VK)((()=>n.default.getEligibleGroup({experimentId:t,defaultGroup:o??"control",disableExposureLogging:s})),[t,s,o])}({experimentId:t,disableExposureLogging:o});return s[i]}},40745:(e,t,s)=>{s.d(t,{M:()=>o});s(67294);var a=s(45238),n=s(85893);const o=(0,a.IU)("arrowDown",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M8 1.57715C7.5625 1.57715 7.25488 1.88477 7.25488 2.33594V10.8262L7.30957 12.3027L5.50488 10.2861L3.95312 8.75488C3.82324 8.625 3.63184 8.53613 3.42676 8.53613C3.0166 8.53613 2.70898 8.85059 2.70898 9.26758C2.70898 9.46582 2.78418 9.64355 2.94141 9.80762L7.44629 14.3193C7.59668 14.4697 7.79492 14.5586 8 14.5586C8.20508 14.5586 8.40332 14.4697 8.55371 14.3193L13.0586 9.80762C13.2158 9.64355 13.291 9.46582 13.291 9.26758C13.291 8.85059 12.9902 8.53613 12.5801 8.53613C12.3682 8.53613 12.1836 8.625 12.0469 8.75488L10.4951 10.2861L8.69043 12.2959L8.74512 10.8262V2.33594C8.74512 1.88477 8.44434 1.57715 8 1.57715Z"})})},80721:(e,t,s)=>{s.d(t,{W:()=>o});s(67294);var a=s(45238),n=s(85893);const o=(0,a.IU)("arrowLeftThick",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M1.54004 8.05762C1.54004 8.2627 1.62891 8.46094 1.78613 8.61133L6.29102 13.1162C6.45508 13.2734 6.63965 13.3486 6.82422 13.3486C7.25488 13.3486 7.5625 13.041 7.5625 12.6309C7.5625 12.4189 7.48047 12.2344 7.34375 12.1045L5.8125 10.5527L3.78906 8.70703L5.38867 8.80273H13.7012C14.1455 8.80273 14.46 8.49512 14.46 8.05762C14.46 7.61328 14.1455 7.3125 13.7012 7.3125H5.38867L3.7959 7.4082L5.8125 5.5625L7.34375 4.01074C7.48047 3.87402 7.5625 3.68945 7.5625 3.47754C7.5625 3.06738 7.25488 2.7666 6.82422 2.7666C6.63965 2.7666 6.45508 2.83496 6.27734 3.00586L1.78613 7.50391C1.62891 7.64746 1.54004 7.85254 1.54004 8.05762Z"})})},32566:(e,t,s)=>{s.d(t,{k:()=>o});s(67294);var a=s(45238),n=s(85893);const o=(0,a.IU)("arrowRightSmaller",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M15.383 8.352a.877.877 0 01-.274.64l-5.156 5.14a.864.864 0 01-.617.266.831.831 0 01-.602-.234.795.795 0 01-.234-.586c0-.12.02-.232.063-.336a.912.912 0 01.187-.273l1.75-1.766 2.914-2.656.274.5-2.711.156H1.484c-.26 0-.471-.078-.632-.234a.851.851 0 01-.235-.617c0-.256.078-.461.235-.618a.856.856 0 01.632-.242h9.493l2.71.164-.273.508L10.5 5.5 8.75 3.727a.946.946 0 01-.188-.266.917.917 0 01-.062-.344c0-.234.078-.43.234-.586a.831.831 0 01.602-.234.79.79 0 01.328.07c.104.047.203.117.297.211l5.148 5.133a.877.877 0 01.274.64z"})})},50780:(e,t,s)=>{s.d(t,{E:()=>o});s(67294);var a=s(45238),n=s(85893);const o=(0,a.IU)("editPropertyType",{viewBox:"0 0 16 16 ",svg:(0,n.jsx)("path",{d:"M11.5615 4.84473L12.2998 4.11328C12.6689 3.74414 12.6826 3.34082 12.3545 3.00586L12.0879 2.73926C11.7529 2.4043 11.3428 2.43848 10.9736 2.79395L10.2354 3.52539L11.5615 4.84473ZM3.22168 13.1641L10.9053 5.4873L9.59277 4.16797L1.90918 11.8516L1.23926 13.4512C1.16406 13.6562 1.37598 13.875 1.57422 13.7998L3.22168 13.1641ZM3.92578 13.8066H14.1045C14.4736 13.8066 14.7744 13.499 14.7744 13.1367C14.7744 12.7676 14.4736 12.4668 14.1045 12.4668H5.27246L3.92578 13.8066Z"})})},55964:(e,t,s)=>{s.d(t,{N:()=>o});s(67294);var a=s(45238),n=s(85893);const o=(0,a.IU)("eyePadded",{viewBox:"0 0 24 24",svg:(0,n.jsx)("path",{d:"M12 17.9912C17.6055 17.9912 21.3857 13.4727 21.3857 12.0713C21.3857 10.6699 17.5986 6.1582 12 6.1582C6.47656 6.1582 2.60742 10.6699 2.60742 12.0713C2.60742 13.4727 6.46973 17.9912 12 17.9912ZM12 16.6787C7.63184 16.6787 4.15918 13.0283 4.15918 12.0713C4.15918 11.2715 7.63184 7.4707 12 7.4707C16.3613 7.4707 19.8408 11.2715 19.8408 12.0713C19.8408 13.0283 16.3613 16.6787 12 16.6787ZM12 15.7559C14.0508 15.7559 15.6914 14.0811 15.6914 12.0713C15.6914 10.0137 14.0508 8.39355 12 8.39355C9.94238 8.39355 8.29492 10.0137 8.30176 12.0713C8.31543 14.0811 9.94238 15.7559 12 15.7559ZM12 13.2607C11.3369 13.2607 10.7969 12.7275 10.7969 12.0713C10.7969 11.415 11.3369 10.8818 12 10.8818C12.6631 10.8818 13.1963 11.415 13.1963 12.0713C13.1963 12.7275 12.6631 13.2607 12 13.2607Z"})})},27714:(e,t,s)=>{s.d(t,{N:()=>o});s(67294);var a=s(45238),n=s(85893);const o=(0,a.IU)("link",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M7.69922 10.8945L8.73828 9.84863C7.91797 9.77344 7.34375 9.51367 6.91992 9.08984C5.76465 7.93457 5.76465 6.29395 6.91309 5.14551L9.18262 2.87598C10.3379 1.7207 11.9717 1.7207 13.127 2.87598C14.2891 4.04492 14.2822 5.67188 13.1338 6.82031L11.958 7.99609C12.1768 8.49512 12.2451 9.10352 12.1289 9.62988L14.0908 7.6748C15.7725 6 15.7793 3.62109 14.084 1.92578C12.3887 0.223633 10.0098 0.237305 8.33496 1.91211L5.95605 4.29785C4.28125 5.97266 4.26758 8.35156 5.96289 10.0469C6.36621 10.4434 6.90625 10.7441 7.69922 10.8945ZM8.30078 5.13184L7.26855 6.17773C8.08203 6.25293 8.66309 6.51953 9.08008 6.93652C10.2422 8.09863 10.2422 9.73242 9.08691 10.8809L6.81738 13.1504C5.66211 14.3057 4.03516 14.3057 2.87305 13.1504C1.71094 11.9883 1.71777 10.3545 2.87305 9.20605L4.04199 8.03027C3.83008 7.53125 3.75488 6.92969 3.87109 6.39648L1.91602 8.35156C0.234375 10.0264 0.227539 12.4121 1.92285 14.1074C3.61816 15.8027 5.99707 15.7891 7.67188 14.1143L10.0439 11.7354C11.7256 10.0537 11.7324 7.6748 10.0371 5.98633C9.64062 5.58301 9.10059 5.28223 8.30078 5.13184Z"})})},16184:(e,t,s)=>{s.d(t,{Q:()=>o});s(67294);var a=s(45238),n=s(85893);const o=(0,a.IU)("lockedFilled",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M4.69141 14.6338H11.3018C12.2178 14.6338 12.6689 14.1826 12.6689 13.1914V8.08496C12.6689 7.18945 12.293 6.72461 11.541 6.64941V4.96094C11.541 2.36328 9.81152 1.1123 7.99316 1.1123C6.18164 1.1123 4.45215 2.36328 4.45215 4.96094V6.67676C3.74805 6.78613 3.32422 7.2373 3.32422 8.08496V13.1914C3.32422 14.1826 3.77539 14.6338 4.69141 14.6338ZM5.75098 4.83105C5.75098 3.22461 6.76953 2.35645 7.99316 2.35645C9.2168 2.35645 10.2422 3.22461 10.2422 4.83105V6.64258L5.75098 6.64941V4.83105Z"})})},22686:(e,t,s)=>{s.d(t,{f:()=>o});s(67294);var a=s(45238),n=s(85893);const o=(0,a.IU)("person",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M7.7832 8.00195C9.27344 8.00195 10.5381 6.67578 10.5381 4.95996C10.5381 3.28516 9.2666 2 7.7832 2C6.29297 2 5.01465 3.30566 5.02148 4.97363C5.02148 6.67578 6.28613 8.00195 7.7832 8.00195ZM3.51758 14.3594H12.0352C13.1631 14.3594 13.5527 14.0176 13.5527 13.3887C13.5527 11.6318 11.3242 9.21191 7.77637 9.21191C4.23535 9.21191 2 11.6318 2 13.3887C2 14.0176 2.38965 14.3594 3.51758 14.3594Z"})})},14734:(e,t,s)=>{s.d(t,{X:()=>o});s(67294);var a=s(45238),n=s(85893);const o=(0,a.IU)("personCrossedOut",{viewBox:"0 0 44 44",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M5.4857 44H0L44 8.56549V13.0061L5.4857 44Z"}),(0,n.jsx)("path",{d:"M39.8048 44H8.66491L25.6448 30.4378C26.9394 30.6489 28.1581 30.9719 29.3009 31.4067C31.5362 32.2374 33.4346 33.326 34.9964 34.6723C36.5725 36.0044 37.7761 37.4367 38.6071 38.9692C39.4525 40.5018 39.8752 41.9555 39.8752 43.3305C39.8752 43.5675 39.8517 43.7906 39.8048 44Z"}),(0,n.jsx)("path",{d:"M30.3971 16.7973C30.3971 16.8668 30.3965 16.9359 30.3952 17.0048L19.3828 25.9192C18.7467 25.7134 18.1339 25.4228 17.5446 25.0473C16.2408 24.2023 15.1876 23.0708 14.3853 21.6528C13.5972 20.2205 13.2032 18.6163 13.2032 16.8403C13.2032 15.0929 13.5972 13.5174 14.3853 12.1137C15.1876 10.7101 16.2408 9.60007 17.5446 8.78366C18.8485 7.96725 20.267 7.55905 21.8001 7.55905C23.3332 7.55905 24.7517 7.96009 26.0556 8.76218C27.3595 9.56426 28.4054 10.6671 29.1935 12.0708C29.9959 13.4601 30.3971 15.0356 30.3971 16.7973Z"})]})})},56996:(e,t,s)=>{s.d(t,{z:()=>o});s(67294);var a=s(45238),n=s(85893);const o=(0,a.IU)("sidebarHome",{viewBox:"0 0 20 20",svg:(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.54446 3.06854C9.8066 2.84385 10.1934 2.84385 10.4556 3.06854L15.7064 7.56922C16.0832 7.89219 16.3 8.36369 16.3 8.85996V14.6C16.3 15.5389 15.5389 16.3 14.6 16.3H11.75C11.3634 16.3 11.05 15.9866 11.05 15.6V11.7H8.95001V15.6C8.95001 15.9866 8.63661 16.3 8.25001 16.3H5.40001C4.46113 16.3 3.70001 15.5389 3.70001 14.6V8.85996C3.70001 8.36369 3.91687 7.89219 4.29367 7.56922L9.54446 3.06854ZM10 4.52198L5.20477 8.63218C5.13828 8.68918 5.10001 8.77238 5.10001 8.85996V14.6C5.10001 14.7657 5.23433 14.9 5.40001 14.9H7.55001V11.5C7.55001 10.8373 8.08727 10.3 8.75001 10.3H11.25C11.9128 10.3 12.45 10.8373 12.45 11.5V14.9H14.6C14.7657 14.9 14.9 14.7657 14.9 14.6V8.85996C14.9 8.77238 14.8617 8.68918 14.7952 8.63218L10 4.52198Z"})})}}]);