"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[8629],{24697:(e,t,a)=>{a.d(t,{$f:()=>h,Iw:()=>o,KC:()=>i,Lb:()=>l,Z:()=>c,e2:()=>g,gE:()=>r,jM:()=>m,ky:()=>d,m0:()=>n,nK:()=>p,uS:()=>u,ye:()=>f});var s=a(97978);function n(e,t){s.j(e,"overview_analytics_filter_change",t)}function i(e,t){s.j(e,"user_analytics_engagement_timerange_filter_change",t)}function o(e,t){s.j(e,"user_analytics_table_filter_change",t)}function r(e,t){s.j(e,"user_analytics_table_sort_change",t)}function l(e,t){s.j(e,"user_analytics_export_requested",t)}function d(e,t){s.j(e,"content_analytics_engagement_timerange_filter_change",t)}function c(e,t){s.j(e,"content_analytics_export_requested",t)}function u(e,t){s.j(e,"content_analytics_table_filter_change",t)}function g(e,t){s.j(e,"content_analytics_table_timerange_filter_change",t)}function m(e,t){s.j(e,"content_analytics_table_sort_change",t)}function p(e,t){s.j(e,"workspace_analytics_tab_click",t)}function f(e,t){s.j(e,"search_analytics_table_timerange_filter_change",t)}function h(e,t){s.j(e,"search_analytics_table_sort_change",t)}},83726:(e,t,a)=>{a.d(t,{D2:()=>l,Pr:()=>p,Uk:()=>h,qA:()=>f});var s=a(59730),n=a(19889),i=a(33954),o=a(6258),r=a(54642);const l="last_90_days",d={field:"last_active",direction:"desc"};async function c(e){const{environment:t,filter:a,spaceId:s,currentSpaceId:n,usersTabData:i}=e,o=null==i?void 0:i.dailyUsersData;return o&&a===(null==i?void 0:i.graphFilter)&&n===s?o:u({environment:t,spaceId:s,filter:a})}async function u(e){const{environment:t,spaceId:a,filter:s}=e,n=await r.getDailyUsersAnalytics(t,{spaceId:a,activeWindow:"all_time"===s?"last_90_days":s});return"failed"===n.type?n.body:n.data}async function g(e){const{environment:t,filter:a,sort:s,spaceStore:n,currentSpaceId:i,usersTabData:o}=e,r=null==o?void 0:o.tableFilter,l=null==o?void 0:o.userTableSort;return null!=o&&o.usersAndStats&&r===a&&l&&l.direction===s.direction&&l.field===s.field&&i===n.id?o.usersAndStats:m({environment:t,filter:a,sort:s,spaceStore:n})}async function m(e){const{environment:t,filter:a,sort:s,spaceStore:i}=e,l=await r.loadWorkspaceAnalyticsUsers(t,{spaceId:i.id,filters:{timeRange:a},sort:s});return"failed"===l.type?l.body:l.data.users.map((e=>({stats:e,userStore:o.U6.createChildStore(i,{table:n.KJ,id:e.userId})})))}async function p(e){const{environment:t,spaceStore:a,currentTab:n,currentSpaceId:i,usersTabData:o,setState:r,graphFilter:u,tableFilter:m}=e,p=await async function(e){const{environment:t,spaceStore:a,currentSpaceId:n,usersTabData:i,graphFilter:o,tableFilter:r}=e,u=o||(null==i?void 0:i.graphFilter)||l,m=r||(null==i?void 0:i.tableFilter)||l,p=(null==i?void 0:i.userTableSort)||d,[f,h]=await Promise.all([c({environment:t,filter:u,spaceId:a.id,currentSpaceId:n,usersTabData:i}),g({environment:t,filter:m,sort:p,spaceStore:a,currentSpaceId:n,usersTabData:i})]),v=(0,s.Rp)(f)||!f?[]:f,x=(0,s.Rp)(h)||!h?[]:h;return{graphFilter:u,tableFilter:m,userTableSort:p,dailyUsersError:(0,s.Rp)(f)?f:void 0,dailyUsersData:v,usersAndStatsError:(0,s.Rp)(h)?h:void 0,usersAndStats:x}}({environment:t,spaceStore:a,currentSpaceId:i,usersTabData:o,graphFilter:u,tableFilter:m});r({currentSpaceId:a.id,currentTab:n,usersTabData:p})}async function f(e){const{environment:t,spaceStore:a}=e,n=e.nextGraphFilter||l,i=e.nextTableFilter||l,o=e.nextSort||d,[r,c]=await Promise.all([u({environment:t,filter:n,spaceId:a.id}),m({environment:t,filter:i,sort:o,spaceStore:a})]),g=(0,s.Rp)(r)||!r?[]:r,p=(0,s.Rp)(c)||!c?[]:c;return{graphFilter:n,tableFilter:i,userTableSort:o,dailyUsersError:(0,s.Rp)(r)?r:void 0,dailyUsersData:g,usersAndStatsError:(0,s.Rp)(c)?c:void 0,usersAndStats:p}}function h(e,t){if((0,s.qC)(e)){const a=(0,i.nX)(t,e);if(a)return a}return t.formatMessage({defaultMessage:"Failed to retrieve analytics. Try refreshing and reopening the settings.",id:"workspaceAnalytics.usersTab.refershUserAnalytics.defaultFailed"})}},23399:(e,t,a)=>{a.d(t,{Z:()=>C});a(67294);var s=a(480),n=a(86628),i=a(9291),o=a(47307),r=a(61652),l=a(52275),d=a(78140),c=a(32163),u=a(53437),g=a(58297),m=a(72495),p=a(26388),f=a(33929),h=a(60709),v=a(80444),x=a(49085);class y extends x.default{getInitialState(){return{open:!1}}}const b=new y;var M=a(85893);const _=(0,i.defineMessages)({30:{id:"auditLogCSV.menu.30days",defaultMessage:"Last 30 days"},60:{id:"auditLogCSV.menu.60days",defaultMessage:"Last 60 days"},90:{id:"auditLogCSV.menu.90days",defaultMessage:"Last 90 days"},365:{id:"auditLogCSV.menu.365days",defaultMessage:"Last 1 year"},Export:{id:"auditLogCSV.menu.export",defaultMessage:"Export"}});function w(e,t){const{currentSpaceStore:a}=v.default.state;a&&r.PN(e,{spaceId:a.id,exportOptions:{duration:t}})}const C=(0,i.injectIntl)((function(){const e=(0,i.useIntl)(),t=(0,n.VK)((()=>b.state),[]);return(0,M.jsx)(u.ZP,{popupType:u.ZP.PopupType.Popup,open:t.open,placementToOrigin:u.ZP.Placement.Bottom,alignmentToOrigin:u.ZP.Alignment.End,originGap:4,disableMouseCapture:!0,disableContentScroll:!0,keepFocus:!1,render:()=>(0,M.jsx)(k,{}),onDismiss:j,enableOutsideClickDismiss:!0,origin:(0,M.jsx)(p.ZP,{renderTooltip:()=>(0,M.jsx)(i.FormattedMessage,{id:"auditLogCSV.popup.tooltip",defaultMessage:"Click for options to export the Audit Log in CSV form"}),render:a=>(0,M.jsx)(g.Z,{isLarge:!0,onClick:()=>{return e=!t.open,void b.setState({open:e});var e},...a,children:e.formatMessage(_.Export)})})})}));function j(){b.setState({open:!1})}function S(e,t){return{key:e,render:()=>(0,M.jsx)(l.Z,{focused:!1,title:f.default.formatMessage(_[e]),onClick:()=>{j(),w(t,e)}}),action:()=>{}}}function T(e,t){return{key:e,render:()=>(0,M.jsx)(l.Z,{focused:!1,title:f.default.formatMessage(_[e]),onClick:()=>{o.showDialog({message:(0,M.jsx)(i.FormattedMessage,{id:"auditLogCSV.menu.365days.prompt",defaultMessage:"Are you sure you want to export a one year CSV? You can't repeat this action while this is processing in the background."}),showCancel:!0,keepFocus:!0,items:[{label:(0,M.jsx)(i.FormattedMessage,{id:"AuditLogCSV.exportConfirmationDialog.label",defaultMessage:"Export"}),color:"blue",onAccept:()=>{j(),w(t,e)}}]})}}),action:()=>{}}}function k(){const e=(0,s.O7)(),t=[S(30,e),S(60,e),S(90,e),T(365,e)];return(0,M.jsx)(d.Z,{menuType:h.og.Popup,children:(0,M.jsx)(c.Z,{type:c.i.Vertical,sections:[{key:"results",render:e=>(0,M.jsx)(m.Z,{...e}),items:t}],initialFocus:0})})}},19044:(e,t,a)=>{a.d(t,{t:()=>u});a(67294);var s=a(13991),n=a(24405),i=a(7057),o=a(9291),r=a(26388),l=a(64369),d=a(4023),c=a(85893);function u(e){const{auditLogEntry:t,id:a}=e,u=(0,n.yK)((()=>({container:{display:"block",width:"100%"}})),[]);return(0,c.jsx)(r.ZP,{renderTooltip:()=>(0,c.jsx)("div",{style:{display:"flex",flexDirection:"column",fontVariantNumeric:"tabular-nums"},children:(0,c.jsx)("div",{children:(0,c.jsx)(o.FormattedMessage,{id:"auditLogSettings.timeTooltip.utcTime",defaultMessage:"UTC: {time}",values:{time:(0,i.$I)(t.serverTimestamp)}})})}),render:e=>(0,c.jsx)("div",{id:a,style:u.container,children:(0,c.jsx)(l.Z,{isSecondaryColor:!0,...e,children:(0,i.Yx)(t.serverTimestamp,"medium_with_time",s.SP)})}),placement:d.u.Bottom})}},33581:(e,t,a)=>{a.d(t,{p:()=>ie});var s=a(67294),n=a(9291),i=a(53965),o=a(1898),r=a(44317),l=a(68626),d=a(87479),c=a(80085),u=a(21202),g=a(19639),m=a(75246),p=a(29369),f=a(73123),h=a(61275),v=a(85893);function x(e){return"workspace"!==e}const y=(0,n.defineMessages)({password_cleared:{id:"auditlog.actionNames.eventColumn.password_cleared",defaultMessage:"Cleared login password"},password_set:{id:"auditlog.actionNames.eventColumn.password_set",defaultMessage:"Created a login password"},password_changed:{id:"auditlog.actionNames.eventColumn.password_changed",defaultMessage:"Changed login password"},logout:{id:"auditlog.actionNames.eventColumn.logout",defaultMessage:"Logged out"},user_deleted:{id:"auditlog.actionNames.eventColumn.user_deleted",defaultMessage:"User was deleted"},member_joined:{id:"auditlog.actionNames.eventColumn.member_joined",defaultMessage:"Joined the workspace"},file_uploaded:{id:"auditlog.actionNames.eventColumn.file_uploaded",defaultMessage:"Uploaded a file"},invite_link_reset:{id:"auditlog.actionNames.eventColumn.invite_link_reset",defaultMessage:"Reset invite link"},workspace_exported:{id:"auditlog.actionNames.eventColumn.workspace_exported",defaultMessage:"Exported all workspace content"},audit_log_exported:{id:"auditlogEventFilter.eventColumn.audit_log_exported",defaultMessage:"Exported audit log for last {duration} days"},user_analytics_exported:{id:"auditlogEventFilter.eventColumn.user_analytics_exported",defaultMessage:"Exported user analytics for {daysFilterString}"},content_analytics_exported:{id:"auditlogEventFilter.eventColumn.content_analytics_exported",defaultMessage:"Exported content analytics for {daysFilterString}"},workspace_icon_changed:{id:"auditlog.actionNames.eventColumn.workspace_icon_changed",defaultMessage:"Changed workspace icon"},public_page_cleared:{id:"auditlogEventFilter.actionNames.public_page_cleared",defaultMessage:"Public home page link cleared"},scim_token_generated:{id:"auditlog.actionNames.scim_token_generated",defaultMessage:"Generated API SCIM token"},scim_token_revoked:{id:"auditlog.actionNames.scim_token_revoked",defaultMessage:"Revoked API SCIM token"},"workspace.members_exported":{id:"auditlog.actionName.eventColumn.workspace.members_exported",defaultMessage:"Exported workspace members CSV"},page_access_requests_toggled:{id:"auditlog.actionNames.eventColumn.page_access_requests_toggled",defaultMessage:"page access requests from non-members"},public_page_sharing_toggled:{id:"auditlog.actionNames.eventColumn.public_page_sharing_toggled",defaultMessage:"members sharing pages publicly"},workspace_sidebar_editing_toggled:{id:"auditlog.actionNames.eventColumn.workspace_sidebar_editing_toggled",defaultMessage:"members changing the Workspace section"},disable_team_guests_toggled:{id:"auditlog.actionNames.eventColumn.disable_team_guests_toggled",defaultMessage:"teamspace guests"},disable_guests_toggled:{id:"auditlog.actionNames.eventColumn.disable_guests_toggled",defaultMessage:"guests"},pages_to_other_workspaces_toggled:{id:"auditlog.actionNames.eventColumn.pages_to_other_workspaces_toggled",defaultMessage:"moving or duplicating pages to other workspaces"},export_toggled:{id:"auditlog.actionNames.eventColumn.export_toggled",defaultMessage:"export"},idp_metadata_xml_updated:{id:"auditlog.actionNames.eventColumn.idp_metadata_xml_updated",defaultMessage:"Updated IDP metadata XML"},idp_metadata_xml_removed:{id:"auditlog.actionNames.eventColumn.idp_metadata_xml_removed",defaultMessage:"Removed IDP metadata XML"},saml_enabled:{id:"auditlog.actionNames.saml_enabled",defaultMessage:"Enabled SAML"},saml_disabled:{id:"auditlog.actionNames.saml_disabled",defaultMessage:"Disabled SAML"},saml_enforced:{id:"auditlog.actionNames.saml_enforced",defaultMessage:"Enabled enforcing SAML"},saml_unenforced:{id:"auditlog.actionNames.saml_unenforced",defaultMessage:"Disabled enforcing SAML"},automatic_account_creation_enabled:{id:"auditlog.actionNames.automatic_account_creation_enabled",defaultMessage:"Enabled automatically creating accounts on sign-in"},automatic_account_creation_disabled:{id:"auditlog.actionNames.automatic_account_creation_disabled",defaultMessage:"Disabled automatically creating accounts on sign-in"},workspace_analytics_enabled:{id:"auditlog.actionNames.workspace_analytics_enabled",defaultMessage:"Enabled page view tracking for workspace analytics"},workspace_analytics_disabled:{id:"auditlog.actionNames.workspace_analytics_disabled",defaultMessage:"Disabled page view tracking for workspace analytics"},enabled:{defaultMessage:"Enabled",id:"auditlog.actionNames.eventColumnPrefix.enabled"},disabled:{defaultMessage:"Disabled",id:"auditlog.actionNames.eventColumn.guest_membership_requests_toggled.disabled"},a_private_page:{defaultMessage:"a private page",id:"auditlog.actionNames.eventColumn.private_page"},an_untitled_page:{defaultMessage:"an untitled page",id:"auditlog.actionNames.eventColumn.untitled_page"},thisWorkspace:{defaultMessage:"this workspace",id:"auditlog.actionNames.eventColumn.thisWorkspace"},otherWorkspace:{defaultMessage:"another workspace",id:"auditlog.actionNames.eventColumn.otherWorkspace"},workspaceLevel:{defaultMessage:"the workspace level",id:"auditlog.actionNames.eventColumn.workspaceLevel"},private:{defaultMessage:"private",id:"auditlog.actionNames.eventColumn.private"},a_file:{defaultMessage:"a file",id:"auditlog.actionNames.eventColumn.a_file"},a_file_with_extension:{defaultMessage:"a {extension} file",id:"auditlog.actionNames.eventColumn.a_file_with_extension"},team:{defaultMessage:"teamspace",id:"auditlog.actionNames.eventColumn.team"},for_a_private_team:{defaultMessage:"for a private teamspace",id:"auditlog.actionNames.eventColumn.for_private_team"},a_private_team:{defaultMessage:"a private teamspace",id:"auditlog.actionNames.eventColumn.private_team"},a_team_and_page:{defaultMessage:"a teamspace and page",id:"auditlog.actionNames.eventColumn.team_and_page"},team_member:{defaultMessage:"teamspace member",id:"auditlog.actionNames.eventColumn.team_member"},team_owner:{defaultMessage:"teamspace owner",id:"auditlog.actionNames.eventColumn.team_owner"},team_level_guest:{defaultMessage:"teamspace guest",id:"auditlog.actionNames.eventColumn.team_level_guest"},group:{defaultMessage:"group",id:"auditlog.actionNames.eventColumn.group"},user:{defaultMessage:"user",id:"auditLogEntry.user.noName"},bot:{defaultMessage:"integration",id:"auditLogEntry.bot.noName"},externalIntegration:{defaultMessage:"connection",id:"auditLogEntry.externalIntegration.noName"},guestIntegration:{defaultMessage:"integration",id:"auditLogEntry.guestIntegration.noName"},adminContentSearchQuery:{defaultMessage:"query=“{query}“",id:"auditLogEntry.adminContentSearch.query"},adminContentSearchAudience:{defaultMessage:"audience=“{audience}“",id:"auditLogEntry.adminContentSearch.audience"},adminContentSearchCreatedBy:{defaultMessage:"created by=“{createdBy}“",id:"auditLogEntry.adminContentSearch.createdBy"},adminContentSearchSharedWith:{defaultMessage:"shared with=“{sharedWith}“",id:"auditLogEntry.adminContentSearch.sharedWith"},adminContentSearchTeamspaces:{defaultMessage:"{teamspaceCount, plural, one {teamspace=“{teamspaces}“} other {teamspaces=“{teamspaces}“}}",id:"auditLogEntry.adminContentSearch.teamspace"},adminContentSearchCreatedTime:{defaultMessage:"created time=“{createdTime}“",id:"auditLogEntry.adminContentSearch.createdTime"},adminContentSearchLastEditedTime:{defaultMessage:"last edited time=“{lastEditedTime}“",id:"auditLogEntry.adminContentSearch.lastEditedTime"},adminContentSearchPredicateSplit:{defaultMessage:", ",id:"auditLogEntry.adminContentSearch.predicateSplit"},from:{defaultMessage:"from",id:"auditLogEntry.spaceContentDuplication.from"},into:{defaultMessage:"into",id:"auditLogEntry.spaceContentDuplication.into"}});function b(e,t){if(t.target)return"user"in t.target&&t.target.user?M(e,t.target.user):"bot"in t.target&&t.target.bot?_(e,t.target.bot):"group"in t.target&&t.target.group?t.target.group.name?`“${t.target.group.name}“`:"group":void 0}function M(e,t){return t?t.name&&t.email?`“${t.name}“ (${t.email})`:t.name?`“${t.name}“`:t.email?`“${t.email}“`:e.formatMessage(y.user):e.formatMessage(y.user)}function _(e,t){return t.name?`“${t.name}“`:e.formatMessage(y.bot)}const w=(0,n.defineMessages)({started:{id:"space.spaceContentDuplicationStatus.started",defaultMessage:"Started"},completed:{id:"space.spaceContentDuplicationStatus.completed",defaultMessage:"Completed"},failed:{id:"space.spaceContentDuplicationStatus.failed",defaultMessage:"Failed"}}),C=(0,n.defineMessages)({equallyRestrictive:{defaultMessage:". This is the same as the current workspace setting",id:"auditlog.actionNames.eventColumn.team_guests_toggled.team_space_equal"},moreRestrictive:{defaultMessage:". This is more restrictive than the current workspace setting",id:"auditlog.actionNames.eventColumn.team_guests_toggled.team_space_more_restrictive"},lessRestrictive:{defaultMessage:". This is less restrictive than the current workspace setting",id:"auditlog.actionNames.eventColumn.team_guests_toggled.team_space_less_restrictive"}});function j(e,t){if(void 0!==e&&void 0!==t)return e===t?(0,v.jsx)(n.FormattedMessage,{...C.equallyRestrictive}):!e&&t?(0,v.jsx)(n.FormattedMessage,{...C.moreRestrictive}):e&&!t?(0,v.jsx)(n.FormattedMessage,{...C.lessRestrictive}):void 0}function S(e){return e.name?`“${e.name}“ group`:(0,v.jsx)(n.FormattedMessage,{...y.group})}function T(e){return e.changes.name.oldValue&&e.changes.name.newValue?(0,v.jsx)(n.FormattedMessage,{defaultMessage:"from “{oldTeamName}“ to “{newTeamName}“",id:"auditlog.actionNames.eventColumn.from_old_team_name_to_new_team_name",values:{oldTeamName:e.changes.name.oldValue,newTeamName:e.changes.name.newValue}}):!e.changes.name.oldValue&&e.changes.name.newValue?(0,v.jsx)(n.FormattedMessage,{defaultMessage:"from some teamspace name to “{newTeamName}“",id:"auditlog.actionNames.eventColumn.from_unknown_team_name_to_new_team_name",values:{newTeamName:e.changes.name.newValue}}):(0,v.jsx)(n.FormattedMessage,{defaultMessage:"for {teamName}",id:"auditlog.actionNames.eventColumn.for_team_name",values:{teamName:k(e)}})}function k(e){return"team"in e.target?F(e.target.team):(0,v.jsx)(n.FormattedMessage,{...y.team})}function F(e){return e.name?`“${e.name}“ teamspace`:(0,v.jsx)(n.FormattedMessage,{...y.team})}function N(e){if(e)switch(e){case"owner":return(0,v.jsx)(n.FormattedMessage,{...y.team_owner});case"member":return(0,v.jsx)(n.FormattedMessage,{...y.team_member});case"team_level_guest":return(0,v.jsx)(n.FormattedMessage,{...y.team_level_guest})}return(0,v.jsx)(n.FormattedMessage,{...y.team_member})}function A(e){return(0,v.jsx)(n.FormattedMessage,{...I(e)})}function I(e){if(!e)return d.mq.noAccessLabel;switch(e){case"editor":return d.mq.fullAccessLabel;case"membership_admin":case"read_and_write":return d.mq.canEditLabel;case"content_only_editor":return d.mq.canEditContentLabel;case"reader":return d.mq.canReadLabel;case"comment_only":return d.mq.canCommentLabel;case"none":return d.mq.noAccessLabel;default:(0,o.t1)(e)}}function P(e){var t,a;return{oldRole:(0,v.jsx)(n.FormattedMessage,{...D(null===(t=e.changes)||void 0===t||null===(t=t.permission)||void 0===t?void 0:t.oldValue)}),newRole:(0,v.jsx)(n.FormattedMessage,{...D(null===(a=e.changes)||void 0===a||null===(a=a.permission)||void 0===a?void 0:a.newValue)})}}function D(e){if(!e)return d.mq.noAccessLabel;switch(e){case"editor":return d.mq.workspaceOwnerLabel;case"membership_admin":return d.mq.membershipAdminLabel;case"read_and_write":return d.mq.memberLabel;default:return d.mq.noAccessLabel}}function E(e){return R(e.target.page)}function R(e){return e.title?`“${e.title}“`:(0,v.jsx)(n.FormattedMessage,{...y.an_untitled_page})}function Z(e){var t,a;return null!==(t=e.target)&&void 0!==t&&null!==(t=t.page)&&void 0!==t&&null!==(t=t.meta)&&void 0!==t&&t.parent&&"title"in(null===(a=e.target)||void 0===a||null===(a=a.page)||void 0===a||null===(a=a.meta)||void 0===a?void 0:a.parent)?`“${e.target.page.meta.parent.title}“`:(0,v.jsx)(n.FormattedMessage,{...y.an_untitled_page})}function V(e){var t;return null!==(t=e.actor.meta)&&void 0!==t&&t.platform?(0,v.jsx)(n.FormattedMessage,{defaultMessage:"on {platform}",id:"auditlog.actionNames.eventColumn.logged_in_platform",values:{platform:e.actor.meta.platform}}):""}function L(e){switch(e){case"google":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Google",id:"auditlog.actionNames.eventColumn.logged_in_auth_type.google"});case"email":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"temporary passcode",id:"auditlog.actionNames.eventColumn.logged_in_auth_type.email"});case"admin":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"admin mode",id:"auditlog.actionNames.eventColumn.logged_in_auth_type.admin"});case"saml":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"SAML SSO",id:"auditlog.actionNames.eventColumn.logged_in_auth_type.saml"});case"apple":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Apple ID",id:"auditlog.actionNames.eventColumn.logged_in_auth_type.apple"});case"password":case"password-no-mfa":case"password-sms":case"password-totp":case"password-backup-code":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"password",id:"auditlog.actionNames.eventColumn.logged_in_auth_type.password"});default:(0,o.t1)(e)}}function B(e){return e.changes.name.oldValue?(0,v.jsx)(n.FormattedMessage,{defaultMessage:"from “{oldDomain}“",id:"auditlog.actionNames.eventColumn.old_domain",values:{oldDomain:e.changes.name.oldValue}}):""}function U(e,t){return"block"===e.table?(0,v.jsx)(n.FormattedMessage,{defaultMessage:"{teamName} page {parentPage}",id:"auditlog.actionNames.eventColumn.team_parent_page",values:{teamName:F(t),parentPage:W(e)}}):"team"===e.table?F(t):void 0}function W(e){return"title"in e?`“${e.title}“`:(0,v.jsx)(n.FormattedMessage,{...y.an_untitled_page})}function z(e,t){if(!t)return(0,v.jsx)(n.FormattedMessage,{...y.an_untitled_page});const a=t.table;return"space"===a?t.id!==e?(0,v.jsx)(n.FormattedMessage,{...y.otherWorkspace}):x(t.permissionLevel)?(0,v.jsx)(n.FormattedMessage,{...y.private}):(0,v.jsx)(n.FormattedMessage,{...y.thisWorkspace}):"team"===a?F(t):"block"===a?t.title?`“${t.title}“`:(0,v.jsx)(n.FormattedMessage,{...y.an_untitled_page}):void 0}const O=(0,n.defineMessages)({open:{defaultMessage:"Open",id:"auditlog.actionNames.eventColumn.team_privacy_types.open"},closed:{defaultMessage:"Closed",id:"auditlog.actionNames.eventColumn.team_privacy_types.closed"},private:{defaultMessage:"Private",id:"auditlog.actionNames.eventColumn.team_privacy_types.private"},default:{defaultMessage:"Default",id:"auditlog.actionNames.eventColumn.team_privacy_types.default"},unknown:{defaultMessage:"an unknown privacy state",id:"auditlog.actionNames.eventColumn.team_privacy_types.unknown"}});function q(e){return e?(0,v.jsx)(n.FormattedMessage,{...O[e]}):(0,v.jsx)(n.FormattedMessage,{...O.unknown})}function K(e){return e.changes.enabled.newValue?(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Disabled",id:"auditlog.actionNames.eventColumn.membership_requests_toggled.disabled"}):(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Enabled",id:"auditlog.actionNames.eventColumn.membership_requests_toggled.enabled"})}function H(e){return e.changes.enabled.newValue?(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Disabled",id:"auditlog.actionNames.eventColumn.external_membership_requests_toggled.disabled"}):(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Enabled",id:"auditlog.actionNames.eventColumn.external_membership_requests_toggled.enabled"})}function G(e){return"approved"===e.changes.requestStatus.newValue?(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Approved",id:"auditlog.actionNames.eventColumn.membership_request_resolved.approved"}):(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Declined",id:"auditlog.actionNames.eventColumn.membership_request_resolved.declined"})}function $(e){return e.changes.enabled.newValue?(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Disabled",id:"auditlog.actionNames.eventColumn.guest_membership_requests_toggled.disabled"}):(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Enabled",id:"auditlog.actionNames.eventColumn.guest_membership_requests_toggled.enabled"})}function Y(e){return e.changes.enabled.newValue?(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Enabled",id:"auditlog.actionNames.eventColumn.ai_admin_legal_acceptance_toggled.disabled"}):(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Disabled",id:"auditlog.actionNames.eventColumn.ai_admin_legal_acceptance_toggled.enabled"})}function Q(e,t){return t?e.formatMessage(y.enabled):e.formatMessage(y.disabled)}const J=(0,n.defineMessages)({team_members:{defaultMessage:"any teamspace member",id:"auditlog.actionNames.eventColumn.team_access_level_types.team_members"},team_owners:{defaultMessage:"only teamspace owners",id:"auditlog.actionNames.eventColumn.team_access_level_types.team_owners"},unknown:{defaultMessage:"unknown",id:"auditlog.actionNames.eventColumn.team_access_level_types.unknown"}});function X(e){return"recurrence"===e?(0,v.jsx)(n.FormattedMessage,{id:"auditlog.actionNames.eventColumn.automation_type.recurrence",defaultMessage:"a repeating automation"}):(0,v.jsx)(n.FormattedMessage,{id:"auditlog.actionNames.eventColumn.automation_type.automation",defaultMessage:"an automation"})}function ee(e){return!!e.meta&&("inSudoMode"in e.meta&&e.meta.inSudoMode)}function te(e,t,a){var s,d,C,I,D,W,O,te,se,ne,ie,oe,re,le,de,ce,ue,ge,me,pe,fe,he,ve,xe,ye,be;switch(e.actionName){case"page.properties_edited":{const $e=e.meta.propertiesUpdated,Ye=e.meta.propertiesUpdated.map((e=>`“${e.propertyName}“`)).join(", ");return 1===$e.length?(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Edited property {properties} on {pageName}",id:"auditlog.actionNames.eventColumn.page_properties_edited.single_property",values:{properties:Ye,pageName:E(e)}}):(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Edited properties {properties} on {pageName}",id:"auditlog.actionNames.eventColumn.page_properties_edited.multiple_properties",values:{properties:Ye,pageName:E(e)}})}case"page.discussion.comment.created":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Commented on {pageName}",id:"auditlog.actionNames.eventColumn.page.discussion.comment.created",values:{pageName:E(e)}});case"page.discussion.comment.deleted":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Deleted comment on {pageName}",id:"auditlog.actionNames.eventColumn.page.discussion.comment.deleted",values:{pageName:E(e)}});case"page.discussion.comment.updated":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Edited comment on {pageName}",id:"auditlog.actionNames.eventColumn.page.discussion.comment.updated",values:{pageName:E(e)}});case"page_edited":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Edited {pageName}",id:"auditlog.actionNames.eventColumn.page_edited",values:{pageName:E(e)}});case"page_viewed":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Viewed {pageName}",id:"auditlog.actionNames.eventColumn.page_viewed_under",values:{pageName:E(e)}});case"page_deleted":return e.target.page.meta.permanentDeletion?(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Permanently deleted {pageName}",id:"auditlog.actionNames.eventColumn.page_permanently_deleted",values:{pageName:E(e)}}):(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Deleted {pageName}",id:"auditlog.actionNames.eventColumn.page_deleted",values:{pageName:E(e)}});case"page.permanently_deleted":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Permanently deleted {pageName}",id:"auditlog.actionNames.eventColumn.page.permanently_deleted",values:{pageName:E(e)}});case"page_restored":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Restored {pageName}",id:"auditlog.actionNames.eventColumn.page_restored",values:{pageName:E(e)}});case"page_exported":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Exported {pageName}",id:"auditlog.actionNames.eventColumn.page_exported",values:{pageName:E(e)}});case"page_moved":{var Me,_e,we;const Qe=null===(Me=e.changes)||void 0===Me?void 0:Me.team,Je=e.changes.parent.oldValue,Xe=e.changes.parent.newValue;let et=z(e.spaceId,e.changes.parent.oldValue),tt=z(e.spaceId,e.changes.parent.newValue);null!=Qe&&Qe.oldValue&&null!=Qe&&Qe.newValue&&Je&&Xe&&("block"===Je.table||"block"===Xe.table)?(et=U(Je,null==Qe?void 0:Qe.oldValue),tt=U(Xe,null==Qe?void 0:Qe.newValue)):"space"===(null===(_e=e.changes.parent.oldValue)||void 0===_e?void 0:_e.table)&&"space"===(null===(we=e.changes.parent.newValue)||void 0===we?void 0:we.table)&&e.changes.parent.oldValue.id===e.changes.parent.newValue.id&&(x(e.changes.parent.oldValue.permissionLevel)||x(e.changes.parent.newValue.permissionLevel))&&(et=x(e.changes.parent.oldValue.permissionLevel)?(0,v.jsx)(n.FormattedMessage,{...y.private}):(0,v.jsx)(n.FormattedMessage,{...y.workspaceLevel}),tt=x(e.changes.parent.newValue.permissionLevel)?(0,v.jsx)(n.FormattedMessage,{...y.private}):(0,v.jsx)(n.FormattedMessage,{...y.workspaceLevel}));const at=et?a.formatMessage({id:"auditLogEntry.changes.page_moved.old_parent",defaultMessage:" from {oldParentName}"},{oldParentName:et}):"",st=tt?a.formatMessage({id:"auditLogEntry.changes.page_moved.new_parent",defaultMessage:" to {newParentName}"},{newParentName:tt}):"";return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Moved {pageName}{oldParentMessage}{newParentMessage}{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_moved",values:{pageName:E(e),oldParentMessage:at,newParentMessage:st,inSudoMode:ee(e)}})}case"page_permission_updated":return function(e,t){var a,s,i;const o="bot"in t.target,r="space"in t.target,l="team"in t.target,d="group"in t.target,c="user"in t.target&&"guest"===(null===(a=t.target.user.meta)||void 0===a?void 0:a.spaceRole);var u,g;if(o)return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Updated permissions of {pageName} for bot {botName} from {oldRole} to {newRole}{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_permissions_updated_workspace_bot",values:{botName:b(e,t),oldRole:A(null===(u=t.changes)||void 0===u||null===(u=u.permission)||void 0===u?void 0:u.oldValue),newRole:A(null===(g=t.changes)||void 0===g||null===(g=g.permission)||void 0===g?void 0:g.newValue),pageName:E(t),inSudoMode:ee(t)}});var m,p,f,h,x,y;if(r)return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Updated permissions of {pageName} for everyone in the workspace from {oldRole} to {newRole}{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_permissions_updated_workspace_space",values:{oldRole:A(null===(m=t.changes)||void 0===m||null===(m=m.permission)||void 0===m?void 0:m.oldValue),newRole:A(null===(p=t.changes)||void 0===p||null===(p=p.permission)||void 0===p?void 0:p.newValue),pageName:E(t),inSudoMode:ee(t)}});if(l)return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Updated permissions of {pageName} for {teamName} from {oldRole} to {newRole}{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_permissions_updated_team",values:{oldRole:A(null===(f=t.changes)||void 0===f||null===(f=f.permission)||void 0===f?void 0:f.oldValue),newRole:A(null===(h=t.changes)||void 0===h||null===(h=h.permission)||void 0===h?void 0:h.newValue),pageName:E(t),teamName:k(t),inSudoMode:ee(t)}});if(c)return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Updated permissions of {pageName} for guest {guestNameAndEmail} from {oldRole} to {newRole}{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_permissions_updated_workspace_guest",values:{guestNameAndEmail:b(e,t),oldRole:A(null===(x=t.changes)||void 0===x||null===(x=x.permission)||void 0===x?void 0:x.oldValue),newRole:A(null===(y=t.changes)||void 0===y||null===(y=y.permission)||void 0===y?void 0:y.newValue),pageName:E(t),inSudoMode:ee(t)}});if(d){var M,_;return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Updated permissions of {pageName} for group {groupName} from {oldRole} to {newRole}{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_permissions_updated_workspace_group",values:{groupName:b(e,t),oldRole:A(null===(M=t.changes)||void 0===M||null===(M=M.permission)||void 0===M?void 0:M.oldValue),newRole:A(null===(_=t.changes)||void 0===_||null===(_=_.permission)||void 0===_?void 0:_.newValue),pageName:E(t),inSudoMode:ee(t)}})}return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Updated permissions of {pageName} for {memberNameAndEmail} from {oldRole} to {newRole}{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_permissions_updated_workspace_default",values:{memberNameAndEmail:b(e,t),oldRole:A(null===(s=t.changes)||void 0===s||null===(s=s.permission)||void 0===s?void 0:s.oldValue),newRole:A(null===(i=t.changes)||void 0===i||null===(i=i.permission)||void 0===i?void 0:i.newValue),pageName:E(t),inSudoMode:ee(t)}})}(a,e);case"page_created":const ke=(0,c.zV)(e);if(null!=ke&&null!==(s=ke.meta)&&void 0!==s&&s.parent){var Ce,je,Se,Te;if(ke.meta.parent.table===m.bx)return"private"===(null===(Se=ke.meta)||void 0===Se?void 0:Se.permissionLevel)||"private"===(null===(Te=ke.meta)||void 0===Te?void 0:Te.pageAudience)?(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Created a private page",id:"auditlog.actionNames.eventColumn.page_created_private"}):(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Created a page in the workspace",id:"auditlog.actionNames.eventColumn.page_created_workspace"});if((null===(Ce=ke.meta)||void 0===Ce?void 0:Ce.parent.table)===p.e0)return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Created a page under {teamName}",id:"auditlog.actionNames.eventColumn.page_created_team",values:{teamName:F(ke.meta.parent)}});if((null===(je=ke.meta)||void 0===je?void 0:je.parent.table)===u.iU)return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Created a page under {parentPageName}",id:"auditlog.actionNames.eventColumn.page_created_under",values:{parentPageName:Z(e)}})}return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Created a page",id:"auditlog.actionNames.eventColumn.page_created_general"});case"page_shared_to_web":return function(e){var t;if(void 0===e.changes.permission.newValue||"none"===e.changes.permission.newValue)return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Disabled sharing {pageName} to web{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_shared_to_web.disabled",values:{pageName:E(e),inSudoMode:ee(e)}});return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Enabled sharing {pageName} to web{inSudoMode, select, true { using administrator privileges} other {}} with permissions {newRole}",id:"auditlog.actionNames.eventColumn.page_shared_to_web.enabled",values:{pageName:E(e),inSudoMode:ee(e),newRole:A(null===(t=e.changes)||void 0===t||null===(t=t.permission)||void 0===t?void 0:t.newValue)}})}(e);case"login":return function(e,t){var a,s,i;const o=null===(a=e.meta)||void 0===a?void 0:a.authType;return null!==(s=e.actor.meta)&&void 0!==s&&s.countryCode&&o?(0,v.jsx)(n.FormattedMessage,{id:"auditLog.actionNames.eventColumn.loginWithCityStateAndCountry.withAuthType",defaultMessage:"Logged in {platform} via {loginMethod} in {geolocation}",values:{platform:V(e),geolocation:(0,h.xk)(e,t),loginMethod:L(o)}}):null!==(i=e.actor.meta)&&void 0!==i&&i.countryCode&&!o?(0,v.jsx)(n.FormattedMessage,{id:"auditLog.actionNames.eventColumn.loginWithCityStateAndCountry",defaultMessage:"Logged in {platform} in {geolocation}",values:{platform:V(e),geolocation:(0,h.xk)(e,t)}}):o?(0,v.jsx)(n.FormattedMessage,{id:"auditLog.actionNames.eventColumn.loginWithPlatform.withAuthType",defaultMessage:"Logged in {platform} via {loginMethod}",values:{platform:V(e),loginMethod:L(o)}}):(0,v.jsx)(n.FormattedMessage,{id:"auditLog.actionNames.eventColumn.loginWithPlatform",defaultMessage:"Logged in {platform}",values:{platform:V(e)}})}(e,a);case"allowed_support_access":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Granted support access for {name} until {date}",id:"auditlog.actionNames.allowed_support_access",values:{date:a.formatDate(e.changes.expiresAt),name:e.target.user.name}});case"revoked_support_access":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Revoked support access for {name}",id:"auditlog.actionNames.revoked_support_access",values:{name:e.target.user.name}});case"preferred_name_changed":return function(e,t){var a;const s=!!e.target&&e.actor.actorId!==(null===(a=e.target)||void 0===a?void 0:a.user.id),i=e.changes.name.oldValue,o=e.changes.name.newValue;if(s){if(i&&o)return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Changed {memberNameAndEmail} name from “{oldValue}“ to “{newValue}“",id:"auditlog.actionNames.eventColumn.external_preferred_name_changed",values:{memberNameAndEmail:b(t,e),oldValue:i,newValue:o}});if(!i&&o)return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Set {memberNameAndEmail} name to “{newValue}“",id:"auditlog.actionNames.eventColumn.external_preferred_name_changed_to_value",values:{memberNameAndEmail:b(t,e),newValue:o}});if(i&&!o)return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Removed {memberNameAndEmail} name “{oldValue}“",id:"auditlog.actionNames.eventColumn.external_preferred_name_changed_from_value",values:{memberNameAndEmail:b(t,e),oldValue:i}})}if(i&&o)return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Changed name from “{oldValue}“ to “{newValue}“",id:"auditlog.actionNames.eventColumn.preferred_name_changed",values:{oldValue:i,newValue:o}});if(!i&&o)return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Set name to “{newValue}“",id:"auditlog.actionNames.eventColumn.preferred_name_changed_to_value",values:{newValue:o}});if(i&&!o)return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Removed name “{oldValue}“",id:"auditlog.actionNames.eventColumn.preferred_name_changed_from_value",values:{oldValue:i}});return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Name was changed",id:"auditlog.actionNames.eventColumn.preferred_name_changed_generic"})}(e,a);case"email_changed":return function(e,t){var a;const s=!!e.target&&e.actor.actorId!==(null===(a=e.target)||void 0===a?void 0:a.user.id);return s?(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Changed {memberNameAndEmail} email from {oldEmail} to {newEmail}",id:"auditlog.actionNames.eventColumn.external_email_changed",values:{memberNameAndEmail:b(t,e),oldEmail:e.changes.email.oldValue,newEmail:e.changes.email.newValue}}):(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Changed email from {oldEmail} to {newEmail}",id:"auditlog.actionNames.eventColumn.email_changed",values:{oldEmail:e.changes.email.oldValue,newEmail:e.changes.email.newValue}})}(e,a);case"picture_changed":return function(e,t){var a;const s=!!e.target&&e.actor.actorId!==(null===(a=e.target)||void 0===a?void 0:a.user.id);return s?(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Changed {memberNameAndEmail} profile picture",id:"auditlog.actionNames.eventColumn.external_picture_changed",values:{memberNameAndEmail:b(t,e)}}):(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Changed profile picture",id:"auditlog.actionNames.eventColumn.picture_changed"})}(e,a);case"member_invited":{const nt=P(e);return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Invited {memberNameAndEmail} to the workspace as {newRole}",id:"auditlog.actionNames.eventColumn.member_invited",values:{memberNameAndEmail:b(a,e),newRole:nt.newRole}})}case"member_role_updated":{const it=P(e);return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Updated {memberNameAndEmail} from {oldRole} to {newRole}",id:"auditlog.actionNames.eventColumn.member_role_updated",values:{memberNameAndEmail:b(a,e),oldRole:it.oldRole,newRole:it.newRole}})}case"member_removed":return e.actor.actorId===e.target.user.id?(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Left the workspace",id:"auditlog.actionNames.eventColumn.member_left"}):(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Removed {memberNameAndEmail} from the workspace",id:"auditlog.actionNames.eventColumn.member_removed",values:{memberNameAndEmail:b(a,e)}});case"guest_removed":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Removed guest {guestNameAndEmail} from the workspace",id:"auditlog.actionNames.eventColumn.guest_removed",values:{guestNameAndEmail:b(a,e)}});case"file_uploaded":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Uploaded a file to {pageName}",id:"auditlog.actionNames.eventColumn.file_uploaded_public",values:{pageName:E(e)}});case"file_downloaded":return function(e){return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Downloaded {fileName} from {pageName}",id:"auditlog.actionNames.eventColumn.file_downloaded",values:{fileName:ae(e),pageName:E(e)}})}(e);case"invite_link_toggled":return e.changes.enabled.newValue?(0,v.jsx)(n.FormattedMessage,{id:"auditlog.actionNames.eventColumn.inviteLink.enabled",defaultMessage:"Enabled invite link"}):(0,v.jsx)(n.FormattedMessage,{id:"auditlog.actionNames.eventColumn.inviteLink.disabled",defaultMessage:"Disabled invite link"});case"public_page_sharing_toggled":case"workspace_sidebar_editing_toggled":case"disable_team_guests_toggled":case"disable_guests_toggled":case"pages_to_other_workspaces_toggled":case"export_toggled":case"page_access_requests_toggled":return e.changes.enabled.newValue?(0,v.jsx)(n.FormattedMessage,{id:"auditlog.actionNames.eventColumn.toggleEvent.disabled",defaultMessage:"Disabled {workspaceSetting}",values:{workspaceSetting:a.formatMessage(y[e.actionName])}}):(0,v.jsx)(n.FormattedMessage,{id:"auditlog.actionNames.eventColumn.toggleEvent.enabled",defaultMessage:"Enabled {workspaceSetting}",values:{workspaceSetting:a.formatMessage(y[e.actionName])}});case"workspace_name_changed":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Changed workspace name from “{oldValue}“ to “{newValue}“",id:"auditlog.actionNames.eventColumn.workspace_name_changed",values:{oldValue:e.changes.name.oldValue,newValue:e.changes.name.newValue}});case"workspace_domain_changed":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Changed workspace domain {oldValue} to “{newValue}“",id:"auditlog.actionNames.eventColumn.workspace_domain_changed",values:{oldValue:B(e),newValue:e.changes.name.newValue}});case"workspace_integration_restriction_changed":return function(e){const t=void 0,{oldValue:a,newValue:s}=e.changes.integration_restrictions;if(s===t)return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Enabled members installing integrations",id:"auditlog.actionNames.eventColumn.workspace_integration_restriction_changed.no_restrictions"});if(a===t&&"approved_only"===s)return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Disabled members installing integrations",id:"auditlog.actionNames.eventColumn.workspace_integration_restriction_changed.approved_only"});if("approved_or_built_by_notion"===a&&"approved_only"===s)return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Disabled auto approval for built-by-Notion integrations",id:"auditlog.actionNames.eventColumn.workspace_integration_restriction_changed.disabled_built_by_notion.from_approved_or_built_by_notion"});if("approved_only"===a&&"approved_or_built_by_notion"===s)return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Enabled auto approval for built-by-Notion integrations",id:"auditlog.actionNames.eventColumn.workspace_integration_restriction_changed.enabled_built_by_notion"});return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Changed workspace integration restriction",id:"auditlog.actionNames.eventColumn.workspace_integration_restriction_changed.fallback_message"})}(e);case"allowed_email_domain_added":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Added “{addedValue}“ into allowable email domains",id:"auditlog.actionNames.eventColumn.allowed_email_domain_added",values:{addedValue:e.changes.domain}});case"allowed_email_domain_removed":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Removed “{removedValue}“ from allowable email domains",id:"auditlog.actionNames.eventColumn.allowed_email_domain_removed",values:{removedValue:e.changes.domain}});case"public_page_set":return e.changes.name.oldValue?(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Changed public home page from “{oldPage}“ to “{newPage}“",id:"auditlog.actionNames.eventColumn.public_page_changed",values:{oldPage:e.changes.name.oldValue,newPage:e.changes.name.newValue}}):(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Set “{newPage}“ as public home page",id:"auditlog.actionNames.eventColumn.public_page_set",values:{newPage:e.changes.name.newValue}});case"idp_metadata_url_updated":return e.changes.url.oldValue?(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Changed IDP metadata URL from “{oldValue}“ to “{newValue}“",id:"auditlog.actionNames.eventColumn.idp_metadata_url_updated",values:{oldValue:e.changes.url.oldValue,newValue:e.changes.url.newValue}}):(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Set IDP metadata URL to “{newValue}“",id:"auditlog.actionNames.eventColumn.idp_metadata_url_set",values:{newValue:e.changes.url.newValue}});case"saml_toggled":return e.changes.enabled.newValue?(0,v.jsx)(n.FormattedMessage,{...y.saml_enabled}):(0,v.jsx)(n.FormattedMessage,{...y.saml_disabled});case"saml_enforce_toggled":return e.changes.enabled.newValue?(0,v.jsx)(n.FormattedMessage,{...y.saml_enforced}):(0,v.jsx)(n.FormattedMessage,{...y.saml_unenforced});case"automatic_account_creation_toggled":return e.changes.enabled.newValue?(0,v.jsx)(n.FormattedMessage,{...y.automatic_account_creation_enabled}):(0,v.jsx)(n.FormattedMessage,{...y.automatic_account_creation_disabled});case"workspace_analytics_toggled":return e.changes.enabled.newValue?(0,v.jsx)(n.FormattedMessage,{...y.workspace_analytics_enabled}):(0,v.jsx)(n.FormattedMessage,{...y.workspace_analytics_disabled});case"workspace_creation_set_for_email_domain":return function(e,t){const{oldValue:a,newValue:s}=e.changes.workspace_creation;if(!a&&!s)return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Changed workspace creation setting",id:"auditlog.actionNames.eventColumn.workspace_creation_set_for_email_domain.fallback_message"});const i=e.changes.workspace_creation.oldValue?t.formatMessage({id:"auditLogEntry.changes.workspaceCreation.beforeSetting",defaultMessage:" from {prevWorkspaceCreationSetting}"},{prevWorkspaceCreationSetting:(0,g.nJ)(e.changes.workspace_creation.oldValue,t)}):"",o=e.changes.workspace_creation.newValue?t.formatMessage({id:"auditLogEntry.changes.workspaceCreation.afterSetting",defaultMessage:" to {afterWorkspaceCreationSetting}"},{afterWorkspaceCreationSetting:(0,g.nJ)(e.changes.workspace_creation.newValue,t)}):"";return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Changed workspace creation setting{before}{after}.",id:"auditlog.actionNames.eventColumn.workspace_creation_set_for_email_domain",values:{before:i,after:o}})}(e,a);case"member_added_to_group":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Added {memberNameAndEmail} to {groupName}",id:"auditlog.actionNames.eventColumn.member_added_to_group",values:{memberNameAndEmail:b(a,e),groupName:S(e.target.group)}});case"member_removed_from_group":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Removed {memberNameAndEmail} from {groupName}",id:"auditlog.actionNames.eventColumn.member_removed_from_group",values:{memberNameAndEmail:b(a,e),groupName:S(e.target.group)}});case"space_transfer_status_changed":return function(e,t){const{oldValue:a,newValue:s}=e.changes.spaceTransferStatus,i=e.target.space.name?t.formatMessage({id:"auditLogEntry.changes.space_transfer_status_changed.space_name",defaultMessage:" for {spaceName}"},{spaceName:e.target.space.name}):"";if(!a&&!s)return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Workspace transfer status changed{spaceNameMessage}",id:"auditlog.actionNames.eventColumn.space_transfer_status_changed.fallback_message",values:{spaceNameMessage:i}});if(!s)return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Workspace transfer request cleared{spaceNameMessage} from prior status of {oldStatus}",id:"auditlog.actionNames.eventColumn.space_transfer_status_cleared",values:{spaceNameMessage:i,oldStatus:a}});return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"{newStatus, select, requested {Workspace transfer request initiated{spaceNameMessage}.} started {Workspace transfer started{spaceNameMessage}} completed {Workspace transfer completed{spaceNameMessage}} other {Workspace transfer status change to {newStatus}{spaceNameMessage}}}",id:"auditlog.actionNames.eventColumn.space_transfer_status_changed.newStatus",values:{spaceNameMessage:i,newStatus:s}})}(e,a);case"space_claim_and_upgrade_status_changed":return function(e){const{oldValue:t,newValue:a}=e.changes.claimAndUpgradeStatus,s=(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Status changed for workspace claim of {workspaceName}",id:"auditlog.actionNames.eventColumn.space_claim_upgrade_status_changed.fallback_message",values:{workspaceName:e.target.space.name}});if(!t&&!a)return s;if(!a&&"completed"!==t)return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Pending workspace claim for {workspaceName} has been cleared from {oldStatus}",id:"auditlog.actionNames.eventColumn.space_claim_upgrade_status_cleared",values:{workspaceName:e.target.space.name,oldStatus:t}});if("completed"===a)return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"{workspaceName} has been claimed and upgraded to the Enterprise plan",id:"auditlog.actionNames.eventColumn.space_claim_upgrade_status_completed",values:{workspaceName:e.target.space.name}});if("requested"===a)return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Request to claim and upgrade {workspaceName} has been sent.",id:"auditlog.actionNames.eventColumn.space_claim_upgrade_requested",values:{workspaceName:e.target.space.name}});return s}(e);case"space_claim_deletion_status_changed":return function(e){const{oldValue:t,newValue:a}=e.changes.claimDeletionStatus,s=(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Claimable workspace deletion status change for {spaceName}",id:"auditlog.actionNames.eventColumn.space_claim_deletion_status_changed.fallback_message",values:{spaceName:e.target.space.name}});if(!t&&!a)return s;if(!a||"canceled"===a)return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Recovered workspace {spaceName} using Domain Management",id:"auditlog.actionNames.eventColumn.space_claim_deletion.status_cleared",values:{spaceName:e.target.space.name}});return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Deleted workspace {spaceName} using Domain Management",id:"auditlog.actionNames.eventColumn.space_claim_deletion.deleted",values:{spaceName:e.target.space.name}})}(e);case"membership_requests_toggled":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"{enabled} allowing members to request adding new members",id:"auditlog.actionNames.eventColumn.membership_requests_toggled",values:{enabled:K(e)}});case"external_membership_requests_toggled":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"{enabled} allowing external users to request to be added to the workspace as members",id:"auditlog.actionNames.eventColumn.external_membership_requests_toggled",values:{enabled:H(e)}});case"membership_request_resolved":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"{status} request to add {email} to the workspace as a member",id:"auditlog.actionNames.eventColumn.membership_request_resolved",values:{status:G(e),email:b(a,e)}});case"guest_membership_requests_toggled":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"{enabled} allowing page guests to request to be added to the workspace as members",id:"auditlog.actionNames.eventColumn.guest_membership_requests_toggled",values:{enabled:$(e)}});case"team_created":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Created {teamName}",id:"auditlog.actionNames.eventColumn.team_created",values:{teamName:k(e)}});case"team_archived":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Archived {teamName}",id:"auditlog.actionNames.eventColumn.team_archived",values:{teamName:k(e)}});case"team_restored":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Restored {teamName}",id:"auditlog.actionNames.eventColumn.team_restored",values:{teamName:k(e)}});case"team_default_toggled":return e.changes.enabled.newValue?(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Added {teamName} to the default teamspace list. Workspace members will automatically be added to the teamspace",id:"auditlog.actionNames.eventColumn.team_default_enabled",values:{teamName:k(e)}}):(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Removed {teamName} from the default teamspace list. Workspace members will no longer be automatically added to the teamspace",id:"auditlog.actionNames.eventColumn.team_default_disabled",values:{teamName:k(e)}});case"team_public_page_sharing_toggled":return e.changes.enabled.newValue?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Disabled members sharing pages under {teamName} publicly",id:"auditlog.actionNames.eventColumn.team_public_page_sharing_disabled",values:{teamName:k(e)}}),j((null===(d=e.meta)||void 0===d?void 0:d.spacePublicPageSharingDisabled)??(null==e?void 0:e.spacePublicPageSharingDisabled),e.changes.enabled.newValue)]}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Enabled members sharing pages under {teamName} publicly",id:"auditlog.actionNames.eventColumn.team_public_page_sharing_enabled",values:{teamName:k(e)}}),j((null===(C=e.meta)||void 0===C?void 0:C.spacePublicPageSharingDisabled)??(null==e?void 0:e.spacePublicPageSharingDisabled),e.changes.enabled.newValue)]});case"team_export_toggled":return e.changes.enabled.newValue?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Disabled export for {teamName}",id:"auditlog.actionNames.eventColumn.team_export_disabled",values:{teamName:k(e)}}),j((null===(I=e.meta)||void 0===I?void 0:I.spaceExportDisabled)??(null==e?void 0:e.spaceExportDisabled),e.changes.enabled.newValue)]}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Enabled export for {teamName}",id:"auditlog.actionNames.eventColumn.team_export_enabled",values:{teamName:k(e)}}),j((null===(D=e.meta)||void 0===D?void 0:D.spaceExportDisabled)??(null==e?void 0:e.spaceExportDisabled),e.changes.enabled.newValue)]});case"team_sidebar_editing_toggled":return e.changes.enabled.newValue?(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Disabled members changing the sidebar section for {teamName}",id:"auditlog.actionNames.eventColumn.team_sidebar_editing_disabled",values:{teamName:k(e)}}):(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Enabled members changing the sidebar section for {teamName}",id:"auditlog.actionNames.eventColumn.team_sidebar_editing_enabled",values:{teamName:k(e)}});case"team_creation_admins_setting_toggled":return e.changes.enabled.newValue?(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Disabled members creating teamspaces",id:"auditlog.actionNames.eventColumn.team_creation_admins_setting_disabled",values:{teamName:k(e)}}):(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Enabled members creating teamspaces",id:"auditlog.actionNames.eventColumn.team_creation_admins_setting_enabled",values:{teamName:k(e)}});case"team_guests_toggled":return e.changes.enabled.newValue?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Disabled guests for {teamName}",id:"auditlog.actionNames.eventColumn.team_guests_toggled_disabled",values:{teamName:k(e)}}),j((null===(W=e.meta)||void 0===W?void 0:W.spaceDisableGuests)??e.spaceDisableGuests,e.changes.enabled.newValue)]}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Enabled guests for {teamName}",id:"auditlog.actionNames.eventColumn.team_guests_toggled_enabled",values:{teamName:k(e)}}),j((null===(O=e.meta)||void 0===O?void 0:O.spaceDisableGuests)??e.spaceDisableGuests,e.changes.enabled.newValue)]});case"team_name_changed":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Changed teamspace name {oldTeamNameToNewTeamName}",id:"auditlog.actionNames.eventColumn.team_name_changed",values:{oldTeamNameToNewTeamName:T(e)}});case"team_description_changed":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Changed description of {teamName}",id:"auditlog.actionNames.eventColumn.team_description_changed",values:{teamName:k(e)}});case"team_icon_changed":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Changed icon of {teamName}",id:"auditlog.actionNames.eventColumn.team_icon_changed",values:{teamName:k(e)}});case"member_added_to_team":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Invited {memberNameAndEmail} to {teamName} as {teamRole}",id:"auditlog.actionNames.eventColumn.member_added_to_team",values:{memberNameAndEmail:b(a,e),teamName:k(e),teamRole:N(e.changes.teamRole.newValue)}});case"group_added_to_team":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Invited {groupName} to {teamName} as teamspace member",id:"auditlog.actionNames.eventColumn.group_added_to_team",values:{groupName:S(e.target.group),teamName:k(e)}});case"member_removed_from_team":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Removed {memberNameAndEmail} from {teamName}",id:"auditlog.actionNames.eventColumn.member_removed_from_team",values:{memberNameAndEmail:b(a,e),teamName:k(e)}});case"group_removed_from_team":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Removed {groupName} from {teamName}",id:"auditlog.actionNames.eventColumn.group_removed_from_team",values:{groupName:S(e.target.group),teamName:k(e)}});case"member_joined_team":const Fe=k(e),Ne=N(e.changes.teamRole.newValue);return ee(e)?(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Joined {teamName} as {teamRole} using administrator privileges",id:"auditlog.actionNames.eventColumn.member_joined_team_privileged",values:{teamName:Fe,teamRole:Ne}}):(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Joined {teamName} as {teamRole}",id:"auditlog.actionNames.eventColumn.member_joined_team",values:{teamName:Fe,teamRole:Ne}});case"member_left_team":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Left {teamName}",id:"auditlog.actionNames.eventColumn.member_left_team",values:{teamName:k(e)}});case"member_team_role_updated":const Ae=b(a,e),Ie=N(e.changes.teamRole.oldValue),Pe=N(e.changes.teamRole.newValue),De=k(e);return ee(e)?(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Updated {memberNameAndEmail} from {oldTeamRole} to {newTeamRole} in {teamName} using administrator privileges",id:"auditlog.actionNames.eventColumn.member_team_role_updated_privileged",values:{memberNameAndEmail:Ae,oldTeamRole:Ie,newTeamRole:Pe,teamName:De}}):(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Updated {memberNameAndEmail} from {oldTeamRole} to {newTeamRole} in {teamName}",id:"auditlog.actionNames.eventColumn.member_team_role_updated",values:{memberNameAndEmail:Ae,oldTeamRole:Ie,newTeamRole:Pe,teamName:De}});case"team_user_permission_updated":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Updated {userNameOrEmail}’s custom permissions in {teamName} from {oldPermission} to {newPermission}.",id:"auditlog.actionNames.eventColumn.team_user_permission_updated",values:{userNameOrEmail:b(a,e),oldPermission:A(e.changes.permission.oldValue),newPermission:A(e.changes.permission.newValue),teamName:k(e)}});case"team_group_permission_updated":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Updated {groupName}’s custom permissions in {teamName} from {oldPermission} to {newPermission}.",id:"auditlog.actionNames.eventColumn.team_group_permission_updated",values:{groupName:S(e.target.group),oldPermission:A(e.changes.permission.oldValue),newPermission:A(e.changes.permission.newValue),teamName:k(e)}});case"team_member_default_permission_updated":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Updated default page permissions for teamspace members in {teamName} from {oldRole} to {newRole}",id:"auditlog.actionNames.eventColumn.team_member_default_permission_updated",values:{teamName:k(e),oldRole:A(null===(te=e.changes)||void 0===te||null===(te=te.permission)||void 0===te?void 0:te.oldValue),newRole:A(null===(se=e.changes)||void 0===se||null===(se=se.permission)||void 0===se?void 0:se.newValue)}});case"team_guest_default_permission_updated":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Updated default page permissions for teamspace guests in {teamName} from {oldRole} to {newRole}",id:"auditlog.actionNames.eventColumn.team_guest_default_permission_updated",values:{teamName:k(e),oldRole:A(null===(ne=e.changes)||void 0===ne||null===(ne=ne.permission)||void 0===ne?void 0:ne.oldValue),newRole:A(null===(ie=e.changes)||void 0===ie||null===(ie=ie.permission)||void 0===ie?void 0:ie.newValue)}});case"team_workspace_default_permission_updated":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Updated default page permissions for everyone else in the workspace for {teamName} from {oldRole} to {newRole}",id:"auditlog.actionNames.eventColumn.team_workspace_default_permission_updated",values:{teamName:k(e),oldRole:A(null===(oe=e.changes)||void 0===oe||null===(oe=oe.permission)||void 0===oe?void 0:oe.oldValue),newRole:A(null===(re=e.changes)||void 0===re||null===(re=re.permission)||void 0===re?void 0:re.newValue)}});case"team_privacy_type_changed":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Changed the teamspace privacy type for {teamName} from {oldType} to {newType}",id:"auditlog.actionNames.eventColumn.team_privacy_type_changed",values:{teamName:k(e),oldType:q(null===(le=e.changes)||void 0===le?void 0:le.teamAccessLevel.oldValue),newType:q(null===(de=e.changes)||void 0===de?void 0:de.teamAccessLevel.newValue)}});case"team_invite_access_changed":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Changed who can invite teamspace members to {newType} for {teamName}",id:"auditlog.actionNames.eventColumn.team_invite_access_changed",values:{teamName:k(e),newType:(be=null===(ce=e.changes)||void 0===ce||null===(ce=ce.teamInviteAccess)||void 0===ce?void 0:ce.newValue,be?(0,v.jsx)(n.FormattedMessage,{...J[be]}):(0,v.jsx)(n.FormattedMessage,{...J.unknown}))}});case"teams_enabled_for_space":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Enabled teamspaces for {workspaceName}",id:"auditlog.actionNames.eventColumn.teams_enabled_for_space",values:{workspaceName:e.target.space.name}});case"private_content_transferred":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Transferred private content from {fromUserName} to {toUserName}",id:"auditLog.actionNames.eventColumn.private_content_transferred",values:{fromUserName:M(a,e.changes.userPermission.oldValue),toUserName:M(a,e.changes.userPermission.newValue)}});case"audit_log_exported":return(0,v.jsx)(n.FormattedMessage,{id:"auditlogEventFilter.eventColumn.audit_log_exported",defaultMessage:"Exported audit log for last {duration} days",values:{duration:e.meta.duration}});case"user_analytics_exported":return(0,v.jsx)(n.FormattedMessage,{id:"auditlogEventFilter.eventColumn.user_analytics_exported",defaultMessage:"Exported user analytics for {daysFilterString}",values:{daysFilterString:a.formatMessage(f.Rh[(null===(ue=e.meta)||void 0===ue?void 0:ue.daysFilter)||"last_90_days"]).toLowerCase()}});case"content_analytics_exported":return(0,v.jsx)(n.FormattedMessage,{id:"auditlogEventFilter.eventColumn.content_analytics_exported",defaultMessage:"Exported content analytics for {daysFilterString}",values:{daysFilterString:a.formatMessage(f.Rh[(null===(ge=e.meta)||void 0===ge?void 0:ge.daysFilter)||"last_90_days"]).toLowerCase()}});case"admin_content_search_queried":case"admin_content_search_exported":function Ee(e){return e.join(a.formatMessage(y.adminContentSearchPredicateSplit))}function Re(e){return"starting"in e&&"ending"in e?`${e.starting} - ${e.ending}`:"starting"in e?`${e.starting} - `:"ending"in e?` - ${e.ending}`:void 0}const Ze=e.searchParameters.query&&a.formatMessage(y.adminContentSearchQuery,{query:e.searchParameters.query}),Ve=e.searchParameters.teamspaces&&e.searchParameters.teamspaces.length>0&&a.formatMessage(y.adminContentSearchTeamspaces,{teamspaceCount:e.searchParameters.teamspaces.length,teamspaces:Ee(e.searchParameters.teamspaces)}),Le=e.searchParameters.createdBy&&e.searchParameters.createdBy.length>0&&a.formatMessage(y.adminContentSearchCreatedBy,{createdBy:Ee(e.searchParameters.createdBy)}),Be=e.searchParameters.sharedWith&&e.searchParameters.sharedWith.length>0&&a.formatMessage(y.adminContentSearchSharedWith,{sharedWith:Ee(e.searchParameters.sharedWith)}),Ue=e.searchParameters.audience&&e.searchParameters.audience.length>0&&a.formatMessage(y.adminContentSearchAudience,{audience:Ee(e.searchParameters.audience)}),We=e.searchParameters.createdTime&&a.formatMessage(y.adminContentSearchCreatedTime,{createdTime:Re(e.searchParameters.createdTime)}),ze=e.searchParameters.lastEditedTime&&a.formatMessage(y.adminContentSearchLastEditedTime,{lastEditedTime:Re(e.searchParameters.lastEditedTime)}),Oe=i.oA([Ze,Ve,Le,Be,Ue,We,ze]);if("admin_content_search_queried"===e.actionName){if(0===Oe.length)return(0,v.jsx)(n.FormattedMessage,{id:"auditlogEventFilter.eventColumn.admin_content_search_queried.no_filters",defaultMessage:"Ran a content search with no filters"});{const ot=Ee(Oe);return(0,v.jsx)(n.FormattedMessage,{id:"auditlogEventFilter.eventColumn.admin_content_search_queried",defaultMessage:"Ran a content search with the following criteria: {searchCriteria}",values:{searchCriteria:ot}})}}if(0===Oe.length)return(0,v.jsx)(n.FormattedMessage,{id:"auditlogEventFilter.eventColumn.admin_content_search_exported.no_filters",defaultMessage:"Exported a content search result with no filters"});{const rt=Ee(Oe);return(0,v.jsx)(n.FormattedMessage,{id:"auditlogEventFilter.eventColumn.admin_content_search_exported",defaultMessage:"Exported a content search result with the following criteria: {searchCriteria}",values:{searchCriteria:rt}})}case"admin_managed_users_log_out_all":{const lt=a.formatList(e.meta.emailDomains,{type:"conjunction"});return(0,v.jsx)(n.FormattedMessage,{id:"auditlogEventFilter.eventColumn.admin_managed_users_log_out_all",defaultMessage:"Logged out all managed users with the email domains {emailDomains}",values:{emailDomains:lt}})}case"admin_managed_users_log_out_one":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Logged out {guestNameAndEmail} from all of their active sessions",id:"auditlog.actionNames.eventColumn.admin_managed_users_log_out_one",values:{guestNameAndEmail:b(a,e)}});case"admin_managed_users_password_cleared_one":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Reset the password and MFA settings for {guestNameAndEmail} and logged them out of their active sessions",id:"auditlog.actionNames.eventColumn.admin_managed_users_password_cleared_one",values:{guestNameAndEmail:b(a,e)}});case"admin_managed_users_password_cleared":{const dt=a.formatList(e.meta.emailDomains,{type:"conjunction"});return(0,v.jsx)(n.FormattedMessage,{id:"auditlogEventFilter.eventColumn.admin_managed_users_password_cleared",defaultMessage:"Cleared passwords for all users with the email domains {emailDomains}",values:{emailDomains:dt}})}case"automation_created":return(0,v.jsx)(n.FormattedMessage,{id:"auditlog.actionNames.eventColumn.automation_created",defaultMessage:"Created {automationType} on {pageTitle}",values:{automationType:X(e.meta.automationType),pageTitle:E(e)}});case"automation_edited":return(0,v.jsx)(n.FormattedMessage,{id:"auditlog.actionNames.eventColumn.automation_edited",defaultMessage:"Edited {automationType} on {pageTitle}",values:{automationType:X(e.meta.automationType),pageTitle:E(e)}});case"ai_admin_legal_acceptance_toggled":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"{enabled} Notion AI for the workspace.",id:"auditlog.actionNames.eventColumn.ai_admin_legal_acceptance_toggled",values:{enabled:Y(e)}});case"space_consolidation_started":case"space_consolidation_completed":case"space_consolidation_failed":const qe=e.spaceId===e.meta.spaceConsolidationMetadata.source_space_id,Ke=e.meta.spaceConsolidationMetadata.source_space_name??e.meta.spaceConsolidationMetadata.source_space_id,He=e.meta.spaceConsolidationMetadata.target_space_name??e.meta.spaceConsolidationMetadata.target_space_id,Ge=e.changes.spaceContentDuplicationStatus.newValue;return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"{status} workspace consolidation {direction} {spaceName}.",id:"auditlog.actionNames.eventColumn.space_consolidation_status_changed",values:{status:Ge?(0,v.jsx)(n.FormattedMessage,{...w[Ge]}):"",spaceName:qe?He:Ke,direction:(0,v.jsx)(n.FormattedMessage,{...qe?y.into:y.from})}});case"mfa_sms_toggled":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"{enabled} SMS MFA on “{value}“",id:"auditlog.actionNames.eventColumn.mfa_sms_toggled",values:{value:null!==(me=e.changes)&&void 0!==me&&me.maskedPhoneNumber.oldValue?null===(pe=e.changes)||void 0===pe?void 0:pe.maskedPhoneNumber.oldValue:null===(fe=e.changes)||void 0===fe?void 0:fe.maskedPhoneNumber.newValue,enabled:null!==(he=e.changes)&&void 0!==he&&he.enabled.newValue?"Enabled":"Disabled"}});case"mfa_totp_toggled":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"{enabled} TOTP MFA",id:"auditlog.actionNames.eventColumn.mfa_totp_toggled",values:{enabled:null!==(ve=e.changes)&&void 0!==ve&&ve.enabled.newValue?"Enabled":"Disabled"}});case"mfa_backup_code_toggled":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"{enabled} backup codes for MFA",id:"auditlog.actionNames.eventColumn.mfa_backup_code_toggled",values:{enabled:null!==(xe=e.changes)&&void 0!==xe&&xe.enabled.newValue?"Enabled":"Disabled"}});case"user_suspended":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Suspended {userNameAndEmail}",id:"auditLogEntry.user_suspended",values:{userNameAndEmail:b(a,e)}});case"user_unsuspended":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Reactivated {userNameAndEmail}",id:"auditLogEntry.user_unsuspended",values:{userNameAndEmail:b(a,e)}});case"user_deleted":return e.target?(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Deleted {userNameAndEmail}",id:"auditLogEntry.user_deleted",values:{userNameAndEmail:M(a,e.target.user)}}):(0,v.jsx)(n.FormattedMessage,{...y.user_deleted});case"workspace.settings.prevent_granting_support_access_updated":return e.changes.enabled.newValue?(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Disabled managed user members' ability to grant support access for their account.",id:"auditLogEntry.workspace_domain_settings_prevent_granting_support_access_updated.enabled"}):(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Enabled managed user members' ability to grant support access for their account.",id:"auditLogEntry.workspace_domain_settings_prevent_granting_support_access_updated.disabled"});case"workspace.settings.prevent_profile_edits_updated":return e.changes.enabled.newValue?(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Disabled managed user members' ability to edit their profile information.",id:"auditLogEntry.workspace_domain_settings_prevent_profile_edits_updated.enabled"}):(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Enabled managed user members' ability to edit their profile information.",id:"auditLogEntry.workspace_domain_settings_prevent_profile_edits_updated.disabled"});case"workspace.settings.external_workspace_access_updated":return e.changes.enabled.newValue?(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Disabled managed user members' ability to join external workspaces.",id:"auditLogEntry.workspace_domain_settings_external_workspace_access_updated.enabled"}):(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Enabled managed user members' ability to join external workspaces.",id:"auditLogEntry.workspace_domain_settings_external_workspace_access_updated.disabled"});case"workspace.settings.custom_session_duration_updated":return void 0!==e.changes.valueMs.oldValue&&void 0!==e.changes.valueMs.newValue?(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Changed the session duration for all managed users from {oldDuration} to {newDuration}.",id:"auditLogEntry.workspace_domain_settings_session_duration_updated",values:{oldDuration:(0,r.Ct)(e.changes.valueMs.oldValue,a),newDuration:(0,r.Ct)(e.changes.valueMs.newValue,a)}}):(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Changed the session duration for all managed users.",id:"auditLogEntry.workspace_domain_settings_session_duration_updated.disabled"});case"integration.created":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Added {botName} to the workspace",id:"auditLogEntry.integration.created",values:{botName:_(a,e.meta.bot)}});case"integration.deleted":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Removed {botName} from workspace",id:"auditLogEntry.integration.deleted",values:{botName:_(a,e.meta.bot)}});case"page.automation_deleted":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Deleted automation {automationType} from {pageTitle}",id:"auditLogEntry.page.automation_deleted",values:{automationType:X(e.meta.automationType),pageTitle:E(e)}});case"page.file_deleted":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Deleted file {fileName} from {pageTitle}",id:"auditLogEntry.page.file_deleted",values:{fileName:ae(e),pageTitle:E(e)}});case"integration.secret_reset":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Reset authentication secret of {botName}",id:"auditLogEntry.integration.secret_reset",values:{botName:_(a,e.meta.bot)}});case"workspace.external_account_connected":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Connected external/public integration {integrationName}",id:"auditLogEntry.workspace.external_account_connected",values:{integrationName:_(a,e.meta.bot)}});case"workspace.external_account_disconnected":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Disconnected external/public integration {integrationName}",id:"auditLogEntry.workspace.external_account_disconnected",values:{integrationName:_(a,e.meta.bot)}});case"workspace.integration_added":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Added {integrationName} to the workspace",id:"auditLogEntry.workspace.workspace.integration_added",values:{integrationName:_(a,e.meta.bot)}});case"workspace.integration_removed":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Removed {integrationName} from workspace",id:"auditLogEntry.workspace.workspace.integration_removed",values:{integrationName:_(a,e.meta.bot)}});case"workspace.integration_webhook_inactivated":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Webhook events for {integrationName} failing",id:"auditLogEntry.workspace.integration_webhook_inactivated",values:{integrationName:_(a,e.meta.bot)}});case"workspace.integration_webhook_reactivated":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Webhook events for {integrationName} restored",id:"auditLogEntry.workspace.integration_webhook_reactivated",values:{integrationName:_(a,e.meta.bot)}});case"user.settings.analytics_tracking_setting_updated":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"{enabledOrDisabled} page view tracking on their user account",id:"auditLogEntry.user.settings.analytics_tracking_setting_updated",values:{enabledOrDisabled:Q(a,Boolean(null===(ye=e.changes)||void 0===ye||null===(ye=ye.enabled)||void 0===ye?void 0:ye.newValue))}});case"workspace.settings.guest_invite_request_setting_updated":return function(e,t){var a;return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"{enabledOrDisabled} allowing members to request inviting guests",id:"auditLogEntry.workspace.settings.guest_invite_request_setting_updated",values:{enabledOrDisabled:Q(t,Boolean(null===(a=e.changes)||void 0===a||null===(a=a.enabled)||void 0===a?void 0:a.newValue))}})}(e,a);case"workspace.settings.ai_leap_toggled":return function(e,t){var a;return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"{enabledOrDisabled} Notion AI LEAP (Learning & Early Access Program)",id:"auditLogEntry.workspace.settings.ai_leap_toggled",values:{enabledOrDisabled:Q(t,Boolean(null===(a=e.changes)||void 0===a||null===(a=a.enabled)||void 0===a?void 0:a.newValue))}})}(e,a);case"workspace.guest_invite_request_resolved":return function(e,t){const a=e.changes.requestStatus.newValue;return"approved"===a?(0,v.jsx)(n.FormattedMessage,{id:"auditLog.actionNames.eventColumn.workspace.guest_invite_request_resolved.approved",defaultMessage:"Approved {requestorNameAndEmail}'s request to add guest {guestNameAndEmail} to {pageTitle}",values:{requestorNameAndEmail:M(t,e.target.user),guestNameAndEmail:M(t,e.meta.targetGuest),pageTitle:R(e.meta.pagesAndRoles[0].page)}}):"rejected"===a?(0,v.jsx)(n.FormattedMessage,{id:"auditLog.actionNames.eventColumn.workspace.guest_invite_request_resolved.rejected",defaultMessage:"Declined request to add guest {guestNameAndEmail} to {pageTitle}",values:{guestNameAndEmail:M(t,e.meta.targetGuest),pageTitle:R(e.meta.pagesAndRoles[0].page)}}):(0,v.jsx)(v.Fragment,{})}(e,a);case"workspace_exported":case"workspace_icon_changed":case"public_page_cleared":case"logout":case"password_changed":case"password_cleared":case"password_set":case"revoked_support_access":case"user_suspended":case"user_unsuspended":case"member_joined":case"invite_link_toggled":case"scim_token_generated":case"scim_token_revoked":case"invite_link_reset":case"idp_metadata_xml_removed":case"idp_metadata_xml_updated":case"workspace.members_exported":return(0,v.jsx)(n.FormattedMessage,{...y[e.actionName]});case"organization.created":case"organization.audit_log_exported":case"organization.owner.added":case"organization.owner.removed":case"organization.workspace.added":case"organization.workspace.removed":case"organization.email_domain.verified":case"organization.email_domain.unverified":case"organization.settings.name_changed":case"organization.default_space_settings.disable_guests_toggled":case"organization.default_space_settings.enable_ai_feature_toggled":case"organization.default_space_settings.disable_page_analytics_toggled":case"organization.default_space_settings.disable_public_access_toggled":return(0,v.jsx)(v.Fragment,{});default:if("local"!==t)return l.log({level:"error",from:"auditLogEvent",type:"AuditLogEvent",data:{miscDataToConvertToString:{data:e}}}),(0,v.jsx)(v.Fragment,{});(0,o.t1)(e)}}function ae(e){const{name:t,extension:a}=e.target.file;return t?`“${t}“`:a?(0,v.jsx)(n.FormattedMessage,{...y.a_file_with_extension,values:{extension:a}}):(0,v.jsx)(n.FormattedMessage,{...y.a_file})}var se=a(37810),ne=a(26388);a(95477);function ie(e){const{auditLogEntry:t,id:a}=e,[i,o]=(0,s.useState)(""),r=(0,n.useIntl)();return(0,s.useEffect)((()=>{const e=document.getElementById(a);o((null==e?void 0:e.textContent)||"")}),[a]),(0,v.jsx)(ne.ZP,{style:{whiteSpace:"normal"},delayThreshold:80,renderTooltip:()=>(0,v.jsx)(re,{text:i,auditLogEntry:t}),placement:ne.ug.Bottom,render:e=>(0,v.jsx)("div",{...e,style:{fontSize:14,...se.Z.textOverflowStyle},id:a,children:(0,v.jsx)(oe,{auditLogEntry:t,env:"production",intl:r})})})}function oe(e){const{auditLogEntry:t,env:a,intl:s}=e;return te(t,a,s)}function re(e){var t,a;const{auditLogEntry:s,text:i}=e,o=(0,n.useIntl)(),r=(0,h.q6)({auditLogEntry:s,intl:o});return(0,v.jsxs)("div",{children:[i,(null===(t=s.actor.meta)||void 0===t?void 0:t.ipAddress)&&(0,v.jsx)("div",{children:(0,v.jsx)(n.FormattedMessage,{defaultMessage:"IP address: {ip}",values:{ip:null===(a=s.actor.meta)||void 0===a?void 0:a.ipAddress},id:"auditLogSettings.metadata.ipAddress"})}),(0,v.jsx)("div",{children:(0,h.xk)(s,o)}),r&&(0,v.jsx)(n.FormattedMessage,{id:"auditLogColumnEvent.tooltip.audienceMessage",defaultMessage:"Page audience: {audience}",values:{audience:r}})]})}},86100:(e,t,a)=>{a.d(t,{Z:()=>L});a(57658);var s=a(67294),n=a(86628),i=a(24405),o=a(11378),r=a(61275),l=a(58573),d=a(67220),c=a(9291),u=a(31701),g=a(53965),m=a(1898),p=a(45257),f=a(52275),h=a(60458),v=a(74194),x=a(78140),y=a(32163),b=a(89728),M=a(53437),_=a(58297),w=a(72495),C=a(64369),j=a(91642),S=a(4708),T=a(60709),k=a(95697),F=a(77080),N=a(29798),A=a(49085),I=a(80085);let P=function(e){return e.All="All",e.Partial="Partial",e.None="None",e}({});class D extends A.default{getInitialState(){return{categorySelections:{page:P.All,space:P.All,team:P.All,account:P.All},categoryToggleOpen:{page:!0,space:!0,team:!0,account:!0},searchQuery:void 0,actionSelections:(0,m.Xc)(I.yv,(()=>!0)),isMenuOpen:!1,renderOrder:[{category:"page",orderedActions:I.dq.page},{category:"space",orderedActions:I.dq.space},{category:"account",orderedActions:I.dq.account},{category:"team",orderedActions:I.dq.team}]}}getAllActionNames(){return(0,m.Yd)(this.state.actionSelections)}getSelectedActionNames(){return this.getAllActionNames().filter((e=>this.state.actionSelections[e]))}hasActionNameSelected(){const e=this.getAllActionNames(),t=this.getSelectedActionNames();return t.length>0&&t.length!==e.length}updateSearchQuery(e){this.setState({...this.state,searchQuery:e})}toggleCategorySelection(e){const t=e.category;this.setState({...this.state,categoryToggleOpen:{...this.state.categoryToggleOpen,[t]:!this.state.categoryToggleOpen[t]}})}selectCategorySelection(e){const t=e.category,a=this.state.categorySelections[t],s=a===P.None||a===P.Partial?P.All:P.None,n=s===P.All,i={...this.state.actionSelections},o=this.state.renderOrder.find((e=>e.category===t));o&&(o.orderedActions.forEach((e=>{i[e]=n})),this.setState({...this.state,actionSelections:i,categorySelections:{...this.state.categorySelections,[o.category]:s}}))}selectActionName(e,t){const a=this.state.actionSelections[e],s={...this.state.actionSelections,[e]:!a},n=t.orderedActions.filter((e=>s[e])).length,i=0===n?P.None:n===t.orderedActions.length?P.All:P.Partial;this.setState({...this.state,actionSelections:s,categorySelections:{...this.state.categorySelections,[t.category]:i}})}clearAllSelections(){const e=this.getBulkUpdateNextActionSelectionState((0,m.Yd)(this.state.actionSelections),!1),t=this.getBulkUpdateNextCategorySelectionState((0,m.Yd)(this.state.categorySelections),P.None);this.setState({...this.state,actionSelections:e,categorySelections:t})}getBulkUpdateNextCategorySelectionState(e,t){const a={...this.state.categorySelections};return e.forEach((e=>{a[e]=t})),a}getBulkUpdateNextActionSelectionState(e,t){const a={...this.state.actionSelections};return e.forEach((e=>{a[e]=t})),a}}var E=a(5210),R=a(85893);const Z={page:(0,R.jsx)(c.FormattedMessage,{id:"auditlogEventFilter.categoryName.page",defaultMessage:"Page"}),space:(0,R.jsx)(c.FormattedMessage,{id:"auditlogEventFilter.categoryName.workspace",defaultMessage:"Workspace"}),team:(0,R.jsx)(c.FormattedMessage,{id:"auditlogEventFilter.categoryName.team",defaultMessage:"Teamspace"}),account:(0,R.jsx)(c.FormattedMessage,{id:"auditlogEventFilter.categoryName.account",defaultMessage:"Account"})};function V(e){let{totalNumEventsForCategory:t,numSelectedForCategory:a,category:s,categoryOpen:n,shouldShowCount:o,onCategoryClick:r,onCategoryToggleClick:l,...d}=e;const u=(0,i.yK)((e=>({textWrapperStyle:{margin:0},title:{margin:0,display:"flex",alignItems:"center"},categoryText:{marginLeft:8,fontWeight:600},categorySubHeader:{marginLeft:6},toggleButton:{marginLeft:2,marginRight:2}})),[]);let g,m;return g=o?t===a?(0,R.jsx)(c.FormattedMessage,{id:"auditlogEventFilter.allEventsSelected",defaultMessage:"({totalNum} events)",values:{totalNum:t}}):(0,R.jsx)(c.FormattedMessage,{id:"auditlogEventFilter.numEventsSelected",defaultMessage:"({numSelected} of {totalNum} events selected)",values:{numSelected:a,totalNum:t}}):null,m=t===a||0!==a&&"partial",(0,R.jsx)(f.Z,{...d,className:"notranslate",textWrapperStyle:u.textWrapperStyle,focused:!1,title:(0,R.jsxs)("div",{style:u.title,children:[(0,R.jsx)(E.Z,{style:u.toggleButton,open:n,onClick:l,isSidebar:!1,fill:!1,icon:"chevron"}),(0,R.jsx)(h.Z,{checked:m,size:14,checkSize:8,onClick:r}),(0,R.jsx)(C.Z,{style:u.categoryText,children:Z[s]}),(0,R.jsx)(C.Z,{isSecondaryColor:!0,style:u.categorySubHeader,children:g})]})})}const L=function(e){let{onChange:t}=e;const a=(0,i.Fg)(),o=(0,n.qz)(void 0,N.Z),r=(0,n.qz)(void 0,D),l=(0,n.qz)(void 0,D),d=(0,n.VK)((()=>l.state.isMenuOpen),[l]),u=(0,s.useCallback)((()=>(0,R.jsx)(H,{onChange:t,componentStore:l,lastSelectionStore:r,menuListStore:o})),[t,l,r,o]),g=(0,s.useCallback)((()=>function(e,t){e.setState({...e.state,actionSelections:{...t.state.actionSelections}}),q(!1,e)}(l,r)),[l,r]),m=W(a),p=(0,R.jsx)(c.FormattedMessage,{id:"auditlogEventFilter.title",defaultMessage:"Event"}),f=(0,R.jsx)(K,{componentStore:l,title:p});return(0,R.jsx)(j.Z,{marginAfter:!1,children:(0,R.jsx)(M.ZP,{popupType:M.ZP.PopupType.Popup,placementToOrigin:M.ZP.Placement.Bottom,alignmentToOrigin:M.ZP.Alignment.Start,open:d,render:u,onDismiss:g,keepFocus:!0,origin:f,preventScaleTransition:!0,style:m.popup})})};function B(e){var t;return g.oA([e.key,null===(t=e.localizedActionName)||void 0===t?void 0:t.toLowerCase()]).join(" ")}function U(e){let{totalNumSelected:t,totalNumEvents:a}=e;const s=(0,i.yK)((e=>({container:{background:u.ZP.diffBackground,color:u.ZP.diffTextColor,paddingInline:6,margin:8,marginBottom:0,borderRadius:4,fontWeight:510,width:"fit-content"},textWrapperStyle:{marginLeft:8}})),[]);return(0,R.jsx)(C.Z,{style:s.container,children:(0,R.jsx)(c.FormattedMessage,{id:"auditLogEventFilter.selectedPill",defaultMessage:"{totalNumSelected} of {totalNumEvents} selected",values:{totalNumSelected:t,totalNumEvents:a}})})}function W(e){return{container:{minWidth:460},searchInput:{padding:8,borderBottomLeftRadius:0,borderBottomRightRadius:0,boxShadow:"none",borderBottomWidth:1,borderBottomStyle:"solid",borderBottomColor:e.lightDividerColor},popup:{paddingBottom:8}}}function z(e){const{renderGroup:t,shouldShowCount:a,totalNumEventsForCategory:s,numSelectedForCategory:n,componentStore:i}=e,o=t.category,r=()=>{i.toggleCategorySelection(t)},l=()=>{i.selectCategorySelection(t)};return{key:o,action:r,render:e=>(0,R.jsx)(V,{totalNumEventsForCategory:s,numSelectedForCategory:n,category:o,categoryOpen:i.state.categoryToggleOpen[o],shouldShowCount:a,onCategoryToggleClick:r,onCategoryClick:l,...e}),localizedActionName:null,actionName:null}}function O(e){const{actionName:t,renderGroup:a,componentStore:s,intl:n}=e,i=()=>{s.selectActionName(t,a)},o=n.formatMessage(r.TE[t]);return{key:t,action:i,render:e=>(0,R.jsx)(f.Z,{...e,icon:(0,R.jsx)(h.Z,{checked:s.state.actionSelections[t],size:14,checkSize:8,onClick:i}),focused:!1,title:o,className:"notranslate",style:{paddingLeft:32},textWrapperStyle:{marginLeft:4}}),actionName:t,localizedActionName:o}}function q(e,t){t.setState({...t.state,isMenuOpen:e})}function K(e){let{title:t,componentStore:a}=e;const s=(0,n.VK)((()=>a.hasActionNameSelected()),[a]);return(0,R.jsx)(p.Z,{on:s,icon:(0,d.S)({width:16,marginRight:6,fill:"currentColor"}),title:(0,R.jsx)("span",{children:t}),onClick:()=>{q(!0,a)}})}function H(e){let{onChange:t,componentStore:a,lastSelectionStore:r,menuListStore:d}=e;const u=(0,i.Fg)(),g=(0,c.useIntl)(),p=(0,s.useCallback)((e=>function(e,t){t.updateSearchQuery(e.target.value)}(e,a)),[a]),f=W(u),h=(0,n.VK)((()=>[...(0,m.qP)(o.lo).reduce(((e,t)=>{let[a,s]=t;return F.default.checkGate(a)?e:[...e,...s]}),[]),...(0,S.F$)()?[]:["team_guest_default_permission_updated"],...(0,S.Ye)()?[]:["guest_membership_requests_toggled"]]),[]),{actionSelections:M,categoryToggleOpen:C,renderOrder:j,searchQuery:N}=(0,n.VK)((()=>a.state),[a]),A=(0,n.VK)((()=>(0,k.bq)()),[]),I=[];let P=0,D=0;for(const s of j){const e=s.category;if("team"===e&&!A)continue;const t=[];let n=0;for(const i of s.orderedActions)h.includes(i)||(t.push(O({actionName:i,renderGroup:s,intl:g,componentStore:a})),M[i]&&n++);if(P+=n,D+=t.length,I.push(z({renderGroup:s,shouldShowCount:!Boolean(N),totalNumEventsForCategory:t.length,numSelectedForCategory:n,componentStore:a})),C[e])if(N){const e=(0,l.ZP)(N,t,B);I.push(...e)}else I.push(...t)}const E={key:"results",items:I,render:e=>(0,R.jsx)(w.Z,{...e,title:null,loading:!1})};return(0,R.jsxs)("div",{style:f.container,children:[(0,R.jsx)(v.Z,{style:f.searchInput,placeholder:g.formatMessage({id:"auditlogEventFilter.searchPlaceholder",defaultMessage:"Search for an event"}),onChange:p,value:N,showClearButton:!0}),N&&(0,R.jsx)(U,{totalNumSelected:P,totalNumEvents:D}),(0,R.jsx)(x.Z,{menuType:T.og.Popup,header:null,maxHeight:356,children:(0,R.jsx)(y.Z,{type:y.i.Vertical,store:d,initialFocus:0,sections:[E]})}),(0,R.jsxs)(w.Z,{topBorder:!0,style:{padding:"8px 8px 2px 8px",justifyContent:"space-between",display:"flex"},children:[(0,R.jsx)(b.Z,{onClick:()=>{!function(e){e.clearAllSelections()}(a)},children:(0,R.jsx)(c.FormattedMessage,{id:"auditlogEventFilter.clearButton",defaultMessage:"Clear"})}),(0,R.jsx)(_.Z,{onClick:()=>{!function(e,t,a){const s=t.getAllActionNames(),n=t.getSelectedActionNames();e(s.length===n.length?[]:n),0===n.length&&t.reset(),a.setState({...a.state,actionSelections:{...t.state.actionSelections}}),q(!1,t)}(t,a,r)},children:(0,R.jsx)(c.FormattedMessage,{id:"auditlogEventFilter.applyButton",defaultMessage:"Apply"})})]})]})}},81549:(e,t,a)=>{a.d(t,{Z:()=>i});a(67294);var s=a(43568),n=a(85893);const i=function(){return(0,n.jsx)("div",{style:{},children:(0,n.jsx)(s.Z,{paragraphs:[{lineHeight:45,lineMargin:20,sectionWidths:[100],repeat:1,sectionMargin:15},{lineHeight:40,lineMargin:5,sectionWidths:[100],repeat:8,sectionMargin:10}]})})}},58015:(e,t,a)=>{a.d(t,{v:()=>i});a(67294);var s=a(89728),n=a(85893);function i(e){const{children:t,disabled:a,onClick:i}=e;return(0,n.jsx)(s.Z,{onClick:i,disabled:a,style:{justifyContent:"center",marginLeft:6},isBlue:!a,isLightGray:a,children:t})}},22326:(e,t,a)=>{a.d(t,{Z:()=>l,r:()=>d});var s=a(49085),n=a(53877),i=a(80085),o=a(27617);class r extends s.default{getInitialState(){return{pageNum:1,pageSize:10,timeRange:{},actors:[],actions:[],sortOrder:i.NQ.CreatedNewest}}}const l=new r;function d(e){const{timeRange:t,actors:a,actions:s,sortOrder:r}=e,l=new URLSearchParams;return t.starting&&l.append("starting",`${n.OQ.toUnixMs(t.starting)}`),t.ending&&l.append("ending",`${n.OQ.toUnixMs(t.ending)}`),(null==a?void 0:a.length)>0&&l.append("actors",a.map(o.eW).join(",")),(null==s?void 0:s.length)>0&&l.append("actions",s.join(",")),l.append("sort",`${r||i.NQ.CreatedNewest}`),l.toString()}},23096:(e,t,a)=>{a.d(t,{Z:()=>ue});var s=a(67294),n=a(480),i=a(86628),o=a(24405),r=a(69651),l=a(9291),d=a(1898),c=a(27617),u=a(45257),g=a(97638),m=a(76150),p=a(13854),f=a(41558),h=a(52275),v=a(3386),x=a(89728),y=a(53437),b=a(58297),M=a(72495),_=a(84747),w=a(53877),C=a(42875),j=a(33929),S=a(60709),T=a(67950),k=a(78140),F=a(40721),N=a(86825),A=a(46945),I=a(84795),P=a(49085);const D={INVALID_DATE:"Invalid date",INVALID_RANGE:"Invalid range"};class E extends P.default{getInitialState(){return{dateEdited:!1,timeEdited:!1,temporaryValue:{date:void 0,time:void 0},error:void 0}}}const R=E;var Z=a(74194),V=a(26388),L=a(85893);const B=function(e){const t=(0,l.useIntl)(),a=(0,i.qz)(void 0,R),{value:n}=e;(0,s.useEffect)((()=>{a.reset()}),[n,a]);const o=(0,s.useCallback)((()=>(0,L.jsx)(G,{dateTimeInputMenuItemProps:e,store:a})),[e,a]),r=(0,i.VK)((()=>W(t,a)),[t,a]);return r?(0,L.jsx)(V.ZP,{renderTooltip:()=>r,forceVisibleState:!0,placement:V.ug.Left,render:o,originGap:-8}):(0,L.jsx)(G,{dateTimeInputMenuItemProps:e,store:a})};function U(e,t){const{device:a}=e;return!!a.isMobile||!t}function W(e,t){if(t.state.error)switch(t.state.error){case D.INVALID_DATE:return e.formatMessage({id:"dateInputError.invalidDateError.tooltip",defaultMessage:"Invalid date"});case D.INVALID_RANGE:return e.formatMessage({id:"dateInputError.invalidDateRangeError.tooltip",defaultMessage:"Invalid range"});default:(0,d.t1)(t.state.error)}}function z(e,t,a,s,n,i){const o=function(e,t,a,s,n){if(!a.state.dateEdited&&!a.state.timeEdited)return;if(!a.state.temporaryValue.date&&!a.state.temporaryValue.time)return{value:void 0};const i=(0,I.uy)(a.state.temporaryValue.date||"",t);if(i){let t="";return t=s?(null==e?void 0:e.start_time)||"00:00":n?"23:59":"00:00",{value:{type:"datetime",start_date:i,time_zone:(null==e?void 0:e.time_zone)||(0,C.r)(),start_time:t}}}const o=(0,I.wk)(a.state.temporaryValue.time||"",t);return(null!=e&&e.start_date||i)&&o?{value:{type:"datetime",start_date:(null==e?void 0:e.start_date)||i,start_time:o,time_zone:(null==e?void 0:e.time_zone)||(0,C.r)()}}:{error:D.INVALID_DATE}}(e,t,a,n,i);if(o)return s?s(o):o}function O(e,t,a,s,n){const i=function(e){return{inputDefault:{background:e.inputBackground,boxShadow:e.inputBoxShadow},inputFocused:{boxShadow:e.outlineBlueInputBoxShadow},inputError:{boxShadow:e.outlineRedInputBoxShadow},placeholder:{color:e.lightTextColor}}}(e),o=W(s,n);if(!t)return o?i.inputError:a?i.inputFocused:i.inputDefault}function q(e,t,a,s,n,i,o,r,l,d){const{device:c}=e,u=function(e,t){return{menuItem:{marginBottom:e.device.isMobile?1:12},inputWrapper:{borderRadius:4,height:28,paddingRight:U(e,t)?6:0,position:"relative"},inputEditRegion:{width:U(e,t)?"calc(100% - 14px)":"100%"},inputEditRegionMobile:{padding:"2px 6px",position:"relative"}}}(e,d);return{style:{...u.menuItem,...n},inputOuterStyle:{...u.inputWrapper,...s,...O(t,i,o,r,l)},inputStyle:{...u.inputEditRegion,...c.isMobile&&u.inputEditRegionMobile,...a}}}function K(e,t,a,s,n,i,o,r,l,d){let c;(!r||"date"===t&&null!=n&&n.start_time||"time"===t&&null!=n&&n.start_date)&&(c=z(n,i,o,l,r,d),c&&(a(c),c.error?o.setState({...o.state,dateEdited:!1,error:c.error}):o.reset())),s&&s(e,c)}function H(e,t,a,s,n,i,o,r,l){const d=z(t,a,s,i,o,r);d?(e(d),d.error?s.setState({...s.state,dateEdited:!1,timeEdited:!1,error:d.error}):s.reset()):s.setState({...s.state,dateEdited:!1,timeEdited:!1}),l&&n&&n(l)}function G(e){let{dateTimeInputMenuItemProps:t,store:a}=e;const{store:r,hideClearButton:d,focus:u,showTime:g,placeholder:m,...p}=t,{onBlur:f,onClear:h,onDateFocus:v,onSubmit:x,onTimeFocus:y,onUpdate:b,isEndingDate:M,inputStyle:_,inputOuterStyle:w,style:C,disabled:S,validate:T,value:k}=t,F=(0,l.useIntl)(),N=(0,o.Fg)(),A=(0,n.O7)(),I=(0,s.useCallback)((e=>function(e,t,a,s,n,i,o,r,l,d){const{device:c}=t;i.setState({...i.state,timeEdited:!0,temporaryValue:{...i.state.temporaryValue,time:e.target.value||""}}),c.isAndroid&&H(a,s,n,i,o,r,l,d)}(e,A,b,k,F,a,f,T,g,M)),[A,b,k,F,a,f,T,g,M]),P=(0,s.useCallback)((e=>function(e,t,a){t.setState({...t.state,timeEdited:!1}),a&&a(e)}(e,a,y)),[a,y]),D=(0,s.useCallback)((()=>function(e,t,a,s,n,i,o,r){s.setState({...s.state,dateEdited:!0,timeEdited:!0,temporaryValue:{date:void 0,time:void 0},error:void 0});const l=z(t,a,s,i,o,r);l&&e(l),s.setState({...s.state,dateEdited:!1,timeEdited:!1}),n&&n()}(b,k,F,a,h,T,g,M)),[b,k,F,a,h,T,g,M]),E=(0,s.useCallback)((e=>H(b,k,F,a,f,T,g,M)),[b,k,F,a,f,T,g,M]),R=(0,s.useCallback)((e=>function(e,t,a,s,n,i,o,r,l,d){const{device:c}=t;i.setState({...i.state,dateEdited:!0,temporaryValue:{...i.state.temporaryValue,date:e.target.value||""}}),c.isAndroid&&H(a,s,n,i,o,r,l,d)}(e,A,b,k,F,a,f,T,g,M)),[A,b,k,F,a,f,T,g,M]),V=(0,s.useCallback)((e=>function(e,t,a){t.setState({...t.state,dateEdited:!1}),a&&a(e)}(e,a,v)),[a,v]),{device:B}=A,W=B.isMobile?"date":"text",O=B.isMobile?"time":"text",G=Z.B.Transparent,Y=B.isMobile?void 0:u,Q=(0,i.VK)((()=>q(A,N,_,w,C,S,Y,F,a,d)),[A,N,_,w,C,S,Y,F,a,d]),J={display:"flex",alignItems:"center",lineHeight:2,background:N.inputBackground,paddingLeft:8,flexBasis:"50%",...Q.inputOuterStyle},X=(0,i.VK)((()=>function(e,t,a,s){const{device:n}=e;return n.isMobile?t?c.dd(t,a):"":s.state.temporaryValue.date?s.state.temporaryValue.date:s.state.dateEdited?s.state.temporaryValue.date||"":t?c.dd(t,a):""}(A,k,F,a)),[A,k,F,a]),ee=(0,i.VK)((()=>function(e,t,a,s){const{device:n}=e;return n.isMobile?t?c.KN(t,a):"":s.state.temporaryValue.time?s.state.temporaryValue.time:s.state.timeEdited?s.state.temporaryValue.time||"":t?c.KN(t,a):""}(A,k,F,a)),[A,k,F,a]);return(0,L.jsxs)("div",{style:J,children:[(0,L.jsx)(Z.Z,{...p,type:W,format:G,placeholder:m,focus:"date"===Y,onFocus:V,onChange:R,onSubmit:e=>K(e,"date",b,x,k,F,a,g,T,M),onBlur:E,value:X,size:1,style:{fontSize:B.isMobile?16:14},showClearButton:!g&&U(A,d),onClearButtonClick:D}),g&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)("div",{style:{height:14,width:1,background:N.regularDividerColor,marginLeft:6,marginRight:12,flexShrink:0}}),(0,L.jsx)(Z.Z,{...p,placeholder:j.default.formatMessage($.timePlaceholder),type:O,format:G,focus:"time"===Y,onFocus:P,onChange:I,onSubmit:e=>K(e,"time",b,x,k,F,a,g,T,M),onBlur:E,value:ee,size:1,style:{fontSize:B.isMobile?16:14},showClearButton:U(A,d),onClearButtonClick:D})]})]})}const $=(0,l.defineMessages)({startingDateMessage:{defaultMessage:"Starting",id:"auditLog.dateTimeRangeMenu.startingDatePlaceholder"},endingDateMessage:{defaultMessage:"Ending",id:"auditLog.dateTimeRangeMenu.endingDatePlaceholder"},timePlaceholder:{defaultMessage:"12:00 AM",id:"auditLog.dateTimeRangeMenu.timePlaceholderInNumber"}});const Y=function(e){let{title:t,value:a,onUpdate:s,onDismiss:o,disabled:r,footer:l,header:d,hideTime:c,showTime:u,store:g,dayRangeStore:m}=e;const h=(0,n.O7)(),v=(0,i.qz)(m,f.Z),x=(0,i.qz)(g,p.ZP);(0,_.Z)((()=>{void 0!==u&&x.setState({...x.state,showTime:u})}));const{device:y}=h;return(0,L.jsx)(k.Z,{...oe(h,t,a,s,x,v,o,r,l),children:(0,L.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[(0,L.jsxs)("div",{children:[d,!y.isMobile&&(0,L.jsx)(ie,{value:a,disabled:r,onUpdate:s,store:x,dayRangeStore:v}),(0,L.jsx)(ee,{value:a,onUpdate:s,store:x,dayRangeStore:v})]}),(0,L.jsx)(ne,{onUpdate:s,value:a,hideTime:c,store:x,dayRangeStore:v})]})})};function Q(e,t,a){return t.error?t:function(e){if(e.starting&&e.ending){const t=w.OQ.notionDateTimeToLuxon(e.starting);return w.OQ.notionDateTimeToLuxon(e.ending)>=t?{value:e}:{error:T.B.INVALID_RANGE}}return{value:e}}({...a,[e]:t.value})}function J(e,t,a){if(t.error)return t;return function(e){if(e.starting&&e.ending){const t=w.OQ.notionDateToLuxon(e.starting);return w.OQ.notionDateToLuxon(e.ending)>=t?{value:e}:{error:T.B.INVALID_RANGE}}return{value:e}}({...c.Zy(a),[e]:t.value})}function X(e,t){return{pickerSection:{paddingLeft:16,paddingRight:16},pickerSectionMobile:{paddingTop:16,paddingBottom:8},sidebar:{paddingTop:12,paddingBottom:24,overflowY:"auto",overflowX:"hidden",flex:"0 0 220px",backgroundColor:t.sidebarSecondaryBackground,borderLeft:`1px solid ${t.regularDividerColor}`,maxWidth:"fit-content"},menuItem:{minHeight:void 0,paddingTop:e.device.isMobile?12:4,paddingBottom:e.device.isMobile?12:4,color:t.mediumTextColor}}}function ee(e){let{value:t,onUpdate:a,store:s,dayRangeStore:r}=e;const l=(0,o.Fg)(),d=(0,n.O7)(),u=(0,i.qz)(r,f.Z),g=(0,i.qz)(s,p.ZP),{device:m}=d,h=X(d,l),v=function(e){return{pickerSectionMobile:{background:e.popoverBackground,boxShadow:`0 1px 0 ${e.regularDividerColor}`,marginBottom:1}}}(l),x={...h.pickerSection,...m.isMobile&&h.pickerSectionMobile,...m.isMobile&&v.pickerSectionMobile};return(0,L.jsx)(M.Z,{children:(0,L.jsx)("div",{style:x,children:(0,L.jsx)(A.Z,{value:c.Zy(t),dateTimeStore:g,store:u,onUpdate:e=>{if(e.error)return null;const s=c.PM(t,e.value);return a({error:e.error,value:s})},validate:(e,a)=>J(e,a,t)})})})}function te(e,t,a){t.setState({...t.state,focus:e});const s=p.QJ[e];a.setState({...a.state,focus:s})}function ae(e,t){t.setState({...t.state,focus:e})}function se(e,t,a){e.ending&&te(m.Hv.EndDate,t,a),t.setState({...t.state,temporaryDateRange:e}),a.setState({...a.state,displayMonth:e.starting||e.ending?w.Sy(e.starting||e.ending):void 0,temporaryDateRange:{starting:c.Qb(e.starting),ending:c.Qb(e.ending)}})}function ne(e){let{onUpdate:t,value:a,hideTime:s,store:r,dayRangeStore:d}=e;const c=(0,o.Fg)(),u=(0,n.O7)(),g=(0,i.VK)((()=>r.state.showTime),[r]);return(0,L.jsxs)("aside",{style:X(u,c).sidebar,children:[s?null:(0,L.jsx)(N.Z,{title:(0,L.jsx)(l.FormattedMessage,{id:"auditlogDateFilter.timeToggle",defaultMessage:"Use time"}),on:g,onClick:()=>{if(r.toggleShowTime(),r.state.showTime){const e=a;e.starting&&(e.starting.start_time="00:00"),e.ending&&(e.ending.start_time="23:59"),t({value:e})}},focused:!1}),(0,L.jsx)(h.Z,{focused:!1,title:(0,L.jsx)(l.FormattedMessage,{id:"auditlogDateFilter.quickFilters.today",defaultMessage:"Today"}),onClick:()=>{const e=Date.now(),t=w.CQ(e,(0,C.r)());se({starting:{...t,start_time:"00:00"},ending:t},r,d)},style:X(u,c).menuItem}),(0,L.jsx)(h.Z,{focused:!1,title:(0,L.jsx)(l.FormattedMessage,{id:"auditlogDateFilter.quickFilters.yesterday",defaultMessage:"Yesterday"}),onClick:()=>{const e=w.Cv((0,C.r)());se({starting:{type:"datetime",start_date:e.start_date,start_time:"00:00",time_zone:(0,C.r)()},ending:{type:"datetime",start_date:e.start_date,start_time:"23:59",time_zone:(0,C.r)()}},r,d)},style:X(u,c).menuItem}),(0,L.jsx)(h.Z,{focused:!1,title:(0,L.jsx)(l.FormattedMessage,{id:"auditlogDateFilter.quickFilters.lastWeek",defaultMessage:"Last 7 days"}),onClick:()=>{const e=w.Oo((0,C.r)()),t=w.CQ(Date.now(),(0,C.r)());se({starting:{type:"datetime",start_date:e.start_date,start_time:"00:00",time_zone:(0,C.r)()},ending:t},r,d)},style:X(u,c).menuItem}),(0,L.jsx)(h.Z,{focused:!1,title:(0,L.jsx)(l.FormattedMessage,{id:"auditlogDateFilter.quickFilters.lastMonth",defaultMessage:"Last 30 days"}),onClick:()=>{const e=w.dj((0,C.r)()),t=w.CQ(Date.now(),(0,C.r)());se({starting:{type:"datetime",start_date:e.start_date,start_time:"00:00",time_zone:(0,C.r)()},ending:t},r,d)},style:X(u,c).menuItem})]})}function ie(e){let{value:t,disabled:a,onUpdate:s,store:r,dayRangeStore:d}=e;const u=(0,l.useIntl)(),g=(0,o.Fg)(),p=(0,n.O7)(),{device:f,WindowSizeStore:h}=p,v=(0,i.VK)((()=>r.getFocus()),[r]);let x="date";v!==m.Hv.StartTime&&v!==m.Hv.EndTime||(x="time");const y=function(e,t){return{earliestValidEnding:e.starting&&c.o0(e.starting,t),latestValidStarting:e.ending&&c.o0(e.ending,t)}}(t,u),{showTime:b}=(0,i.VK)((()=>r.state),[r]),M=(0,i.VK)((()=>h.getSafePaddingLeftCSS(16)),[h]);return(0,L.jsxs)("div",{style:{paddingTop:f.isMobile?16:12,paddingBottom:f.isMobile?16:8,paddingLeft:f.isMobile?M:14,paddingRight:f.isMobile?M:14,display:b?"block":"flex",...f.isMobile&&{boxShadow:`\n                        0 1px 0 ${g.regularDividerColor}\n                    `,position:"relative",zIndex:2},background:f.isMobile?g.popoverBackground:void 0},children:[(0,L.jsx)(B,{disabled:a,placeholder:j.default.formatMessage($.startingDateMessage),focus:v===m.Hv.StartDate||v===m.Hv.StartTime?x:void 0,value:t.starting,validate:e=>function(e,t){const a=Q("starting",e,t);return a.error?a:{value:a.value.starting}}(e,t),onUpdate:e=>function(e,t,a){e.error||t({value:{...a,starting:e.value}})}(e,s,t),onDateFocus:()=>te(m.Hv.StartDate,r,d),onTimeFocus:()=>ae(m.Hv.StartTime,r),onSubmit:(e,t)=>function(e,t,a,s,n){t&&t.error||(a===m.Hv.StartDate&&s.state.showTime?s.setState({...s.state,focus:m.Hv.StartTime}):(s.setState({...s.state,focus:m.Hv.EndDate}),n.setState({...n.state,focus:"ending"})))}(0,t,v,r,d),inputElementAttributes:{max:y.latestValidStarting},showTime:b}),(0,L.jsx)("div",{style:{width:12,height:8}}),(0,L.jsx)(B,{disabled:a,placeholder:j.default.formatMessage($.endingDateMessage),focus:v===m.Hv.EndDate||v===m.Hv.EndTime?x:void 0,value:t.ending,validate:e=>function(e,t){const a=Q("ending",e,t);return a.error?a:{value:a.value.ending}}(e,t),onUpdate:e=>function(e,t,a){e.error||t({value:{...a,ending:e.value}})}(e,s,t),onDateFocus:()=>te(m.Hv.EndDate,r,d),onTimeFocus:()=>ae(m.Hv.EndTime,r),onSubmit:(e,t)=>function(e,t,a,s){t&&t.error||a===m.Hv.EndDate&&s.state.showTime&&s.setState({...s.state,focus:m.Hv.EndTime})}(0,t,v,r),inputElementAttributes:{min:y.earliestValidEnding},showTime:b})]})}function oe(e,t,a,s,n,i,o,r,l){const{device:d}=e;if(d.isMobile){return{menuType:S.og.Modal,title:t,right:(0,L.jsx)(F.DoneMenuText,{}),onClickRight:o,header:(0,L.jsx)(ie,{value:a,disabled:r,onUpdate:s,store:n,dayRangeStore:i})}}return{menuType:S.og.Popup,onClickOutside:o,footer:l}}var re=a(255),le=a(8319),de=a(75689),ce=a(91642);const ue=(0,l.injectIntl)((function(e){let{onChange:t,onMenuDismiss:a,showButtons:o,title:r,header:l,sidebar:d,hideTime:c,value:u,disabled:g,icon:m,mode:h,focused:v,pillTitle:x}=e;const y=(0,n.O7)(),b=(0,i.qz)(void 0,f.Z),M=(0,i.qz)(void 0,p.ZP);(0,s.useEffect)((()=>{ye({value:u},M,b)}),[u,M,b]);const{device:_}=y;return _.isMobile?(0,L.jsx)(ke,{onChange:t,onMenuDismiss:a,showButtons:o,title:r,header:l,sidebar:d,hideTime:c,value:u,disabled:g,icon:m,store:M,dayRangeStore:b,mode:h}):(0,L.jsx)(Te,{onChange:t,onMenuDismiss:a,showButtons:o,title:r,header:l,sidebar:d,hideTime:c,value:u,disabled:g,focused:v,icon:m,mode:h,pillTitle:x,store:M,dayRangeStore:b})}));function ge(e){const{device:t}=e;return t.isMobile?y.ZP.PopupType.SlideUp:y.ZP.PopupType.Popup}function me(e){return{buttonMenuItem:{color:e.mediumTextColor},activeMenuItem:{color:e.regularTextColor}}}function pe(e){e.preventDefault&&e.preventDefault()}function fe(e){e({starting:void 0,ending:void 0})}function he(e){return{menuItem:{minHeight:void 0,paddingTop:e.device.isMobile?12:4,paddingBottom:e.device.isMobile?12:4},icon:{height:16,width:16,marginRight:6},iconActiveDesktop:{height:14,width:14,fill:"currentColor",alignSelf:"flex-start",marginTop:2,marginRight:2},iconActiveDesktopWrapper:{marginTop:0},iconActiveMobile:{height:14,width:14,fill:"currentColor",marginTop:1,marginRight:6},popup:{paddingTop:0,paddingBottom:8},popupWithSidebar:{display:"flex"},menuItemTitleDesktop:{width:"100%"},summary:{display:"inline-flex"}}}function ve(e,t,a){a||(e.setState({...e.state,isOpen:!0,focus:m.Hv.StartDate}),t.setState({...t.state,isOpen:!0,focus:"starting"}))}function xe(e,t,a,s,n,i){const{temporaryDateRange:o}=a.state;g.zD(e)||(i||t(o),a.setState({...a.state,isOpen:!1,temporaryDateRange:{starting:void 0,ending:void 0}}),s.setState({...s.state,isOpen:!1,temporaryDateRange:{starting:void 0,ending:void 0}}),n&&n())}function ye(e,t,a){if(e.error)return;const s={starting:(0,c.Qb)(e.value.starting),ending:(0,c.Qb)(e.value.ending)};return a.setState({...a.state,temporaryDateRange:{...a.state.temporaryDateRange,...s}}),t.setState({...t.state,temporaryDateRange:{...t.state.temporaryDateRange,...e.value}})}function be(e){let{disabled:t,icon:a,title:i,store:o,dayRangeStore:r}=e;const l=(0,n.O7)(),d=(0,s.useCallback)((()=>ve(o,r,t)),[o,r,t]),c=he(l);return(0,L.jsx)(h.Z,{disabled:t,focused:!1,icon:a(c.icon),title:i,onClick:d})}function Me(e){let{disabled:t,title:a,value:i,intl:o,onChange:l,store:d,dayRangeStore:c}=e;const u=(0,n.O7)(),m=(0,s.useCallback)((()=>ve(d,c,t)),[d,c,t]),p=he(u),f=(0,L.jsxs)("div",{style:p.summary,children:[(0,r.C)(p.iconActiveMobile),g._Q(i,o)]});return(0,L.jsx)(de.Z,{disabled:t,onClick:m,onClickClear:()=>fe(l),label:a,title:f})}function _e(e){let{disabled:t,value:a,focused:i,intl:l,onChange:d,store:c,dayRangeStore:u}=e;const m=(0,o.Fg)(),p=(0,n.O7)(),f=(0,s.useCallback)((()=>ve(c,u,t)),[c,u,t]),v=he(p),x=me(m),y={...v.menuItem,...x.activeMenuItem},b=g._Q(a,l),M=(0,L.jsx)(re.Z,{onClick:()=>fe(d),disabled:t});return(0,L.jsx)(h.Z,{focused:i,disabled:t,icon:(0,r.C)(v.iconActiveDesktop),title:b,right:M,isTokenTitle:!0,alignIconTop:!0,onClick:f,desktopTitleStyle:v.menuItemTitleDesktop,desktopIconStyle:v.iconActiveDesktopWrapper,style:y})}function we(e){let{disabled:t,title:a,icon:i,focused:r,mode:l,store:d,dayRangeStore:c}=e;const u=(0,o.Fg)(),g=(0,n.O7)(),m=(0,s.useCallback)((()=>ve(d,c,t)),[d,c,t]),p=he(g),f=me(u),v={...p.menuItem,...f.buttonMenuItem,...l===le.z.Pill?{width:"fit-content",border:"solid 1px",paddingLeft:0,paddingRight:0,borderRadius:20,fontSize:12}:{}};return(0,L.jsx)(h.Z,{focused:r,disabled:t,icon:i(p.icon),title:a,onClick:m,style:v})}function Ce(e){let{disabled:t,value:a,pillTitle:n,store:i,dayRangeStore:o}=e;const d=(0,s.useCallback)((()=>ve(i,o,t)),[i,o,t]),c=(0,L.jsx)(l.FormattedMessage,{id:"searchDateFilter.shortTitle",defaultMessage:"Date"});return(0,L.jsx)(u.Z,{on:Boolean(a.starting||a.ending),icon:(0,r.C)({width:16,marginRight:6,fill:"currentColor"}),title:(0,L.jsx)("span",{children:n||c}),onClick:d})}function je(e){let{onChange:t,onMenuDismiss:a,showButtons:s,store:n,dayRangeStore:i}=e;return(0,L.jsxs)(M.Z,{topBorder:!0,style:{padding:"8px 8px 2px 8px",justifyContent:"space-between",display:"flex"},children:[(0,L.jsx)(x.Z,{onClick:()=>{n.clearTemporaryDateRange(),i.clearTemporaryDateRange(),t({starting:void 0,ending:void 0})},children:(0,L.jsx)(l.FormattedMessage,{id:"searchDateFilter.clearButton",defaultMessage:"Clear"})}),(0,L.jsx)(b.Z,{onClick:e=>{t(n.state.temporaryDateRange),xe(e,t,n,i,a,s)},children:(0,L.jsx)(l.FormattedMessage,{id:"searchDateFilter.applyButton",defaultMessage:"Apply"})})]})}function Se(e){let{onChange:t,onMenuDismiss:a,showButtons:n,title:o,header:r,sidebar:d,hideTime:c,value:u,store:g,dayRangeStore:m}=e;const p=(0,s.useCallback)((e=>xe(e,t,g,m,a,n)),[t,g,m,a,n]),f=(0,s.useCallback)((e=>ye(e,g,m)),[g,m]),h=(0,i.VK)((()=>function(e,t){const{temporaryDateRange:a}=t.state;return{...e,...a}}(u,g)),[u,g]);return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(Y,{title:o,value:h,onUpdate:f,store:g,dayRangeStore:m,onDismiss:p,footer:"footer"===n&&(0,L.jsx)(je,{onChange:t,onMenuDismiss:a,showButtons:n,store:g,dayRangeStore:m}),sidebar:d,hideTime:c,header:r}),"side"===n&&(0,L.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",width:"100%",padding:"0px 10px"},children:[(0,L.jsx)(x.Z,{isGray:!0,style:{marginLeft:"auto",marginRight:8},onClick:p,children:(0,L.jsx)(l.FormattedMessage,{defaultMessage:"Cancel",id:"searchDateFilter.cancelButton.label"})}),(0,L.jsx)(b.Z,{onClick:()=>t(g.state.temporaryDateRange),children:(0,L.jsx)(l.FormattedMessage,{defaultMessage:"Accept",id:"searchDateFilter.acceptButton.label"})})]})]})}function Te(e){let{mode:t,onChange:a,onMenuDismiss:o,showButtons:r,title:c,header:u,sidebar:g,hideTime:m,value:p,disabled:f,focused:h,icon:x,pillTitle:b,store:M,dayRangeStore:_}=e;const w=(0,n.O7)(),C=(0,l.useIntl)(),j=(0,s.useCallback)((e=>xe(e,a,M,_,o,r)),[a,M,_,o,r]),S=(0,s.useCallback)((()=>(0,L.jsx)(Se,{onChange:a,onMenuDismiss:o,showButtons:r,title:c,header:u,sidebar:g,hideTime:m,value:p,store:M,dayRangeStore:_})),[a,o,r,c,u,g,m,p,M,_]),T=he(w),k=t===le.z.Section,F=k?c:void 0,N=t===le.z.Section?(0,L.jsx)(_e,{disabled:f,value:p,focused:h,intl:C,onChange:a,store:M,dayRangeStore:_}):t===le.z.Button?(0,L.jsx)(we,{disabled:f,title:c,icon:x,focused:h,mode:t,store:M,dayRangeStore:_}):t===le.z.Pill?(0,L.jsx)(Ce,{disabled:f,value:p,pillTitle:b,store:M,dayRangeStore:_}):void(0,d.t1)(t),A=(0,i.VK)((()=>M.state.isOpen),[M]);return(0,L.jsx)(ce.Z,{title:F,marginAfter:k,children:(0,L.jsx)(v.Z,{debugName:"DateTimeFilter",capture:A,onUp:pe,onDown:pe,onEnter:pe,children:(0,L.jsx)(y.ZP,{popupType:ge(w),open:A,origin:N,render:S,onDismiss:j,placementToOrigin:y.ZP.Placement.Bottom,alignmentToOrigin:y.ZP.Alignment.Start,style:g?T.popupWithSidebar:T.popup})})})}function ke(e){let{mode:t,onChange:a,onMenuDismiss:n,showButtons:o,title:r,header:d,sidebar:c,hideTime:u,value:g,disabled:m,icon:p,store:f,dayRangeStore:h}=e;const v=(0,l.useIntl)(),x=(0,s.useCallback)((e=>xe(e,a,f,h,n,o)),[a,f,h,n,o]),b=(0,s.useCallback)((()=>(0,L.jsx)(Se,{onChange:a,onMenuDismiss:n,showButtons:o,title:r,header:d,sidebar:c,hideTime:u,value:g,store:f,dayRangeStore:h})),[a,n,o,r,d,c,u,g,f,h]),M=(0,i.VK)((()=>f.state.isOpen),[f]),_=t===le.z.Section?(0,L.jsx)(Me,{disabled:m,title:r,value:g,intl:v,onChange:a,store:f,dayRangeStore:h}):(0,L.jsx)(be,{disabled:m,icon:p,title:r,store:f,dayRangeStore:h});return(0,L.jsx)(y.ZP,{popupType:y.ZP.PopupType.SlideUp,open:M,origin:_,render:b,onDismiss:x,preventScaleTransition:!0})}},86249:(e,t,a)=>{a.d(t,{zq:()=>H,ZP:()=>J,UV:()=>Q,f4:()=>Y});a(57658);var s=a(67294),n=a(24405),i=a(56666),o=a(44495),r=a(37612),l=a(9291),d=a(1898),c=a(47307),u=a(40394),g=a(52275),m=a(58297),p=a(53695),f=a(64369),h=a(480),v=a(86628),x=a(43169),y=a(54642),b=a(97978),M=a(33954),_=a(52507),w=a(50506),C=a(13991),j=a(37810),S=a(74194),T=a(68785),k=a(85893);const F=(0,l.defineMessages)({samlConfigSubtitle:{id:"verifyDomainModal.addNewDomain.samlConfig.subtitle",defaultMessage:"Users with a verified domain can log in {br}using SAML SSO."},integrationSubtitle:{id:"verifyDomainModal.addNewDomain.integration.subtitle",defaultMessage:"Link preview integrations must verify {br}domains before they are published."}});const N=function(e){let{handleAddNewDomain:t,loading:a,verificationType:i}=e;const[o,r]=(0,s.useState)(""),c=!Boolean(o),u=(0,s.useCallback)((e=>{r(e.target.value)}),[]),g=(0,n.yK)((()=>({title:{fontFamily:j.Z.getCompositeFontFamily(C.SP).sans,fontSize:17,fontWeight:500,lineHeight:"24px",textAlign:"center",marginBottom:8},subtitle:{fontFamily:j.Z.getCompositeFontFamily(C.SP).sans,fontSize:14,fontWeight:400,lineHeight:"19px",textAlign:"center"},input:{marginTop:22,marginBottom:14},button:{width:"100%",opacity:c?.5:1}})),[c]);let p;switch(i){case"integration":p=F.integrationSubtitle;break;case"saml_config":p=F.samlConfigSubtitle;break;default:(0,d.t1)(i)}return(0,k.jsxs)(s.Fragment,{children:[(0,k.jsx)(f.Z,{style:g.title,children:(0,k.jsx)(l.FormattedMessage,{id:"verifyDomainModal.addNewDomain.title",defaultMessage:"Add new domain"})}),(0,k.jsx)(f.Z,{style:g.subtitle,isMultiline:!0,children:(0,k.jsx)(l.FormattedMessage,{...p,values:{br:(0,k.jsx)("br",{})}})}),(0,k.jsx)(S.Z,{value:o,style:g.input,placeholder:"notion.so",onChange:u}),(0,k.jsx)(m.Z,{onClick:()=>t(o),style:g.button,isLarge:!0,disabled:c,children:a?(0,k.jsx)(T.Z,{}):(0,k.jsx)(l.FormattedMessage,{id:"verifyDomainModal.addNewDomain.next",defaultMessage:"Next"})})]})};var A=a(63296);const I=function(e){let{domain:t,isExpired:a,onClose:i}=e;const o=(0,n.yK)((e=>({title:{fontFamily:j.Z.getCompositeFontFamily(C.SP).sans,fontSize:17,fontWeight:500,lineHeight:"24px",textAlign:"center",marginBottom:8},subtitle:{fontFamily:j.Z.getCompositeFontFamily(C.SP).sans,fontSize:14,fontWeight:400,lineHeight:"19px",textAlign:"center",marginBottom:22}})),[]);return(0,k.jsxs)(s.Fragment,{children:[(0,k.jsx)(f.Z,{style:o.title,isMultiline:!0,children:(0,k.jsx)(l.FormattedMessage,{id:"verifyDomainModal.invalidDomain.title",defaultMessage:"Unable to verify {domain}",values:{domain:t}})}),(0,k.jsx)(f.Z,{style:o.subtitle,isMultiline:!0,children:a?(0,k.jsx)(l.FormattedMessage,{id:"verifyDomainModal.invalidDomain.expired",defaultMessage:"The code for this domain's verification has expired."}):(0,k.jsx)(l.FormattedMessage,{id:"verifyDomainModal.invalidDomain.invalid",defaultMessage:"You are unable to verify this domain because it has already been verified by another workspace."})}),(0,k.jsx)(A.Z,{onClick:i,style:{width:"100%"},children:(0,k.jsx)(l.FormattedMessage,{id:"verifyDomainModal.invalidDomain.okay",defaultMessage:"Okay"})})]})},P=(0,l.defineMessages)({samlConfigSubtitle:{id:"verifyDomainModal.verifiedDomain.samlConfig.subtitle",defaultMessage:"Users are able to use this email domain to{br}log in using SAML SSO."},integrationSubtitle:{id:"verifyDomainModal.verifiedDomain.integration.subtitle",defaultMessage:"This integration can unfurl URLs containing this domain."}});const D=function(e){let{domain:t,onClose:a,verificationType:i}=e;const o=(0,n.yK)((()=>({title:{fontFamily:j.Z.getCompositeFontFamily(C.SP).sans,fontSize:17,fontWeight:500,lineHeight:"24px",textAlign:"center",marginBottom:8},subtitle:{fontFamily:j.Z.getCompositeFontFamily(C.SP).sans,fontSize:14,fontWeight:400,lineHeight:"19px",textAlign:"center",marginBottom:22}})),[]);let r;switch(i){case"saml_config":r=P.samlConfigSubtitle;break;case"integration":r=P.integrationSubtitle;break;default:(0,d.t1)(i)}return(0,k.jsxs)(s.Fragment,{children:[(0,k.jsx)(f.Z,{style:o.title,isMultiline:!0,children:(0,k.jsx)(l.FormattedMessage,{id:"verifyDomainModal.verifiedDomain.title",defaultMessage:"Successfully verified {domain}",values:{domain:t}})}),(0,k.jsx)(f.Z,{style:o.subtitle,isMultiline:!0,children:(0,k.jsx)(l.FormattedMessage,{...r,values:{br:(0,k.jsx)("br",{})}})}),(0,k.jsx)(A.Z,{onClick:a,style:{width:"100%"},children:(0,k.jsx)(l.FormattedMessage,{id:"verifyDomainModal.verifiedDomain.okay",defaultMessage:"Okay"})})]})};var E=a(75553),R=a(19584),Z=a(893),V=a(16402),L=a(64921);const B=function(e){let{handleVerifyDomain:t,domainVerification:a,loading:i}=e;const o=(0,h.O7)(),r=a.expiresAt-Date.now()<2*R.U6,d=(0,n.yK)((e=>({title:{fontFamily:j.Z.getCompositeFontFamily(C.SP).sans,fontSize:17,fontWeight:500,lineHeight:"24px",textAlign:"center",marginBottom:8},subtitle:{fontFamily:j.Z.getCompositeFontFamily(C.SP).sans,fontSize:14,fontWeight:400,lineHeight:"19px",textAlign:"center"},list:{paddingInlineStart:22,margin:"24px 0"},listItem:{fontFamily:j.Z.getCompositeFontFamily(C.SP).sans,fontSize:14,fontWeight:400,lineHeight:"19px",marginBottom:12},expiresSoonText:{color:"dark"===e.mode?e.accentColors.red[700]:e.accentColors.red[500]},copyButton:{borderRadius:4,padding:"4px 8px",display:"flex",alignItems:"center",justifyContent:"center",color:e.lightTextColor,fontFamily:j.Z.getCompositeFontFamily(C.SP).sans,fontSize:12,fontWeight:500,lineHeight:"14px"},copyIcon:{width:16,height:16,marginRight:4,fill:e.mediumIconColor},code:{width:"100%",color:e.mediumTextColor,fontFamily:j.Z.getCompositeFontFamily(C.SP).mono,fontSize:14,fontWeight:400,lineHeight:"18px"},codeContainer:{display:"flex",alignItems:"center",justifyContent:"center",border:`1px solid ${e.outlineButtonBorder}`,height:32,paddingLeft:12,paddingRight:12,borderRadius:4,marginTop:4,marginBottom:8}})),[]);return(0,k.jsxs)(s.Fragment,{children:[(0,k.jsx)(f.Z,{style:d.title,children:(0,k.jsx)(l.FormattedMessage,{id:"verifyDomainModal.verifyExistingDomain.title",defaultMessage:"Verify your domain"})}),(0,k.jsx)(f.Z,{style:d.subtitle,children:(0,k.jsx)(l.FormattedMessage,{id:"verifyDomainModal.verifyExistingDomain.subtitle",defaultMessage:"Follow these steps to finalize verification."})}),(0,k.jsx)(f.Z,{isSmall:!0,style:{marginTop:22},children:(0,k.jsx)(l.FormattedMessage,{id:"verifyDomainModal.verifyExistingDomain.verificationCodeLabel",defaultMessage:"Verification code"})}),(0,k.jsxs)("div",{style:d.codeContainer,children:[(0,k.jsx)(f.Z,{style:d.code,children:`notion-domain-verification=${a.verificationCode}`}),(0,k.jsxs)(L.Z,{onClick:function(){Z.RD({environment:o,stringValue:`notion-domain-verification=${a.verificationCode}`,copiedMessage:Z.tq.copiedLinkToClipboard})},style:d.copyButton,children:[(0,E.U)(d.copyIcon),(0,k.jsx)(l.FormattedMessage,{id:"verifyDomainModal.verifyExistingDomain.copy",defaultMessage:"Copy"})]})]}),(0,k.jsx)(f.Z,{style:r?d.expiresSoonText:void 0,isSmall:!0,children:(0,k.jsx)(l.FormattedMessage,{id:"verifyDomainModal.verifyExistingDomain.verificationCodeExpiresAt",defaultMessage:"Expires on {timeLeft}",values:{timeLeft:(0,V.gs)(a.expiresAt)}})}),(0,k.jsxs)("ol",{style:d.list,children:[(0,k.jsx)("li",{style:d.listItem,children:(0,k.jsx)(l.FormattedMessage,{id:"verifyDomainModal.verifyExistingDomain.instructionsDNS",defaultMessage:"Navigate to the DNS record section of your domain host."})}),(0,k.jsx)("li",{style:d.listItem,children:(0,k.jsx)(l.FormattedMessage,{id:"verifyDomainModal.verifyExistingDomain.instructionsTXT",defaultMessage:"Create a new TXT record and paste in the code above as the value."})}),(0,k.jsx)("li",{style:d.listItem,children:(0,k.jsx)(l.FormattedMessage,{id:"verifyDomainModal.verifyExistingDomain.instructionsHangTight",defaultMessage:"Typically, this change takes only minutes to occur, however, there are cases where it may take up to 72 hours for the DNS record to propagate."})}),(0,k.jsx)("li",{style:d.listItem,children:(0,k.jsx)(l.FormattedMessage,{id:"verifyDomainModal.verifyExistingDomain.instructionsVerify",defaultMessage:'Click "Verify" to notify Notion to check your DNS record.'})})]}),(0,k.jsx)(A.Z,{style:{width:"100%"},onClick:()=>t(a),disabled:i,children:i?(0,k.jsx)(T.Z,{}):(0,k.jsx)(l.FormattedMessage,{id:"verifyDomainModal.verifyExistingDomain.verify",defaultMessage:"Verify"})})]})};const U=function(e){const t=(0,h.O7)(),a=(0,l.useIntl)(),i=(0,n.Fg)(),[o,r]=(0,v.AF)(e.store,_.Z),{verificationType:u,verificationTargetId:g,refreshDomains:m}=e,p=(0,s.useCallback)((()=>{r((e=>({...e,loading:!1,modalOpen:!1})))}),[r]),f=(0,s.useCallback)((async e=>{r((e=>({...e,loading:!0})));const s="integration"===u?{type:u,integrationId:g,domain:e}:{type:u,spaceId:g,domain:e},n=await y.createDomainVerificationCode(t,s);if("success"===n.type){m(),b.j(t,"domain_verification_domain_added",{type:u});const e=n.data.domainVerification,a=(0,x.Hs)(e);r((e=>({...e,domainVerification:a,loading:!1})))}else c.showErrorMessage((0,M.wf)(a,n)),r((e=>({...e,loading:!1})))}),[t,r,g,m,u,a]),C=(0,s.useCallback)((async e=>{r((e=>({...e,loading:!0})));const s=await y.verifyDomain(t,{verificationId:e.id});if(b.j(t,"domain_verification_verification_attempted",{type:u}),"success"===s.type){m(),b.j(t,"domain_verification_domain_verified",{type:u});const a={type:"verified",domain:e.domain};r((e=>({...e,domainVerification:a,loading:!1})))}else c.showErrorMessage((0,M.wf)(a,s)),r((e=>({...e,loading:!1})))}),[t,a,r,m,u]),j=(0,s.useCallback)((()=>{if(!o.domainVerification)return(0,k.jsx)(N,{handleAddNewDomain:f,loading:o.loading,verificationType:u});switch(o.domainVerification.type){case"invalid":return(0,k.jsx)(I,{domain:o.domainVerification.domain,isExpired:Date.now()>o.domainVerification.expiresAt,onClose:p});case"unverified":return(0,k.jsx)(B,{handleVerifyDomain:C,domainVerification:o.domainVerification,loading:o.loading});case"verified":return(0,k.jsx)(D,{domain:o.domainVerification.domain,onClose:p,verificationType:u});default:(0,d.t1)(o.domainVerification)}}),[o.domainVerification,o.loading,C,f,p,u]);return(0,k.jsx)(w.Z,{open:o.modalOpen,preventHideChildrenWhileOpening:!0,onDismiss:p,render:()=>(0,k.jsx)("div",{style:{background:i.popoverBackground,width:410,padding:24,borderRadius:4},children:j()})})};var W=a(5478);const z=[{id:"domain",headerTitle:(0,k.jsx)(l.FormattedMessage,{id:"domainVerificationTable.table.header.domain",defaultMessage:"Domain"}),renderCell:e=>(0,k.jsx)(f.Z,{children:e.domain}),widthData:{width:100},sortable:!1},{id:"status",headerTitle:(0,k.jsx)(l.FormattedMessage,{id:"domainVerificationTable.table.header.status",defaultMessage:"Status"}),renderCell:e=>(0,k.jsx)(H,{status:e.status}),widthData:{width:100},sortable:!1},{id:"actions",headerTitle:null,renderCell:e=>(0,k.jsx)(G,{onShowDetails:e.onShowDetails,onRemove:e.onRemove}),widthData:{width:20},sortable:!1}],O=(0,l.defineMessages)({verifiedSAMLWarning:{defaultMessage:"Deleting this domain will prevent others with this email from logging in using SAML SSO.",id:"domainVerificationInput.securitySAMLSettings.emailDomainsSection.removeDomain.description"},verifiedIntegrationsWarning:{defaultMessage:"Deleting this domain will prevent integrations from unfurling urls that contain this domain.",id:"domainVerificationInput.myIntegrations.emailDomainsSection.removeDomain.description"},unverifiedDomainWarning:{defaultMessage:"Deleting this domain will restart its verification process. A new verification code will be generated for this domain in the next verification attempt.",id:"domainVerificationInput.securitySAMLSettings.emailDomainsSection.removeDomain.pending.description"}}),q={fontSize:17,fontWeight:500,lineHeight:"24px",textAlign:"center",marginBottom:8},K={fontSize:14,fontWeight:400,lineHeight:"19px",textAlign:"center"};function H(e){let{status:t}=e;const a=(0,n.yK)((e=>{const a={[W.YF.Success]:e.statusTokenBackground.green,[W.YF.Pending]:e.statusTokenBackground.yellow,[W.YF.Failure]:e.statusTokenBackground.red},s={[W.YF.Success]:e.statusTokenIndicator.green,[W.YF.Pending]:e.statusTokenIndicator.yellow,[W.YF.Failure]:e.statusTokenIndicator.red},n={[W.YF.Success]:e.statusTokenText.green,[W.YF.Pending]:e.statusTokenText.yellow,[W.YF.Failure]:e.statusTokenText.red};return{container:{background:a[t],color:n[t],display:"flex",justifyContent:"center",alignItems:"center",gap:6,borderRadius:18,height:20,paddingLeft:7,paddingRight:9},dot:{background:s[t],width:10,height:10,borderRadius:"100%"}}}),[t]);return(0,k.jsxs)("div",{style:a.container,children:[(0,k.jsx)("div",{style:a.dot}),$(t)]})}function G(e){let{onShowDetails:t,onRemove:a}=e;const s=(0,n.yK)((e=>({primaryIcon:{width:14,height:14,color:e.mediumIconColor,fill:"currentColor"},menuItem:{width:250},menuIcon:{width:14,height:14,color:e.regularIconColor,fill:"currentColor"}})),[]),d=[];return t&&d.push({key:"details",action:()=>t(),render:e=>(0,k.jsx)(g.Z,{...e,style:s.menuItem,focused:!1,icon:(0,o.D)(s.menuIcon),title:(0,k.jsx)(l.FormattedMessage,{defaultMessage:"View details",id:"securitySAMLSettings.emailDomainsSection.details"}),caption:(0,k.jsx)(l.FormattedMessage,{defaultMessage:"See more information about the state of this domain verification record.",id:"securitySAMLSettings.emailDomainsSection.detailsCaption"}),shouldWrapCaption:!0})}),a&&d.push({key:"remove",action:()=>a(),render:e=>(0,k.jsx)(g.Z,{...e,style:s.menuItem,focused:!1,icon:(0,r.y)(s.menuIcon),title:(0,k.jsx)(l.FormattedMessage,{defaultMessage:"Remove domain",id:"securitySAMLSettings.emailDomainsSection.remove"}),caption:(0,k.jsx)(l.FormattedMessage,{defaultMessage:"Delete this domain verification record.",id:"securitySAMLSettings.emailDomainsSection.removeCaption"}),shouldWrapCaption:!0})}),0===d.length?null:(0,k.jsx)(p.N,{hideDropdownIcon:!0,title:(0,i.o)(s.primaryIcon),items:d})}function $(e){switch(e){case W.YF.Success:return(0,k.jsx)(l.FormattedMessage,{defaultMessage:"Verified",id:"domainVerificationInput.emailDomainsSection.statusToken.verified"});case W.YF.Pending:return(0,k.jsx)(l.FormattedMessage,{defaultMessage:"Pending",id:"domainVerificationInput.emailDomainsSection.statusToken.pending"});case W.YF.Failure:return(0,k.jsx)(l.FormattedMessage,{defaultMessage:"Failed",id:"domainVerificationInput.emailDomainsSection.statusToken.failed"});default:(0,d.t1)(e)}}function Y(e){return{domain:e,status:W.YF.Success,data:{type:"verified",domain:e}}}function Q(e){return Date.now()>e.expiresAt||Boolean(e.invalidatedAt)?{domain:e.domain,status:W.YF.Failure,data:{type:"invalid",id:e.id,domain:e.domain,verificationCode:e.verificationCode,createdAt:e.createdAt,expiresAt:e.expiresAt,invalidatedAt:e.invalidatedAt}}:{domain:e.domain,status:W.YF.Pending,data:{type:"unverified",id:e.id,domain:e.domain,verificationCode:e.verificationCode,createdAt:e.createdAt,expiresAt:e.expiresAt,invalidatedAt:e.invalidatedAt}}}const J=function(e){const{disabled:t,domains:a,domainVerificationStore:i,verificationType:o,verificationTargetId:r,refreshDomains:g,onRemoveDomain:p,onClickAddDomain:h,renderOverrideAddDomainButton:v}=e,x=(0,n.yK)((e=>(0,u.b)({columnRenderInfo:z,theme:e,containerMarginTop:0})),[]);function y(){t||(h&&h(),i.setState({domainVerification:void 0,loading:!1,modalOpen:!0}))}const b=a.map((e=>{let{domain:a,status:s,data:n}=e;return{id:"verified"===n.type?a:n.id,isClickable:!1,domain:a,status:s,onShowDetails:t?void 0:()=>function(e){t||i.setState({domainVerification:e,loading:!1,modalOpen:!0})}(n),onRemove:t?void 0:()=>async function(e,t){let a;if(t===W.YF.Failure)return void p(e);t===W.YF.Pending?a=O.unverifiedDomainWarning:t===W.YF.Success?a="saml_config"===o?O.verifiedSAMLWarning:O.verifiedIntegrationsWarning:(0,d.t1)(t),await c.confirmUserAction({message:(0,k.jsx)("div",{style:q,children:(0,k.jsx)(l.FormattedMessage,{defaultMessage:"Are you sure you want to delete this domain?",id:"domainVerificationInput.emailDomainsSection.removeDomain.message"})}),description:(0,k.jsx)("div",{style:K,children:(0,k.jsx)(l.FormattedMessage,{...a})}),acceptLabel:(0,k.jsx)(l.FormattedMessage,{id:"domainVerificationInput.emailDomainsSection.removeDomain.accept",defaultMessage:"Delete domain"}),cancelLabel:(0,k.jsx)(l.FormattedMessage,{id:"domainVerificationInput.emailDomainsSection.removeDomain.cancel",defaultMessage:"Cancel"})})&&p(e)}(n,s)}}));return(0,k.jsxs)(s.Fragment,{children:[v?v(y):(0,k.jsx)(m.Z,{isLarge:!0,disabled:t,onClick:y,style:{margin:"4px 0px 16px",width:"fit-content"},children:(0,k.jsx)(l.FormattedMessage,{defaultMessage:"Add domain",id:"securitySAMLSettings.emailDomainsSection.addDomain"})}),(0,k.jsx)(u.D,{hideHeaderRowPadding:!0,showRowBorders:!0,columnRenderInfo:z,rows:b,styles:x,renderNoRowsComponent:()=>(0,k.jsx)(f.Z,{isSmall:!0,style:{marginTop:15,marginBottom:40,textAlign:"center"},children:(0,k.jsx)(l.FormattedMessage,{id:"securitySAMLSettings.emailDomainsSection.emptyTable",defaultMessage:"No domains configured."})})}),(0,k.jsx)(U,{store:i,verificationTargetId:r,verificationType:o,refreshDomains:g})]})}},66661:(e,t,a)=>{a.d(t,{e:()=>r});a(67294);var s=a(24211),n=a(9291),i=a(26388),o=a(85893);function r(e){let{num:t,abbreviateNumber:a}=e;const r=(0,n.useIntl)(),l=(0,s.E2)(r),d=t.toLocaleString(l),c=Intl.NumberFormat(l,{notation:"compact",maximumFractionDigits:1}).format(t);return a?(0,o.jsx)(i.ZP,{placement:i.ug.Bottom,render:e=>(0,o.jsx)("span",{...e,children:c}),renderTooltip:()=>d}):(0,o.jsx)("span",{children:d})}},46978:(e,t,a)=>{a.d(t,{Z:()=>r});var s=a(67294),n=a(24405),i=a(85893);function o(e,t){let{isSelected:a}=e;const{radioButtonStyle:s,dotStyle:o}=(0,n.yK)((e=>({radioButtonStyle:{display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:16,height:16,borderRadius:16,marginRight:8,background:a?e.blueColor:e.whiteButtonBackground,border:a?"none":`1px solid ${e.radioButtonBorder}`,transition:"background 100ms ease-out"},dotStyle:{width:6,height:6,borderRadius:6,background:e.regularInvertedTextColor,transition:"opacity 100ms ease-out",opacity:a?1:0}})),[a]);return(0,i.jsx)("div",{ref:t,style:s,children:(0,i.jsx)("div",{style:o})})}const r=s.forwardRef(o)},5478:(e,t,a)=>{a.d(t,{YF:()=>l,ZP:()=>c});a(67294);var s=a(24405),n=a(4023),i=a(26388),o=a(85567),r=a(85893);const l={Success:"success",Pending:"pending",Failure:"failure"};const d={display:"flex",justifyContent:"center",alignItems:"baseline"},c=function(e){let{status:t,value:a,renderTooltip:c,...u}=e;const g=(0,s.Fg)(),m={[l.Success]:g.statusTokenBackground.green,[l.Pending]:g.statusTokenBackground.yellow,[l.Failure]:g.statusTokenBackground.red},p={[l.Success]:g.statusTokenIndicator.green,[l.Pending]:g.statusTokenIndicator.yellow,[l.Failure]:g.statusTokenIndicator.red},f={[l.Success]:g.statusTokenText.green,[l.Pending]:g.statusTokenText.yellow,[l.Failure]:g.statusTokenText.red};return c?(0,r.jsx)(o.Z,{...u,backgroundColor:m[t],color:f[t],value:(0,r.jsx)(i.ZP,{placement:n.u.Bottom,alignment:n.v.Start,renderTooltip:c,render:e=>(0,r.jsxs)("div",{style:d,...e,children:[(0,r.jsx)("div",{style:{background:p[t],width:8,height:8,borderRadius:"100%",marginRight:4}}),a]})})}):(0,r.jsx)(o.Z,{...u,backgroundColor:m[t],color:f[t],value:(0,r.jsxs)("div",{style:d,children:[(0,r.jsx)("div",{style:{background:p[t],width:8,height:8,borderRadius:"100%",marginRight:4}}),a]})})}},719:(e,t,a)=>{a.d(t,{Z:()=>d});a(67294);var s=a(480),n=a(24405),i=a(98742),o=a(74194),r=a(85893);const l={flexGrow:1,flexShrink:1,flexBasis:60,minWidth:60,width:"auto",lineHeight:"20px"};const d=function(e){let{readOnly:t,onClick:a,style:i,tokens:o,value:l,onRemoveLastToken:d,onChange:m,onSubmit:p,onBlur:f,focus:h,type:v,placeholder:x}=e;const y=(0,n.Fg)(),b=(0,s.O7)(),{device:M}=b;return(0,r.jsxs)("div",{className:t?void 0:"notion-focusable-within",onClick:a,style:M.isMobile?u(y,i):c(y,i),children:[o,(0,r.jsx)(g,{tokens:o,value:l,onRemoveLastToken:d,onChange:m,onSubmit:p,onBlur:f,focus:h,readOnly:t,type:v,placeholder:x})]})};function c(e,t){return{display:"flex",flexWrap:"wrap",alignItems:"flex-start",minHeight:32,boxShadow:e.inputBoxShadow,background:e.inputBackground,borderRadius:4,fontSize:14,cursor:"text",overflow:"hidden",padding:"7px 9px 0px",...t}}function u(e,t){return{...c(e,t),fontSize:14,padding:"7px 10px 0"}}function g(e){let{tokens:t,value:a,onRemoveLastToken:n,onChange:d,onSubmit:c,onBlur:u,focus:g,readOnly:m,type:p,placeholder:f}=e;const h=(0,s.O7)(),{device:v}=h,x=0===t.length;return(0,r.jsx)(o.Z,{format:o.B.Transparent,...(0,i.Z)({onKeyDown:e=>function(e,t,a){"Backspace"===e.key&&0===t.length&&a()}(e,a,n)},{onChange:d}),value:a,onSubmit:c,onBlur:u,focus:g,style:{...l,margin:v.isMobile?"0 8px 8px 0":"0 6px 6px 0"},readOnly:m,inputStyle:{height:18},size:1,type:p,placeholder:x?f:"",autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:!1})}},73075:(e,t,a)=>{a.d(t,{q:()=>d});a(67294);var s=a(24405),n=a(80750),i=a(9291),o=a(37810),r=(a(95477),a(63296)),l=a(85893);function d(e){let{runNewSearch:t,error:a}=e;const d=(0,s.yK)((e=>({container:{marginTop:48,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},headerIcon:{width:28,height:28,color:e.redBadgeBackground,fill:"currentColor"},title:{margin:"8px auto",fontWeight:o.Z.fontWeight.medium,fontSize:16},description:{fontWeight:o.Z.fontWeight.regular,fontSize:14,lineHeight:1.3,color:e.lightTextColor,textAlign:"center",width:328,margin:"0 auto 16px"},errorMessage:{borderRadius:4,background:e.cardBackground,fontFamily:o.Z.baseFontFamily.mono,fontSize:12,color:e.lightTextColor,padding:"18px 24px",margin:"0 auto 12px"},errorButton:{width:195,margin:"8px auto 0",textAlign:"center"}})),[]);return(0,l.jsxs)("div",{style:d.container,children:[(0,n.l)(d.headerIcon),(0,l.jsx)("h1",{style:d.title,children:(0,l.jsx)(i.FormattedMessage,{id:"adminContentSearchTab.pagesTable.error.title",defaultMessage:"Something went wrong"})}),(0,l.jsx)("p",{style:d.description,children:(0,l.jsx)(i.FormattedMessage,{id:"adminContentSearchTab.pagesTable.error.description",defaultMessage:"Something went wrong when we were loading the results. Try to run your search again."})}),null,(0,l.jsx)(r.Z,{style:d.errorButton,onClick:()=>t(!0),children:(0,l.jsx)(i.FormattedMessage,{id:"adminContentSearchTab.pagesTable.error.confirm",defaultMessage:"Retry"})})]})}},53855:(e,t,a)=>{a.d(t,{A:()=>f,e:()=>h});var s=a(67294),n=a(86628),i=a(87479),o=a(72141),r=a(29369),l=a(9291),d=a(1898),c=a(98165),u=a(80444),g=a(6258),m=a(69219),p=a(85893);function f(e){let{blockStore:t}=e;const[a,l]=(0,s.useState)(),{currentSpaceStore:d}=(0,n.VK)((()=>u.default.state),[]),[f,v]=(0,n.VK)((()=>{const e=c.fJ(t),a=i.Wo(e),s=a.filter(o.jg).filter((e=>{var t;return null==d||null===(t=d.getSpaceUserStore(e.user_id))||void 0===t?void 0:t.isMember()}));return[a,s]}),[d,t]);(0,s.useEffect)((()=>{!async function(){const e=await i.uq({permissionItems:f,spaceUserPermissions:v,hasTeamLevelGuests:function(e){return!!d&&g.zX.createChildStore(d,{table:r.e0,id:e}).getRawMembership().some((e=>"team_level_guest"===e.type))}});l(e)}()}),[d,t,f,v]);const x=(0,s.useMemo)((()=>{if(a)return h(a)}),[a]);return(0,p.jsx)(m.i,{useThinTitle:!0,title:x})}function h(e){switch(e){case"private":return(0,p.jsx)(l.FormattedMessage,{id:"adminContentSearchTab.pagesTable.audienceCell.private",defaultMessage:"Private"});case"shared_internally":return(0,p.jsx)(l.FormattedMessage,{id:"adminContentSearchTab.pagesTable.audienceCell.sharedInternally",defaultMessage:"Shared internally"});case"shared_externally":return(0,p.jsx)(l.FormattedMessage,{id:"adminContentSearchTab.pagesTable.audienceCell.sharedExternally",defaultMessage:"Shared externally"});case"shared_to_web":return(0,p.jsx)(l.FormattedMessage,{id:"adminContentSearchTab.pagesTable.audienceCell.publishedToWeb",defaultMessage:"Published to web"});default:(0,d.t1)(e)}}},36550:(e,t,a)=>{a.d(t,{y:()=>l});var s=a(67294),n=a(9291),i=a(67558),o=a(57702),r=a(85893);function l(e){let{spaceStore:t,createdByFilterIds:a,setCreatedByFilter:l,runNewSearch:d,includeGuests:c}=e;const u=(0,i.R)({spaceStore:t}),g=(0,s.useMemo)((()=>u.loading?[]:c?[...u.members,...u.guests]:u.members),[u,c]),m=(0,s.useMemo)((()=>u.loading?new Set:new Set(u.guests.map((e=>e.id)))),[u]);const p=(0,s.useMemo)((()=>a.map((e=>({id:e,type:"user"})))),[a]);return(0,r.jsx)(o.B,{userStores:g,title:(0,r.jsx)(n.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.createdBy.title",defaultMessage:"Created by"}),selectedItems:p,setSelectedItems:function(e){const t=e.map((e=>{let{id:t}=e;return t}));l(t)},onMenuClose:d,guestUserIdSet:m})}},79782:(e,t,a)=>{a.d(t,{f:()=>y});var s=a(67294),n=a(86628),i=a(24405),o=a(40506),r=a(69651),l=a(42853),d=a(9291),c=a(1898),u=a(27617),g=a(97638),m=a(64921),p=a(52275),f=a(14871),h=a(23096),v=a(8319),x=a(85893);function y(e){let{lastEditedTime:t,createdTime:a,setLastEditedTime:i,setCreatedOnTime:l}=e;const m=(0,d.useIntl)(),[p,f]=(0,s.useState)("createdTime"),y=(0,s.useMemo)((()=>{switch(p){case"createdTime":return a;case"lastEditedTime":return t;default:(0,c.t1)(p)}}),[t,a,p]),M=(0,s.useMemo)((()=>{switch(p){case"createdTime":return l;case"lastEditedTime":return i;default:(0,c.t1)(p)}}),[i,l,p]);const _=(0,n.VK)((()=>{if((0,u.mK)(y))switch(p){case"createdTime":return(0,x.jsx)(d.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.createdOn.title",defaultMessage:"Created on"});case"lastEditedTime":return(0,x.jsx)(d.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.lastEditedOn.title",defaultMessage:"Last edited on"});default:(0,c.t1)(p)}const e=(0,u.Hq)(y),t=g._Q(e,m,o.sF);switch(p){case"createdTime":return(0,x.jsx)(d.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.createdOn.titleWithDateRange",defaultMessage:"Created on: {dateRangeString}",values:{dateRangeString:t}});case"lastEditedTime":return(0,x.jsx)(d.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.lastEditedOn.titleWithDateRange",defaultMessage:"Last edited on: {dateRangeString}",values:{dateRangeString:t}});default:(0,c.t1)(p)}}),[y,p,m]);return(0,x.jsx)(h.Z,{header:(0,x.jsx)(b,{selectedItem:p,setSelectedItem:function(e){f(e)}}),mode:v.z.Pill,focused:!1,hideTime:!0,pillTitle:_,title:_,icon:r.C,value:y,showButtons:"footer",onChange:e=>{M(e)}})}function b(e){let{selectedItem:t,setSelectedItem:a}=e;const s=(0,i.yK)((e=>({button:{margin:"14px 12px 4px",padding:"2px 8px",width:"fit-content",borderRadius:4},text:{display:"flex",alignItems:"center",color:e.mediumTextColor,fill:e.lightIconColor,fontWeight:500,fontSize:13},icon:{height:10,width:10,marginLeft:4}})),[]),n={width:190,items:["createdTime","lastEditedTime"],selectedItem:t,getKey:e=>e,onSelect:e=>a(e),renderItem:e=>(0,x.jsx)(p.Z,{title:M(e.value),...e}),renderOrigin:e=>(0,x.jsx)(m.Z,{...e,style:s.button,children:(0,x.jsxs)("div",{style:s.text,children:[M(t),(0,l.i)(s.icon)]})})};return(0,x.jsx)(f.Z,{...n,mobileActionSheet:!0})}function M(e){return{lastEditedTime:(0,x.jsx)(d.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.lastEditedOn.option",defaultMessage:"Last edited on"}),createdTime:(0,x.jsx)(d.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.createdOn.option",defaultMessage:"Created on"})}[e]}},66994:(e,t,a)=>{a.d(t,{O:()=>p,p:()=>g});var s=a(67294),n=a(24405),i=a(49019),o=a(9291),r=a(53965),l=a(33929),d=a(74194),c=a(58297),u=a(85893);let g=function(e){return e.OnChange="on-change",e.Button="button",e}({});const m=(0,o.defineMessages)({placeholder:{id:"adminContentSearchTab.pagesTable.filters.query.placeholder",defaultMessage:"Search by page ID, title or content"}});function p(e){let{mode:t,query:a,setQueryFilter:p,placeholderText:f,disabled:h}=e;const[v,x]=(0,s.useState)(a??""),y=function(e){return(0,n.yK)((t=>({searchIcon:{color:t.lightIconColor,width:14},input:{padding:"4px 4px 4px 10px",margin:"0 auto 8px",width:"100%",background:t.modalBackground,opacity:e?.5:1},button:{opacity:e?.5:1}})),[e])}(h),b=(0,s.useMemo)((()=>(0,r.Ds)(p,500)),[p]),M=(0,s.useCallback)((e=>{x(e.target.value),t===g.OnChange&&b(e.target.value)}),[b,t]);return(0,u.jsx)(d.Z,{value:v,style:y.input,left:(0,i.e)(y.searchIcon),placeholder:f||l.default.formatMessage(m.placeholder),focus:!h&&void 0,onChange:M,onSubmit:()=>p(v),disabled:h,right:t===g.Button?(0,u.jsx)(c.Z,{onClick:()=>p(v),disabled:h,style:y.button,children:(0,u.jsx)(o.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.query.searchButton",defaultMessage:"Search"})}):null})}},35389:(e,t,a)=>{a.d(t,{p:()=>N});a(57658);var s=a(67294),n=a(86628),i=a(24405),o=a(84619),r=a(26774),l=a(9291),d=a(1898),c=a(45257),u=a(33929),g=a(60709),m=a(95697),p=a(29798),f=a(74016),h=a(52275),v=a(78140),x=a(32163),y=a(89728),b=a(53437),M=a(58297),_=a(72495),w=a(64369),C=a(46978),j=a(91642),S=a(85567),T=a(719),k=a(85893);const F=(0,l.defineMessages)({placeholder:{id:"adminContentSearchTab.pagesTable.filters.teams.placeholder",defaultMessage:"Search for teamspaces..."}});function N(e){let{selectedTeamIds:t,setSelectedTeamIds:a,onMenuClose:N,teamStores:I}=e;const P=(0,n.qz)(void 0,p.Z),D=(0,i.yK)((e=>({optionContainer:{display:"flex",flexDirection:"row",alignItems:"center"},optionAvatar:{marginRight:4},pillContainer:{margin:"0px 6px 6px 0px",background:e.legacyDefaultSelectColor,height:20},pillContents:{display:"inline-flex",flexDirection:"row",justifyContent:"center",alignItems:"center",gap:4},pillText:{marginLeft:4},container:{padding:"6px 0 6px"},input:{margin:"4px auto",width:"95%"},footer:{padding:"8px 8px 2px 8px",justifyContent:"space-between",display:"flex"},icon:{width:16,marginRight:4,fill:"currentColor"},teamIcon:{marginRight:8},optionTitle:{display:"block"},noResultsMessage:{width:"100%",margin:"8px 12px"},optionCaption:{display:"block",color:e.mediumTextColor,fontSize:12,lineHeight:"15px"}})),[]),[E,R]=(0,s.useState)(!1),[Z,V]=(0,s.useState)(""),L=(0,n.VK)((()=>[...I].sort(m.KP)),[I]),B=(0,n.VK)((()=>t.map((e=>I.find((t=>t.id===e)))).filter(d.$K)),[I,t]);function U(){R(!1),V(""),N()}function W(){V(""),a([])}function z(e){const s=t.includes(e)?[]:[e];a(s),V("")}const O=(0,s.useCallback)((e=>{V(e.target.value)}),[]),q=(0,n.VK)((()=>B.map((e=>{const s=e.getName();return(0,k.jsx)(S.Z,{isSingle:!0,format:o.lo.Inline,showRemoveButton:!0,onClickRemove:()=>{const s=t.filter((t=>t!==e.id));a(s)},style:D.pillContainer,value:(0,k.jsxs)("div",{style:D.pillContents,children:[(0,k.jsx)(f.p,{disabled:!0,store:e,size:16}),(0,k.jsx)(w.Z,{style:D.pillText,children:s})]})},e.id)}))),[B,t,a,D]);const K=(0,k.jsx)(c.Z,{on:t.length>0,icon:(0,r.O)(D.icon),title:(0,k.jsx)(l.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.teams.title",defaultMessage:"Teamspace"}),onClick:()=>R(!0)});return(0,k.jsx)(j.Z,{children:(0,k.jsx)(b.ZP,{popupType:b.ZP.PopupType.Popup,placementToOrigin:b.ZP.Placement.Bottom,alignmentToOrigin:b.ZP.Alignment.Start,open:E,render:function(){const e=[];for(const n of L){const a=n.getName(),s=n.getTeamAccessLevel(),i=n.isDefault();a&&a.toLocaleLowerCase().includes(Z)&&e.push({key:n.id,action:()=>z(n.id),render:e=>(0,k.jsx)(h.Z,{...e,icon:(0,k.jsx)(C.Z,{isSelected:t.includes(n.id)}),focused:!1,title:(0,k.jsxs)("div",{style:D.optionContainer,children:[(0,k.jsx)(f.p,{disabled:!0,store:n,size:24,style:D.teamIcon}),(0,k.jsxs)("div",{style:{paddingTop:4,paddingBottom:4},children:[(0,k.jsx)(w.Z,{style:D.optionTitle,children:a}),(0,k.jsx)(w.Z,{style:D.optionCaption,children:A(s,i)})]})]})})})}const a={key:"no-results",action:()=>{},render:e=>(0,k.jsx)(w.Z,{isSecondaryColor:!0,style:D.noResultsMessage,...e,children:(0,k.jsx)(l.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.teams.noResultsMessage",defaultMessage:"No results found."})})},s={key:"teamOptions",items:e.length>0?e:[a],render:e=>(0,k.jsx)(_.Z,{...e,title:null,loading:!1})};return(0,k.jsxs)("div",{style:D.container,children:[(0,k.jsx)(T.Z,{focus:!0,value:Z,style:D.input,placeholder:u.default.formatMessage(F.placeholder),onChange:O,onRemoveLastToken:W,tokens:q}),(0,k.jsx)(v.Z,{menuType:g.og.Popup,header:null,maxHeight:250,width:300,children:(0,k.jsx)(x.Z,{type:x.i.Vertical,store:P,initialFocus:0,sections:[s]})}),(0,k.jsxs)(_.Z,{topBorder:!0,style:D.footer,children:[(0,k.jsx)(y.Z,{onClick:W,children:(0,k.jsx)(l.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.teams.clearButton",defaultMessage:"Clear"})}),(0,k.jsx)(M.Z,{onClick:U,children:(0,k.jsx)(l.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.teams.doneButton",defaultMessage:"Done"})})]})]})},onDismiss:U,keepFocus:!0,origin:K,preventScaleTransition:!0})})}function A(e,t){if(t)return(0,k.jsx)(l.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.teams.caption.default",defaultMessage:"Default"});switch(e){case"private":return(0,k.jsx)(l.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.teams.caption.private",defaultMessage:"Private"});case"closed":return(0,k.jsx)(l.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.teams.caption.closed",defaultMessage:"Closed"});case"open":return(0,k.jsx)(l.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.teams.caption.open",defaultMessage:"Open"});default:(0,d.t1)(e)}}},57702:(e,t,a)=>{a.d(t,{B:()=>V});a(57658);var s=a(67294),n=a(86628),i=a(24405),o=a(84619),r=a(40462),l=a(22686),d=a(26774),c=a(7928),u=a(9291),g=a(1898),m=a(45257),p=a(33929),f=a(60709),h=a(16639),v=a(80444),x=a(29798),y=a(52275),b=a(60458),M=a(78140),_=a(32163),w=a(89728),C=a(53437),j=a(58297),S=a(31278),T=a(43145),k=a(72495),F=a(64369),N=a(45653),A=a(46978),I=a(91642),P=a(85567),D=a(719),E=a(85893);const R=(0,u.defineMessages)({usersPlaceholder:{id:"adminContentSearchTab.pagesTable.filters.users.usersPlaceholder",defaultMessage:"Search for users..."},usersAndGroupsPlaceholder:{id:"adminContentSearchTab.pagesTable.filters.users.usersAndGroupsPlaceholder",defaultMessage:"Search for users and groups..."}}),Z=10;function V(e){let{userStores:t,title:a,selectedItems:V,setSelectedItems:L,onMenuClose:B,isMultiSelect:U,includePermissionGroups:W,guestUserIdSet:z}=e;const O=(0,u.useIntl)(),q=(0,n.qz)(void 0,x.Z),K=(0,i.yK)((e=>({optionContainer:{display:"flex",flexDirection:"row",alignItems:"center"},optionAvatar:{marginRight:8},container:{padding:"6px 0 6px"},input:{margin:"4px auto",width:"95%",maxHeight:200,overflowY:"auto"},footer:{padding:"8px 8px 2px 8px",justifyContent:"space-between",display:"flex"},icon:{width:16,marginRight:4,fill:"currentColor"},defaultGroupIcon:{height:22,width:22,color:e.mediumTextColor,fill:"currentColor"},defaultGroupIconPill:{height:14,width:14,color:e.mediumTextColor,fill:"currentColor"},groupIconSpacing:{marginRight:8},pillContainer:{margin:"0px 6px 6px 0px",background:e.legacyDefaultSelectColor,height:20},guestPillContainer:{margin:"0px 6px 6px 0px",background:e.guestTokenBackground,height:20},guestIcon:{height:16,width:16,color:e.guestIconColor},pillContents:{display:"inline-flex",flexDirection:"row",justifyContent:"center",alignItems:"center"},pillText:{marginLeft:4},noResultsMessage:{width:"100%",margin:"8px 12px"},optionTitle:{display:"block"},optionCaption:{display:"block",color:e.mediumTextColor,fontSize:12,lineHeight:"15px"}})),[]),[H,G]=(0,s.useState)(Z),[$,Y]=(0,s.useState)(!1),[Q,J]=(0,s.useState)(""),X=t.length,ee=(0,n.VK)((()=>v.default.state.currentSpaceStore),[]),te=(0,s.useMemo)((()=>V.map((e=>{let{id:t}=e;return t}))),[V]),ae=(0,n.VK)((()=>{const e=v.default.state.currentSpaceStore;return W&&e?e.getPermissionGroups():[]}),[W]),se=(0,n.VK)((()=>te.map((e=>t.find((t=>t.id===e)))).filter(g.$K)),[te,t]),ne=(0,n.VK)((()=>te.map((e=>ae.find((t=>t.id===e)))).filter(g.$K)),[te,ae]);function ie(){G(Z),Y(!1),J(""),B()}function oe(){J(""),L([])}function re(e){e<5&&H<X&&G(H+Z)}function le(e){if(U){return te.includes(e.id)?[...V.filter((t=>{let{id:a}=t;return a!==e.id}))]:[...V,e]}return te.includes(e.id)?[]:[e]}function de(e){const t=le({id:e,type:"user"});L(t),J("")}function ce(e){const t=le({id:e,type:"permission_group"});L(t),J("")}const ue=(0,s.useCallback)((e=>{J(e.target.value)}),[]),ge=(0,n.VK)((()=>se.map((e=>{const t=(0,c.Nz)(O,e.getModel()),a=!!z&&z.has(e.id);return(0,E.jsx)(P.Z,{isSingle:!0,format:o.lo.Inline,showRemoveButton:!0,onClickRemove:()=>{const t=te.filter((t=>t!==e.id)).map((e=>({id:e,type:"user"})));L(t)},style:a?K.guestPillContainer:K.pillContainer,value:(0,E.jsxs)("div",{style:K.pillContents,children:[a?(0,r.o)(K.guestIcon):(0,E.jsx)(N.Z,{userStore:e,size:16}),(0,E.jsx)(F.Z,{style:K.pillText,children:t})]})},e.id)}))),[te,se,L,z,K,O]),me=(0,n.VK)((()=>ne.map((e=>{const t=h.kF({intl:O,group:e});return(0,E.jsx)(P.Z,{isSingle:!0,format:o.lo.Inline,showRemoveButton:!0,onClickRemove:()=>{const t=te.filter((t=>t!==e.id)).map((e=>({id:e,type:"permission_group"})));L(t)},style:K.pillContainer,value:(0,E.jsxs)("div",{style:K.pillContents,children:[(0,E.jsx)(S.Z,{disabled:!0,icon:e.icon&&ee?{pointer:ee.pointer,icon:e.icon}:void 0,size:14,isEmptyPage:!1,title:t,defaultIcon:(0,d.O)(K.defaultGroupIconPill),style:K.groupIconSpacing}),(0,E.jsx)(F.Z,{style:K.pillText,children:t})]})},e.id)}))),[te,ne,L,K,ee,O]);const pe=(0,E.jsx)(m.Z,{on:te.length>0,icon:(0,l.f)(K.icon),title:a,onClick:()=>Y(!0)});return(0,E.jsx)(I.Z,{children:(0,E.jsx)(C.ZP,{popupType:C.ZP.PopupType.Popup,placementToOrigin:C.ZP.Placement.Bottom,alignmentToOrigin:C.ZP.Alignment.Start,open:$,render:function(){const e=[];for(const r of t){var a;const t=(0,c.Nz)(O,r.getModel()),s=!!z&&z.has(r.id);(t.toLocaleLowerCase().includes(Q)||null!==(a=r.getEmail())&&void 0!==a&&a.toLocaleLowerCase().includes(Q))&&e.push({key:r.id,action:()=>de(r.id),render:e=>(0,E.jsx)(y.Z,{...e,icon:U?(0,E.jsx)(b.Z,{checked:te.includes(r.id),onClick:()=>de(r.id),size:16}):(0,E.jsx)(A.Z,{isSelected:te.includes(r.id)}),focused:!1,title:(0,E.jsxs)("div",{style:K.optionContainer,children:[(0,E.jsx)(N.Z,{userStore:r,size:24,style:K.optionAvatar}),(0,E.jsxs)("div",{style:{paddingTop:4,paddingBottom:4},children:[(0,E.jsx)(F.Z,{style:K.optionTitle,children:t}),(0,E.jsx)(F.Z,{style:K.optionCaption,children:s?(0,E.jsx)(u.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.users.guestCaption",defaultMessage:"Guest"}):(0,E.jsx)(u.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.users.memberCaption",defaultMessage:"Member"})})]})]})})})}const s=[];for(const t of ae){const e=h.kF({intl:O,group:t});e.toLocaleLowerCase().includes(Q)&&s.push({key:t.id,action:()=>ce(t.id),render:a=>(0,E.jsx)(y.Z,{...a,icon:U?(0,E.jsx)(b.Z,{checked:te.includes(t.id),onClick:()=>ce(t.id),size:16}):(0,E.jsx)(A.Z,{isSelected:te.includes(t.id)}),focused:!1,title:(0,E.jsxs)("div",{style:K.optionContainer,children:[(0,E.jsx)(S.Z,{disabled:!0,icon:t.icon&&ee?{pointer:ee.pointer,icon:t.icon}:void 0,size:22,isEmptyPage:!1,title:e,defaultIcon:(0,d.O)(K.defaultGroupIcon),style:K.groupIconSpacing}),(0,E.jsxs)("div",{style:{paddingTop:4,paddingBottom:4},children:[(0,E.jsx)(F.Z,{style:K.optionTitle,children:e}),(0,E.jsx)(F.Z,{style:K.optionCaption,children:(0,E.jsx)(u.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.users.groupCaption",defaultMessage:"Group"})})]})]})})})}const n={key:"no-results",action:()=>{},render:e=>(0,E.jsx)(F.Z,{isSecondaryColor:!0,style:K.noResultsMessage,...e,children:(0,E.jsx)(u.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.users.noResultsMessage",defaultMessage:"No results found."})})},i=[...e,...s],o={key:"userOptions",items:i.length>0?i.slice(0,H):[n],render:e=>(0,E.jsx)(k.Z,{...e,title:null,loading:!1})};return(0,E.jsxs)("div",{style:K.container,children:[(0,E.jsx)(D.Z,{focus:!0,value:Q,style:K.input,placeholder:p.default.formatMessage(W?R.usersAndGroupsPlaceholder:R.usersPlaceholder),onChange:ue,onRemoveLastToken:()=>{const e=V.slice(0,-1);L(e)},tokens:[...ge,...me]}),(0,E.jsxs)(M.Z,{menuType:f.og.Popup,header:null,maxHeight:250,width:300,children:[(0,E.jsx)(_.Z,{type:_.i.Vertical,store:q,initialFocus:0,sections:[o]}),(0,E.jsx)(T.Z,{onChange:re})]}),(0,E.jsxs)(k.Z,{topBorder:!0,style:K.footer,children:[(0,E.jsx)(w.Z,{onClick:oe,children:(0,E.jsx)(u.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.users.clearButton",defaultMessage:"Clear"})}),(0,E.jsx)(j.Z,{onClick:ie,children:(0,E.jsx)(u.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.users.doneButton",defaultMessage:"Done"})})]})]})},onDismiss:ie,keepFocus:!0,origin:pe,preventScaleTransition:!0})})}},34690:(e,t,a)=>{a.d(t,{N:()=>f});a(67294);var s=a(86628),n=a(24405),i=a(16184),o=a(26774),r=a(87479),l=a(72141),d=a(9291),c=a(98165),u=a(69219),g=a(36409),m=a(85893),p=function(e){return e.Shared="shared",e.Private="private",e.Hidden="hidden",e}(p||{});function f(e){let{blockStore:t,teamStore:a}=e;const f=(0,n.yK)((e=>({icon:{height:18,width:18,color:e.lightIconColor,fill:"currentColor"}})),[]),h=(0,s.VK)((()=>{const e=(0,c.fJ)(t),a=(0,r.Wo)(e),s=a.filter((e=>!(0,l.Le)(e)));return 1===s.length&&(0,l.jg)(s[0])?p.Private:a.length>0?p.Shared:p.Hidden}),[t]);return a?(0,m.jsx)(g.r,{useThinTitle:!0,teamStore:a}):function(){switch(h){case p.Shared:return(0,m.jsx)(u.i,{useThinTitle:!0,icon:(0,o.O)(f.icon),title:(0,m.jsx)(d.FormattedMessage,{id:"adminContentSearchTab.pagesTable.locationCell.shared",defaultMessage:"Shared"})});case p.Hidden:case p.Private:return(0,m.jsx)(u.i,{useThinTitle:!0,icon:(0,i.Q)(f.icon),title:(0,m.jsx)(d.FormattedMessage,{id:"adminContentSearchTab.pagesTable.locationCell.private",defaultMessage:"Private"})})}}()}},77883:(e,t,a)=>{a.d(t,{t:()=>l});a(67294);var s=a(86628),n=a(19889),i=a(6258),o=a(17290),r=a(85893);function l(e){let{blockStore:t,userIds:a,isClickable:l}=e;const d=(0,s.VK)((()=>a.map((e=>i.U6.createChildStore(t,{table:n.KJ,id:e})))),[t,a]);return(0,r.jsx)(o.G,{userStores:d,isClickable:l})}},85579:(e,t,a)=>{a.d(t,{a:()=>wt,Z:()=>Ct});var s=a(67294),n=a(480),i=a(86628),o=a(9291),r=a(88632),l=a(64369),d=a(27386),c=a(23189),u=a(24405),g=a(36610),m=a(61652),p=a(63296),f=a(85893);function h(e){let{spaceId:t,filters:a,disabled:i}=e;const[r,l]=(0,s.useState)(!1),d=(0,n.O7)(),c=i||r,h=(0,u.yK)((e=>({button:{opacity:c?.5:1}})),[c]);return(0,f.jsx)(p.Z,{style:h.button,disabled:c,onClick:async function(){l(!0),g.j_(d,{filters:a}),await m.gJ(d,{spaceId:t,filters:a}),l(!1)},children:(0,f.jsx)(o.FormattedMessage,{id:"adminContentSearchTab.export",defaultMessage:"Export results"})})}var v=a(98165),x=a(40394),y=a(68785),b=a(71291),M=a(44678),_=a(44495),w=a(16184),C=a(37810),j=a(12714),S=a(10259),T=a(18514),k=a(89728),F=a(58297);function N(e){const t=(0,n.O7)(),a=(0,u.yK)((e=>({container:{marginTop:48,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},headerIcon:{width:36,height:36,color:e.lightTextColor,fill:"currentColor"},disclaimerTitle:{margin:"12px auto",fontWeight:C.Z.fontWeight.medium,fontSize:16},disclaimer:{fontWeight:C.Z.fontWeight.regular,fontSize:14,color:e.lightTextColor,textAlign:"center",width:432,margin:"0 auto 16px"},acknowledgeButton:{width:195,margin:"8px auto 0"},learnMoreButton:{width:195,margin:"8px auto 0",justifyContent:"center",color:e.lightTextColor},learnMoreButtonIcon:{width:12,height:12,marginRight:4}})),[]),i=(0,s.useCallback)((()=>{g.vN(t),S.NY(t)}),[t]);return(0,f.jsxs)("div",{style:a.container,children:[(0,w.Q)(a.headerIcon),(0,f.jsx)("h1",{style:a.disclaimerTitle,children:(0,f.jsx)(o.FormattedMessage,{id:"adminContentSearchTab.pagesTable.acknowledgement.disclaimerTitle",defaultMessage:"Before using this feature"})}),(0,f.jsx)("p",{style:a.disclaimer,children:(0,f.jsx)(o.FormattedMessage,{id:"adminContentSearchTab.pagesTable.acknowledgement.disclaimer",defaultMessage:"As a workspace owner, you can use content search to find pages that you don't have access to, including the private pages of other workspace members. Consult with your organization's legal department on how to use this feature. Actions taken here will be recorded in the audit log."})}),(0,f.jsx)(F.Z,{style:a.acknowledgeButton,onClick:i,children:(0,f.jsx)(o.FormattedMessage,{id:"adminContentSearchTab.pagesTable.acknowledgement.confirm",defaultMessage:"Acknowledge"})}),(0,f.jsxs)(k.Z,{style:a.learnMoreButton,onClick:()=>{const e=(0,T.UY)("adminContentSearch");j.D({environment:t,url:e})},children:[(0,_.D)(a.learnMoreButtonIcon),(0,f.jsx)(o.FormattedMessage,{id:"adminContentSearchTab.pagesTable.acknowledgement.learnMore",defaultMessage:"Learn more"})]})]})}var A=a(73075),I=a(80721),P=a(26774),D=a(1898),E=a(45257),R=a(60709),Z=a(29798),V=a(52275),L=a(60458),B=a(78140),U=a(32163),W=a(53437),z=a(72495),O=a(91642);function q(e){let{selectedAudience:t,setSelectedAudience:a,onMenuClose:n,setPillTitleToActiveSelection:r}=e;const l=(0,i.qz)(void 0,Z.Z),d=(0,u.yK)((e=>({optionContainer:{display:"flex",flexDirection:"row",alignItems:"center"},optionAvatar:{marginRight:4},container:{padding:"6px 0 6px"},input:{margin:"4px auto",width:"95%"},footer:{padding:"8px 8px 2px 8px",justifyContent:"space-between",display:"flex"},icon:{width:16,marginRight:4,fill:"currentColor"},teamIcon:{marginRight:8}})),[]),[c,g]=(0,s.useState)(!1),m=["private","shared_internally","shared_externally","shared_to_web"];function p(){g(!1),n&&n()}function h(){a&&a([])}function v(e){const s=t.includes(e)?[...t.filter((t=>t!==e))]:[...t,e];a&&a(s)}const x=(0,f.jsx)(E.Z,{on:t.length>0,icon:(0,P.O)(d.icon),title:r&&t[0]?K(t[0]):(0,f.jsx)(o.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.audience.title",defaultMessage:"Audience"}),onClick:()=>g(!0),disabled:!a,hideChevron:!a});return a?(0,f.jsx)(O.Z,{children:(0,f.jsx)(W.ZP,{popupType:W.ZP.PopupType.Popup,placementToOrigin:W.ZP.Placement.Bottom,alignmentToOrigin:W.ZP.Alignment.Start,open:c,render:function(){const e={key:"teamOptions",items:m.map((e=>({key:e,action:()=>v(e),render:a=>(0,f.jsx)(V.Z,{...a,icon:(0,f.jsx)(L.Z,{checked:t.includes(e),onClick:()=>v(e),size:16}),focused:!1,title:K(e),caption:H(e),shouldWrapCaption:!0})}))),render:e=>(0,f.jsx)(z.Z,{...e,title:null,loading:!1})};return(0,f.jsxs)("div",{style:d.container,children:[(0,f.jsx)(B.Z,{menuType:R.og.Popup,header:null,maxHeight:250,width:300,children:(0,f.jsx)(U.Z,{type:U.i.Vertical,store:l,initialFocus:0,sections:[e]})}),(0,f.jsxs)(z.Z,{topBorder:!0,style:d.footer,children:[(0,f.jsx)(k.Z,{onClick:h,children:(0,f.jsx)(o.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.audience.clearButton",defaultMessage:"Clear"})}),(0,f.jsx)(F.Z,{onClick:p,children:(0,f.jsx)(o.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.audience.doneButton",defaultMessage:"Done"})})]})]})},onDismiss:p,keepFocus:!0,origin:x,preventScaleTransition:!0})}):x}function K(e){switch(e){case"private":return(0,f.jsx)(o.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.audience.label.private",defaultMessage:"Private"});case"shared_externally":return(0,f.jsx)(o.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.audience.label.external",defaultMessage:"Shared externally"});case"shared_internally":return(0,f.jsx)(o.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.audience.label.internal",defaultMessage:"Shared internally"});case"shared_to_web":return(0,f.jsx)(o.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.audience.label.publishedToWeb",defaultMessage:"Shared to web"});default:(0,D.t1)(e)}}function H(e){switch(e){case"private":return(0,f.jsx)(o.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.audience.caption.private",defaultMessage:"Pages that only a single workspace member has access to."});case"shared_externally":return(0,f.jsx)(o.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.audience.caption.external",defaultMessage:"Pages that are shared with guests or connections."});case"shared_internally":return(0,f.jsx)(o.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.audience.caption.internal",defaultMessage:"Pages that are shared with other workspace members."});case"shared_to_web":return(0,f.jsx)(o.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.audience.caption.publishedToWeb",defaultMessage:"Pages that are available for anyone to see on the web."});default:(0,D.t1)(e)}}function G(e){let{filters:t,setFilters:a}=e;const s=(0,u.yK)((e=>({container:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},title:{margin:"12px auto",fontWeight:C.Z.fontWeight.medium,fontSize:16},description:{fontWeight:C.Z.fontWeight.regular,fontSize:14,color:e.lightTextColor,textAlign:"center",width:386,margin:"0 auto 16px"},suggestion:{position:"relative",height:38,width:440,margin:"12px auto 0",justifyContent:"center",color:e.darkTextColor,boxShadow:e.borderBoxShadow},filterContainer:{margin:"0 8px",display:"flex",alignItems:"center",justifyContent:"center"},arrowIconContainer:{position:"absolute",right:12,transform:"rotate(180deg)"},arrowIcon:{width:18,height:18,opacity:.5,color:e.lightTextColor,fill:"currentColor"}})),[]);return(0,f.jsxs)("div",{style:s.container,children:[(0,f.jsx)("h1",{style:s.title,children:(0,f.jsx)(o.FormattedMessage,{id:"adminContentSearchTab.pagesTable.suggestions.title",defaultMessage:"Search pages in your workspace"})}),(0,f.jsx)("p",{style:s.description,children:(0,f.jsx)(o.FormattedMessage,{id:"adminContentSearchTab.pagesTable.suggestions.description",defaultMessage:"Use filters to find pages with specific sharing and permissions settings, such as:"})}),(0,f.jsxs)(k.Z,{style:s.suggestion,onClick:function(){a({query:"",lastEditedTime:{starting:void 0,ending:void 0},createdTime:{starting:void 0,ending:void 0},audience:["shared_externally"],teamIds:[]},{runSearchAfter:!0})},children:[(0,f.jsx)(o.FormattedMessage,{id:"adminContentSearchTab.pagesTable.suggestions.sharedToWeb",defaultMessage:"Search for pages <filter></filter>",values:{filter:()=>(0,f.jsx)("div",{style:s.filterContainer,children:(0,f.jsx)(q,{setPillTitleToActiveSelection:!0,selectedAudience:["shared_externally"]})})}}),(0,f.jsx)("div",{style:s.arrowIconContainer,children:(0,I.W)(s.arrowIcon)})]}),(0,f.jsxs)(k.Z,{style:s.suggestion,onClick:function(){a({query:"",lastEditedTime:{starting:void 0,ending:void 0},createdTime:{starting:void 0,ending:void 0},audience:["shared_to_web"],teamIds:[]},{runSearchAfter:!0})},children:[(0,f.jsx)(o.FormattedMessage,{id:"adminContentSearchTab.pagesTable.suggestions.sharedToWeb",defaultMessage:"Search for pages <filter></filter>",values:{filter:()=>(0,f.jsx)("div",{style:s.filterContainer,children:(0,f.jsx)(q,{setPillTitleToActiveSelection:!0,selectedAudience:["shared_to_web"]})})}}),(0,f.jsx)("div",{style:s.arrowIconContainer,children:(0,I.W)(s.arrowIcon)})]})]})}var $=a(53855),Y=a(34690),Q=a(15145),J=a(56666),X=a(27714),ee=a(62397),te=a(893),ae=a(84210),se=a(77907),ne=a(28578),ie=a(61766),oe=a(55899),re=a(8675),le=a(31945),de=a(73063);function ce(e){let{blockStore:t}=e;const a=(0,n.O7)(),r=(0,i.qz)(void 0,ie.Z),l=(0,i.qz)(void 0,re.Z),d=(0,i.qz)(void 0,oe.ZP),c=(0,u.yK)((e=>({changePermissionsIcon:{height:18,width:18,color:e.regularIconColor,fill:"currentColor"},copyLinkIcon:{height:15,width:15,color:e.regularIconColor,fill:"currentColor"}})),[]),[g,m]=(0,s.useState)(!1);(0,s.useEffect)((()=>{l.setState({...l.state,privatePageStore:t,changePermissionsEnabled:!0,loading:!1,error:void 0})}),[t,l]);const p={key:"actions",render:e=>(0,f.jsx)(z.Z,{...e}),items:[{key:"change-permissions",render:e=>(0,f.jsx)(V.Z,{...e,icon:(0,ee.I)(c.changePermissionsIcon),title:(0,f.jsx)(o.FormattedMessage,{id:"adminContentSearchTab.pagesTable.page.actions.changePermissions",defaultMessage:"Change permissions"})}),action:function(){m(!0)}},{key:"copy-link",render:e=>(0,f.jsx)(V.Z,{...e,icon:(0,X.N)(c.copyLinkIcon),title:(0,f.jsx)(o.FormattedMessage,{id:"adminContentSearchTab.pagesTable.page.actions.copyLink",defaultMessage:"Copy link to page"})}),action:async function(){const e=(0,ae.ZP)({store:t,pageVisitSource:Q.tY.CopyLink});await te.RD({environment:a,stringValue:e,copiedMessage:te.tq.copiedLinkToClipboard}),r.setState({open:!1})}}]};return(0,f.jsx)(le.ZP,{popupType:W.kQ.Popup,alignmentToOrigin:W.ZP.Alignment.Center,placementToOrigin:W.ZP.Placement.Right,style:{width:g?450:248},render:()=>g?(0,f.jsx)(se.LazyShareMenuContainer,{store:t,sudoModeStore:l,inviteTargetsStore:d,location:"admin_content_search"}):(0,f.jsx)(B.Z,{menuType:R.og.Popup,width:248,children:(0,f.jsx)(U.Z,{type:U.i.Vertical,initialFocus:void 0,sections:[p]})}),onClose:()=>{m(!1),ne.ZP.reset()},buttonPopupStore:r,renderOrigin:e=>(0,f.jsx)(de.Z,{icon:J.o,...e})})}a(57658);var ue=a(53695),ge=a(26388),me=a(77420),pe=a(6258),fe=a(36596),he=a(28992),ve=a(70301);function xe(e){let{botId:t}=e;const a=(0,o.useIntl)(),s=(0,n.O7)(),r=(0,i.VK)((()=>pe.t1.createUniqueRootStore(s,{table:me.cZ,id:t})),[t,s]),l=(0,i.VK)((()=>r.getDisplayName(a)),[r,a]),d=(0,i.VK)((()=>r.getParentStore()),[r]),c=(0,i.VK)((()=>{if(d){if(d instanceof pe.U6)return d.getDisplayName(a);if(d instanceof pe.H2)return d.getName()}}),[d,a]),g=(0,u.yK)((()=>({desktopIconStyle:{alignSelf:"center",width:24,fontSize:18}})),[]);return l?(0,f.jsx)(he.Z,{desktopIconStyle:g.desktopIconStyle,icon:(0,f.jsx)(ve.Z,{botStore:r,size:24}),title:l,caption:(0,f.jsx)(o.FormattedMessage,{id:"adminContentSearchTab.pagesTable.sharedWithCell.botMenuItem.createdBy",defaultMessage:"Created by {creatorName}",values:{creatorName:c}})}):(0,f.jsx)(ye,{})}function ye(){const e=(0,u.yK)((e=>({container:{userSelect:"none",minHeight:45,fontSize:14,padding:"4px 8px",display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center"},textContainer:{display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"flex-start",gap:6},icon:{flexGrow:0,flexShrink:0,width:24,height:24,borderRadius:"0.25em",marginRight:4,marginTop:1},title:{flexGrow:0,flexShrink:0,width:80,height:14,borderRadius:"0.25em",marginLeft:4},byline:{flexGrow:0,flexShrink:0,width:150,height:10,borderRadius:"0.25em",marginLeft:4}})),[]);return(0,f.jsxs)("div",{style:e.container,children:[(0,f.jsx)(fe.Z,{style:e.icon}),(0,f.jsxs)("div",{style:e.textContainer,children:[(0,f.jsx)(fe.Z,{emphasized:!1,style:e.title}),(0,f.jsx)(fe.Z,{emphasized:!1,style:e.byline})]})]})}var be=a(80444),Me=a(31278);const _e=(0,o.defineMessages)({editor:{id:"adminContentSearchTab.sharedWith.permissions.editor",defaultMessage:"Full access"},readAndWrite:{id:"adminContentSearchTab.sharedWith.permissions.readAndWrite",defaultMessage:"Can edit"},commentOnly:{id:"adminContentSearchTab.sharedWith.permissions.commentOnly",defaultMessage:"Can comment"},reader:{id:"adminContentSearchTab.sharedWith.permissions.reader",defaultMessage:"Can view"},none:{id:"adminContentSearchTab.sharedWith.permissions.none",defaultMessage:"None"}});function we(e,t){switch(t){case"editor":return e.formatMessage(_e.editor);case"read_and_write":return e.formatMessage(_e.readAndWrite);case"comment_only":return e.formatMessage(_e.commentOnly);case"reader":return e.formatMessage(_e.reader);case"none":return e.formatMessage(_e.none)}}function Ce(e){let{name:t,icon:a,role:s}=e;const n=(0,o.useIntl)(),r=(0,i.VK)((()=>be.default.state.currentSpaceStore),[]),l=we(n,s),d=(0,u.yK)((e=>({defaultIcon:{height:18,width:18,color:e.lightTextColor,fill:"currentColor"},defaultGroupIcon:{height:20,width:20,color:e.lightTextColor,fill:"currentColor"}})),[]);return(0,f.jsx)(he.Z,{desktopIconStyle:{alignSelf:"center",width:24,fontSize:18},icon:(0,f.jsx)(Me.Z,{disabled:!0,icon:a&&r?{pointer:r.pointer,icon:a}:void 0,size:20,isEmptyPage:!1,title:t,defaultIcon:(0,P.O)(d.defaultGroupIcon)}),title:t||(0,f.jsx)(o.FormattedMessage,{id:"adminContentSearchTab.pagesTable.sharedWithCell.untitledPage",defaultMessage:"Untitled{maybeRoleString}",values:{maybeRoleString:l?` · ${l}`:""}}),caption:(0,f.jsx)(o.FormattedMessage,{id:"adminContentSearchTab.pagesTable.sharedWithCell.group",defaultMessage:"Group{maybeRoleString}",values:{maybeRoleString:l?` · ${l}`:""}})})}var je=a(72141),Se=a(74016);function Te(e){let{permissionItem:t}=e;const a=(0,o.useIntl)(),s=(0,i.VK)((()=>be.default.state.currentSpaceStore),[]),n=(0,i.VK)((()=>{var e;return null===(e=be.default.state.currentSpaceStore)||void 0===e?void 0:e.getName()}),[]),r=null==t?void 0:t.role,l=(0,je.iC)(r)?we(a,r):void 0;return(0,f.jsx)(he.Z,{desktopIconStyle:{alignSelf:"center",width:24},icon:s?(0,f.jsx)(Se.p,{disabled:!0,store:s,size:24}):void 0,title:n,caption:(0,f.jsx)(o.FormattedMessage,{id:"adminContentSearchTab.pagesTable.sharedWithCell.spaceMembers",defaultMessage:"Members{maybeRoleString}",values:{maybeRoleString:l?` · ${l}`:""}})})}var ke=a(91192),Fe=a(29369);function Ne(e){let{teamId:t,role:a,onlyOwners:s}=e;const r=(0,n.O7)(),l=(0,o.useIntl)(),d=(0,i.VK)((()=>new pe.zX(r,{table:Fe.e0,id:t})),[r,t]),c=we(l,a),u=(0,i.VK)((()=>d.getName()),[d]),g=u||(0,f.jsx)(o.FormattedMessage,{id:"adminContentSearchTab.pagesTable.sharedWithCell.unknownTeamName",defaultMessage:"Private teamspace"});return(0,f.jsx)(he.Z,{desktopIconStyle:{alignSelf:"center",width:24},icon:u?(0,f.jsx)(Se.p,{disabled:!0,store:d,size:24}):(0,ke.x)(),title:g,caption:s?(0,f.jsx)(o.FormattedMessage,{id:"adminContentSearchTab.pagesTable.sharedWithCell.teamOwners",defaultMessage:"Owners{maybeRoleString}",values:{maybeRoleString:c?` · ${c}`:""}}):(0,f.jsx)(o.FormattedMessage,{id:"adminContentSearchTab.pagesTable.sharedWithCell.teamMembers",defaultMessage:"Members{maybeRoleString}",values:{maybeRoleString:c?` · ${c}`:""}})})}var Ae=a(64684),Ie=a(46654),Pe=a(88893),De=a(88280);var Ee=a(19889),Re=a(7928),Ze=a(45653);function Ve(e){let{userId:t,role:a,isGuest:s}=e;const r=(0,o.useIntl)(),l=(0,n.O7)(),{userStore:d,userName:c}=(0,i.VK)((()=>{const e=new pe.U6(l,{table:Ee.KJ,id:t}),a=(0,Re.Nz)(r,e.getModel());return{userStore:e,userName:a}}),[l,t,r]),u=we(r,a);return(0,f.jsx)(he.Z,{desktopIconStyle:{alignSelf:"center",width:24},icon:(0,f.jsx)(Ze.Z,{userStore:d,size:24}),title:c,caption:s?(0,f.jsx)(o.FormattedMessage,{id:"adminContentSearchTab.pagesTable.sharedWithCell.guest",defaultMessage:"Guest{maybeRoleString}",values:{maybeRoleString:u?` · ${u}`:""}}):(0,f.jsx)(o.FormattedMessage,{id:"adminContentSearchTab.pagesTable.sharedWithCell.member",defaultMessage:"Member{maybeRoleString}",values:{maybeRoleString:u?` · ${u}`:""}})})}const Le=(0,o.defineMessages)({sharedWithWorkspaceMembers:{id:"adminContentSearchTab.pagesTable.sharedWithCell.sharedWithWorkspaceMembers",defaultMessage:"Workspace members"},sharedWithTeamOwners:{id:"adminContentSearchTab.pagesTable.sharedWithCell.sharedWithTeamOwners",defaultMessage:"Teamspace owners"},sharedWithTeamMembers:{id:"adminContentSearchTab.pagesTable.sharedWithCell.sharedWithTeamMembers",defaultMessage:"Teamspace members"},sharedWithMembers:{id:"adminContentSearchTab.pagesTable.sharedWithCell.sharedWithMembers",defaultMessage:"{numMembers, plural, one {# member} other {# members}}"},sharedWithGroups:{id:"adminContentSearchTab.pagesTable.sharedWithCell.sharedWithGroups",defaultMessage:"{numGroups, plural, one {# group} other {# groups}}"},sharedWithGuests:{id:"adminContentSearchTab.pagesTable.sharedWithCell.sharedWithGuests",defaultMessage:"{numGuests, plural, one {# guest} other {# guests}}"},sharedWithBots:{id:"adminContentSearchTab.pagesTable.sharedWithCell.sharedWithBots",defaultMessage:"{numBots, plural, one {# connection} other {# connections}}"},separator:{defaultMessage:", ",id:"adminContentSearchTab.pagesTable.sharedWithCell.separator"}});function Be(e){let{blockStore:t}=e;const a=function(e){return(0,i.VK)((()=>{const t=De.subscriptionDataStoreInstance.state,a=t?(0,Pe.CM)(t):[],s=be.default.state.currentSpaceStore,n=(0,Ie.YO)(e),i=(null==s?void 0:s.getPermissionGroups())||[],o=(0,v.VP)(e),r=n.find((e=>{let{permissionItem:t}=e;return je.$D(t)})),l=n.find((e=>{let{permissionItem:t}=e;return je.ix(t)})),d=o?n.find((e=>{let{permissionItem:t}=e;return(0,Ae.J2)(t,o.id)})):void 0,c=n.map((e=>{let{permissionItem:t}=e;return t})).filter(je.zU),u=n.map((e=>{let{permissionItem:t}=e;return t})).filter(je.LW),g=n.map((e=>{let{permissionItem:t}=e;return t})).filter(je.hV).reduce(((e,t)=>{const a=t.group_id,s=t.role,n=i.find((e=>e.id===a));if(n){const t={...n,role:s};e.push(t)}return e}),[]),[m,p]=n.map((e=>{let{permissionItem:t}=e;return t})).filter(je.jg).reduce(((e,t)=>{const s=a.find((e=>e.userId===t.user_id));return Boolean(s&&!je.zz(s.role)&&!je.J5(s.role))?[e[0].concat(t),e[1]]:[e[0],e[1].concat(t)]}),[[],[]]);return{groupPermissions:g,mostPermissivePublicItem:r,spacePermission:l,teamPermission:d,teamSharePermissions:c,teamOwnerSharePermissions:u,guestUserPermissions:m,memberUserPermissions:p,botPermissions:n.map((e=>{let{permissionItem:t}=e;return t})).filter((e=>(0,je.FB)(e)))}}),[e])}(t),s=(0,o.useIntl)(),n=function(e,t){const{mostPermissivePublicItem:a,spacePermission:s,groupPermissions:n,guestUserPermissions:i,memberUserPermissions:r,teamSharePermissions:l,teamOwnerSharePermissions:d,botPermissions:c}=e,u=s&&"none"!==s.permissionItem.role;if(a&&"none"!==a.permissionItem.role)return(0,f.jsx)(o.FormattedMessage,{id:"adminContentSearchTab.pagesTable.sharedWithCell.sharedWithWeb",defaultMessage:"Shared to web"});if(!u&&0===n.length&&0===i.length&&0===r.length&&0===l.length&&0===d.length&&0===c.length)return(0,f.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"},children:[(0,f.jsx)(o.FormattedMessage,{id:"adminContentSearchTab.pagesTable.sharedWithCell.orphanedPage",defaultMessage:"Nobody"}),(0,f.jsx)(ge.ZP,{render:e=>(0,f.jsx)("div",{...e,children:(0,_.D)({marginLeft:4,height:14,width:14,opacity:.5})}),renderTooltip:()=>(0,f.jsx)(o.FormattedMessage,{id:"adminContentSearchTab.pagesTable.sharedWithCell.orphanedPage.tooltip",defaultMessage:"No person, group, or teamspace has any access to this page."})})]});const g=[];u?g.push(t.formatMessage(Le.sharedWithWorkspaceMembers)):(d.length>0&&0===l.length?g.push(t.formatMessage(Le.sharedWithTeamOwners)):l.length>0&&g.push(t.formatMessage(Le.sharedWithTeamMembers)),r.length>0&&g.push(t.formatMessage(Le.sharedWithMembers,{numMembers:r.length})),n.length>0&&g.push(t.formatMessage(Le.sharedWithGroups,{numGroups:n.length})));i.length>0&&g.push(t.formatMessage(Le.sharedWithGuests,{numGuests:i.length}));c.length>0&&g.push(t.formatMessage(Le.sharedWithBots,{numBots:c.length}));return g.join(t.formatMessage(Le.separator))}(a,s),r=[...a.spacePermission?[{key:"space-permission",render:e=>{var t;return(0,f.jsx)(Te,{...e,permissionItem:null===(t=a.spacePermission)||void 0===t?void 0:t.permissionItem})},action:()=>{}}]:[],...a.teamOwnerSharePermissions.map((e=>({key:`${e.team_id}-owners`,render:t=>(0,f.jsx)(Ne,{...t,onlyOwners:!0,teamId:e.team_id,role:e.role}),action:()=>{}}))),...a.teamSharePermissions.map((e=>({key:`${e.team_id}-members`,render:t=>(0,f.jsx)(Ne,{...t,teamId:e.team_id,role:e.role}),action:()=>{}}))),...a.groupPermissions.map((e=>({key:e.id,render:t=>(0,f.jsx)(Ce,{...t,name:e.name,icon:e.icon,role:e.role}),action:()=>{}}))),...a.memberUserPermissions.map((e=>({key:e.user_id,render:t=>(0,f.jsx)(Ve,{...t,userId:e.user_id,role:e.role}),action:()=>{}}))),...a.guestUserPermissions.map((e=>({key:e.user_id,render:t=>(0,f.jsx)(Ve,{...t,isGuest:!0,userId:e.user_id,role:e.role}),action:()=>{}}))),...a.botPermissions.map((e=>({key:e.bot_id,render:t=>(0,f.jsx)(xe,{...t,botId:e.bot_id}),action:()=>{}})))];return(0,f.jsx)(ue.N,{title:n,items:r,disabled:0===r.length})}const Ue=s.memo(Be);var We=a(77883);const ze={id:"page",headerTitle:(0,f.jsx)(o.FormattedMessage,{id:"adminContentSearchTab.pagesTable.page.name",defaultMessage:"Page"}),renderCell:e=>(0,f.jsx)(M.o,{blockStore:e.pageStore,rightIcon:(0,f.jsx)(ce,{blockStore:e.pageStore})}),widthData:{width:320,maxWidth:320},sortable:!1},Oe={id:"location",headerTitle:(0,f.jsx)(o.FormattedMessage,{id:"adminContentSearchTab.pagesTable.location.name",defaultMessage:"Location"}),renderCell:e=>(0,f.jsx)(Y.N,{blockStore:e.pageStore,teamStore:e.teamStore}),widthData:{width:140},sortable:!1},qe={id:"createdTime",headerTitle:(0,f.jsx)(o.FormattedMessage,{id:"adminContentSearchTab.pagesTable.createdTime.name",defaultMessage:"Created on"}),renderCell:e=>(0,f.jsx)(b.T,{dateTs:e.createdTime}),widthData:{width:140},sortable:!1},Ke={id:"lastEditedTime",headerTitle:(0,f.jsx)(o.FormattedMessage,{id:"adminContentSearchTab.pagesTable.lastEditedTime.name",defaultMessage:"Last edited on"}),renderCell:e=>(0,f.jsx)(b.T,{dateTs:e.lastEditedTime}),widthData:{width:140},sortable:!1},He={id:"createdBy",headerTitle:(0,f.jsx)(o.FormattedMessage,{id:"adminContentSearchTab.pagesTable.createdBy.name",defaultMessage:"Created by"}),renderCell:e=>e.createdById?(0,f.jsx)(We.t,{blockStore:e.pageStore,userIds:[e.createdById]}):null,widthData:{width:140},sortable:!1},Ge={id:"lastEditedBy",headerTitle:(0,f.jsx)(o.FormattedMessage,{id:"adminContentSearchTab.pagesTable.lastEditedBy.name",defaultMessage:"Last edited by"}),renderCell:e=>e.lastEditedById?(0,f.jsx)(We.t,{blockStore:e.pageStore,userIds:[e.lastEditedById]}):null,widthData:{width:140},sortable:!1},$e=[ze,Oe,{id:"audience",headerTitle:(0,f.jsx)(o.FormattedMessage,{id:"adminContentSearchTab.pagesTable.audience.name",defaultMessage:"Audience"}),renderCell:e=>(0,f.jsx)($.A,{blockStore:e.pageStore}),widthData:{width:140},sortable:!1},{id:"sharedWith",headerTitle:(0,f.jsx)(o.FormattedMessage,{id:"adminContentSearchTab.pagesTable.sharedWith.name",defaultMessage:"Shared with"}),renderCell:e=>(0,f.jsx)(Ue,{blockStore:e.pageStore}),widthData:{width:140},sortable:!1},Ge,Ke,He,qe];function Ye(e){let{loading:t,error:a,loadNextPage:s,filters:n,setFilters:r,pageStores:d,showSuggestions:c,runNewSearch:g,hasUserConfirmedAcknowledgement:m}=e;const p=m&&!t&&!c,h=m&&!c,b=(0,i.VK)((()=>d.map((e=>({id:e.id,isClickable:!1,pageStore:e,teamStore:(0,v.VP)(e),createdTime:e.getCreatedTime(),lastEditedTime:e.getLastEditedTime(),createdById:e.getCreatedById(),lastEditedById:e.getLastEditedById()})))),[d]),M=(0,u.yK)((e=>(0,x.b)({columnRenderInfo:$e,theme:e,containerMarginTop:0})),[]);return a?(0,f.jsx)(A.q,{runNewSearch:g,error:a}):m?c&&0===b.length?(0,f.jsx)(G,{filters:n,setFilters:r}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(x.D,{hideHeaderRowPadding:!0,allowHorizontalScroll:!0,setStickyHeaderRow:!0,maxHeight:400,columnRenderInfo:$e,rows:b,onLoadMore:h?s:void 0,renderNoRowsComponent:()=>(0,f.jsx)(l.Z,{isSmall:!0,style:{marginTop:15,marginBottom:40,textAlign:"center"},children:p&&(0,f.jsx)(o.FormattedMessage,{id:"adminContentSearchTab.pagesTable.empty",defaultMessage:"No pages found with your query."})}),styles:M}),t?(0,f.jsx)(y.Z,{style:{margin:"24px auto 24px"}}):null]}):(0,f.jsx)(N,{})}var Qe=a(21697),Je=a(36550),Xe=a(79782),et=a(66994),tt=a(67558),at=a(57702);function st(e){let{spaceStore:t,sharedWithFilterItems:a,setSharedWithFilter:n,runNewSearch:i,includeGroups:r,includeGuests:l}=e;const d=(0,tt.R)({spaceStore:t}),c=(0,s.useMemo)((()=>d.loading?[]:l?[...d.members,...d.guests]:d.members),[d,l]),u=(0,s.useMemo)((()=>d.loading?new Set:new Set(d.guests.map((e=>e.id)))),[d]);return(0,f.jsx)(at.B,{isMultiSelect:!0,includePermissionGroups:r,userStores:c,title:(0,f.jsx)(o.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.sharedWith.title",defaultMessage:"Shared with"}),selectedItems:a??[],setSelectedItems:function(e){const t=e.map((e=>{let{id:t,type:a}=e;return{type:a,id:t}}));n(t.length>0?t:void 0)},onMenuClose:i,guestUserIdSet:u})}var nt=a(35389);function it(e){let{spaceStore:t,filters:a,runNewSearch:s,setFilters:n,hasUserConfirmedAcknowledgement:i}=e;const o=(0,Qe.x)(),r=(0,u.yK)((e=>({container:{margin:"0 auto 14px"},filterPillsContainer:{width:"100%",display:"flex",flexWrap:"wrap",rowGap:4,flexDirectionRow:"row",alignItemsCenter:"center"}})),[]);return(0,f.jsxs)("div",{style:r.container,children:[(0,f.jsx)(et.O,{mode:et.p.Button,query:a.query,setQueryFilter:function(e){n({query:e},{runSearchAfter:!0})},disabled:!i}),i?(0,f.jsxs)("div",{style:r.filterPillsContainer,children:[(0,f.jsx)(Xe.f,{lastEditedTime:a.lastEditedTime,createdTime:a.createdTime,setLastEditedTime:function(e){n({lastEditedTime:e,createdTime:{starting:void 0,ending:void 0}},{runSearchAfter:!0})},setCreatedOnTime:function(e){n({createdTime:e,lastEditedTime:{starting:void 0,ending:void 0}},{runSearchAfter:!0})}}),(0,f.jsx)(nt.p,{selectedTeamIds:a.teamIds,setSelectedTeamIds:function(e){n({teamIds:e})},onMenuClose:s,teamStores:o}),(0,f.jsx)(st,{spaceStore:t,sharedWithFilterItems:a.sharedWith,setSharedWithFilter:function(e){n({sharedWith:e})},runNewSearch:s,includeGroups:!0,includeGuests:!0}),(0,f.jsx)(q,{selectedAudience:a.audience,setSelectedAudience:function(e){n({audience:e})},onMenuClose:s}),(0,f.jsx)(Je.y,{spaceStore:t,createdByFilterIds:a.createdBy,setCreatedByFilter:function(e){n({createdBy:e})},runNewSearch:s,includeGuests:!0})]}):null]})}var ot=a(26263),rt=a(65958),lt=a(59753),dt=a(45953),ct=a(21202),ut=a(66504),gt=a(57347),mt=a(53965),pt=a(54642),ft=a(27617),ht=a(77080);const vt=20,xt={query:"",createdBy:[],sharedWith:void 0,audience:[],lastEditedTime:{starting:void 0,ending:void 0},createdTime:{starting:void 0,ending:void 0},teamIds:[]},yt={...xt,audience:["shared_externally","shared_internally","shared_to_web"]},bt={filters:xt,pageStores:[],numPagesLoaded:0,hasNextPage:!0,paginationToken:void 0,loading:!1,error:void 0,shouldReRunSearch:!1,showSuggestions:!0},Mt={...bt,filters:yt};function _t(e){let{spaceStore:t,userStore:a,hasUserConfirmedAcknowledgement:o}=e;const r=(0,i.VK)((()=>ht.default.checkGate("enabled_bev_default_audience_filter")),[])?Mt:bt,l=(0,n.O7)(),[d,c]=(0,s.useState)(r),u=(0,s.useRef)(r.filters),m=(0,s.useCallback)((async e=>{let{restartSearch:s,ignoreFilterComparison:n}=e;if(!o)return;if(!n&&mt.Xy(d.filters,u.current))return;u.current=d.filters;let i=d.loading,r=d.error,m=d.hasNextPage,p=d.numPagesLoaded,f=d.paginationToken;if(s&&(c((e=>({...bt,showSuggestions:e.showSuggestions,filters:e.filters}))),i=bt.loading,r=bt.error,m=bt.hasNextPage,p=bt.numPagesLoaded,f=bt.paginationToken),m&&!i&&!r){c((e=>({...e,showSuggestions:!1,loading:!0})));try{const e=await pt.adminContentSearch(l,{spaceId:t.id,sort:{field:"relevance",direction:"desc"},limit:vt,paginationToken:f,query:d.filters.query,audience:d.filters.audience,lastEditedTime:(0,ft.Hq)(d.filters.lastEditedTime),createdTime:(0,ft.Hq)(d.filters.createdTime),createdBy:d.filters.createdBy,sharedWith:d.filters.sharedWith,teamspaceIds:d.filters.teamIds});if("failed"===e.type)throw e.error;g.jd(l,{filters:d.filters,pageNumber:p});const s=e.data.paginationToken,n=e.data.recordIds,i=function(e){const{recordMapWithRoleJson:t}=e,a=dt.PF.create(t),s=dt.PF.create();for(const{pointer:n,model:i}of a)if(i){const e=lt.kk.fromValue(n.table,mt.Xh(i.__IM_SORRY__getValue()));s.setModelAndRole(n,e,"editor")}return s}({recordMapWithRoleJson:e.data.recordMap}),o=new ot.Z({name:rt.bv,data:new ut.o({[a.id]:i})});o.addCacheFallback(l.defaultRecordCache.inMemoryRecordCache),c((e=>{const t=[],a=new Set(e.pageStores.map((e=>e.id)));for(const s of n)if(!a.has(s)){const e=new pe.G(l,{table:ct.iU,id:s},{inMemoryRecordCache:o});t.push(e)}const i=[...e.pageStores,...t];return{...e,pageStores:i,loading:!1,error:void 0,numPagesLoaded:e.numPagesLoaded+1,paginationToken:s,hasNextPage:Boolean(s)}}))}catch(h){const e=(0,gt.t)(h);c((t=>({...t,loading:!1,error:e})))}}}),[l,t,a,o,d.filters,d.loading,d.error,d.hasNextPage,d.numPagesLoaded,d.paginationToken]);(0,s.useEffect)((()=>{d.shouldReRunSearch&&(c((e=>({...e,shouldReRunSearch:!1}))),m({restartSearch:!0,ignoreFilterComparison:!1}))}),[d.shouldReRunSearch,m]);const p=(0,s.useCallback)((async()=>{d.shouldReRunSearch||await m({restartSearch:!1,ignoreFilterComparison:!0})}),[d.shouldReRunSearch,m]),f=(0,s.useCallback)((async e=>{await m({restartSearch:!0,ignoreFilterComparison:e||!1})}),[m]),h=(0,s.useCallback)(((e,t)=>{g.gL(l,{newFilters:e}),c((a=>({...a,filters:{...a.filters,...e},...null!=t&&t.runSearchAfter?{shouldReRunSearch:null==t?void 0:t.runSearchAfter}:void 0})))}),[l]);return{showSuggestions:d.showSuggestions,filters:d.filters,pageStores:d.pageStores,loading:d.loading,error:d.error,hasNextPage:d.hasNextPage,loadNextPage:p,runNewSearch:f,setFilters:h}}function wt(e){let{spaceStore:t,userStore:a,isOrganizationOwner:s}=e;const n=(0,i.VK)((()=>{const e=be.default.state.currentSpaceViewStore,t=null==e?void 0:e.getSettings();return(null==t?void 0:t.admin_content_search_acknowledgement)??!1}),[]),r=s||n,{showSuggestions:d,loadNextPage:c,pageStores:u,loading:g,error:m,runNewSearch:p,filters:v,setFilters:x}=_t({spaceStore:t,userStore:a,hasUserConfirmedAcknowledgement:r});return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("div",{style:{display:"flex",flexDirection:"row",gap:24},children:[(0,f.jsx)(l.Z,{isMultiline:!0,style:{marginBottom:20},children:(0,f.jsx)(o.FormattedMessage,{id:"adminContentSearchTab.description",defaultMessage:"Search and filter for any page in the workspace, including private pages. Only workspace owners can use content search."})}),(0,f.jsx)(h,{spaceId:t.id,disabled:0===u.length||!r,filters:v})]}),(0,f.jsx)(it,{spaceStore:t,runNewSearch:p,setFilters:x,filters:v,hasUserConfirmedAcknowledgement:r}),(0,f.jsx)(Ye,{loading:g,error:m,pageStores:u,loadNextPage:c,filters:v,setFilters:x,showSuggestions:d,runNewSearch:p,hasUserConfirmedAcknowledgement:r})]})}const Ct=function(e){const t=(0,n.O7)();return(0,i.VK)((()=>r.Z.state.online),[])?(0,f.jsxs)(d.ZP,{children:[(0,f.jsx)(c.Z,{large:!t.device.isMobile||void 0,divider:t.device.isMobile?void 0:"full",children:(0,f.jsx)(o.FormattedMessage,{id:"adminContentSearchTab.title",defaultMessage:"Content Search"})}),(0,f.jsx)(wt,{...e})]}):(0,f.jsx)(d.ZP,{children:(0,f.jsx)(l.Z,{isSmall:!0,isMultiline:!0,style:{textAlign:"center"},children:(0,f.jsx)(o.FormattedMessage,{defaultMessage:"Please go online to access content search.",id:"adminContentSearchTab.offline.message"})})})}},21697:(e,t,a)=>{a.d(t,{x:()=>l});var s=a(67294),n=a(480),i=a(86628),o=a(95697),r=a(80444);function l(e){const[t,a]=(0,s.useState)([]),l=(0,n.O7)(),d=(0,i.VK)((()=>(null==e?void 0:e.spaceStore)??r.default.state.currentSpaceStore),[null==e?void 0:e.spaceStore]),c=(0,i.VK)((()=>{var e;return null===(e=r.default.state.currentUserStore)||void 0===e?void 0:e.id}),[]);return(0,s.useEffect)((()=>{!async function(){const e=await(0,o.sj)({spaceStore:d,currentUserId:c,includeArchived:!1,minRoleOnTeamStores:"editor",environment:l});a(e)}()}),[d,c,l]),t}},55255:(e,t,a)=>{a.d(t,{B:()=>l});a(67294);var s=a(24405),n=a(9291),i=a(71291),o=a(64369),r=a(85893);function l(e){let{lastActiveAt:t}=e;const a=(0,s.yK)((e=>({container:{opacity:.5}})),[]);return(0,r.jsx)("div",{style:a.container,children:t?(0,r.jsx)(i.T,{dateTs:t}):(0,r.jsx)(o.Z,{children:(0,r.jsx)(n.FormattedMessage,{id:"identityAndProvisioning.managedUsers.table.lastActive.unknown",defaultMessage:"No activity"})})})}},33602:(e,t,a)=>{a.d(t,{V:()=>r});a(67294);var s=a(33679),n=a(9291),i=a(93667),o=a(85893);function r(e){let{selectedMfaMethod:t,setSelectedMfaMethod:a}=e;return(0,o.jsx)(i.u,{pillTitle:(0,o.jsx)(n.FormattedMessage,{id:"managedUsersTab.table.filters.mfaMethod.title",defaultMessage:"2-step verification method"}),pillIcon:s.j,selectedItem:t,setSelectedItem:a,items:l})}const l=[{key:"totp",value:"totp",title:(0,o.jsx)(n.FormattedMessage,{id:"managedUsersTab.table.filters.mfaMethod.totp",defaultMessage:"Authenticator"}),caption:(0,o.jsx)(n.FormattedMessage,{id:"managedUsersTab.table.filters.mfaMethod.totp.caption",defaultMessage:"Users who have enabled 2-step verification through an authenticator app"}),wrapCaption:!0},{key:"sms",value:"sms",title:(0,o.jsx)(n.FormattedMessage,{id:"managedUsersTab.table.filters.mfaMethod.sms",defaultMessage:"Phone number"}),caption:(0,o.jsx)(n.FormattedMessage,{id:"managedUsersTab.table.filters.mfaMethod.sms.caption",defaultMessage:"Users who have enabled 2-step verification through their phone number"}),wrapCaption:!0},{key:"backup_code",value:"backup_code",title:(0,o.jsx)(n.FormattedMessage,{id:"managedUsersTab.table.filters.mfaMethod.backupCode",defaultMessage:"Backup code"}),caption:(0,o.jsx)(n.FormattedMessage,{id:"managedUsersTab.table.filters.mfaMethod.backup_code.caption",defaultMessage:"Users who have enabled 2-step verification with active backup codes."}),wrapCaption:!0}]},18261:(e,t,a)=>{a.d(t,{W:()=>L,z:()=>B});var s=a(67294),n=a(480),i=a(86628),o=a(24405),r=a(7057),l=a(84169),d=a(24211),c=a(19889),u=a(9291),g=a(71119),m=a(16402),p=a(88632),f=a(6258),h=a(23063),v=a(61519),x=a(74194),y=a(50506),b=a(63296),M=a(58297),_=a(26388),w=a(65252),C=a(64369),j=a(13490),S=a(63048),T=(a(57658),a(81918)),k=a(54642),F=a(47307),N=a(64964),A=a(53471),I=a(33954),P=a(80444),D=a(85893);const E=(0,u.defineMessages)({uploadFailed:{defaultMessage:"Upload failed.",id:"identityAndProvisioning.managedUsers.modal.failedUpload"}});var R=a(19927),Z=a(92684);const V=(0,u.defineMessages)({namePlaceholder:{defaultMessage:"Display name",id:"identityAndProvisioning.managedUsers.table.userAccess.namePlaceholder"},emailPlaceholder:{defaultMessage:"Email",id:"identityAndProvisioning.managedUsers.table.userAccess.emailPlaceholder"},supportAccessFailed:{defaultMessage:"Failed to load user's support access status.",id:"identityAndProvisioning.managedUsers.table.userAccess.supportAccessFailed"}});function L(e){let{spaceStore:t,managedUser:a,onClose:s,removeWorkspaceFromUser:n}=e;const i=Boolean(a),{isAccessGranted:o,toggleDataAccessConsent:r,loading:l}=(0,R.d)({userId:null==a?void 0:a.userId,spaceId:t.id});return(0,D.jsx)(y.Z,{open:i,onDismiss:s,preventHideChildrenWhileOpening:!0,render:()=>a?(0,D.jsx)(B,{managedUser:a,isAccessGranted:o,toggleDataAccessConsent:r,loadingSupportAccess:l,renderWorkspacesOverview:()=>(0,D.jsx)(Z.g,{spaceStore:t,userId:a.userId,workspaces:a.workspaces,removeWorkspaceFromUser:n})}):null})}function B(e){let{managedUser:t,renderWorkspacesOverview:a,isAccessGranted:y,toggleDataAccessConsent:R,loadingSupportAccess:Z}=e;const L=(0,u.useIntl)(),B=(0,n.O7)(),U=(0,i.VK)((()=>new f.U6(B,{id:t.userId,table:c.KJ})),[t,B]),{hasStagedChanges:W,resetState:z,saveChanges:O,loading:q,profilePhoto:K,name:H,email:G}=function(e){const{userStore:t}=e,a=(0,u.useIntl)(),o=(0,n.O7)(),{userProfilePhoto:r,userName:l,userEmail:d,isSuspended:c}=(0,i.VK)((()=>({userProfilePhoto:t.getProfilePhoto(),userName:t.getFullName(a),userEmail:t.getEmail(),isSuspended:t.getIsSuspended()})),[t,a]),[g,m]=(0,s.useState)({loading:!1,error:void 0}),[p,f]=(0,s.useState)({value:r,loading:!1}),[h,v]=(0,s.useState)(l),[x,y]=(0,s.useState)(d);return{hasStagedChanges:p.value!==r||h!==l||x!==d,saveChanges:async function(){var e;const s=null===(e=P.default.state.currentSpaceStore)||void 0===e?void 0:e.id;if(!s)return;const n=[];p.value!==r&&n.push("profile_photo"),h!==l&&n.push("name"),x!==d&&n.push("email"),T.am(o,{user_status:c?"suspended":"notSuspended",edited_fields:n});const{accept:i}=await F.confirmUserActionV2({message:(0,D.jsx)(C.Z,{style:F.dialogStyles.title,children:(0,D.jsx)(u.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.saveProfileChanges.confirmation.message",defaultMessage:"Confirm changes"})}),description:(0,D.jsxs)(C.Z,{isMultiline:!0,isSecondaryColor:!0,children:[(0,D.jsx)(u.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.saveProfileChanges.confirmation.description",defaultMessage:"Changes made to this user's account will be reflected across all workspaces they have access to."}),(0,D.jsx)("br",{}),(0,D.jsx)("br",{}),(0,D.jsx)(u.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.saveProfileChanges.confirmation.descriptionForScim",defaultMessage:"If this user is being provisioned through SCIM, your changes be later overwritten by the next SCIM sync."})]}),acceptLabel:(0,D.jsx)(u.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.saveProfileChanges.confirmation.acceptLabel",defaultMessage:"Save changes"}),cancelLabel:(0,D.jsx)(u.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.saveProfileChanges.confirmation.cancelLabel",defaultMessage:"Go back"})});if(!i)return;m({loading:!0,error:void 0});const g=await k.updateUserProfile(o,{userId:t.id,spaceId:s,name:h,email:x,profilePhoto:p.value});if(T.$B(o,{user_status:c?"suspended":"notSuspended",edited_fields:n}),"failed"===g.type)return F.showErrorMessage((0,I.wf)(a,g)),void m({loading:!1,error:g.error});N.oV({label:(0,D.jsx)(u.FormattedMessage,{id:"managedUsers.toastMessage.updateProfileData.success",defaultMessage:"Successfully updated user's profile"})}),setTimeout((()=>{m({loading:!1,error:void 0})}),500)},resetState:function(){f({value:r,loading:!1}),v(l),y(d)},loading:g.loading,error:g.error,profilePhoto:{value:p.value,loading:p.loading,set:function(){A.cR({environment:o,onStart:()=>{f((e=>({...e,loading:!0})))},bucket:"public",onError:()=>{f((e=>({...e,loading:!1}))),F.showErrorMessage(a.formatMessage(E.uploadFailed))},onComplete:e=>{const t=e[0];f({value:t,loading:!1})},accept:"image/*"})},remove:function(){f({value:"",loading:!1})}},name:{value:h,set:v},email:{value:x,set:y}}}({userStore:U}),$=(0,i.VK)((()=>U.getIsSuspended()?{type:"suspended"}:(0,w.os)({profilePhoto:K.value,name:H.value,email:G.value})),[U,K.value,H.value,G.value]),Y=function(e){const{loadingSupportAccess:t}=e;return(0,o.yK)((e=>({container:{position:"relative",display:"flex",flexDirection:"column",background:e.popoverBackground,width:420,maxHeight:520,overflow:"hidden",borderRadius:8},innerContainer:{position:"relative",display:"flex",flexDirection:"column",width:"100%",height:"100%",overflowY:"auto",padding:"36px 24px",gap:16},label:{color:e.mediumTextColor},horizontalLabel:{color:e.mediumTextColor,display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",gap:4},value:{color:e.regularTextColor},input:{padding:"4px 4px 4px 10px",margin:"0 auto 8px",width:"100%",background:e.modalBackground},avatarContainer:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%"},iconStyle:{border:`1px solid ${e.tableDividerColor}`,color:e.lightTextColor,fontWeight:500},inputContainer:{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"center",width:"100%",gap:8},inputRow:{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"center",width:"100%"},icon:{color:e.lightIconColor,fill:"currentColor",width:14,height:14},supportAccessRow:{position:"relative",width:"100%",opacity:t?.5:1},infoContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%"},infoRow:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",width:"100%"},footer:{position:"absolute",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-end",paddingInline:4,boxShadow:e.borderBoxShadow,background:e.popoverBackground,left:0,right:0,bottom:0,height:48},button:{height:30,marginInline:4}})),[t])}({loadingSupportAccess:Z}),Q=(0,d.E2)(L),J=(0,i.VK)((()=>!p.Z.state.online),[]),X=t.mfaMethods.filter((e=>"backup_code"!==e)),ee=L.formatList(X.map((e=>(0,g.cR)(e))),{type:"conjunction"});return(0,D.jsxs)("div",{style:Y.container,children:[(0,D.jsxs)("div",{style:Y.innerContainer,children:[(0,D.jsx)("div",{style:Y.avatarContainer,children:(0,D.jsx)(w.ZP,{size:56,avatarType:$,isOffline:J,loading:K.loading,onUploadProfilePhoto:K.set,onRemoveProfilePhoto:K.remove})}),(0,D.jsxs)("div",{style:Y.inputContainer,children:[(0,D.jsxs)("div",{style:Y.inputRow,children:[(0,D.jsx)(j.Z,{children:(0,D.jsx)(u.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.details.nameLabel",defaultMessage:"Name"})}),(0,D.jsx)(x.Z,{style:Y.input,disabled:q,value:H.value,placeholder:L.formatMessage(V.namePlaceholder),onChange:e=>{H.set(e.target.value)}})]}),(0,D.jsxs)("div",{style:Y.inputRow,children:[(0,D.jsx)(j.Z,{children:(0,D.jsx)(u.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.details.emailLabel",defaultMessage:"Email"})}),(0,D.jsx)(x.Z,{style:Y.input,disabled:q,value:G.value,placeholder:L.formatMessage(V.emailPlaceholder),onChange:e=>{G.set(e.target.value)}})]})]}),(0,D.jsxs)("div",{style:Y.infoContainer,children:[(0,D.jsxs)("div",{style:Y.infoRow,children:[(0,D.jsx)(C.Z,{style:Y.label,isSmall:!0,children:(0,D.jsx)(u.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.details.accountCreatedLabel",defaultMessage:"Account created"})}),t.accountCreatedAt?(0,D.jsx)(C.Z,{isSmall:!0,style:Y.value,children:(0,r.Yx)(t.accountCreatedAt,"medium",Q)}):(0,D.jsx)(C.Z,{isSecondaryColor:!0,isSmall:!0,children:(0,D.jsx)(u.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.details.emptyAccountCreated",defaultMessage:"Incomplete"})})]}),(0,D.jsx)(v.Z,{size:16}),(0,D.jsxs)("div",{style:Y.infoRow,children:[(0,D.jsx)(C.Z,{style:Y.label,isSmall:!0,children:(0,D.jsx)(u.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.details.lastActiveLabel",defaultMessage:"Last active"})}),t.lastActiveAt?(0,D.jsx)(C.Z,{isSmall:!0,style:Y.value,children:(0,m.gs)(t.lastActiveAt)}):(0,D.jsx)(C.Z,{isSecondaryColor:!0,isSmall:!0,children:(0,D.jsx)(u.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.details.emptyLastActive",defaultMessage:"No activity"})})]}),(0,D.jsx)(v.Z,{size:16}),(0,D.jsxs)("div",{style:Y.infoRow,children:[(0,D.jsx)(C.Z,{style:Y.label,isSmall:!0,children:(0,D.jsx)(u.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.details.mfaLabel",defaultMessage:"2-step verification method"})}),X.length>0?(0,D.jsx)(C.Z,{isSmall:!0,style:Y.value,children:ee}):(0,D.jsx)(C.Z,{isSecondaryColor:!0,isSmall:!0,children:(0,D.jsx)(u.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.details.emptyMfa",defaultMessage:"Not configured"})})]}),(0,D.jsx)(v.Z,{size:16}),(0,D.jsx)("div",{style:Y.supportAccessRow,children:(0,D.jsx)(S.w,{title:(0,D.jsxs)(C.Z,{style:Y.horizontalLabel,isSmall:!0,children:[(0,D.jsx)(u.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.details.supportAccessToggleMessage",defaultMessage:"Support access"}),(0,D.jsx)(_.ZP,{placement:_.ug.Bottom,render:e=>(0,D.jsx)("div",{...e,children:(0,l.m)(Y.icon)}),renderTooltip:()=>(0,D.jsx)(u.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.details.supportAccessToggleMessage.tooltip",defaultMessage:"Grant Notion support temporary access to this account so we can troubleshoot problems or recover content on its behalf"})})]}),byline:null,isOn:y,onToggle:R,disabled:Z})})]}),(0,D.jsx)("div",{children:t.workspaces.length>0?(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(j.Z,{children:(0,D.jsx)(u.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.details.workspacesLabel",defaultMessage:"Workspaces"})}),a()]}):null})]}),(0,D.jsx)(h.Z,{isVisible:W||q,enterAnimationStyle:{translateY:48,opacity:0},animationStyle:{opacity:1,translateY:0},exitAnimationStyle:{translateY:48,opacity:0},render:()=>(0,D.jsxs)("div",{style:Y.footer,children:[(0,D.jsx)(b.Z,{isRed:!0,disabled:q,style:Y.button,onClick:z,children:(0,D.jsx)(u.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.details.cancelButton",defaultMessage:"Cancel"})}),(0,D.jsx)(M.Z,{disabled:q,style:Y.button,onClick:O,children:(0,D.jsx)(u.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.details.saveButton",defaultMessage:"Save changes"})})]})})]})}},92684:(e,t,a)=>{a.d(t,{U:()=>M,g:()=>b});var s=a(67294),n=a(480),i=a(24405),o=a(75246),r=a(9291),l=a(81918),d=a(54642),c=a(47307),u=a(64964),g=a(88893),m=a(61519),p=a(89728),f=a(31278),h=a(26388),v=a(64369),x=a(30836),y=a(85893);function b(e){const{userId:t,workspaces:a,spaceStore:n,removeWorkspaceFromUser:o}=e,r=(0,i.yK)((()=>({container:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%",gap:8,marginTop:12}})),[]);return(0,y.jsx)("div",{style:r.container,children:a.map(((e,i)=>(0,y.jsxs)(s.Fragment,{children:[(0,y.jsx)(M,{userId:t,spaceId:n.id,workspace:e,removeWorkspaceFromUser:o}),i<a.length-1?(0,y.jsx)(m.Z,{size:8}):null]},e.id)))})}function M(e){const{userId:t,spaceId:a,workspace:s,removeWorkspaceFromUser:g}=e,m=(0,r.useIntl)(),b=(0,n.O7)(),M=_(s),C=(0,i.yK)((()=>({container:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",width:"100%",gap:12,overflow:"hidden"},workspaceContainer:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start",width:"100%",gap:12,overflow:"hidden"},iconContainer:{alignSelf:"center"},textContainer:{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"center",width:"100%"},name:{fontSize:14,fontWeight:500},nameUntitled:{fontSize:14,fontWeight:500,opacity:.25},byline:{lineHeight:1.3,fontSize:12,opacity:.5}})),[]);async function j(){l.wV(b,{external_space_id:s.id});const{accept:e}=await c.confirmUserActionV2({message:(0,y.jsx)(v.Z,{style:c.dialogStyles.title,children:(0,y.jsx)(r.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.removeFromWorkspace.confirmation.message",defaultMessage:"Remove user from workspace?"})}),description:(0,y.jsx)(v.Z,{isMultiline:!0,isSecondaryColor:!0,children:(0,y.jsx)(r.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.removeFromWorkspace.confirmation.description",defaultMessage:"This user will no longer have access to the workspace you are removing them from. This action is not reversible."})}),acceptLabel:(0,y.jsx)(r.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.removeFromWorkspace.confirmation.acceptLabel",defaultMessage:"Remove"}),cancelLabel:(0,y.jsx)(r.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.removeFromWorkspace.confirmation.cancelLabel",defaultMessage:"Go back"})});if(!e)return;const n=await d.removeManagedUserFromSpace(b,{userId:t,targetSpaceId:s.id,requestingSpaceId:a});l.dw(b,{external_space_id:s.id}),"success"===n.type?(g(t,s.id),u.oV({label:(0,y.jsx)(r.FormattedMessage,{defaultMessage:"Successfully removed user from {workspaceName}",id:"identityAndProvisioning.managedUsers.table.userAccess.removeFromWorkspaceConfirmation",values:{workspaceName:s.name}})})):u.oV({label:(0,y.jsx)(r.FormattedMessage,{defaultMessage:"Failed to remove user from {workspaceName}",id:"identityAndProvisioning.managedUsers.table.userAccess.removeFromWorkspaceFailure",values:{workspaceName:s.name}})})}const S=s.icon?{pointer:{table:o.bx,id:s.id,spaceId:s.id},icon:s.icon}:void 0;return(0,y.jsx)("div",{style:C.container,children:(0,y.jsxs)("div",{style:C.workspaceContainer,children:[(0,y.jsx)("div",{style:C.iconContainer,children:(0,y.jsx)(f.Z,{disabled:!0,icon:S,isEmptyPage:!1,size:28,title:s.name,isLarge:!0,emojiSize:24,isRaw:!1})}),(0,y.jsxs)("div",{style:C.textContainer,children:[(0,y.jsx)(v.Z,{style:C.name,isMultiline:!0,children:(0,y.jsx)(x.J,{workspace:s})}),(0,y.jsx)(v.Z,{style:C.byline,children:(0,y.jsx)(w,{workspace:s,intl:m})})]}),(0,y.jsx)("div",{children:(0,y.jsx)(h.ZP,{render:e=>(0,y.jsx)(p.Z,{isRed:!0,onClick:j,disabled:M,disabledFeedback:M,...e,children:(0,y.jsx)(r.FormattedMessage,{defaultMessage:"Remove",id:"identityAndProvisioning.managedUsers.table.userAccess.removeFromWorkspace"})}),renderTooltip:()=>(0,y.jsx)(r.FormattedMessage,{defaultMessage:"You cannot remove this user from the workspace because they are the only user in the workspace. To remove this user, delete the workspace instead.",id:"identityAndProvisioning.managedUsers.table.userAccess.removeFromWorkspace.disableTooltip"}),disableTooltip:!M,placement:h.ug.Bottom})})]})})}function _(e){const t=e.membersCount;return"number"==typeof t?1===t:1===t.length&&1===t[0]}function w(e){const{workspace:t,intl:a}=e;return _(t)?(0,y.jsx)(r.FormattedMessage,{defaultMessage:"{plan} · 1 member",id:"identityAndProvisioning.managedUsers.table.userAccess.oneMemberWorkspace",values:{plan:(0,g.t1)(t.plan,a)}}):Array.isArray(t.membersCount)?1===t.membersCount.length?(0,y.jsx)(r.FormattedMessage,{defaultMessage:"{plan} · {lowerEnd}+ members",id:"identityAndProvisioning.managedUsers.table.userAccess.numMembersLowerEndRange",values:{plan:(0,g.t1)(t.plan,a),lowerEnd:t.membersCount[0]}}):(0,y.jsx)(r.FormattedMessage,{defaultMessage:"{plan} · {lowerEnd} - {higherEnd} members",id:"identityAndProvisioning.managedUsers.table.userAccess.numMembersRange",values:{plan:(0,g.t1)(t.plan,a),lowerEnd:t.membersCount[0],higherEnd:t.membersCount[1]}}):(0,y.jsx)(r.FormattedMessage,{defaultMessage:"{plan} · {numMembers} {numMembers, plural, one {member} other {members}}",id:"identityAndProvisioning.managedUsers.table.userAccess.numMembers",values:{plan:(0,g.t1)(t.plan,a),numMembers:t.membersCount}})}},19927:(e,t,a)=>{a.d(t,{d:()=>g});var s=a(67294),n=a(480),i=a(50501),o=a(9291),r=a(81918),l=a(54642),d=a(47307),c=a(64964);const u=(0,o.defineMessages)({getSupportAccessFailed:{defaultMessage:"Failed to load user's support access status.",id:"identityAndProvisioning.managedUsers.table.userAccess.getSupportAccessFailed"},setSupportAccessFailed:{defaultMessage:"Failed to update user's support access status.",id:"identityAndProvisioning.managedUsers.table.userAccess.setSupportAccessFailed"},toastDisabled:{id:"managedUsers.toastMessage.supportAccessDisabled",defaultMessage:"Successfully disabled user's support access status"},toastEnabled:{id:"managedUsers.toastMessage.supportAccessEnabled",defaultMessage:"Successfully enabled user's support access status"}});function g(e){const{spaceId:t,userId:a}=e,g=(0,o.useIntl)(),m=(0,n.O7)(),[p,f]=(0,s.useState)({loading:!1,error:void 0}),[h,v]=(0,s.useState)(void 0);(0,s.useEffect)((()=>{!async function(){const e=await async function(){if(!a)return;f({loading:!0,error:void 0});const e=await l.getDataAccessConsentForManagedUser(m,{spaceId:t,userId:a});return"failed"===e.type?(f({loading:!1,error:e.error}),void d.deprecatedShowErrorMessage(g.formatMessage(u.getSupportAccessFailed))):(f({loading:!1,error:void 0}),e.data.expiryTime)}();v(e)}()}),[m,g,t,a]);const x=(0,s.useMemo)((()=>Boolean(h&&Number(h)>Date.now())),[h]),y=(0,s.useCallback)((async()=>{if(!a)return;f({loading:!0,error:void 0});const e=x?void 0:Date.now()+i.g,s=await l.setDataAccessConsentForManagedUser(m,{spaceId:t,userId:a,expiryTime:e});if(r.Ef(m,{new_value:Boolean(e)}),"failed"===s.type)return f({loading:!1,error:s.error}),void d.deprecatedShowErrorMessage(g.formatMessage(u.setSupportAccessFailed));v(e),e?c.oV({label:g.formatMessage(u.toastEnabled)}):c.oV({label:g.formatMessage(u.toastDisabled)}),f({loading:!1,error:void 0})}),[m,g,t,a,x]);return{isAccessGranted:x,toggleDataAccessConsent:y,loading:p.loading,error:p.error}}},58720:(e,t,a)=>{a.d(t,{m:()=>d});a(67294);var s=a(24405),n=a(9291),i=a(58698),o=a(64369),r=a(30836),l=a(85893);function d(e){let{workspaceSummaries:t}=e;const a=(0,n.useIntl)(),d=(0,s.yK)((e=>({title:{marginRight:8},noWorkspaces:{paddingInline:8,opacity:.5},workspaceName:{maxWidth:"80%"},plusMore:{opacity:.5,marginLeft:4},titleContainer:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start",width:"100%",marginLeft:4}})),[]);if(t.length<=0)return(0,l.jsx)(o.Z,{style:d.noWorkspaces,children:(0,l.jsx)(n.FormattedMessage,{id:"identityAndProvisioning.managedUsers.table.userAccess.noWorkspaces",defaultMessage:"No workspaces"})});const c=t.find((e=>e.name)),u=c?c.name:(0,i.o)(a),g=t.length-1;return(0,l.jsxs)("div",{style:d.titleContainer,children:[(0,l.jsx)(o.Z,{isInline:!0,style:d.workspaceName,children:u}),!c||c.isExternal?(0,l.jsx)(r.g,{}):null,g>0?(0,l.jsxs)(o.Z,{isInline:!0,style:d.plusMore,children:[(0,l.jsx)(n.FormattedMessage,{id:"identityAndProvisioning.managedUsers.table.userAccess.additionalCount",defaultMessage:"+{numRemainingWorkspaces}",values:{numRemainingWorkspaces:g}}),""]}):null]})}},52498:(e,t,a)=>{a.d(t,{G:()=>M});a(57658),a(67294);var s=a(86628),n=a(24405),i=a(56666),o=a(9291),r=a(31701),l=a(60709),d=a(18514),c=a(61766),u=a(93405),g=a(31945),m=a(73063),p=a(78140),f=a(32163),h=a(53437),v=a(72495),x=a(83182),y=a(85893);const b=(0,o.defineMessages)({menuAriaLabel:{defaultMessage:"Open action menu for this user.",id:"identityAndProvisioning.managedUsers.table.menu.ariaLabel"}});function M(e){let{managedUser:t,managedUserActionSections:a}=e;const r=(0,s.qz)(void 0,c.Z),l=(0,o.useIntl)(),d=(0,n.yK)((()=>({container:{minWidth:265}})),[]);return(0,y.jsx)(g.ZP,{popupType:h.kQ.Popup,style:d.container,buttonPopupStore:r,renderOrigin:e=>(0,y.jsx)(m.Z,{ariaLabel:l.formatMessage(b.menuAriaLabel),icon:i.o,...e}),render:()=>(0,y.jsx)(_,{managedUser:t,popupStore:r,managedUserActionSections:a})})}function _(e){let{managedUser:t,popupStore:a,managedUserActionSections:s}=e;const i=[],c=(0,n.yK)((()=>({destructiveIcon:{fill:r.ZP.red,color:r.ZP.red}})),[]);for(const[n,o]of s.entries()){const e=o.map(((e,a)=>({key:a,render:a=>{var s,n;return(0,y.jsx)(u.Z,{...a,shouldWrapCaption:!0,svg:t=>e.icon(e.isDestructive?{...t,...c.destructiveIcon}:t),title:e.title,style:{paddingTop:8,paddingBottom:8,...e.isDestructive?c.destructiveIcon:{}},disabled:null===(s=e.getDisabledState)||void 0===s?void 0:s.call(e,t),disabledFeedback:null===(n=e.getDisabledState)||void 0===n?void 0:n.call(e,t)})},action:()=>e.onClick(t)}))),a={key:`section-${n}`,render:e=>(0,y.jsx)(v.Z,{topBorder:n>0,...e}),items:e};i.push(a)}return(0,y.jsxs)(p.Z,{menuType:l.og.Popup,children:[(0,y.jsx)(f.Z,{type:f.i.Vertical,initialFocus:void 0,sections:i,onAccept:()=>{a.setState({open:!1})}}),(0,y.jsx)(v.Z,{topBorder:!0,children:(0,y.jsx)(x.Z,{title:(0,y.jsx)(o.FormattedMessage,{defaultMessage:"Learn about user suspension",id:"managedUsersDashboard.userActionsMenu.helpButton"}),href:(0,d.UY)("guides.managedUsers"),analyticsFrom:"managed_users_dashboard_user_actions_menu"})})]})}},82162:(e,t,a)=>{a.d(t,{L:()=>m,S:()=>g});a(67294);var s=a(86628),n=a(24405),i=a(19889),o=a(9291),r=a(80444),l=a(6258),d=a(69219),c=a(45653),u=a(85893);function g(e){let{userId:t}=e;const a=(0,o.useIntl)(),g=(0,n.yK)((e=>({iconStyle:{color:e.lightTextColor,fontWeight:500}})),[]),p=(0,s.VK)((()=>{const e=r.default.state.currentSpaceStore;if(!e)return;const s=l.U6.createChildStore(e,{table:i.KJ,id:t});return{userStore:s,isReady:s.isReady(),userName:s.getDisplayName(a),userEmail:s.getEmail()}}),[t,a]);return null!=p&&p.isReady?(0,u.jsx)(d.i,{useThinTitle:!0,title:p.userName,byline:p.userEmail,icon:(0,u.jsx)(c.Z,{size:28,userStore:p.userStore,iconStyle:g.iconStyle})}):(0,u.jsx)(m,{})}function m(e){const t=(0,n.yK)((()=>({icon:{borderRadius:"100%",height:e.iconSize??28,width:e.iconSize??28,marginLeft:-4}})),[e.iconSize]);return(0,u.jsx)(d.H,{includeByline:!0,includeIcon:!0,iconStyles:t.icon})}},30836:(e,t,a)=>{a.d(t,{J:()=>d,g:()=>c});a(67294);var s=a(24405),n=a(44495),i=a(9291),o=a(58698),r=a(26388),l=a(85893);function d(e){let{workspace:t}=e;const a=(0,i.useIntl)(),n=(0,s.yK)((e=>({container:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start"}})),[]);return(0,l.jsxs)("div",{style:n.container,children:[t.name??(0,o.o)(a),t.isExternal?(0,l.jsx)(c,{}):null]})}function c(){const e=(0,s.yK)((e=>({icon:{marginLeft:4,height:14,width:14,opacity:.5}})),[]);return(0,l.jsx)(r.ZP,{render:t=>(0,l.jsx)("div",{...t,children:(0,n.D)(e.icon)}),renderTooltip:()=>(0,l.jsx)(i.FormattedMessage,{id:"identityAndProvisioning.managedUsers.userAccess.externalSpaceNameTooltipText",defaultMessage:"This is an external workspace that does not belong to this user."})})}},28608:(e,t,a)=>{a.d(t,{O:()=>m});a(67294);var s=a(86628),n=a(24405),i=a(73039),o=a(75246),r=a(9291),l=a(88893),d=a(93667),c=a(31278),u=a(64369),g=a(85893);function m(e){let{selectedSpaceId:t,setSelectedSpaceId:a,spaceData:m}=e;const p=(0,r.useIntl)(),f=(0,n.yK)((e=>({optionContainer:{display:"flex",flexDirection:"row",alignItems:"center",gap:8},optionTitle:{display:"block"},optionCaption:{display:"block",color:e.mediumTextColor,fontSize:12,lineHeight:"15px"},container:{padding:"6px 0 6px"},footer:{padding:"8px 8px 2px 8px",justifyContent:"space-between",display:"flex"},icon:{width:16,marginRight:6,fill:"currentColor"}})),[]),h=(0,s.VK)((()=>m.map((e=>{const t=e.name,a=e.icon?{pointer:{table:o.bx,id:e.id,spaceId:e.id},icon:e.icon}:void 0;return{key:e.id,value:e.id,title:(0,g.jsxs)("div",{style:f.optionContainer,children:[(0,g.jsx)(c.Z,{disabled:!0,icon:a,isEmptyPage:!1,size:24,title:t,isLarge:!0,emojiSize:24,isRaw:!1}),(0,g.jsxs)("div",{style:{paddingTop:4,paddingBottom:4},children:[(0,g.jsx)(u.Z,{style:f.optionTitle,children:t}),(0,g.jsx)(u.Z,{style:f.optionCaption,children:(0,l.t1)(e.subscriptionTier,p)})]})]})}}))),[m,p,f]);return(0,g.jsx)(d.u,{pillTitle:(0,g.jsx)(r.FormattedMessage,{id:"managedUsersTab.table.filters.workspaces.title",defaultMessage:"Workspace"}),pillIcon:i.K,selectedItem:t,setSelectedItem:a,items:h})}},80422:(e,t,a)=>{a.d(t,{N:()=>l});a(67294);var s=a(24405),n=a(37810),i=a(64369),o=a(23189),r=a(85893);function l(e){let{title:t,byline:a,settingItem:l}=e;const d=(0,s.yK)((e=>({settingContainer:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%"},settingLeft:{width:"60%"},settingTitle:{fontWeight:n.Z.fontWeight.regular},settingByline:{marginBottom:4}})),[]);return(0,r.jsxs)("div",{style:d.settingContainer,children:[(0,r.jsxs)("div",{style:d.settingLeft,children:[(0,r.jsx)(o.Z,{smallMarginBottom:!0,style:d.settingTitle,children:t}),(0,r.jsx)(i.Z,{isSmall:!0,isMultiline:!0,style:d.settingByline,children:a})]}),l]})}},63048:(e,t,a)=>{a.d(t,{w:()=>r});a(67294);var s=a(24006),n=a(26388),i=a(80422),o=a(85893);function r(e){let{title:t,byline:a,isOn:r,onToggle:l,disabled:d,tooltipForDisabled:c}=e;function u(){d||l()}return(0,o.jsx)(n.ZP,{placement:n.ug.Top,alignment:n.v2.End,disableTooltip:!c||!d,renderTooltip:()=>c,render:e=>(0,o.jsx)("div",{...e,children:(0,o.jsx)(i.N,{title:t,byline:a,settingItem:(0,o.jsx)(s.Z,{on:r,disabled:d,onClick:u})})})})}},68117:(e,t,a)=>{a.d(t,{L:()=>c,V:()=>d});var s=a(67294),n=a(26263),i=a(480),o=a(45953),r=a(80444),l=a(85893);const d=(0,s.createContext)({organizationOwnerRecordCache:void 0,updateCacheWithRecordMap:e=>{}});function c(e){let{children:t}=e;const a=(0,i.O7)(),[n,c]=(0,s.useState)(void 0);(0,s.useEffect)((()=>{const e=u(a);c(e)}),[a]);const g=(0,s.useCallback)((e=>{var t;const s=null===(t=r.default.state.currentUserStore)||void 0===t?void 0:t.id;if(!s||!e.data.organizationOwnerRecordMap)return;if(!e.data.organizationOwnerRecordMap)return;const n=o.Ak.create(e.data.organizationOwnerRecordMap);c((e=>{if(!e)return u(a);for(const{pointer:t,model:a}of n)e.setModelAndRole({pointer:t,userId:s},a,"editor");return u(a,e.data)}))}),[a]);return n?(0,l.jsx)(d.Provider,{value:{organizationOwnerRecordCache:n,updateCacheWithRecordMap:g},children:t}):null}function u(e,t){const a=new n.Z({name:"organizationSettingsConsoleCache",data:t});return a.addCacheFallback(e.defaultRecordCache.inMemoryRecordCache),a}},35238:(e,t,a)=>{a.d(t,{Z:()=>De});var s=a(67294),n=a(86628),i=a(24405),o=a(66673),r=a(73123),l=a(9291),d=a(37810),c=a(33929),u=a(18514),g=a(24026),m=a(26388),p=a(64369),f=a(74523),h=a(8840),v=a(42485),x=a(480),y=a(55964),b=a(90028),M=a(24697),_=a(35314),w=a(4023),C=a(23124),j=a(66661),S=a(97706),T=a(67579),k=a(85893);const F=640;function N(e){let{data:t,loading:a,error:n,daysFilter:o,setDaysFilter:g}=e;const[h,v]=(0,_.e)(),N=(0,i.yK)((e=>({title:{fontWeight:d.Z.fontWeight.medium,fontSize:16,marginBlock:"8px 4px",display:"flex",alignItems:"center",justifyContent:"center"},infoIcon:{marginLeft:4},container:{display:"flex",flexDirection:"column",gap:16},titleContainer:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",gap:16},cardContainer:{justifyContent:"flex-start",gap:18},cardTextContainer:{alignItems:"flex-start"}})),[]),{pageViews:A,uniquePageViews:I,pagesCreated:P,pageEdits:D}=t,E=(0,x.O7)(),R=(0,s.useCallback)((e=>{M.ky(E,{daysFilter:e}),g(e)}),[E,g]);return(0,k.jsxs)("div",{style:N.container,ref:h,children:[(0,k.jsxs)("div",{style:N.titleContainer,children:[(0,k.jsxs)(p.Z,{style:N.title,children:[(0,k.jsx)(l.FormattedMessage,{id:"workspaceAnalytics.content.contentEngagement.title",defaultMessage:"Content engagement"}),(0,k.jsx)(m.ZP,{placement:w.u.Bottom,render:e=>(0,k.jsx)(f.Z,{...e,href:(0,u.UY)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq",style:N.infoIcon}),renderTooltip:()=>"all_time"!==o?(0,k.jsx)(l.FormattedMessage,{id:"settings.workspaceAnalytics.contentTab.contentEngagement.tooltip.lastDays",defaultMessage:"Activity on all workspace pages (includes private and shared) over the {dateRange}",values:{dateRange:c.default.formatMessage(r.xX[o])}}):(0,k.jsx)(l.FormattedMessage,{id:"settings.workspaceAnalytics.contentTab.contentEngagement.tooltip.allTime",defaultMessage:"All time activity on all pages in the workspace (includes private and shared)"})})]}),(0,k.jsx)(T.f,{currentFilter:o,onChangeFilter:R})]}),(0,k.jsxs)(C.rj,{gap:16,children:[(0,k.jsx)(C.r8,{row:1,col:1,children:(0,k.jsx)(S.q,{style:N.cardContainer,textStyles:N.cardTextContainer,loading:a,error:n,icon:y.N,iconStyles:{height:48,width:48},title:(0,k.jsx)(l.FormattedMessage,{id:"workspaceAnalytics.content.contentEngagement.totalViews",defaultMessage:"{pageViews} total views",values:{pageViews:(0,k.jsx)(j.e,{abbreviateNumber:v<F,num:A})}}),byline:(0,k.jsx)(p.Z,{isSecondaryColor:!0,children:(0,k.jsx)(l.FormattedMessage,{id:"workspaceAnalytics.content.contentEngagement.uniqueViews",defaultMessage:"{uniquePageViews} unique page views",values:{uniquePageViews:(0,k.jsx)(j.e,{abbreviateNumber:v<F,num:I})}})})})}),(0,k.jsx)(C.r8,{row:1,col:2,children:(0,k.jsx)(S.q,{style:N.cardContainer,textStyles:N.cardTextContainer,loading:a,error:n,icon:b.j,iconStyles:{height:36,width:36},title:(0,k.jsx)(l.FormattedMessage,{id:"workspaceAnalytics.content.contentEngagement.pagesCreated",defaultMessage:"{pagesCreated} pages created",values:{pagesCreated:(0,k.jsx)(j.e,{abbreviateNumber:v<F,num:P})}}),byline:(0,k.jsx)(p.Z,{isSecondaryColor:!0,children:(0,k.jsx)(l.FormattedMessage,{id:"workspaceAnalytics.content.contentEngagement.pageEdits.byline",defaultMessage:"{pageEdits} edits",values:{pageEdits:(0,k.jsx)(j.e,{abbreviateNumber:v<F,num:D})}})})})})]})]})}var A=a(98165),I=a(73075),P=a(53855),D=a(34690),E=a(77883),R=a(40394),Z=a(68785),V=a(71291),L=a(44678),B=a(98569),U=a(15145),W=a(33907),z=a(56666),O=a(27714),q=a(893),K=a(12714),H=a(84210),G=a(60709),$=a(61766),Y=a(52275),Q=a(31945),J=a(73063),X=a(78140),ee=a(32163),te=a(53437),ae=a(72495);function se(e){let{blockStore:t}=e;const a=(0,x.O7)(),s=(0,n.qz)(void 0,$.Z),o=(0,i.yK)((e=>({changePermissionsIcon:{height:18,width:18,color:e.regularIconColor,fill:"currentColor"},copyLinkIcon:{height:15,width:15,color:e.regularIconColor,fill:"currentColor"},openLinkIcon:{height:15,width:15,color:e.regularIconColor,fill:"currentColor",transform:"rotate(-45deg)"}})),[]);const r={key:"actions",render:e=>(0,k.jsx)(ae.Z,{...e}),items:[{key:"copy-link",render:e=>(0,k.jsx)(Y.Z,{...e,icon:(0,O.N)(o.copyLinkIcon),title:(0,k.jsx)(l.FormattedMessage,{id:"adminContentSearchTab.pagesTable.page.actions.copyLink",defaultMessage:"Copy link to page"})}),action:async function(){const e=(0,H.ZP)({store:t,pageVisitSource:U.tY.CopyLink});await q.RD({environment:a,stringValue:e,copiedMessage:q.tq.copiedLinkToClipboard}),s.setState({open:!1})}},{key:"open-page-in-new-tab",render:e=>(0,k.jsx)(Y.Z,{...e,icon:(0,W.n)(o.openLinkIcon),title:(0,k.jsx)(l.FormattedMessage,{id:"adminContentSearchTab.pagesTable.page.actions.openLink",defaultMessage:"Open in new tab"})}),action:function(){const e=(0,H.ZP)({store:t,pageVisitSource:U.tY.LinkInPage});K.D({environment:a,url:e}),s.setState({open:!1})}}]};return(0,k.jsx)(Q.ZP,{popupType:te.kQ.Popup,alignmentToOrigin:te.ZP.Alignment.Center,placementToOrigin:te.ZP.Placement.Right,style:{width:248},render:()=>(0,k.jsx)(X.Z,{menuType:G.og.Popup,width:248,children:(0,k.jsx)(ee.Z,{type:ee.i.Vertical,initialFocus:void 0,sections:[r]})}),buttonPopupStore:s,renderOrigin:e=>(0,k.jsx)(J.Z,{icon:z.o,...e})})}const ne=(0,l.defineMessages)({views:{id:"workspaceAnalytics.contentTab.contentTable.viewsColumn.tooltip",defaultMessage:"Number of times users have viewed the page"},uniqueViews:{id:"workspaceAnalytics.contentTab.contentTable.uniqueViewsColumn.tooltip",defaultMessage:"Total number of users that have viewed page in the selected period"}}),ie={id:"page",headerTitle:(0,k.jsx)(pe,{message:r.y3.page}),renderCell:e=>(0,k.jsx)(L.o,{blockStore:e.navigableBlockStore,rightIcon:(0,k.jsx)(se,{blockStore:e.navigableBlockStore})}),widthData:{width:320,maxWidth:320},sortable:!1},oe={id:"location",headerTitle:(0,k.jsx)(l.FormattedMessage,{id:"settings.workspaceAnalytics.contentTab.allPages.table.location.name",defaultMessage:"Location"}),renderCell:e=>(0,k.jsx)(D.N,{blockStore:e.navigableBlockStore,teamStore:e.teamStore}),widthData:{width:140},sortable:!1},re={id:"audience",headerTitle:(0,k.jsx)(pe,{message:r.y3.audience}),renderCell:e=>(0,k.jsx)(p.Z,{children:(0,P.e)(e.audience)}),widthData:{width:140},sortable:!1},le={id:"views",headerTitle:(0,k.jsx)(B.r,{tooltipMessageDescriptor:ne.views,columnHeader:r.y3.allViews}),renderCell:e=>(0,k.jsx)(p.Z,{children:e.views.toLocaleString()}),widthData:{width:100},sortable:!0},de={id:"uniqueViews",headerTitle:(0,k.jsx)(B.r,{tooltipMessageDescriptor:ne.uniqueViews,columnHeader:r.y3.uniqueViews}),renderCell:e=>(0,k.jsx)(p.Z,{children:e.uniqueViews.toLocaleString()}),widthData:{width:100},sortable:!0},ce={id:"createdBy",headerTitle:(0,k.jsx)(pe,{message:r.y3.createdBy}),renderCell:e=>e.createdById?(0,k.jsx)(E.t,{blockStore:e.navigableBlockStore,userIds:[e.createdById]}):null,widthData:{width:140},sortable:!1},ue={id:"createdTime",headerTitle:(0,k.jsx)(pe,{message:r.y3.createdAt}),renderCell:e=>(0,k.jsx)(V.T,{dateTs:e.createdTime}),widthData:{width:100},sortable:!1},ge=[ie,le,de,oe,re,{id:"lastEditedBy",headerTitle:(0,k.jsx)(pe,{message:r.y3.lastEditedBy}),renderCell:e=>e.lastEditedById?(0,k.jsx)(E.t,{blockStore:e.navigableBlockStore,userIds:[e.lastEditedById]}):null,widthData:{width:140},sortable:!1},{id:"lastEditedTime",headerTitle:(0,k.jsx)(pe,{message:r.y3.lastEditedAt}),renderCell:e=>(0,k.jsx)(V.T,{dateTs:e.lastEditedTime}),widthData:{width:100},sortable:!1},ce,ue];function me(e){let{navigableBlockStores:t,analyticsByPageId:a,runNewSearch:o,sort:r,setSort:d,loadNextPage:c,loading:u,error:g}=e;const m=(0,n.VK)((()=>t.map((e=>{var t,s,n;return{id:e.id,isClickable:!1,navigableBlockStore:e,teamStore:(0,A.VP)(e),views:(null===(t=a.get(e.id))||void 0===t?void 0:t.pageViews)||0,uniqueViews:(null===(s=a.get(e.id))||void 0===s?void 0:s.uniquePageViews)||0,createdTime:e.getCreatedTime(),lastEditedTime:e.getLastEditedTime(),createdById:e.getCreatedById(),lastEditedById:e.getLastEditedById(),audience:(null===(n=a.get(e.id))||void 0===n?void 0:n.audience)||"private"}}))),[t,a]),f=(0,s.useMemo)((()=>function(e){const t=ge.find((t=>"pageViews"===e.field&&"views"===t.id||"uniquePageViews"===e.field&&"uniqueViews"===t.id)),a=t?{column:t,sortAscending:"asc"===e.direction}:void 0;return a}(r)),[r]),h=(0,i.yK)((e=>(0,R.b)({columnRenderInfo:ge,theme:e,containerMarginTop:0})),[]),v=(0,i.yK)((e=>({emptyQuery:{marginTop:15,marginBottom:40,textAlign:"center"},loadingSpinner:{margin:"24px auto 24px"}})),[]);return g?(0,k.jsx)(I.q,{error:g,runNewSearch:o}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(R.D,{hideHeaderRowPadding:!0,allowHorizontalScroll:!0,setStickyHeaderRow:!0,maxHeight:500,columnRenderInfo:ge,rows:m,sortState:f,onSortStateChanged:e=>{d(function(e){const t="views"===e.column.id?"pageViews":"uniquePageViews",a=e.sortAscending?"asc":"desc";return{field:t,direction:a}}(e))},onLoadMore:c,renderNoRowsComponent:()=>(0,k.jsx)(p.Z,{isSmall:!0,style:v.emptyQuery,children:!u&&0===t.length&&(0,k.jsx)(l.FormattedMessage,{id:"settings.workspaceAnalytics.contentTab.allPages.table.empty",defaultMessage:"No pages found with your query."})}),styles:h}),u?(0,k.jsx)(Z.Z,{style:v.loadingSpinner}):null]})}function pe(e){let{message:t}=e;const a=(0,l.useIntl)();return(0,k.jsx)(k.Fragment,{children:a.formatMessage(t)})}a(57658);var fe=a(21202),he=a(53965),ve=a(1898),xe=a(54642),ye=a(83726),be=a(27617),Me=a(6258),_e=a(68117);const we={query:"",createdBy:[],lastEditedTime:{starting:void 0,ending:void 0},createdTime:{starting:void 0,ending:void 0},teamIds:[]},Ce={field:"pageViews",direction:"desc"},je=ye.D2,Se={filters:we,sort:Ce,timeRange:je,navigableBlockIds:[],analyticsByPageId:new Map,numPagesLoaded:0,paginationToken:void 0,hasNextPage:!0,loading:!1,error:void 0,shouldReRunSearch:!1};var Te=a(30397),ke=a(36550),Fe=a(79782),Ne=a(66994),Ae=a(35389);const Ie=(0,l.defineMessages)({placeholder:{id:"settings.workspaceAnalytics.contentTab.placeholder",defaultMessage:"Search by title"}});function Pe(e){let{spaceStore:t,teamStores:a,timeRange:s,filters:o,runNewSearch:r,setFilters:d,setTimeRange:u}=e;const g=(0,n.VK)((()=>a??Te.Z.state.teams),[a]),m=(0,i.yK)((e=>({container:{width:"100%",margin:"0 auto 14px"},filterPillsContainer:{width:"100%",display:"flex",flexWrap:"wrap",rowGap:4,flexDirectionRow:"row",alignItems:"center"},timeRangeContainer:{display:"flex",flexDirectionRow:"row",alignItems:"center",justifyContent:"center",gap:4,borderRight:`1px solid ${e.tableDividerColor}`,marginRight:12,paddingRight:6}})),[]);return(0,k.jsxs)("div",{style:m.container,children:[(0,k.jsx)(Ne.O,{mode:Ne.p.OnChange,query:o.query,setQueryFilter:function(e){d({query:e},{runSearchAfter:!0})},placeholderText:c.default.formatMessage(Ie.placeholder)}),(0,k.jsxs)("div",{style:m.filterPillsContainer,children:[(0,k.jsxs)("div",{style:m.timeRangeContainer,children:[(0,k.jsx)(p.Z,{isSecondaryColor:!0,children:(0,k.jsx)(l.FormattedMessage,{id:"settings.workspaceAnalytics.contentTab.timeRange",defaultMessage:"Views from"})}),(0,k.jsx)(T.f,{currentFilter:s,onChangeFilter:u})]}),(0,k.jsx)(Ae.p,{selectedTeamIds:o.teamIds,setSelectedTeamIds:function(e){d({teamIds:e})},onMenuClose:r,teamStores:g}),(0,k.jsx)(ke.y,{spaceStore:t,createdByFilterIds:o.createdBy,setCreatedByFilter:function(e){d({createdBy:e})},runNewSearch:r,includeGuests:!1}),(0,k.jsx)(Fe.f,{lastEditedTime:o.lastEditedTime,createdTime:o.createdTime,setLastEditedTime:function(e){d({lastEditedTime:e,createdTime:{starting:void 0,ending:void 0}},{runSearchAfter:!0})},setCreatedOnTime:function(e){d({createdTime:e,lastEditedTime:{starting:void 0,ending:void 0}},{runSearchAfter:!0})}})]})]})}function De(e){var t;let{spaceStore:a,teamStores:r,contentEngagement:l}=e;const d=(0,o.D9)(a.id),c=(0,s.useRef)(!1),{loadNextPage:u,navigableBlockStores:g,analyticsByPageId:m,runNewSearch:p,setFilters:f,setTimeRange:h,timeRange:y,filters:b,sort:_,setSort:w,loading:C,error:j}=function(e){let{spaceStore:t}=e;const a=(0,x.O7)(),[n,i]=(0,s.useState)(Se),o=(0,s.useRef)(we),r=(0,s.useRef)(Ce),l=(0,s.useRef)(je),{organizationOwnerRecordCache:d,updateCacheWithRecordMap:c}=(0,s.useContext)(_e.V),u=(0,s.useCallback)((async e=>{let{fetchFromFirstPage:s,ignoreSearchInputComparison:d}=e;const u=!he.Xy(n.filters,o.current)||!he.Xy(n.sort,r.current)||!he.Xy(n.timeRange,l.current);if(!d&&!u)return;o.current=n.filters,r.current=n.sort,l.current=n.timeRange;let g=n.loading,m=n.error,p=n.hasNextPage,f=n.paginationToken;if(s&&(i((e=>({...Se,filters:e.filters,timeRange:e.timeRange,sort:e.sort}))),g=Se.loading,m=Se.error,p=Se.hasNextPage,f=Se.paginationToken),!p||g)return;if(m)return;i((e=>({...e,loading:!0})));const h=await xe.loadContentAnalytics(a,{spaceId:t.id,sort:n.sort,titleQuery:n.filters.query,filters:{inTeams:n.filters.teamIds,lastEditedTime:(0,be.Hq)(n.filters.lastEditedTime),createdTime:(0,be.Hq)(n.filters.createdTime),createdBy:n.filters.createdBy},timeRange:n.timeRange,startCursor:f});if("failed"===h.type)return void i((e=>({...e,loading:!1,error:h.error})));c(h);const v=h.data.results;i((e=>{const t=[],a=new Set(e.navigableBlockIds),s=new Map(e.analyticsByPageId);for(const i of v){const e=i.id,n=i.analytics;a.has(e)||(t.push(e),s.set(e,n))}const n=[...e.navigableBlockIds,...t];return{...e,navigableBlockIds:n,analyticsByPageId:s,loading:!1,error:void 0,numPagesLoaded:e.numPagesLoaded+1,paginationToken:h.data.nextCursor,hasNextPage:Boolean(h.data.nextCursor)}}))}),[a,t,n.filters,n.sort,n.timeRange,n.loading,n.error,n.hasNextPage,n.paginationToken,c]),g=(0,s.useMemo)((()=>n.navigableBlockIds.map((e=>new Me.G(a,{id:e,table:fe.iU},{inMemoryRecordCache:d})))),[n.navigableBlockIds,d,a]);(0,s.useEffect)((()=>{n.shouldReRunSearch&&(i((e=>({...e,shouldReRunSearch:!1}))),u({fetchFromFirstPage:!0,ignoreSearchInputComparison:!1}))}),[n.shouldReRunSearch,u]);const m=(0,s.useCallback)((async()=>{n.shouldReRunSearch||await u({fetchFromFirstPage:!1,ignoreSearchInputComparison:!0})}),[n.shouldReRunSearch,u]),p=(0,s.useCallback)((async e=>{await u({fetchFromFirstPage:!0,ignoreSearchInputComparison:e||!1})}),[u]),f=(0,s.useCallback)(((e,t)=>{i((a=>({...a,filters:{...a.filters,...e},...null!=t&&t.runSearchAfter?{shouldReRunSearch:null==t?void 0:t.runSearchAfter}:void 0})));for(const s of(0,ve.Yd)(e))he.Xy(e[s],we[s])||M.uS(a,{filter:s,value:"createdBy"===s||"teamIds"===s?e[s]:void 0})}),[a]),h=(0,s.useCallback)((e=>{i((t=>({...t,timeRange:e,shouldReRunSearch:!0}))),M.e2(a,{daysFilter:e})}),[a]),v=(0,s.useCallback)((e=>{i((t=>({...t,sort:e,shouldReRunSearch:!0}))),M.jM(a,{column:e.field,isAscending:"asc"===e.direction})}),[a]);return{filters:n.filters,sort:n.sort,timeRange:n.timeRange,analyticsByPageId:n.analyticsByPageId,loading:n.loading,error:n.error,navigableBlockStores:g,loadNextPage:m,runNewSearch:p,setFilters:f,setTimeRange:h,setSort:v}}({spaceStore:a}),S=(0,i.yK)((e=>({container:{display:"flex",flexDirection:"column",gap:16}})),[]),T=(0,n.VK)((()=>Boolean(a.canAdmin())),[a]),F=(0,s.useMemo)((()=>void 0!==d&&a.id!==d),[a.id,d]);(0,s.useEffect)((()=>{c.current&&!F||(p(!0),c.current=!0)}),[p,F]);const A=(0,n.VK)((()=>a.getName()),[a]);return"NotFoundError"===(null==l||null===(t=l.error)||void 0===t?void 0:t.name)?(0,k.jsx)(v.y,{type:"empty",spaceName:A}):(0,k.jsxs)("div",{style:S.container,children:[(0,k.jsx)(N,{data:l.data,loading:l.loading,error:l.error,daysFilter:l.daysFilter,setDaysFilter:l.setDaysFilter}),(0,k.jsx)(Ee,{canAdmin:T,daysFilter:y}),(0,k.jsx)(Pe,{spaceStore:a,teamStores:r,runNewSearch:p,setFilters:f,filters:b,timeRange:y,setTimeRange:h}),(0,k.jsx)(me,{navigableBlockStores:g,analyticsByPageId:m,runNewSearch:p,sort:_,setSort:w,loadNextPage:u,loading:C,error:j})]})}function Ee(e){const t=(0,i.yK)((()=>({sectionTitle:{fontWeight:d.Z.fontWeight.semibold,fontSize:16},sectionTitleSection:{display:"flex",flexFlow:"row",alignItems:"center"},helpInfo:{marginLeft:4},wrapper:{display:"flex",flexDirection:"row",justifyContent:"space-between",marginTop:12},exportButton:{marginLeft:5}})),[]),{canAdmin:a,daysFilter:s}=e,n=(0,k.jsxs)("div",{style:t.sectionTitleSection,children:[(0,k.jsx)(p.Z,{style:t.sectionTitle,children:(0,k.jsx)(l.FormattedMessage,{id:"settings.workspaceAnalytics.contentTab.allPages.title",defaultMessage:"Pages"})}),(0,k.jsx)(m.ZP,{placement:m.ug.Bottom,render:e=>(0,k.jsx)(f.Z,{...e,href:(0,u.UY)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq",style:t.helpInfo}),renderTooltip:()=>"all_time"!==s?(0,k.jsx)(l.FormattedMessage,{id:"settings.workspaceAnalytics.contentTab.pages.tooltip.lastDays",defaultMessage:"Activity from the {dateRange} on pages you have access to",values:{dateRange:c.default.formatMessage(r.xX[s])}}):(0,k.jsx)(l.FormattedMessage,{id:"settings.workspaceAnalytics.contentTab.pages.tooltip.allTime",defaultMessage:"All time activity on pages you have access to in the workspace"})})]});return(0,k.jsxs)("div",{style:t.wrapper,children:[n,a&&(0,k.jsx)(h.f,{style:t.exportButton,analyticsType:g.x.Content})]})}},42485:(e,t,a)=>{a.d(t,{y:()=>f});a(67294);var s=a(480),n=a(24405),i=a(83176),o=a(84169),r=a(9291),l=a(12714),d=a(33929),c=a(18514),u=a(89728),g=a(64369),m=a(85893);const p=(0,r.defineMessages)({emptyAnalyticsHeading:{id:"workspaceAnalyticsTabs.empty.heading",defaultMessage:"No workspace analytics yet"},emptyAnalyticsDescription:{id:"workspaceAnalyticsTabs.empty.description",defaultMessage:"It may take some time for workspace analytics information to appear."},disabledAnalyticsHeading:{id:"workspaceAnalyticsTabs.disabled.heading",defaultMessage:"Analytics are disabled"},disabledAnalyticsDescription:{id:"workspaceAnalyticsTabs.disabled.description",defaultMessage:"A workspace owner has turned off page view recording for {name}.{br}This information will not be available in your workspace settings or on individual pages."},disabledAnalyticsDescriptionNoSpaceName:{id:"workspaceAnalyticsTabs.disabled.description.unnamed",defaultMessage:"A workspace owner has turned off page view recording for this space.{br}This information will not be available in your workspace settings or on individual pages."}});function f(e){const t=(0,n.yK)((e=>({outerDiv:{display:"flex",flexDirection:"column",justifyContent:"center",height:"80%",gap:24},innerDiv:{display:"flex",flexDirection:"column",textAlign:"center",alignItems:"center",gap:4},header:{fontSize:16,fontWeight:500},analyticsIcon:{fill:e.mediumTextColor,padding:20,height:150,width:150},learnMoreIcon:{width:14,height:14},learnMore:{gap:4}})),[]),a=(0,s.O7)(),{type:f,spaceName:h}=e,v=function(e,t){switch(e){case"empty":return{heading:d.default.formatMessage(p.emptyAnalyticsHeading),description:d.default.formatMessage(p.emptyAnalyticsDescription)};case"disabled":const e=t?(0,m.jsx)(r.FormattedMessage,{...p.disabledAnalyticsDescription,values:{name:t,br:(0,m.jsx)("br",{})}}):(0,m.jsx)(r.FormattedMessage,{...p.disabledAnalyticsDescriptionNoSpaceName,values:{br:(0,m.jsx)("br",{})}});return{heading:d.default.formatMessage(p.disabledAnalyticsHeading),description:e}}}(f,h);return(0,m.jsx)("div",{style:t.outerDiv,children:(0,m.jsxs)("div",{style:t.innerDiv,children:[(0,i.z)(t.analyticsIcon),(0,m.jsx)(g.Z,{isSecondaryColor:!0,style:t.header,children:v.heading}),(0,m.jsx)(g.Z,{isSecondaryColor:!0,children:v.description}),(0,m.jsxs)(u.Z,{onClick:()=>l.D({environment:a,url:(0,c.UY)("guides.workspaceAnalytics")}),style:t.learnMore,children:[(0,o.m)(t.learnMoreIcon),(0,m.jsx)(g.Z,{isSmall:!0,children:(0,m.jsx)(r.FormattedMessage,{id:"workspaceAnalyticsTabs.disabled.learnMore",defaultMessage:"Learn more"})})]})]})})}},89426:(e,t,a)=>{a.d(t,{Z:()=>D});var s=a(67294),n=a(86628),i=a(24405),o=a(42485),r=a(480),l=a(50780),d=a(55964),c=a(28495),u=a(21202),g=a(73123),m=a(9291),p=a(37810),f=a(24697),h=a(33929),v=a(18514),x=a(35314),y=a(4023),b=a(6258),M=a(23124),_=a(26388),w=a(64369),C=a(74523),j=a(66661),S=a(68117),T=a(55360),k=a(97706),F=a(67579),N=a(85893);const A=640;function I(e){let{data:t,loading:a,error:o,daysFilter:I,setDaysFilter:P}=e;const D=(0,r.O7)(),{organizationOwnerRecordCache:E}=(0,s.useContext)(S.V),R=(0,i.yK)((e=>({title:{fontWeight:p.Z.fontWeight.medium,fontSize:16,marginBlock:"9px 4px",display:"flex",alignItems:"center"},helpInfo:{marginLeft:4},container:{display:"flex",flexDirection:"column",gap:16},titleContainer:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",gap:16},overviewCard:{width:"fit-content"}})),[]),[Z,V]=(0,x.e)(),{pageViews:L,uniquePageViews:B,pageEdits:U,topPages:W}=t,z=(0,n.VK)((()=>W.map((e=>{let{pageId:t,pageViews:a}=e;return{store:new b.G(D,{id:t,table:u.iU},{inMemoryRecordCache:E}),caption:(0,N.jsx)(m.FormattedMessage,{id:"workspaceAnalytics.overview.contentEngagement.caption.pageView",defaultMessage:"{pageViews} views",values:{pageViews:(0,N.jsx)(j.e,{abbreviateNumber:!1,num:a})}})}}))),[D,W,E]),O=(0,s.useCallback)((e=>{P(e),f.m0(D,{filter:"content_engagement",daysFilter:e})}),[D,P]);return(0,N.jsxs)("div",{style:R.container,ref:Z,children:[(0,N.jsxs)("div",{style:R.titleContainer,children:[(0,N.jsxs)(w.Z,{style:R.title,children:[(0,N.jsx)(m.FormattedMessage,{id:"workspaceAnalytics.overview.contentEngagement.title",defaultMessage:"Content engagement"}),(0,N.jsx)(_.ZP,{placement:y.u.Bottom,render:e=>(0,N.jsx)(C.Z,{...e,href:(0,v.UY)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq",style:R.helpInfo}),renderTooltip:()=>"all_time"!==I?(0,N.jsx)(m.FormattedMessage,{id:"settings.workspaceAnalytics.overviewTab.contentEngagement.tooltip.lastDays",defaultMessage:"Activity on all pages in the workspace over the {dateRange}",values:{dateRange:h.default.formatMessage(g.xX[I])}}):(0,N.jsx)(m.FormattedMessage,{id:"settings.workspaceAnalytics.overviewTab.contentEngagement.tooltip.allTime",defaultMessage:"All time activity on all pages in the workspace"})})]}),(0,N.jsx)(F.f,{currentFilter:I,onChangeFilter:O})]}),(0,N.jsxs)(M.rj,{gap:16,children:[(0,N.jsx)(M.r8,{row:1,col:1,colEnd:3,children:(0,N.jsx)(k.q,{loading:a,error:o,icon:d.N,textStyles:R.overviewCard,title:(0,N.jsx)(m.FormattedMessage,{id:"workspaceAnalytics.overview.contentEngagement.views",defaultMessage:"{pageViews} total views",values:{pageViews:(0,N.jsx)(j.e,{abbreviateNumber:V<A,num:L})}})})}),(0,N.jsx)(M.r8,{row:2,col:1,colEnd:3,children:(0,N.jsx)(k.q,{loading:a,error:o,icon:c.v,textStyles:R.overviewCard,iconStyles:{height:18,width:18},title:(0,N.jsx)(m.FormattedMessage,{id:"workspaceAnalytics.overview.contentEngagement.uniqueViews",defaultMessage:"{uniquePageViews} unique page views",values:{uniquePageViews:(0,N.jsx)(j.e,{abbreviateNumber:V<A,num:B})}})})}),(0,N.jsx)(M.r8,{row:3,col:1,colEnd:3,children:(0,N.jsx)(k.q,{loading:a,error:o,icon:l.E,textStyles:R.overviewCard,iconStyles:{height:18,width:18},title:(0,N.jsx)(m.FormattedMessage,{id:"workspaceAnalytics.overview.contentEngagement.pageEdits",defaultMessage:"{pageEdits} edits",values:{pageEdits:(0,N.jsx)(j.e,{abbreviateNumber:V<A,num:U})}})})}),(0,N.jsx)(M.r8,{row:1,rowEnd:4,col:3,colEnd:5,children:(0,N.jsx)(T.$,{loading:a,error:o,title:(0,N.jsx)(m.FormattedMessage,{id:"workspaceAnalytics.overview.contentEngagement.popularPages",defaultMessage:"Most popular pages"}),items:z})})]})]})}var P=a(81653);function D(e){var t,a;let{onUserTabFilterChange:s,spaceStore:r,contentEngagement:l,userEngagement:d}=e;const c=(0,i.yK)((e=>({container:{display:"flex",flexDirection:"column",gap:24}})),[]),u=(0,n.VK)((()=>r.getName()),[r]);if("NotFoundError"===(null===(t=l.error)||void 0===t?void 0:t.name)||"NotFoundError"===(null===(a=d.error)||void 0===a?void 0:a.name))return(0,N.jsx)(o.y,{type:"empty",spaceName:u});return(0,N.jsxs)("div",{style:c.container,children:[(0,N.jsx)(P.D,{data:d.data,loading:d.loading,error:d.error,daysFilter:d.daysFilter,setDaysFilter:function(e){s({graphFilter:"all_time"===e?"last_90_days":e}),d.setDaysFilter(e)}}),(0,N.jsx)(I,{data:l.data,loading:l.loading,error:l.error,daysFilter:l.daysFilter,setDaysFilter:l.setDaysFilter})]})}},81653:(e,t,a)=>{a.d(t,{D:()=>A,c:()=>I});var s=a(67294),n=a(480),i=a(86628),o=a(24405),r=a(9999),l=a(29369),d=a(19889),c=a(73123),u=a(9291),g=a(1898),m=a(37810),p=a(24697),f=a(33929),h=a(18514),v=a(35314),x=a(4023),y=a(6258),b=a(23124),M=a(26388),_=a(64369),w=a(74523),C=a(66661),j=a(68117),S=a(55360),T=a(97706),k=a(67579),F=a(85893);const N=640;function A(e){let{data:t,loading:a,error:r,daysFilter:g,setDaysFilter:A}=e;const P=(0,n.O7)(),{activeMembersCount:D,previousActiveMembersCount:E,activeGuestsCount:R,previousActiveGuestsCount:Z,topTeamspaces:V,topViewers:L,topEditors:B}=t,U=(0,o.yK)((e=>({title:{fontWeight:m.Z.fontWeight.medium,fontSize:16,marginBlock:"8px 4px",display:"flex",alignItems:"center"},helpInfo:{marginLeft:4},container:{display:"flex",flexDirection:"column",gap:16},summaryCard:{height:70},titleContainer:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",gap:16}})),[]),[W,z]=(0,v.e)(),{organizationOwnerRecordCache:O}=(0,s.useContext)(j.V),q=(0,s.useCallback)((e=>{p.m0(P,{filter:"user_engagement",daysFilter:e}),A(e)}),[P,A]),K=(0,i.VK)((()=>V.map((e=>{let{teamspaceId:t,pageViews:a}=e;return{store:new y.zX(P,{id:t,table:l.e0},{inMemoryRecordCache:O}),caption:(0,F.jsx)(u.FormattedMessage,{id:"workspaceAnalytics.overview.userEngagement.caption.pageViews",defaultMessage:"{pageViews} views",values:{pageViews:(0,F.jsx)(C.e,{abbreviateNumber:!0,num:a})}})}})).filter((e=>e.store.canRead())).slice(0,5)),[P,V,O]),H=(0,i.VK)((()=>L.map((e=>{let{userId:t,pageViews:a}=e;return{store:new y.U6(P,{id:t,table:d.KJ}),caption:(0,F.jsx)(u.FormattedMessage,{id:"workspaceAnalytics.overview.userEngagement.caption.pageView",defaultMessage:"{pageViews} views",values:{pageViews:(0,F.jsx)(C.e,{abbreviateNumber:!0,num:a})}})}})).slice(0,5)),[P,L]),G=(0,i.VK)((()=>B.map((e=>{let{userId:t,pageEdits:a}=e;return{store:new y.U6(P,{id:t,table:d.KJ}),caption:(0,F.jsx)(u.FormattedMessage,{id:"workspaceAnalytics.overview.userEngagement.caption.pageEdits",defaultMessage:"{pageEdits} edits",values:{pageEdits:(0,F.jsx)(C.e,{abbreviateNumber:!0,num:a})}})}})).slice(0,5)),[P,B]);return(0,F.jsxs)("div",{style:U.container,ref:W,children:[(0,F.jsxs)("div",{style:U.titleContainer,children:[(0,F.jsxs)(_.Z,{style:U.title,children:[(0,F.jsx)(u.FormattedMessage,{id:"workspaceAnalytics.overview.userEngagement.title",defaultMessage:"User engagement"}),(0,F.jsx)(M.ZP,{placement:x.u.Bottom,render:e=>(0,F.jsx)(w.Z,{...e,href:(0,h.UY)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq",style:U.helpInfo}),renderTooltip:()=>"all_time"!==g?(0,F.jsx)(u.FormattedMessage,{id:"settings.workspaceAnalytics.overviewTab.userEngagement.tooltip.lastDays",defaultMessage:"Active members and guests have viewed at least one page within the {dateRange}",values:{dateRange:f.default.formatMessage(c.xX[g])}}):(0,F.jsx)(u.FormattedMessage,{id:"settings.workspaceAnalytics.overviewTab.userEngagement.tooltip.allTime",defaultMessage:"Active members and guests have viewed at least one page in the workspace"})})]}),(0,F.jsx)(k.f,{currentFilter:g,onChangeFilter:q})]}),(0,F.jsxs)(b.rj,{gap:16,children:[(0,F.jsx)(b.r8,{row:1,col:1,children:(0,F.jsx)(T.q,{style:U.summaryCard,loading:a,error:r,title:(0,F.jsx)(u.FormattedMessage,{id:"workspaceAnalytics.overview.userEngagement.activeMembersCount",defaultMessage:"{activeMembersCount} active members",values:{activeMembersCount:(0,F.jsx)(C.e,{abbreviateNumber:z<N,num:D})}}),byline:void 0!==E?(0,F.jsx)(I,{userType:"members",daysFilter:g,count:D,previousCount:E}):null})}),(0,F.jsx)(b.r8,{row:1,col:2,children:(0,F.jsx)(T.q,{style:U.summaryCard,loading:a,error:r,title:(0,F.jsx)(u.FormattedMessage,{id:"workspaceAnalytics.overview.userEngagement.activeGuestsCount",defaultMessage:"{activeGuestsCount} active guests",values:{activeGuestsCount:(0,F.jsx)(C.e,{abbreviateNumber:z<N,num:R})}}),byline:void 0!==Z?(0,F.jsx)(I,{userType:"guests",daysFilter:g,count:R,previousCount:Z}):null})})]}),(0,F.jsxs)(b.rj,{gap:16,children:[(0,F.jsx)(b.r8,{row:1,col:1,children:(0,F.jsx)(S.$,{loading:a,error:r,title:(0,F.jsx)(u.FormattedMessage,{id:"workspaceAnalytics.overview.userEngagement.activeTeamspaces",defaultMessage:"Most active teamspaces"}),items:K})}),(0,F.jsx)(b.r8,{row:1,col:2,children:(0,F.jsx)(S.$,{loading:a,error:r,title:(0,F.jsx)(u.FormattedMessage,{id:"workspaceAnalytics.overview.userEngagement.activeViewers",defaultMessage:"Most active viewers"}),items:H})}),(0,F.jsx)(b.r8,{row:1,col:3,children:(0,F.jsx)(S.$,{loading:a,error:r,title:(0,F.jsx)(u.FormattedMessage,{id:"workspaceAnalytics.overview.userEngagement.activeEditors",defaultMessage:"Most active editors"}),items:G})})]})]})}function I(e){let{userType:t,daysFilter:a,count:s,previousCount:n}=e;const i=0===s&&0===n?0:Math.round((s-n)/n*100);let l;l=i===1/0?function(e,t,a){if("all_time"===a)return(0,F.jsx)(u.FormattedMessage,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.allTime.none",defaultMessage:"No changes yet"});return"guests"===e?(0,F.jsx)(u.FormattedMessage,{id:"workspaceAnalytics.overview.userEngagement.changeFromZero.summaryByline.guests.positive",defaultMessage:"{changeValue} more guests than previous {numberOfDays} days",values:{changeValue:t.toLocaleString(),numberOfDays:c.ez[a].toLocaleString()}}):(0,F.jsx)(u.FormattedMessage,{id:"workspaceAnalytics.overview.userEngagement.changeFromZero.summaryByline.members.positive",defaultMessage:"{changeValue} more members than previous {numberOfDays} days",values:{changeValue:t.toLocaleString(),numberOfDays:c.ez[a].toLocaleString()}})}(t,s,a):function(e,t){switch(t){case"all_time":return 0===e?(0,F.jsx)(u.FormattedMessage,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.allTime.none",defaultMessage:"No changes yet"}):e>0?(0,F.jsx)(u.FormattedMessage,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.allTime.positive",defaultMessage:"{changeInPercentage}% more since the start",values:{changeInPercentage:Math.abs(e)}}):(0,F.jsx)(u.FormattedMessage,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.allTime.negative",defaultMessage:"{changeInPercentage}% less since the start",values:{changeInPercentage:Math.abs(e)}});case"last_90_days":return 0===e?(0,F.jsx)(u.FormattedMessage,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_90_days.none",defaultMessage:"No changes in previous 90 days"}):e>0?(0,F.jsx)(u.FormattedMessage,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_90_days.positive",defaultMessage:"{changeInPercentage}% more than previous 90 days",values:{changeInPercentage:Math.abs(e)}}):(0,F.jsx)(u.FormattedMessage,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_90_days.negative",defaultMessage:"{changeInPercentage}% less than previous 90 days",values:{changeInPercentage:Math.abs(e)}});case"last_28_days":return 0===e?(0,F.jsx)(u.FormattedMessage,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_28_days.none",defaultMessage:"No changes in previous 28 days"}):e>0?(0,F.jsx)(u.FormattedMessage,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_28_days.positive",defaultMessage:"{changeInPercentage}% more than previous 28 days",values:{changeInPercentage:Math.abs(e)}}):(0,F.jsx)(u.FormattedMessage,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_28_days.negative",defaultMessage:"{changeInPercentage}% less than previous 28 days",values:{changeInPercentage:Math.abs(e)}});case"last_7_days":return 0===e?(0,F.jsx)(u.FormattedMessage,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_7_days.none",defaultMessage:"No changes in previous 7 days"}):e>0?(0,F.jsx)(u.FormattedMessage,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_7_days.positive",defaultMessage:"{changeInPercentage}% more than previous 7 days",values:{changeInPercentage:Math.abs(e)}}):(0,F.jsx)(u.FormattedMessage,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_7_days.negative",defaultMessage:"{changeInPercentage}% less than previous 7 days",values:{changeInPercentage:Math.abs(e)}});default:(0,g.t1)(t)}}(i,a);const d=i>0?(0,r.J)({height:12,width:12,fill:"currentColor"}):i<0?(0,r.J)({height:12,width:12,transform:"rotate(90deg)",fill:"currentColor"}):void 0,m=(0,o.yK)((e=>({text:{color:i>0?e.accentColors.green[500]:i<0?e.accentColors.red[500]:e.lightTextColor,display:"flex",alignItems:"center",gap:4}})),[i]);return(0,F.jsxs)("span",{style:m.text,children:[d,l]})}},88149:(e,t,a)=>{a.d(t,{Z:()=>L});var s=a(67294),n=a(86628),i=a(24405),o=a(66673),r=a(73123),l=a(9291),d=a(37810),c=a(33929),u=a(18514),g=a(26388),m=a(64369),p=a(74523),f=a(67579),h=a(42485),v=(a(57658),a(21703),a(480)),x=a(59730),y=a(53965),b=a(24697),M=a(54642),_=a(83726),w=a(33954);const C={field:"num_searches",direction:"desc"},j=_.D2,S={sort:C,timeRange:j,searchAnalyticsDataList:[],numPagesLoaded:0,paginationToken:void 0,hasNextPage:!0,loading:!1,error:void 0,shouldReRunSearch:!1};var T=a(1898),k=a(73075),F=a(40394),N=a(68785),A=a(98569),I=a(85893);const P=(0,l.defineMessages)({numSearches:{id:"workspaceAnalytics.searchTab.searchTable.searches.tooltip",defaultMessage:"Number of times users in the workspace have searched the query"},numUniqueUsers:{id:"workspaceAnalytics.searchTab.searchTable.uniqueSearches.tooltip",defaultMessage:"Total number of users that have searched the query"},ctr:{id:"workspaceAnalytics.searchTab.searchTable.ctr.tooltip",defaultMessage:"Percentage of times users have opened page from results of this query"}}),D=(0,l.defineMessages)({queryText:{id:"spaceAnalyticsSearchTable.column.query",defaultMessage:"Query"},numSearches:{id:"spaceAnalyticsSearchTable.column.searches",defaultMessage:"Searches"},numUniqueUsers:{id:"spaceAnalyticsSearchTable.column.uniqueSearches",defaultMessage:"Unique searches"},ctr:{id:"spaceAnalyticsSearchTable.column.ctr",defaultMessage:"Click-through rate"}}),E={queryText:{id:"queryText",headerTitle:c.default.formatMessage(D.queryText),renderCell:e=>(0,I.jsx)(m.Z,{children:e.queryText}),widthData:{width:200,maxWidth:300},sortable:!1},numSearches:{id:"numSearches",headerTitle:(0,I.jsx)(A.r,{tooltipMessageDescriptor:P.numSearches,columnHeader:D.numSearches}),renderCell:e=>(0,I.jsx)(V,{value:e.numSearches}),widthData:{width:120,maxWidth:120},sortable:!0},numUniqueUsers:{id:"numUniqueUsers",headerTitle:(0,I.jsx)(A.r,{tooltipMessageDescriptor:P.numUniqueUsers,columnHeader:D.numUniqueUsers}),renderCell:e=>(0,I.jsx)(V,{value:e.numUniqueUsers}),widthData:{width:120,maxWidth:120},sortable:!0},ctr:{id:"ctr",headerTitle:(0,I.jsx)(A.r,{tooltipMessageDescriptor:P.ctr,columnHeader:D.ctr}),renderCell:e=>(0,I.jsx)(V,{value:Math.round(1e3*e.ctr)/1e3,isPercentage:!0}),widthData:{width:120,maxWidth:120},sortable:!0}},R=(0,T.Yd)(E).map((e=>E[e]));function Z(e){let{searchAnalyticsDataList:t,runNewSearch:a,sort:o,setSort:d,loadNextPage:c,loading:u,error:g}=e;const p=(0,n.VK)((()=>t.map((e=>({id:e.queryText,isClickable:!1,...e})))),[t]),f=(0,s.useMemo)((()=>function(e){const t=r.Fi[e.field];if(!t)return;return{column:E[t],sortAscending:"asc"===e.direction}}(o)),[o]),h=(0,i.yK)((e=>(0,F.b)({columnRenderInfo:R,theme:e,containerMarginTop:0})),[]),v=(0,i.yK)((e=>({emptyQuery:{marginTop:15,marginBottom:40,textAlign:"center"},loadingSpinner:{margin:"24px auto 24px"}})),[]);return g?(0,I.jsx)(k.q,{error:g,runNewSearch:a}):(0,I.jsxs)("div",{children:[(0,I.jsx)(F.D,{hideHeaderRowPadding:!0,allowHorizontalScroll:!0,setStickyHeaderRow:!0,maxHeight:500,columnRenderInfo:R,rows:p,sortState:f,onSortStateChanged:e=>{d(function(e){const t=r.hx[e.column.id],a=e.sortAscending?"asc":"desc";if(!t)return{field:"num_searches",direction:a};return{field:t,direction:a}}(e))},onLoadMore:c,renderNoRowsComponent:()=>(0,I.jsx)(m.Z,{isSmall:!0,style:v.emptyQuery,children:!u&&0===t.length&&(0,I.jsx)(l.FormattedMessage,{id:"settings.workspaceAnalytics.searchTable.table.empty",defaultMessage:"No search query analytics to display."})}),styles:h}),u?(0,I.jsx)(N.Z,{style:v.loadingSpinner}):null]})}function V(e){let{value:t,isPercentage:a}=e;const s=(0,i.yK)((e=>({centered:{width:"100%",textAlign:"center"}})),[]),n=a?`${t}%`:t;return(0,I.jsx)(m.Z,{style:s.centered,children:n})}function L(e){const{spaceStore:t}=e,a=(0,i.yK)((()=>({header:{display:"flex",width:"100%",justifyContent:"space-between",alignItems:"center",marginBottom:16},sectionTitle:{fontWeight:d.Z.fontWeight.semibold,fontSize:16,display:"flex",alignItems:"center"},helpInfo:{marginLeft:4}})),[]),_=(0,s.useRef)(!1),{searchAnalyticsDataList:T,timeRange:k,sort:F,loading:N,error:A,loadNextPage:P,runNewSearch:D,setTimeRange:E,setSort:R}=function(e){let{spaceStore:t}=e;const a=(0,v.O7)(),[n,i]=(0,s.useState)(S),o=(0,s.useRef)(C),r=(0,s.useRef)(j),d=(0,l.useIntl)(),c=(0,s.useCallback)((async e=>{let{fetchFromFirstPage:s,ignoreSearchInputComparison:l}=e;const d=!y.Xy(n.sort,o.current)||!y.Xy(n.timeRange,r.current);if(!l&&!d)return;o.current=n.sort,r.current=n.timeRange;let c=n.loading,u=n.error,g=n.hasNextPage,m=n.paginationToken;if(s&&(i((e=>({...S,timeRange:e.timeRange,sort:e.sort}))),c=S.loading,u=S.error,g=S.hasNextPage,m=S.paginationToken),!g||c)return;if(u)return;i((e=>({...e,loading:!0})));const p=await M.loadSearchAnalytics(a,{spaceId:t.id,sort:n.sort,timeRange:n.timeRange,startCursor:m});if("failed"===p.type)return void i((e=>({...e,loading:!1,error:p})));const f=p.data.results;i((e=>{const t=[],a=new Set(e.searchAnalyticsDataList.map((e=>e.queryText)));for(const n of f){const e=n.queryText;a.has(e)||(t.push(n),a.add(e))}const s=[...e.searchAnalyticsDataList,...t];return{...e,searchAnalyticsDataList:s,loading:!1,error:void 0,numPagesLoaded:e.numPagesLoaded+1,paginationToken:p.data.nextCursor,hasNextPage:Boolean(p.data.nextCursor)}}))}),[a,t,n.sort,n.timeRange,n.loading,n.error,n.hasNextPage,n.paginationToken]);(0,s.useEffect)((()=>{n.shouldReRunSearch&&(i((e=>({...e,shouldReRunSearch:!1}))),c({fetchFromFirstPage:!0,ignoreSearchInputComparison:!1}))}),[n.shouldReRunSearch,c]);const u=(0,s.useCallback)((async()=>{n.shouldReRunSearch||await c({fetchFromFirstPage:!1,ignoreSearchInputComparison:!0})}),[n.shouldReRunSearch,c]),g=(0,s.useCallback)((async e=>{await c({fetchFromFirstPage:!0,ignoreSearchInputComparison:e||!1})}),[c]),m=(0,s.useCallback)((e=>{"all_time"!==e&&(i((t=>({...t,timeRange:e,shouldReRunSearch:!0}))),b.ye(a,{daysFilter:e}))}),[a]),p=(0,s.useCallback)((e=>{i((t=>({...t,sort:e,shouldReRunSearch:!0}))),b.$f(a,{column:e.field,isAscending:"asc"===e.direction})}),[a]),f=(0,s.useMemo)((()=>{if(n.error)return 404===n.error.status?new x.dR({message:(0,w.wf)(d,n.error)}):new Error((0,w.wf)(d,n.error))}),[n.error,d]);return{...n,error:f,loadNextPage:u,runNewSearch:g,setTimeRange:m,setSort:p}}({spaceStore:t}),V=(0,o.D9)(t.id),L=(0,s.useMemo)((()=>void 0!==V&&t.id!==V),[t.id,V]);(0,s.useEffect)((()=>{_.current&&!L||(D(!0),_.current=!0)}),[D,L]);const B=(0,n.VK)((()=>t.getName()),[t]);return"NotFoundError"===(null==A?void 0:A.name)?(0,I.jsx)(h.y,{type:"empty",spaceName:B}):(0,I.jsxs)(I.Fragment,{children:[(0,I.jsxs)("div",{style:a.header,children:[(0,I.jsxs)(m.Z,{style:a.sectionTitle,children:[(0,I.jsx)(l.FormattedMessage,{id:"settings.workspaceAnalytics.searchTab.searchQueries.title",defaultMessage:"Search queries"}),(0,I.jsx)(g.ZP,{placement:g.ug.Bottom,render:e=>(0,I.jsx)(p.Z,{...e,href:(0,u.UY)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq",style:a.helpInfo}),renderTooltip:()=>(0,I.jsx)(l.FormattedMessage,{id:"settings.workspaceAnalytics.searchTab.searchQueries.tooltip",defaultMessage:"Displays popular search queries in the workspace from the {dateRange}",values:{dateRange:c.default.formatMessage(r.xX[k])}})})]}),(0,I.jsx)(f.f,{currentFilter:k,onChangeFilter:E,hideAllTime:!0})]}),(0,I.jsx)(Z,{searchAnalyticsDataList:T,runNewSearch:D,sort:F,setSort:R,loadNextPage:P,loading:N,error:A})]})}},65552:(e,t,a)=>{a.d(t,{Z:()=>Y});var s=a(67294),n=a(30251),i=a(480),o=a(86628),r=a(24405),l=a(73123),d=a(9291),c=a(31701),u=a(37810),g=a(24697),m=a(83726),p=a(33929),f=a(18514),h=a(35314),v=a(77907),x=a(4023),y=a(24026),b=a(43568),M=a(26388),_=a(64369),w=a(74523),C=a(8840),j=a(42485),S=a(23124),T=a(66661),k=a(97706),F=a(67579),N=a(81653),A=a(85893);const I=640;function P(e){let{data:t,loading:a,error:s,daysFilter:n,setDaysFilter:i}=e;const[o,c]=(0,h.e)(),g=(0,r.yK)((e=>({title:{fontWeight:u.Z.fontWeight.medium,fontSize:16,marginBlock:"8px 4px",display:"flex",alignItems:"center"},container:{display:"flex",flexDirection:"column",gap:16},helpInfo:{marginLeft:4},titleContainer:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",gap:16},summaryCard:{height:70},cardContainer:{justifyContent:"flex-start",gap:18},cardTextContainer:{alignItems:"flex-start"}})),[]),{activeMembersCount:m,previousActiveMembersCount:v,activeGuestsCount:y,previousActiveGuestsCount:b}=t;return(0,A.jsxs)("div",{style:g.container,ref:o,children:[(0,A.jsxs)("div",{style:g.titleContainer,children:[(0,A.jsxs)(_.Z,{style:g.title,children:[(0,A.jsx)(d.FormattedMessage,{id:"settings.workspaceAnalytics.usersTab.userEngagement.title",defaultMessage:"User engagement"}),(0,A.jsx)(M.ZP,{placement:x.u.Bottom,render:e=>(0,A.jsx)(w.Z,{...e,href:(0,f.UY)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq",style:g.helpInfo}),renderTooltip:()=>"all_time"!==n?(0,A.jsx)(d.FormattedMessage,{id:"settings.workspaceAnalytics.usersTab.userEngagement.tooltip.lastDays",defaultMessage:"Active members and guests have viewed at least one page within the {dateRange}",values:{dateRange:p.default.formatMessage(l.xX[n])}}):(0,A.jsx)(d.FormattedMessage,{id:"settings.workspaceAnalytics.usersTab.userEngagement.tooltip.allTime",defaultMessage:"Active members and guests have viewed at least one page in the workspace"})})]}),(0,A.jsx)(F.f,{currentFilter:n,onChangeFilter:i})]}),(0,A.jsxs)(S.rj,{gap:16,children:[(0,A.jsx)(S.r8,{row:1,col:1,children:(0,A.jsx)(k.q,{style:g.summaryCard,loading:a,error:s,title:(0,A.jsx)(d.FormattedMessage,{id:"workspaceAnalytics.overview.userEngagement.activeMembersCount",defaultMessage:"{activeMembersCount} active members",values:{activeMembersCount:(0,A.jsx)(T.e,{abbreviateNumber:c<I,num:m})}}),byline:void 0!==v?(0,A.jsx)(N.c,{userType:"members",daysFilter:n,count:m,previousCount:v}):null})}),(0,A.jsx)(S.r8,{row:1,col:2,children:(0,A.jsx)(k.q,{style:g.summaryCard,loading:a,error:s,title:(0,A.jsx)(d.FormattedMessage,{id:"workspaceAnalytics.overview.userEngagement.activeGuestsCount",defaultMessage:"{activeGuestsCount} active guests",values:{activeGuestsCount:(0,A.jsx)(T.e,{abbreviateNumber:c<I,num:y})}}),byline:void 0!==b?(0,A.jsx)(N.c,{userType:"guests",daysFilter:n,count:y,previousCount:b}):null})})]})]})}var D=a(44643),E=a(47969),R=a(1898),Z=a(80444),V=a(21752),L=a(40394),B=a(71291),U=a(82162),W=a(88775),z=a(98569);const O=(0,d.defineMessages)({page_views:{id:"workspaceAnalytics.usersTab.usersTable.pageViews.tooltip",defaultMessage:"Total number of page views for the user across all pages in the workspace"},page_edits:{id:"workspaceAnalytics.usersTab.usersTable.pageEdits.tooltip",defaultMessage:"Total number of page edits for the user across all pages in the workspace"}}),q=(0,d.defineMessages)({user:{id:"spaceAnalyticsUsersTab.column.user",defaultMessage:"User"},page_views:{id:"spaceAnalyticsUsersTab.column.pageViews",defaultMessage:"Page views"},page_edits:{id:"spaceAnalyticsUsersTab.column.pageEdits",defaultMessage:"Page edits"},last_active:{id:"spaceAnalyticsUsersTab.column.lastActive",defaultMessage:"Last active"},teams:{id:"spaceAnalyticsUsersTab.column.teams",defaultMessage:"Teamspaces"}}),K={user:{id:"user",renderCell:function(e){const{userStore:t,role:a}=e,n=(0,r.yK)((e=>({container:{height:52}})),[]);(0,s.useEffect)((()=>{t.load()}),[t]);return(0,o.VK)((()=>t.isReady()),[t])?(0,A.jsx)(V.Z,{containerStyle:n.container,actorStore:t,spaceRole:a&&(0,V.K)(a)}):(0,A.jsx)(U.L,{})},headerTitle:p.default.formatMessage(q.user),widthData:{width:100},sortable:!1},page_views:{id:"page_views",renderCell:function(e){const{page_views:t}=e,a=(0,r.yK)((e=>({eyeHideIcon:{width:20,height:20,color:e.lightIconColor},cell:{marginLeft:10}})),[]);if(void 0===t)return(0,A.jsx)(M.ZP,{placement:M.ug.Bottom,render:e=>(0,A.jsx)("div",{...e,children:(0,D.L)(a.eyeHideIcon)}),renderTooltip:e=>(0,A.jsx)(d.FormattedMessage,{id:"spaceAnalyticsUsersTab.optedOutUser.icon.tooltip",defaultMessage:"User has disabled page view tracking"})});return(0,A.jsx)(_.Z,{children:t})},headerTitle:(0,A.jsx)(z.r,{tooltipMessageDescriptor:O.page_views,columnHeader:q.page_views}),widthData:{width:80},sortable:!0},page_edits:{id:"page_edits",renderCell:function(e){const{page_edits:t}=e;return(0,A.jsx)(_.Z,{children:t})},headerTitle:(0,A.jsx)(z.r,{tooltipMessageDescriptor:O.page_edits,columnHeader:q.page_edits}),widthData:{width:80},sortable:!0},last_active:{id:"last_active",renderCell:function(e){const t=e.last_active;let a;a=t?(0,A.jsx)(B.T,{dateTs:t}):(0,A.jsx)(_.Z,{isSecondaryColor:!0,children:(0,A.jsx)(d.FormattedMessage,{id:"settings.workspaceAnalytics.usersTab.userTable.lastActiveTimestamp.noLastActive",defaultMessage:"No activity"})});return(0,A.jsx)("div",{children:a})},headerTitle:p.default.formatMessage(q.last_active),widthData:{width:50},sortable:!0},teams:{id:"teams",renderCell:function(e){const{teamStores:t,userStore:a,role:s}=e;if(!s)return(0,A.jsx)(_.Z,{children:(0,A.jsx)(d.FormattedMessage,{id:"settings.workspaceAnalytics.usersTab.teamsColumn.guest",defaultMessage:"None"})});return(0,A.jsx)(W.ZP,{teamStores:t,member:{userId:a.id,role:s}})},headerTitle:p.default.formatMessage(q.teams),widthData:{width:50},sortable:!1}};const H=(0,R.Yd)(K).map((e=>K[e])),G=25;function $(e){const t=(0,i.O7)(),[a,n]=(0,s.useState)(G),{teamStores:u,usersAndStats:m,filter:p,onUserTabFilterChange:f,usersAndStatsError:h}=e,v=(0,o.VK)((()=>{const{currentSpaceStore:e}=Z.default.state,t=m.map((e=>e.userStore.id)),a={};for(const s of t){const t=null==e?void 0:e.getSpaceUserStore(s),n=null==t?void 0:t.getMembershipType();if(n&&"none"!==n){const e=(0,E.qF)(n);a[s]=e}}return a}),[m]),[x,y]=(0,s.useState)({column:K.last_active,sortAscending:!1}),b=(0,s.useCallback)((e=>{g.gE(t,{column:e.column.id,isAscending:e.sortAscending}),y(e)}),[y,t]),M=m.map((e=>{let{userStore:t,stats:a}=e;return{id:a.userId,userStore:t,teamStores:u,isClickable:!1,last_active:a.lastActive,page_views:a.numPageViews,page_edits:a.numPageEdits,role:v[a.userId]}})).sort(function(e){switch(e.column.id){case"last_active":return(t,a)=>(0,l.Zj)(t.last_active,a.last_active,e.sortAscending);case"page_views":return(t,a)=>(0,l.yM)(t.page_views,a.page_views,e.sortAscending);case"page_edits":return(t,a)=>e.sortAscending?t.page_edits-a.page_edits:a.page_edits-t.page_edits;default:return(e,t)=>0}}(x)),w=(0,s.useMemo)((()=>M.slice(0,a)),[M,a]),C=(0,r.yK)((e=>({error:{color:c.ZP.red},dateFilterPill:{display:"flex",marginTop:10,marginBottom:15,flexFlow:"row",alignItems:"center"},timeFilterDescription:{marginRight:5}})),[]);const j=(0,s.useCallback)((e=>{g.Iw(t,{daysFilter:e}),f({tableFilter:e})}),[t,f]),S=(0,r.yK)((e=>(0,L.b)({columnRenderInfo:H,theme:e,containerMarginTop:0})),[]);return(0,A.jsxs)(A.Fragment,{children:[h&&(0,A.jsx)(_.Z,{isMultiline:!1,style:C.error,children:h}),(0,A.jsxs)("div",{style:C.dateFilterPill,children:[(0,A.jsx)(_.Z,{isSecondaryColor:!0,style:C.timeFilterDescription,children:(0,A.jsx)(d.FormattedMessage,{id:"workspaceAnalytics.timeFilter.description",defaultMessage:"Views and edits from"})}),(0,A.jsx)(F.f,{currentFilter:p,onChangeFilter:j})]}),(0,A.jsx)(L.D,{allowHorizontalScroll:!0,hideHeaderRowPadding:!0,setStickyHeaderRow:!0,maxHeight:500,sortState:x,onSortStateChanged:b,columnRenderInfo:H,rows:w,renderNoRowsComponent:()=>(0,A.jsx)("div",{children:"N/A"}),styles:S,onLoadMore:function(){a<m.length&&n(a+G)}})]})}function Y(e){var t,a;let{spaceStore:n,teamStores:v,usersTabData:b,onUserTabFilterChange:S,userEngagement:T}=e;const[k,F]=(0,h.e)(),N=(0,r.yK)((e=>({container:{display:"flex",flexDirection:"column",gap:16},titleContainer:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",gap:16},sectionTitle:{fontWeight:u.Z.fontWeight.medium,fontSize:16},sectionTitleLeft:{marginBlock:"8px 4px",marginBottom:5,display:"flex",alignItems:"center"},helpInfo:{marginLeft:4},wrapper:{display:"flex",flexDirection:"row",justifyContent:"space-around"},numUsersCaption:{display:"flex"},overviewText:{textAlign:"center"},error:{color:c.ZP.red},tableHeader:{marginTop:20,flexDirection:"row",display:"flex",justifyContent:"space-between",alignItems:"end"},tooltip:{marginLeft:3},infoIcon:{height:14,width:14,color:e.mediumTextColor}})),[]),I=(0,i.O7)(),D=(0,d.useIntl)(),E=(0,s.useCallback)((e=>{g.KC(I,{daysFilter:e});S({graphFilter:"all_time"===e?"last_90_days":e}),T.setDaysFilter(e)}),[S,T,I]),R=(0,o.VK)((()=>n.getName()),[n]);if("NotFoundError"===(null==b||null===(t=b.usersAndStatsError)||void 0===t?void 0:t.name)||"NotFoundError"===(null===(a=T.error)||void 0===a?void 0:a.name))return(0,A.jsx)(j.y,{type:"empty",spaceName:R});const Z=Math.floor(F-8);return(0,A.jsxs)("div",{style:N.container,children:[(0,A.jsx)(P,{data:T.data,loading:T.loading,error:T.error,daysFilter:T.daysFilter,setDaysFilter:E}),(0,A.jsx)(Q,{children:(0,A.jsx)("div",{ref:k,children:b?(0,A.jsx)(J,{width:Z,dailyUsersData:b.dailyUsersData,userEngagementDaysFilter:T.daysFilter,daysFilter:b.graphFilter,dailyUsersError:b.dailyUsersError&&m.Uk(b.dailyUsersError,D)}):(0,A.jsx)(X,{})})}),(0,A.jsxs)("div",{style:N.tableHeader,children:[(0,A.jsxs)("div",{style:N.sectionTitleLeft,children:[(0,A.jsx)(_.Z,{style:N.sectionTitle,children:(0,A.jsx)(d.FormattedMessage,{id:"settings.workspaceAnalytics.usersTab.allUsers.title",defaultMessage:"All members in Notion"})}),(0,A.jsx)(M.ZP,{placement:x.u.Bottom,render:e=>(0,A.jsx)(w.Z,{...e,href:(0,f.UY)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq",style:N.helpInfo}),renderTooltip:()=>b&&"all_time"!==b.tableFilter?(0,A.jsx)(d.FormattedMessage,{id:"settings.workspaceAnalytics.allMembers.tooltip.lastDays",defaultMessage:"Per member workspace activity over the {dateRange}",values:{dateRange:p.default.formatMessage(l.xX[b.tableFilter])}}):(0,A.jsx)(d.FormattedMessage,{id:"settings.workspaceAnalytics.allMembers.tooltip.allTime",defaultMessage:"All time per member workspace activity"})})]}),(0,A.jsx)(C.f,{analyticsType:y.x.Users})]}),b?(0,A.jsx)($,{teamStores:v,filter:b.tableFilter,usersAndStats:b.usersAndStats,onUserTabFilterChange:S,usersAndStatsError:b.usersAndStatsError&&m.Uk(b.usersAndStatsError,D)}):null]})}function Q(e){const t=(0,r.yK)((e=>({border:{borderRadius:4,overflow:"hidden",border:`1px solid ${e.regularDividerColor}`,backgroundColor:e.contentBackground,color:e.regularTextColor,padding:20}})),[]);return(0,A.jsx)("div",{style:t.border,children:e.children})}function J(e){const{width:t,dailyUsersData:a,userEngagementDaysFilter:s,daysFilter:i,dailyUsersError:g}=e,m=(0,r.yK)((e=>({graphHeader:{marginBottom:10,display:"flex",justifyContent:"space-between"},graphTitle:{fontSize:u.Z.fontSize.UIRegular.desktop,fontWeight:"bolder",display:"flex",alignItems:"center",height:24},graphCaption:{fontSize:u.Z.fontSize.UISmall.desktop},graphTooltip:{marginLeft:5,width:14,height:14},helpInfo:{marginLeft:4},emptyGraphBody:{textAlign:"center",paddingTop:50,paddingBottom:50},error:{color:c.ZP.red},graphSubLabel:{paddingTop:4,color:"grey"}})),[]),{blueLayer:h}=(0,n.useTimeSeriesPalette)(),y=(0,o.VK)((()=>{if(0===a.length)return;return{startDate:a[0].ds,endDate:a[a.length-1].ds}}),[a]),b=(0,o.VK)((()=>a.map((e=>({ds:e.ds,values:{active_members:e.active_members||0}})))),[a]);let C;return C=!y||a.length<3?(0,A.jsx)("div",{style:m.emptyGraphBody,children:(0,A.jsx)(_.Z,{isSecondaryColor:!0,children:(0,A.jsx)(d.FormattedMessage,{id:"workspaceAnalytics.usersOverTime.emptyGraph",defaultMessage:"Not enough data to display graph"})})}):(0,A.jsx)(v.LazyTimeSeries,{startDate:y.startDate,endDate:y.endDate,width:t,data:b,height:300,layers:[{key:"active_members",...h,renderLabel:e=>(0,A.jsx)(d.FormattedMessage,{id:"workspaceAnalytics.usersOverTime.activeMembers",defaultMessage:"{activeMembers, plural, one {1 active member} other {{activeMembers} active members}}",values:{activeMembers:e}})}],renderTooltipSubLabel:()=>(0,A.jsx)("div",{style:m.graphSubLabel,children:(0,A.jsx)(d.FormattedMessage,{id:"workspaceAnalytics.usersOverTime.activeMembers.sublabel",defaultMessage:"Viewed a page in the {dateRange}",values:{dateRange:p.default.formatMessage(l.xX[i])}})})}),(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("div",{style:m.graphHeader,children:(0,A.jsxs)(_.Z,{style:m.graphTitle,children:[(0,A.jsx)(d.FormattedMessage,{id:"workspaceAnalytics.membersOverTime.title",defaultMessage:"Active members over time"}),"all_time"===s&&(0,A.jsx)(M.ZP,{placement:x.u.Bottom,render:e=>(0,A.jsx)(w.Z,{...e,href:(0,f.UY)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq",style:m.helpInfo}),renderTooltip:()=>(0,A.jsx)(d.FormattedMessage,{id:"settings.workspaceAnalytics.membersOverTime.allTimeTooltip",defaultMessage:"All Time selection shows members who have viewed a page in the last 90 days."})})]})}),g&&(0,A.jsx)(_.Z,{isMultiline:!1,style:m.error,children:g}),C]})}function X(){return(0,A.jsxs)("div",{children:[(0,A.jsx)(b.Z,{paragraphs:[{lineHeight:18,lineMargin:0,sectionWidths:[100],repeat:0,sectionMargin:0}]}),(0,A.jsx)(b.Z,{paragraphs:[{lineHeight:300,lineMargin:0,sectionWidths:[100],repeat:0,sectionMargin:12}]})]})}},98569:(e,t,a)=>{a.d(t,{r:()=>r});a(67294);var s=a(9291),n=a(33929),i=a(26388),o=a(85893);function r(e){const{tooltipMessageDescriptor:t,columnHeader:a}=e;return(0,o.jsx)(i.ZP,{placement:i.ug.Top,renderTooltip:e=>(0,o.jsx)("div",{...e,children:(0,o.jsx)(s.FormattedMessage,{...t})}),render:e=>(0,o.jsx)("div",{...e,children:n.default.formatMessage(a)})})}},55360:(e,t,a)=>{a.d(t,{$:()=>h});a(67294);var s=a(86628),n=a(24405),i=a(9291),o=a(31701),r=a(1898),l=a(37810),d=a(74016),c=a(43568),u=a(31278),g=a(76798),m=a(64369),p=a(45653),f=a(85893);function h(e){let{title:t,items:a,loading:s,error:i}=e;const o=(0,n.yK)((e=>({title:{fontWeight:l.Z.fontWeight.semibold,marginBottom:8},container:{flex:1,display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"flex-start",height:"100%",border:`1px solid ${e.outlineButtonBorder}`,borderRadius:4,padding:12}})),[]);return(0,f.jsxs)("div",{style:o.container,children:[(0,f.jsx)(m.Z,{style:o.title,children:t}),s?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(x,{}),(0,f.jsx)(x,{}),(0,f.jsx)(x,{}),(0,f.jsx)(x,{}),(0,f.jsx)(x,{})]}):i?(0,f.jsx)(f.Fragment,{children:(0,f.jsx)(y,{})}):a.map(((e,t)=>(0,f.jsx)(v,{item:e},t)))]})}function v(e){let{item:t}=e;const{store:a,caption:n}=t,o=(0,i.useIntl)(),l=b(),c=(0,s.VK)((()=>{switch(a.table){case"block":return(0,f.jsxs)("div",{style:l.nameAndIconContainer,children:[(0,f.jsx)(u.Z,{icon:a.getIcon(),size:18,isEmptyPage:!1,disabled:!0}),(0,f.jsx)(g.Z,{store:a})]});case"notion_user":return(0,f.jsxs)("div",{style:l.nameAndIconContainer,children:[(0,f.jsx)(p.Z,{userStore:a,size:18}),(0,f.jsx)(m.Z,{children:a.getDisplayName(o)})]});case"team":const e=a.getName();return(0,f.jsxs)("div",{style:l.nameAndIconContainer,children:[(0,f.jsx)(d.p,{disabled:!0,store:a,size:20}),(0,f.jsx)(m.Z,{children:e})]});default:(0,r.t1)(a)}}),[a,l.nameAndIconContainer,o]);return(0,f.jsxs)("div",{style:l.container,children:[(0,f.jsx)(m.Z,{style:l.label,children:c}),(0,f.jsx)("div",{style:l.caption,children:(0,f.jsx)(m.Z,{isSecondaryColor:!0,isSmall:!0,children:n})})]})}function x(){const e=b();return(0,f.jsxs)("div",{style:e.container,children:[(0,f.jsx)(m.Z,{style:e.label,children:(0,f.jsx)(c.Z,{paragraphs:[{lineHeight:14,lineMargin:3,sectionWidths:[80],repeat:0,sectionMargin:2}]})}),(0,f.jsx)("div",{style:e.loadingCaption,children:(0,f.jsx)(c.Z,{paragraphs:[{lineHeight:14,lineMargin:3,sectionWidths:[80],repeat:0,sectionMargin:2}]})})]})}function y(){const e=b();return(0,f.jsx)("div",{style:e.container,children:(0,f.jsx)(m.Z,{style:e.errorLabel,children:(0,f.jsx)(i.FormattedMessage,{id:"spaceAnalytics.basicErrorMessage",defaultMessage:"Something went wrong.{br}Try refreshing the page.",values:{br:(0,f.jsx)("br",{})}})})})}function b(){return(0,n.yK)((e=>({container:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingBlock:4,gap:4},nameAndIconContainer:{display:"flex",flexDirection:"row",justifyContent:"flex-start",gap:8,alignItems:"center",width:"100%"},label:{width:"100%"},caption:{display:"flex",justifyContent:"center",alignItems:"center"},loadingCaption:{display:"block",width:"50%"},errorLabel:{width:"100%",textAlign:"center",color:o.ZP.red}})),[])}},97706:(e,t,a)=>{a.d(t,{q:()=>u});a(67294);var s=a(24405),n=a(59730),i=a(9291),o=a(31701),r=a(37810),l=a(43568),d=a(64369),c=a(85893);function u(e){let{icon:t,iconStyles:a,textStyles:u,style:g,title:m,byline:p,loading:f,error:h}=e;const v=function(e,t,a){return(0,s.yK)((s=>({title:{fontWeight:r.Z.fontWeight.medium,fontSize:16},byline:{fontSize:r.Z.fontSize.UISmall.desktop,marginTop:4},textContainer:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"100%",...t},titleContainer:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",gap:8},icon:{height:28,width:28,color:s.lightTextColor,fill:"currentcolor",...e},container:{height:"100%",flex:1,display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",border:`1px solid ${s.outlineButtonBorder}`,borderRadius:4,padding:12,gap:8,...a},loadingTitle:{display:"block",width:"40%"},loadingByline:{display:"block",width:"60%",marginTop:8,marginBottom:8},errorTitle:{textAlign:"center",color:o.ZP.red}})),[e,t,a])}(a,u,g);return f?(0,c.jsx)("div",{style:v.container,children:(0,c.jsxs)("div",{style:v.textContainer,children:[(0,c.jsx)("div",{style:v.loadingTitle,children:(0,c.jsx)(l.Z,{paragraphs:[{lineHeight:18,lineMargin:0,sectionWidths:[100],repeat:0,sectionMargin:0}]})}),p?(0,c.jsx)("div",{style:v.loadingByline,children:(0,c.jsx)(l.Z,{paragraphs:[{lineHeight:14,lineMargin:0,sectionWidths:[100],repeat:0,sectionMargin:0}]})}):null]})}):h?(0,c.jsx)("div",{style:v.container,children:(0,c.jsx)("div",{style:v.titleContainer,children:(0,c.jsx)(d.Z,{style:v.errorTitle,children:(0,n.Jx)(h)?h.message:(0,c.jsx)(i.FormattedMessage,{id:"spaceAnalytics.basicErrorMessage",defaultMessage:"Something went wrong.{br}Try refreshing the page.",values:{br:(0,c.jsx)("br",{})}})})})}):(0,c.jsxs)("div",{style:v.container,children:[t?t(v.icon):null,(0,c.jsxs)("div",{style:v.textContainer,children:[(0,c.jsx)(d.Z,{style:v.title,children:m}),p?(0,c.jsx)(d.Z,{style:v.byline,children:p}):null]})]})}},67579:(e,t,a)=>{a.d(t,{f:()=>v});var s=a(67294),n=a(24405),i=a(69651),o=a(73123),r=a(45257),l=a(33929),d=a(60709),c=a(52275),u=a(78140),g=a(32163),m=a(53437),p=a(72495),f=a(91642),h=a(85893);function v(e){const t=(0,n.yK)((e=>({popup:{width:125,marginLeft:5},pillStyle:{display:"flex",alignItems:"center"}})),[]),{currentFilter:a,hideAllTime:v}=e,[x,y]=(0,s.useState)(!1),b=o.Hz.filter((e=>!v||"all_time"!==e)).map((t=>{const a=()=>{e.onChangeFilter(t),y(!1)};return{key:t,action:()=>{},render:()=>(0,h.jsx)(c.Z,{focused:!1,onClick:a,title:l.default.formatMessage(o.Rh[t])})}})),M=(0,h.jsx)(r.Z,{on:Boolean(a),wrapStyle:t.pillStyle,icon:(0,i.C)({width:16,marginRight:6,fill:"currentColor"}),title:l.default.formatMessage(o.Rh[a]),onClick:()=>{y(!0)}}),_=[{key:"filters",items:b,render:e=>(0,h.jsx)(p.Z,{...e,title:null,loading:!1})}],w=(0,h.jsx)(u.Z,{menuType:d.og.Popup,header:null,children:(0,h.jsx)(g.Z,{type:g.i.Vertical,initialFocus:0,sections:_})});return(0,h.jsx)(f.Z,{marginAfter:!1,children:(0,h.jsx)(m.ZP,{popupType:m.ZP.PopupType.Popup,placementToOrigin:m.ZP.Placement.Bottom,alignmentToOrigin:m.ZP.Alignment.Start,open:x,render:()=>w,onDismiss:()=>y(!1),keepFocus:!0,origin:M,preventScaleTransition:!0,style:t.popup})})}},8840:(e,t,a)=>{a.d(t,{f:()=>w});var s=a(67294),n=a(480),i=a(86628),o=a(73123),r=a(9291),l=a(1898),d=a(24697),c=a(61652),u=a(33929),g=a(60709),m=a(4023),p=a(80444),f=a(24026),h=a(52275),v=a(31945),x=a(78140),y=a(63296),b=a(53437),M=a(72495),_=a(85893);function w(e){return(0,_.jsx)(v.ZP,{popupType:b.kQ.Popup,alignmentToOrigin:m.v.End,render:t=>{let{close:a}=t;return(0,_.jsx)(C,{closePopup:a,analyticsType:e.analyticsType})},renderOrigin:t=>{let{onClick:a}=t;return(0,_.jsx)(y.Z,{style:e.style,onClick:a,children:(0,_.jsx)(r.FormattedMessage,{id:"spaceAnalytics.usersTab.export",defaultMessage:"Export as CSV"})})}})}function C(e){const{analyticsType:t,closePopup:a}=e,r=(0,n.O7)(),m=(0,i.VK)((()=>{var e;return null===(e=p.default.state.currentSpaceStore)||void 0===e?void 0:e.id}),[]),v=(0,s.useCallback)((async e=>{if(m){switch(t){case f.x.Users:d.Lb(r,{daysFilter:e}),await c.Tp(r,{spaceId:m,daysFilter:e});break;case f.x.Content:d.Z(r,{daysFilter:e}),await c.hN(r,{spaceId:m,daysFilter:e});break;default:(0,l.t1)(t)}a()}}),[r,m,t,a]),y=o.Hz.map((e=>(0,_.jsx)(h.Z,{focused:!1,onClick:()=>v(e),title:u.default.formatMessage(o.Rh[e])},e)));return(0,_.jsx)(x.Z,{menuType:g.og.Popup,children:(0,_.jsx)(M.Z,{children:y})})}},93502:(e,t,a)=>{a.d(t,{U:()=>d});var s=a(67294),n=a(480),i=a(59054),o=a(1898),r=a(54642);const l={pageViews:0,uniquePageViews:0,pagesCreated:0,pageEdits:0,topPages:[]};function d(e){let{spaceId:t}=e;const a=(0,n.O7)(),[d,c]=(0,s.useState)("last_90_days"),[{status:u,value:g,error:m}]=(0,i.r5)((async()=>{const e=await r.getContentEngagementAnalytics(a,{spaceId:t,daysFilter:d});switch(e.type){case"success":return{pageViews:e.data.pageViews,uniquePageViews:e.data.uniquePageViews,pagesCreated:e.data.pagesCreated,pageEdits:e.data.pageEdits,topPages:e.data.topPages};case"failed":throw e.body;default:(0,o.t1)(e)}}),[a,t,d]);return{data:(0,s.useMemo)((()=>g||l),[g]),loading:"pending"===u||"idle"===u,error:m,daysFilter:d,setDaysFilter:c}}},31303:(e,t,a)=>{a.d(t,{i:()=>u});var s=a(67294),n=a(480),i=a(86628),o=a(59054),r=a(1898),l=a(54642),d=a(68117);const c={activeMembersCount:0,previousActiveMembersCount:0,activeGuestsCount:0,previousActiveGuestsCount:0,topTeamspaces:[],topViewers:[],topEditors:[]};function u(e){let{spaceStore:t,userId:a,isOrganizationOwner:u}=e;const g=(0,n.O7)(),{updateCacheWithRecordMap:m}=(0,s.useContext)(d.V),[p,f]=(0,s.useState)("last_90_days"),h=(0,i.VK)((()=>t.id),[t]),v=(0,i.VK)((()=>Boolean(t&&a&&t.getSpaceUserStore(a).isWorkspaceOwner())),[t,a]),[{status:x,value:y,error:b}]=(0,o.r5)((async()=>{if(!a||!(u||v))return c;const e=await l.getUserEngagementAnalytics(g,{spaceId:h,daysFilter:p});switch(e.type){case"success":return m(e),{activeMembersCount:e.data.activeMembersCount,previousActiveMembersCount:e.data.previousActiveMembersCount,activeGuestsCount:e.data.activeGuestsCount,previousActiveGuestsCount:e.data.previousActiveGuestsCount,topTeamspaces:e.data.topTeamspaces,topViewers:e.data.topViewers,topEditors:e.data.topEditors};case"failed":throw e.body;default:(0,r.t1)(e)}}),[g,a,h,p,v,u,m]);return{data:(0,s.useMemo)((()=>y||c),[y]),loading:"pending"===x||"idle"===x,error:b,daysFilter:p,setDaysFilter:f}}},58698:(e,t,a)=>{a.d(t,{K:()=>o,o:()=>i});var s=a(19639);const n={externalWorkspaceName:{defaultMessage:"External workspace",id:"managedUsers.externalWorkspaceName",description:"A generic name to replace the real name of an external workspace."}};function i(e){return e.formatMessage(n.externalWorkspaceName)}function o(e){if(!e)return;const t=Object.entries(s.nb).find((t=>{let[a,s]=t;return s===e}));if(t){return t[0]}}},67558:(e,t,a)=>{a.d(t,{R:()=>d});var s=a(86628),n=a(19889),i=a(90965),o=a(6258),r=a(88893),l=a(88280);function d(e){let{spaceStore:t}=e;return(0,s.VK)((()=>{const e=l.subscriptionDataStoreInstance.state;if(!e)return{loading:!0};const a=r.CM(e);if(!a.every((e=>o.U6.createChildStore(t,{table:n.KJ,id:e.userId}).isReady())))return{loading:!0};const s=a.filter(i.CF),d=a.filter(i.du);return{loading:!1,members:s.map((e=>{let{userId:a}=e;return o.U6.createChildStore(t,{table:n.KJ,id:a})})),guests:d.map((e=>{let{userId:a}=e;return o.U6.createChildStore(t,{table:n.KJ,id:a})}))}}),[t])}},52507:(e,t,a)=>{a.d(t,{Z:()=>i});var s=a(49085);class n extends s.default{getInitialState(){return{modalOpen:!1,loading:!1,domainVerification:void 0}}}const i=n},24026:(e,t,a)=>{a.d(t,{Z:()=>o,x:()=>n});var s=a(49085);let n=function(e){return e.Overview="overview",e.Users="users",e.Content="content",e.Search="search",e}({});class i extends s.default{getInitialState(){return{}}shouldRefreshState(e){const t=this.getState();return e!==t.currentSpaceId||!(t.currentTab!==n.Users||t.usersTabData&&t.usersTabData.usersAndStats)}}const o=new i},8675:(e,t,a)=>{a.d(t,{Z:()=>l});var s=a(49085),n=a(80444),i=a(77080),o=a(6258);class r extends s.default{getInitialState(){return{changePermissionsEnabled:!1,privatePageStore:void 0,loading:!1,error:void 0}}shouldSaveTransactionWithSudoMode(e){const t=e===this.state.privatePageStore,a=i.default.checkGate("enable_get_private_page_info_endpoint"),s=this.doesUserAlreadyHaveEditorAccessOnBlock(e.id);return t&&a&&this.state.changePermissionsEnabled&&!s}shouldUserHaveAccessToPrivatePageBlock(){var e,t;const a=null===(e=n.default.state.currentSpaceStore)||void 0===e?void 0:e.canAdmin(),s="enterprise"===(null===(t=n.default.state.currentSpaceStore)||void 0===t?void 0:t.getSubscriptionTier());return this.state.privatePageStore&&a&&s}doesUserAlreadyHaveEditorAccessOnBlock(e){const t=n.default.state.currentSpaceStore;if(!t)return!1;return o.G.createChildStore(t,{table:"block",id:e}).canAdmin()}}const l=r},47054:(e,t,a)=>{a.d(t,{AD:()=>d});a(57658);var s=a(30120),n=a(19584),i=a(59730);const o=7;function r(e){if(void 0===e)return s.ou.utc();const t={zone:"utc"};return"number"==typeof e?s.ou.fromMillis(e,t):s.ou.fromISO(e,t)}function l(e,t){const a=t?r(t):s.ou.utc(),n=r(e??function(e){const{days:t,endDate:a,startDate:n}=e;if(t<=0)throw new i.p8("Days must be greater than 0");const o=a?r(a):s.ou.utc();if(!o.isValid)throw new i.p8(`endDate ${a} is in an invalid format`);const l=n?r(n).toMillis():0,d=o.minus({days:t-1}).toMillis();return Math.max(d,l)}({days:o,endDate:t}));if(!n.isValid)throw new i.p8(`startDate ${e} is in an invalid format`);if(!a.isValid)throw new i.p8(`endDate ${t} is in an invalid format`);if(n>a)throw new i.p8(`startDate ${e} => ${n.toISO()} is after endDate ${t} => ${a.toISO()}`);return{startTimestamp:n.toMillis(),endTimestamp:a.toMillis()}}function d(e,t){const{startTimestamp:a,endTimestamp:s}=l(e,t),i=[];for(var o=a;o<=s;)i.push(r(o).toISODate()),o+=n.A0;return i}},43169:(e,t,a)=>{a.d(t,{AS:()=>o,Hs:()=>r,b:()=>l});var s=a(1898),n=a(59753),i=a(44312);const o=(0,s.AO)((e=>"invalid"===e.type||"unverified"===e.type?{true:e}:{false:e}));function r(e){const t=n.kk.fromValue(i.Jd,e);return{type:t.verified_at?"verified":"unverified",id:t.id,domain:t.domain,verificationCode:t.verification_code,createdAt:t.created_at,expiresAt:t.expires_at,invalidatedAt:t.getInfo().invalidated_at}}let l=function(e){return e.ConfiguredSSO="configured-sso",e.EnforcedSSO="enforced-sso",e.Standard="standard",e.NotAvailable="not-available",e}({})},83176:(e,t,a)=>{a.d(t,{z:()=>i});a(67294);var s=a(45238),n=a(85893);const i=(0,s.IU)("analyticsSearch",{viewBox:"0 0 51 52",svg:(0,n.jsx)("path",{d:"M.414 21.297c0 2.86.533 5.543 1.6 8.049a21.156 21.156 0 004.468 6.576 20.797 20.797 0 006.577 4.443c2.505 1.067 5.18 1.6 8.023 1.6 2.116 0 4.13-.305 6.043-.914a21.55 21.55 0 005.332-2.565l11.654 11.655a3.44 3.44 0 001.245.812c.473.186.964.28 1.472.28.728 0 1.371-.17 1.93-.508a3.48 3.48 0 001.32-1.346 3.887 3.887 0 00.482-1.93 3.8 3.8 0 00-.279-1.447 3.126 3.126 0 00-.787-1.193l-11.578-11.63a20.414 20.414 0 002.818-5.51c.694-2.013 1.041-4.138 1.041-6.372 0-2.844-.541-5.51-1.625-7.998a20.718 20.718 0 00-4.443-6.602 20.515 20.515 0 00-6.602-4.468c-2.488-1.067-5.162-1.6-8.023-1.6-2.844 0-5.518.533-8.023 1.6a20.592 20.592 0 00-6.577 4.468A21.072 21.072 0 002.014 13.3c-1.067 2.488-1.6 5.154-1.6 7.998zm5.408 0c0-2.1.39-4.071 1.168-5.916a15.517 15.517 0 013.301-4.875 15.168 15.168 0 014.875-3.276c1.845-.795 3.817-1.193 5.916-1.193 2.116 0 4.096.398 5.941 1.193a14.877 14.877 0 014.85 3.276 15.515 15.515 0 013.3 4.875c.796 1.845 1.194 3.817 1.194 5.916 0 2.116-.398 4.096-1.193 5.941a15.517 15.517 0 01-3.301 4.875 15.426 15.426 0 01-4.85 3.276c-1.845.795-3.825 1.193-5.941 1.193-2.099 0-4.07-.398-5.916-1.193a15.737 15.737 0 01-4.875-3.276 15.52 15.52 0 01-3.3-4.875c-.78-1.845-1.169-3.825-1.169-5.941zm15.31 10.36c.458 0 .746-.263.864-.788.237-1.32.474-2.437.711-3.351.254-.931.559-1.693.914-2.286a4.554 4.554 0 011.397-1.498c.575-.389 1.311-.694 2.209-.914.914-.237 2.056-.448 3.427-.634.542-.085.813-.381.813-.89 0-.507-.271-.812-.813-.913-1.354-.17-2.496-.373-3.427-.61-.915-.253-1.668-.567-2.26-.939a4.814 4.814 0 01-1.422-1.498c-.373-.61-.677-1.363-.914-2.26a42.337 42.337 0 01-.635-3.326c-.084-.542-.372-.813-.863-.813s-.796.263-.914.788a53.724 53.724 0 01-.737 3.377c-.22.914-.507 1.675-.863 2.285a4.64 4.64 0 01-1.396 1.472c-.576.373-1.32.677-2.235.914-.914.22-2.048.424-3.402.61-.559.101-.838.406-.838.914 0 .49.28.787.838.889 1.693.186 3.055.44 4.088.761 1.032.305 1.828.762 2.387 1.371.575.61 1.015 1.44 1.32 2.489.305 1.05.584 2.395.838 4.037a1 1 0 00.279.584c.17.152.38.228.635.228z"})})},82114:(e,t,a)=>{a.d(t,{Q:()=>n,p:()=>i});a(67294);var s=a(45238);const n=(0,a(85893).jsx)("path",{d:"M.911 8.034c0 4.505 3.049 7.24 7.246 7.24 1.135 0 2.215-.158 2.885-.376.472-.15.622-.397.622-.65a.44.44 0 00-.451-.444 1.3 1.3 0 00-.321.048c-.834.205-1.552.341-2.516.341-3.74 0-6.29-2.255-6.29-6.118 0-3.698 2.407-6.275 6.03-6.275 3.206 0 5.886 1.975 5.886 5.523 0 2.072-.697 3.466-1.825 3.466-.752 0-1.176-.437-1.176-1.183V4.972c0-.37-.205-.595-.554-.595-.341 0-.553.226-.553.595v.779h-.062c-.349-.84-1.203-1.374-2.222-1.374-1.77 0-3.014 1.51-3.014 3.678 0 2.187 1.237 3.712 3.042 3.712 1.06 0 1.88-.575 2.276-1.545h.062c.13.963.943 1.551 2.023 1.551 1.907 0 3.09-1.873 3.09-4.498 0-3.971-2.92-6.548-6.96-6.548C3.886.727.912 3.632.912 8.034zm6.911 2.652c-1.223 0-2.003-1.018-2.003-2.638 0-1.593.786-2.611 2.01-2.611 1.258 0 2.05.998 2.05 2.584 0 1.62-.813 2.665-2.057 2.665z"}),i=(0,s.IU)("at",{viewBox:"0 0 16 16",svg:n})},67220:(e,t,a)=>{a.d(t,{S:()=>i});a(67294);var s=a(45238),n=a(85893);const i=(0,s.IU)("bot",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M7.996 16C12.381 16 16 12.38 16 8s-3.627-8-8.012-8C3.611 0 0 3.62 0 8s3.62 8 7.996 8zm0-1.594A6.375 6.375 0 011.61 8a6.366 6.366 0 016.38-6.398A6.393 6.393 0 0114.398 8a6.383 6.383 0 01-6.403 6.406zM4.648 8.518c0 .21.17.364.386.364h2.53l-1.346 3.605c-.202.527.355.813.703.395l4.168-5.176a.515.515 0 00.132-.325c0-.209-.17-.356-.379-.356H8.305l1.346-3.613c.201-.518-.356-.812-.704-.395l-4.16 5.184a.484.484 0 00-.14.317z"})})},93108:(e,t,a)=>{a.d(t,{p:()=>i});a(67294);var s=a(45238),n=a(85893);const i=(0,s.IU)("contentSearch",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M0.25293 5.82031C0.25293 8.88965 2.74805 11.3848 5.81738 11.3848C6.95898 11.3848 8.00488 11.0361 8.87988 10.4414L12.0244 13.5859C12.2158 13.7842 12.4824 13.873 12.749 13.873C13.3301 13.873 13.7471 13.4355 13.7471 12.8682C13.7471 12.5947 13.6514 12.3418 13.4668 12.1504L10.3428 9.01953C10.9922 8.12402 11.3818 7.0166 11.3818 5.82031C11.3818 2.75098 8.88672 0.255859 5.81738 0.255859C2.74805 0.255859 0.25293 2.75098 0.25293 5.82031ZM1.70215 5.82031C1.70215 3.55078 3.54102 1.70508 5.81738 1.70508C8.08691 1.70508 9.93262 3.55078 9.93262 5.82031C9.93262 8.08984 8.08691 9.93555 5.81738 9.93555C3.54102 9.93555 1.70215 8.08984 1.70215 5.82031Z"})})},44643:(e,t,a)=>{a.d(t,{L:()=>i});a(67294);var s=a(45238),n=a(85893);const i=(0,s.IU)("eyeHidePadded",{viewBox:"0 0 24 24",svg:(0,n.jsx)("path",{d:"M17.3867 18.1074C17.6055 18.3193 17.9404 18.333 18.1592 18.1074C18.3848 17.875 18.3711 17.5469 18.1592 17.335L6.5791 5.76855C6.37402 5.55664 6.01855 5.5498 5.80664 5.76855C5.60156 5.97363 5.60156 6.3291 5.80664 6.53418L17.3867 18.1074ZM12 6.1582C10.8105 6.1582 9.73047 6.36328 8.72559 6.69141L9.81934 7.78516C10.5098 7.58691 11.2275 7.4707 12 7.4707C16.3682 7.4707 19.8408 11.2715 19.8408 12.0713C19.8408 12.6113 18.7334 14.0059 16.9766 15.1064L17.9883 16.125C20.1348 14.7168 21.3857 12.8779 21.3857 12.0713C21.3857 10.6699 17.6055 6.1582 12 6.1582ZM12 17.9912C13.2646 17.9912 14.4199 17.7725 15.4658 17.4102L14.3789 16.3232C13.6338 16.542 12.8477 16.6787 12 16.6787C7.63184 16.6787 4.15918 13.0283 4.15918 12.0713C4.15918 11.6133 5.32129 10.1299 7.19434 8.98145L6.16211 7.94922C3.92676 9.37109 2.60742 11.251 2.60742 12.0713C2.60742 13.4727 6.46973 17.9912 12 17.9912ZM15.4111 13.3906C15.5889 12.9873 15.6914 12.5361 15.6914 12.0713C15.6914 10.0137 14.0508 8.39355 12 8.39355C11.5283 8.39355 11.084 8.48242 10.6738 8.65332L15.4111 13.3906ZM12 15.7559C12.5332 15.7559 13.0322 15.6328 13.4766 15.4209L8.64355 10.5811C8.4248 11.0322 8.30176 11.5312 8.30176 12.0781C8.30859 14.0811 9.94238 15.7559 12 15.7559Z"})})},47409:(e,t,a)=>{a.d(t,{N:()=>i});a(67294);var s=a(45238),n=a(85893);const i=(0,s.IU)("ledger",{viewBox:"0 0 16 16",svg:(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("path",{d:"M.706 4.113c0 .41.273.677.697.677h1.778v8.388c0 1.435.704 2.146 2.14 2.146h7.813c1.299 0 2.153-.889 2.153-2.235v-1.86c0-.41-.273-.676-.697-.676h-.567V2.95c0-1.429-.711-2.146-2.12-2.146H2.497c-1.066 0-1.79.724-1.79 1.866v1.442Zm3.575 9.072V2.67c0-.28-.027-.54-.082-.766h7.643c.71 0 1.08.376 1.08 1.06v7.588H7.05c-.424 0-.704.266-.704.676v1.956c0 .622-.431 1.039-1.026 1.039-.608 0-1.039-.438-1.039-1.04ZM1.807 3.689V2.671c0-.479.294-.766.69-.766.41 0 .684.287.684.766v1.018H1.807ZM6.25 4.797h4.703a.413.413 0 0 0 .424-.424.412.412 0 0 0-.424-.417H6.25a.418.418 0 0 0-.43.417c0 .24.184.424.43.424Zm0 2.386h2.454a.406.406 0 0 0 .424-.41c0-.24-.178-.431-.424-.431H6.25a.425.425 0 0 0-.43.43c0 .233.184.41.43.41Zm.93 7.04c.17-.3.266-.67.266-1.114v-1.456h6.74v1.436c0 .677-.423 1.135-1.052 1.135H7.18Z"})})})},66466:(e,t,a)=>{a.d(t,{S:()=>i});a(67294);var s=a(45238),n=a(85893);const i=(0,s.IU)("logout",{viewBox:"0 0 30 30",svg:(0,n.jsx)("path",{d:"M17,24l9-9l-9-9l-1.406,1.406L22.188,14H8v2h14.188l-6.594,6.594L17,24z M6,4h16V2H4v26h18v-2H6V4z"})})},3556:(e,t,a)=>{a.d(t,{Z:()=>i});a(67294);var s=a(45238),n=a(85893);const i=(0,s.IU)("mail",{viewBox:"0 0 30 30",svg:(0,n.jsx)("path",{d:"M0,4v22h30V4H0z M17.591,16.33C16.137,17.753,15.819,18,15,18s-1.137-0.247-2.555-1.635L2,6h26L17.591,16.33z M2,8.814 l7.17,7.119L2,21.8V8.814z M2.445,24l8.141-6.661L11,17.75c1.438,1.406,2.281,2.25,4,2.25s2.563-0.844,4-2.25l0.414-0.411L27.555,24 H2.445z M28,21.8l-7.17-5.867L28,8.814V21.8z"})})},21213:(e,t,a)=>{a.d(t,{T:()=>i});a(67294);var s=a(45238),n=a(85893);const i=(0,s.IU)("openPage",{viewBox:"0 0 17 16",svg:(0,n.jsx)("path",{d:"M0.454102 14.1143V2.02832C0.454102 1.26953 0.891602 0.78418 1.58887 0.78418H9.7373C10.4346 0.78418 10.8721 1.26953 10.8721 2.02832V14.1143C10.8721 14.873 10.4346 15.3584 9.7373 15.3584H1.58887C0.891602 15.3584 0.454102 14.873 0.454102 14.1143ZM3.07227 4.45508C3.07227 4.63281 3.18164 4.74902 3.35254 4.74902H4.71973C4.89062 4.74902 5.01367 4.63281 5.01367 4.45508V3.12891C5.01367 2.95801 4.89062 2.83496 4.71973 2.83496H3.35254C3.18164 2.83496 3.07227 2.95801 3.07227 3.12891V4.45508ZM6.37402 4.45508C6.37402 4.63281 6.4834 4.74902 6.66113 4.74902H8.02148C8.19238 4.74902 8.31543 4.63281 8.31543 4.45508V3.12891C8.31543 2.95801 8.19238 2.83496 8.02148 2.83496H6.66113C6.4834 2.83496 6.37402 2.95801 6.37402 3.12891V4.45508ZM11.4736 15.3584C11.6992 14.9893 11.8086 14.5723 11.8086 14.1143V4.14746H15.418C16.1084 4.14746 16.5459 4.63281 16.5459 5.3916V14.1143C16.5459 14.873 16.1084 15.3584 15.418 15.3584H11.4736ZM3.07227 7.24414C3.07227 7.42188 3.18164 7.53809 3.35254 7.53809H4.71973C4.89062 7.53809 5.01367 7.42188 5.01367 7.24414V5.91797C5.01367 5.74707 4.89062 5.62402 4.71973 5.62402H3.35254C3.18164 5.62402 3.07227 5.74707 3.07227 5.91797V7.24414ZM6.37402 7.24414C6.37402 7.42188 6.4834 7.53809 6.66113 7.53809H8.02148C8.19238 7.53809 8.31543 7.42188 8.31543 7.24414V5.91797C8.31543 5.74707 8.19238 5.62402 8.02148 5.62402H6.66113C6.4834 5.62402 6.37402 5.74707 6.37402 5.91797V7.24414ZM13.3604 7.60645C13.3604 7.75 13.4492 7.85254 13.5996 7.85254H14.7344C14.8779 7.85254 14.9736 7.75 14.9736 7.60645V6.5127C14.9736 6.36914 14.8779 6.27344 14.7344 6.27344H13.5996C13.4492 6.27344 13.3604 6.36914 13.3604 6.5127V7.60645ZM3.07227 10.0332C3.07227 10.2041 3.18164 10.3271 3.35254 10.3271H4.71973C4.89062 10.3271 5.01367 10.2041 5.01367 10.0332V8.70703C5.01367 8.5293 4.89062 8.41309 4.71973 8.41309H3.35254C3.18164 8.41309 3.07227 8.5293 3.07227 8.70703V10.0332ZM6.37402 10.0332C6.37402 10.2041 6.4834 10.3271 6.66113 10.3271H8.02148C8.19238 10.3271 8.31543 10.2041 8.31543 10.0332V8.70703C8.31543 8.5293 8.19238 8.41309 8.02148 8.41309H6.66113C6.4834 8.41309 6.37402 8.5293 6.37402 8.70703V10.0332ZM13.3604 10.2998C13.3604 10.4434 13.4492 10.5391 13.5996 10.5391H14.7344C14.8779 10.5391 14.9736 10.4434 14.9736 10.2998V9.20605C14.9736 9.0625 14.8779 8.9668 14.7344 8.9668H13.5996C13.4492 8.9668 13.3604 9.0625 13.3604 9.20605V10.2998ZM3.29785 14.2578H8.08984V12.0361C8.08984 11.7217 7.88477 11.5166 7.57031 11.5166H3.81738C3.50293 11.5166 3.29785 11.7217 3.29785 12.0361V14.2578ZM13.3604 12.9932C13.3604 13.1367 13.4492 13.2324 13.5996 13.2324H14.7344C14.8779 13.2324 14.9736 13.1367 14.9736 12.9932V11.8994C14.9736 11.7559 14.8779 11.6533 14.7344 11.6533H13.5996C13.4492 11.6533 13.3604 11.7559 13.3604 11.8994V12.9932Z"})})},91192:(e,t,a)=>{a.d(t,{x:()=>i});a(67294);var s=a(45238),n=a(85893);const i=(0,s.IU)("privateTeam",{viewBox:"0 0 28 28",svg:(0,n.jsx)("path",{d:"M20.6455 21.2744C20.9092 21.5469 21.3311 21.5645 21.6035 21.2744C21.8936 20.9844 21.8672 20.5889 21.6035 20.3164L6.9082 5.62988C6.64453 5.36621 6.21387 5.36621 5.94141 5.62988C5.68652 5.88477 5.68652 6.33301 5.94141 6.58789L20.6455 21.2744ZM13.8076 6.13086C12.2783 6.13086 10.8896 6.39453 9.59766 6.8252L10.7578 7.97656C11.7246 7.68652 12.7178 7.51953 13.8076 7.51953C19.5908 7.51953 24.2754 12.6172 24.2754 13.6631C24.2754 14.375 22.7373 16.291 20.3027 17.7852L21.3838 18.8662C24.1611 17.0645 25.8135 14.7002 25.8135 13.6631C25.8135 11.8613 20.9092 6.13086 13.8076 6.13086ZM13.8076 21.1953C15.4424 21.1953 16.9365 20.9053 18.2988 20.4395L17.1475 19.2881C16.1016 19.6133 14.9941 19.8066 13.8076 19.8066C8.01562 19.8066 3.33105 14.9023 3.33105 13.6631C3.33105 13.0479 4.95703 11 7.5498 9.44434L6.45996 8.35449C3.5332 10.165 1.79297 12.5996 1.79297 13.6631C1.79297 15.4561 6.79395 21.1953 13.8076 21.1953ZM18.3164 15.5879C18.5889 14.999 18.7383 14.3398 18.7383 13.6631C18.7383 10.9121 16.541 8.74121 13.8076 8.74121C13.1133 8.74121 12.4629 8.89062 11.874 9.14551L18.3164 15.5879ZM13.8076 18.585C14.5811 18.585 15.3105 18.3916 15.9609 18.0752L9.36914 11.4834C9.04395 12.1338 8.85938 12.8721 8.85938 13.6631C8.86816 16.3438 11.0566 18.585 13.8076 18.585Z"})})},90028:(e,t,a)=>{a.d(t,{j:()=>i});a(67294);var s=a(45238),n=a(85893);const i=(0,s.IU)("searchInPage",{viewBox:"0 0 12 14",svg:(0,n.jsx)("path",{d:"M2.877 13.365h6.24c.63 0 1.104-.164 1.424-.492.32-.324.48-.8.48-1.43V6.13c0-.274-.015-.504-.046-.691a1.531 1.531 0 00-.182-.522 2.185 2.185 0 00-.387-.498l-3.07-3.123a2.11 2.11 0 00-.48-.38 1.528 1.528 0 00-.51-.183A3.464 3.464 0 005.7.68H2.877c-.629 0-1.104.164-1.424.492-.32.324-.48.8-.48 1.43v8.841c0 .633.16 1.112.48 1.436.32.324.795.486 1.424.486zm.094-1.154c-.282 0-.492-.072-.633-.217-.14-.144-.211-.351-.211-.621V2.678c0-.27.07-.479.21-.627.142-.149.354-.223.64-.223h2.496V5.04c0 .418.101.73.304.938.207.207.52.31.938.31h3.158v5.086c0 .27-.07.477-.21.621-.142.145-.354.217-.64.217H2.971zm3.855-6.938c-.12 0-.209-.027-.263-.082-.051-.054-.077-.142-.077-.263V1.986l3.229 3.287H6.826z"})})},62397:(e,t,a)=>{a.d(t,{I:()=>i});a(67294);var s=a(45238),n=a(85893);const i=(0,s.IU)("settingsSecurity",{viewBox:"0 0 11 20",svg:(0,n.jsx)("path",{d:"M4.92129 19.3231C5.26719 19.627 5.74092 19.6649 6.07178 19.3383L8.38779 16.9913C8.71865 16.6571 8.70361 16.1558 8.38027 15.8292L7.2749 14.7127L8.92168 13.0569C9.2375 12.7379 9.22998 12.229 8.90664 11.8948L7.41026 10.3757C9.44805 9.35026 10.5985 7.64127 10.5985 5.62847C10.5985 2.78016 8.32012 0.486328 5.49277 0.486328C2.66543 0.486328 0.394531 2.77257 0.394531 5.62847C0.394531 7.67166 1.54502 9.50217 3.37979 10.3301V17.4622C3.37979 17.7357 3.4625 18.0471 3.69561 18.2446L4.92129 19.3231ZM5.49277 17.9863L4.68066 17.166V9.34266C2.95869 8.9629 1.73301 7.4438 1.73301 5.62847C1.73301 3.53972 3.40986 1.84592 5.49277 1.84592C7.57569 1.84592 9.24502 3.53212 9.24502 5.62847C9.24502 7.42101 8.01181 8.96289 6.13194 9.38824V11.0289L7.57569 12.4872L6.03418 14.0214V15.3887L7.04931 16.3989L5.49277 17.9863ZM5.49277 5.67405C6.23721 5.67405 6.83877 5.06641 6.83877 4.32205C6.83877 3.5777 6.23721 2.97005 5.49277 2.97005C4.74834 2.97005 4.1543 3.5701 4.1543 4.32205C4.1543 5.06641 4.75586 5.67405 5.49277 5.67405Z"})})},73039:(e,t,a)=>{a.d(t,{K:()=>i});a(67294);var s=a(45238),n=a(85893);const i=(0,s.IU)("settingsWorkspace",{viewBox:"0 0 20 20",svg:(0,n.jsx)("path",{d:"M2.3 15.359c0 .819.463 1.327 1.231 1.327H16.43c.768 0 1.231-.508 1.231-1.327V7.507c0-.825-.463-1.333-1.231-1.333h-3.656V4.327C12.774 3.5 12.31 3 11.536 3H3.53C2.763 3 2.3 3.501 2.3 4.327v11.032zm1.25-.248V4.574c0-.216.108-.324.33-.324h7.313c.216 0 .33.108.33.324v10.537c0 .216-.114.324-.33.324H9.81v-1.834c0-.54-.254-.807-.768-.807H6.032c-.514 0-.768.267-.768.807v1.834H3.881c-.223 0-.33-.108-.33-.324zm1.911-8.118h1.213c.146 0 .247-.102.247-.254V5.564c0-.152-.101-.253-.247-.253H5.46c-.152 0-.247.101-.247.253V6.74c0 .152.095.254.247.254zm2.94 0h1.205c.152 0 .254-.102.254-.254V5.564c0-.152-.101-.253-.254-.253H8.4c-.152 0-.247.101-.247.253V6.74c0 .152.095.254.247.254zm4.373 8.366V7.424h3.307c.222 0 .33.115.33.33v7.357c0 .216-.108.324-.33.324h-3.307v-.076zM5.46 9.417h1.213c.146 0 .247-.101.247-.253V7.989c0-.152-.101-.254-.247-.254H5.46c-.152 0-.247.102-.247.254v1.175c0 .152.095.253.247.253zm2.94 0h1.205c.152 0 .254-.101.254-.253V7.989c0-.152-.101-.254-.254-.254H8.4c-.152 0-.247.102-.247.254v1.175c0 .152.095.253.247.253zm5.687.4h1.003a.2.2 0 00.209-.21V8.63c0-.127-.083-.21-.21-.21h-1.002c-.127 0-.204.083-.204.21v.978c0 .12.077.21.204.21zM5.46 11.842h1.213c.146 0 .247-.101.247-.254v-1.174c0-.152-.101-.254-.247-.254H5.46c-.152 0-.247.102-.247.254v1.174c0 .153.095.254.247.254zm2.94 0h1.205c.152 0 .254-.101.254-.254v-1.174c0-.152-.101-.254-.254-.254H8.4c-.152 0-.247.102-.247.254v1.174c0 .153.095.254.247.254zm5.687.311h1.003a.2.2 0 00.209-.21v-.977c0-.127-.083-.21-.21-.21h-1.002c-.127 0-.204.083-.204.21v.978c0 .12.077.21.204.21zm0 2.336h1.003a.2.2 0 00.209-.21v-.977c0-.127-.083-.21-.21-.21h-1.002c-.127 0-.204.083-.204.21v.978c0 .12.077.21.204.21zm-7.846-.552c0-.133.063-.197.197-.197h2.196c.133 0 .197.064.197.197v1.498h-2.59v-1.498z"})})},2356:(e,t,a)=>{a.d(t,{u:()=>i});a(67294);var s=a(45238),n=a(85893);const i=(0,s.IU)("showDeletedPages",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M1.89551 8.5498C1.89551 11.9404 4.61621 14.668 8 14.668C11.3838 14.668 14.1045 11.9404 14.1045 8.5498C14.1045 5.16602 11.4043 2.45898 8.02051 2.45898C7.66504 2.45898 7.31641 2.49316 7.01562 2.55469L8.66992 0.920898C8.78613 0.797852 8.85449 0.640625 8.85449 0.462891C8.85449 0.09375 8.56738 -0.207031 8.20508 -0.207031C8.01367 -0.207031 7.84961 -0.138672 7.7334 -0.00878906L4.93066 2.8418C4.79395 2.97852 4.71875 3.15625 4.71875 3.33398C4.71875 3.51855 4.78711 3.68262 4.93066 3.82617L7.7334 6.65625C7.84961 6.7793 8.00684 6.84082 8.20508 6.84082C8.56738 6.84082 8.85449 6.55371 8.85449 6.17773C8.85449 6 8.78613 5.85645 8.66309 5.72656L6.80371 3.88086C7.15234 3.80566 7.56934 3.77148 8.02051 3.77148C10.666 3.77148 12.7646 5.88379 12.7646 8.5498C12.7646 11.2021 10.6455 13.3281 8 13.3281C5.35449 13.3281 3.23535 11.2021 3.23535 8.5498C3.23535 8.14648 2.97559 7.85938 2.5791 7.85938C2.17578 7.85938 1.89551 8.14648 1.89551 8.5498Z"})})},97608:(e,t,a)=>{a.d(t,{J:()=>s});let s=function(e){return e.User="user",e.Domains="domains",e}({})}}]);