"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[6534],{36420:(e,t,n)=>{n.d(t,{n:()=>s,y:()=>l});n(21703);var o=n(67294),i=(n(77744),n(26249));let r,a;function l(e){r=r??new Map,a=a??function(e){let t=!1,n=[];return new ResizeObserver((o=>{n=n.concat(o),t||(t=!0,window.requestAnimationFrame((()=>{const o=new Set;[...n].reverse().filter((e=>{const t=o.has(e.target);return o.add(e.target),!t})).forEach((t=>{const n=e.get(t.target);null==n||n.forEach((e=>{const n=t.borderBoxSize[0];e({width:n.inlineSize,height:n.blockSize})}))})),n=[],t=!1})))}))}(r);const[t,n]=(0,o.useState)(void 0),l=(0,o.useCallback)((e=>{n((t=>(0,i.Z)(t,e)?t:e))}),[]);return(0,o.useLayoutEffect)((()=>{const t=e.current;if(!t)return;a.observe(t);const n=[...r.get(t)??[],l];return r.set(t,n),()=>{a.unobserve(t);const e=(r.get(t)??[]).filter((e=>e!==l));0===e.length?r.delete(t):r.set(t,e)}}),[l,e]),t}function s(e){const{children:t,onSizeChange:n}=e,i=(0,o.useRef)(null),r=l(i);(0,o.useEffect)((()=>{n&&r&&n(r)}),[r,n]);const a=o.Children.only(t);return o.cloneElement(a,{ref:i})}},3286:(e,t,n)=>{n.r(t),n.d(t,{COLLAPSE_THRESHOLD_IN_PIXELS:()=>Z,FloatingTableOfContents:()=>D,FloatingTableOfContentsFullSizeContents:()=>Y,FloatingTableOfContentsMiniContents:()=>$});var o=n(67294),i=n(60177),r=n(45060),a=n(64338),l=n(480),s=n(86628),d=n(24405),c=n(49271),u=n(62193),h=n(85031),p=n(80503),g=n(51454),v=n(68709),f=n(23063),x=n(84076),S=n(53437),y=n(76798),m=n(11368),b=n(43250),w=n(17504),C=n(73819),j=n(28267),k=n(5971),R=n(2275),M=n(94043),B=n(95802),A=n(15723),L=n(50628),T=n(27724),H=n(28662),z=n(89579),I=n(49085);class K extends I.default{getInitialState(){return{displayState:"expanded"}}}var V=n(56203),E=n(85893);const Z=310,O=!1;function D(e){const{store:t}=e,n=(0,l.O7)(),o=(0,s.VK)((()=>n.device.isMobile),[n]),i=(0,k.E)("floating_table_of_contents"),{navigableAncestor:r}=(0,H.m)({parentStore:t});return(0,s.VK)((()=>{const e=null==r?void 0:r.getModel();return i&&e&&"off"!==e.getFloatingTableOfContentsState()}),[i,r])?o?null:(0,E.jsx)(_,{store:e.store}):null}function _(e){const{store:t}=e,n=(0,o.useRef)(null),c=(0,s.qz)(void 0,K),u=(0,i.Dl)();(0,a.q7)(null==u?void 0:u.domLock);const{verticalScroller:h}=(0,o.useContext)(m.Ue)??{},{navigableAncestor:f,headerStores:x}=(0,H.m)({parentStore:t}),S=(0,l.O7)(),{closestSelectable:y,targetHorizontalRule:w}=(0,s.VK)((()=>{var e;if(!h)return{};const t=(null==h?void 0:h.getStore()).state.clientRect??h.measureSize(),{selectableRectMap:n}=L.Z.state,o=t&&t.top+t.height/4,i=B.C.findScrollToSelectablesFromIds(x.map((e=>e.id))),r=new Map(i.map((e=>[e.props.store.id,e]))),{stores:a,phase:l}=T.default.state,s=l===T.SelectionPhase.Selected?a.find((e=>r.has(e.id))):void 0,d=s&&r.get(s.id),c=d&&n.get(d);if(c&&t&&A.kK(c,t))return{closestSelectable:d,targetHorizontalRule:o};let u;if(void 0!==o)for(const h of i){const e=n.get(h);if(!e)continue;const t=e.top+e.height/2,i=Math.abs(o-t);(!u||i<u.distance)&&(u={distance:i,selectable:h})}return{targetHorizontalRule:o,closestSelectable:null===(e=u)||void 0===e?void 0:e.selectable}}),[x,h]),C=(0,j.X)(n,10),k=(0,s.VK)((()=>{var e;return null==f||null===(e=f.getModel())||void 0===e?void 0:e.getFloatingTableOfContentsState()}),[f]);(0,o.useEffect)((()=>{const e=!!C&&C.width>Z,t="minimal"===k;c.setState({...c.state,displayState:e&&!t?"expanded":"collapsed_narrow"})}),[c,C,k,null==C?void 0:C.width]);const z=(0,R.WJ)(t),I=(0,s.VK)((()=>c.state.displayState),[c]);(0,o.useEffect)((()=>{O&&w&&(0,r.yX)({top:w-3,bottom:w+3,left:0,width:9e3},"active header target")}));const V=(0,d.yK)((()=>({outerContainer:{position:"absolute",top:0,width:`calc(100% - ${z}px)`,height:`calc(100vh - ${p.R6(S.device.isElectronMac)}px)`,overflowY:"auto",display:"flex",flexDirection:"column"},viewportHeightContainer:{display:"flex"}})),[S.device.isElectronMac,z]),[D,_]=function(e){const t=(0,o.useRef)(null),n=(0,s.VK)((()=>{var n;const o=L.Z.state.selectableRectMap,i=null===(n=t.current)||void 0===n?void 0:n.getBoundingClientRect();if(!i)return!1;for(const[t,r]of o)if(t.props.shouldShowHoverMenu&&r.left<i.right&&A.kK(r,i)){const n=t.props.store.getRecordStoreUIRoot();return e===n}return!1}),[e]);return[t,n]}(e.store),X={store:t,navigableAncestor:f,scrollTargetY:w,activeBlockId:null==y?void 0:y.props.store.id,headerStores:x};return x.length<5&&"minimal"===k?null:(0,E.jsxs)(M.bj,{style:{width:"calc(100% - 46px)",gridRow:"1 / -1",paddingLeft:z,position:"sticky",top:0,zIndex:g.O9,transition:"opacity 0.2s ease",opacity:_?0:1,pointerEvents:_?"none":"auto"},children:[(0,E.jsx)("div",{style:{width:"100%",height:0},ref:n}),(0,E.jsx)("div",{className:`hide-scrollbar ${b.hBn}`,style:V.outerContainer,children:(0,E.jsx)("div",{style:V.viewportHeightContainer,children:(0,E.jsx)(v.p,{allowSelectionWithin:!0,style:{width:"100%"},children:"expanded"===I?(0,E.jsx)(F,{ref:D,...X}):(0,E.jsx)(P,{...X,ref:D,floatingTocStore:c})})})})]})}const P=o.forwardRef((function(e,t){const{floatingTocStore:n}=e,i=(0,o.useRef)(null),r=(0,u.sH)(),[a,l]=(0,o.useState)(!1),c=(0,s.VK)((()=>e=>{V.Z.setState({isHovered:e}),n.setState({...n.state,displayState:e?"collapsed_full":"collapsed_narrow"})}),[n]),h=(0,s.VK)((()=>"collapsed_narrow"===n.state.displayState),[n]),p=(0,d.yK)((e=>({fullSizeContainer:{width:242,display:"flex",flexDirection:"row",alignItems:"center",padding:"12px 12px",marginRight:10,backgroundColor:e.contentBackground,boxShadow:e.largeLightBoxShadow,borderRadius:14,position:"relative",overflowY:"auto"},miniSizeContainer:{width:56,display:"flex",flexDirection:"column",justifyContent:"center",paddingTop:12,paddingBottom:12,paddingRight:8}})),[]),g=(0,o.useCallback)((e=>({opacity:e?1:0})),[]);return(0,E.jsxs)("div",{style:{maxHeight:"70vh",marginTop:102,marginBottom:60,width:"100%"},onMouseLeave:()=>c(!1),children:[(0,E.jsx)(f.Z,{isVisible:!0,animationStyle:g(h),render:()=>(0,E.jsx)("div",{style:{maxHeight:"70vh",display:"flex",flexDirection:"row",position:"absolute",top:102,width:"100%",overflowY:"hidden"},onMouseMove:w.V,children:(0,E.jsx)("div",{ref:r(i,t),style:p.miniSizeContainer,onMouseMove:e=>{c(!0),(0,w.V)(e)},children:(0,E.jsx)($,{...e})})})}),(0,E.jsx)(f.Z,{isVisible:!h,onAnimationStart:()=>{l(!0)},onAnimationEnd:()=>{l(!1)},animationStyle:{translateX:0,opacity:1},enterAnimationStyle:{translateX:-10,opacity:0},exitAnimationStyle:{translateX:-10,opacity:0},render:()=>{var t;return(0,E.jsx)(S.ZP,{preventCaptureEsc:!0,preventScaleTransition:!0,preventOpacityTransition:!0,popupType:S.ZP.PopupType.Popup,originGap:-56,alignmentToOrigin:S.ZP.Alignment.Start,open:!h||a,placementToOrigin:S.ZP.Placement.Right,originRect:null===(t=i.current)||void 0===t?void 0:t.getBoundingClientRect(),style:{background:void 0,boxShadow:void 0,overflow:void 0},render:()=>(0,E.jsx)("div",{style:{display:"flex",flexDirection:"row",width:258,paddingLeft:16,cursor:"default"},onMouseMove:e=>{(0,w.V)(e),e.stopPropagation()},onMouseLeave:()=>c(!1),children:(0,E.jsx)("div",{style:p.fullSizeContainer,children:(0,E.jsx)(Y,{...e,fillBackground:!0})})})})}})]})})),F=o.forwardRef((function(e,t){return(0,E.jsx)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"end"},children:(0,E.jsx)("div",{ref:t,onMouseMove:w.V,style:{margin:"112px 60px 60px 0px",width:250},children:(0,E.jsx)(Y,{...e})})})}));function X(e){const t=(0,s.VK)((()=>h.y({headerBlockId:e.headerStore.id,headerBlockIds:e.headerStores.map((e=>e.id)),index:e.index,getRecordModel:e.store.getRecordModel})),[e.headerStore.id,e.headerStores,e.index,e.store.getRecordModel]),n=(0,C.rv)(e.store),i=(0,d.yK)((o=>({container:{...n,cursor:"pointer",width:"100%",paddingBottom:e.isLast?16:void 0},linkBox:{width:"fit-content",color:e.isActive?o.v2.text.ui.blue.primary:o.text.secondary,transition:"color 0.15s ease"},linkBoxHovered:{background:o.tint.regular,borderRadius:4,color:e.isActive?o.v2.text.ui.blue.primary:o.text.primary},nameContainer:{display:"flex",alignItems:"center",marginLeft:12*t},name:{paddingRight:c.ZD.paddingRight,paddingLeft:c.ZD.paddingLeft,fontSize:12,lineHeight:1.3,display:"flex",alignItems:"center",padding:4}})),[n,t,e.isActive,e.isLast]),r=(0,z.R)({pageStore:e.navigableAncestor,scrollToBlockId:e.headerStore.id}),[a,l]=(0,o.useState)(!1);return e.navigableAncestor?(0,E.jsx)(x.Z,{style:{...i.container,...e.style},href:r.href,onClick:r.onClick,external:!1,onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),hovered:!1,pressedStyle:{background:"none"},ignoreLocalHoverState:!0,children:(0,E.jsx)("div",{style:i.nameContainer,children:(0,E.jsx)(x.Z,{...r,external:!1,style:i.linkBox,hoveredStyle:i.linkBoxHovered,pressedStyle:i.linkBoxHovered,hovered:a,children:(0,E.jsx)("div",{style:i.name,children:(0,E.jsx)(y.Z,{store:e.headerStore,shouldWrap:!0,underline:!1,maxLines:2})})})})}):null}function Y(e){const{headerStores:t,navigableAncestor:n}=e,o=(0,d.yK)((e=>({container:{padding:6,maxWidth:500,maxHeight:"70vh",width:"100%",cursor:"default"},fillContainer:{padding:6,maxWidth:500,maxHeight:"70vh",width:"100%",cursor:"default"}})),[]);return(0,E.jsx)(E.Fragment,{children:(0,E.jsx)("div",{onMouseMove:w.V,style:e.fillBackground?o.fillContainer:o.container,children:t.map(((o,i)=>(0,E.jsx)(X,{headerStore:o,index:i,isLast:i===t.length-1,headerStores:t,store:e.store,navigableAncestor:n,isActive:o.id===e.activeBlockId,scrollTargetY:e.scrollTargetY},o.id)))})})}function W(e){const t=(0,s.VK)((()=>h.y({headerBlockId:e.headerStore.id,headerBlockIds:e.headerStores.map((e=>e.id)),index:e.index,getRecordModel:e.store.getRecordModel})),[e.headerStore.id,e.headerStores,e.index,e.store.getRecordModel]),n=(0,d.yK)((n=>{const o="dark"===n.mode?n.text.primary:n.v2.text.ui.blue.primary,i="dark"===n.mode&&e.isActive;return{lineContainer:{backgroundColor:e.isActive?o:n.fill.gray,height:2,width:16-4*t,transition:"background 0.2s ease, box-shadow 0.2s ease",boxShadow:i?`0px 0px 3px ${o}`:"none",borderRadius:2,marginLeft:4*t}}}),[t,e.isActive]);return e.navigableAncestor?(0,E.jsx)("div",{children:(0,E.jsx)("div",{style:n.lineContainer})}):null}function $(e){const{headerStores:t,navigableAncestor:n}=e,o=(0,d.yK)((()=>({container:{display:"flex",flexDirection:"column",gap:12,paddingLeft:20,paddingTop:12,paddingBottom:12,height:"100%"}})),[]);return(0,E.jsx)(E.Fragment,{children:(0,E.jsx)("div",{style:o.container,onMouseMove:w.V,children:t.map(((o,i)=>(0,E.jsx)(W,{headerStore:o,index:i,headerStores:t,store:e.store,navigableAncestor:n,isActive:o.id===e.activeBlockId},o.id)))})})}},64275:(e,t,n)=>{n.d(t,{D:()=>r});n(67294);var o=n(45238),i=n(85893);const r=(0,o.IU)("closeSmall",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M3.732 11.052c-.303.308-.32.877.011 1.202.33.33.894.32 1.203.011L8 9.21l3.05 3.05c.32.325.872.32 1.197-.011a.857.857 0 00.01-1.197L9.21 8.002l3.05-3.056a.857.857 0 00-.01-1.197.857.857 0 00-1.198-.01L8 6.788 4.946 3.732c-.31-.303-.878-.32-1.203.01-.325.331-.314.895-.01 1.203l3.055 3.056-3.056 3.05z"})})}}]);