"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[4347],{43664:(e,t,o)=>{o.d(t,{r:()=>Z,z:()=>F});var i=o(1302),n=o(90559),r=o(35011),a=o(99036),s=o(80951),l=o(40506),c=o(7057),d=o(53877),p=o(35102),u=o(84682),g=o(42875),m=o(23512),h=o(70203),f=o(38585),y=o(53965),S=o(1898),v=o(19584),C=o(893),x=o(993),b=o(83197),k=o(53437),P=o(95477),I=o(24990),M=o(49616),T=o(14976),w=o(33929),j=o(77080),R=o(8406),_=o(51365),L=o(61045),V=o(13447);function Z(e){const{environment:t,theme:o,store:i,schema:a,property:c,collectionContextStore:m}=e,y=t.device,x=a[c];if(x){switch(x.type){case"formula":"v2"===x.version?function(e){const{environment:t,store:o,propertySchema:i,property:n}=e,a=o.getModel();if(!i.formula2||!a)return;const s=w.default.getIntl(),l=(0,g.r)(),c=(0,r.EC)({block:a,property:n,formulaCode:i.formula2.code,getRecordModel:o.getRecordModel,intl:s,userTimeZone:l,depth:0,visitedProperties:new Set,resultCache:new Map});if(!c)return;const d=(0,p.j4)(c),u=(0,T.Xh)(d,o);C.RD({stringValue:u,environment:t,copiedMessage:C.tq.copiedPropertyToClipboard})}({environment:t,store:i,propertySchema:x,property:c}):function(e){var t;const{environment:o,store:i,schema:n,property:r,propertySchema:a}=e,s=i.getValue();if(!s)return;const c=(0,u.AH)({property:r,schema:n,block:s,getRecordValue:i.getRecordValue,collectionRequestContext:{userId:void 0,userTimeZone:(0,g.r)(),depth:0,intl:w.default.getIntl(),resultCache:new Map,visitedProperties:new Set}}),d=null==a||null===(t=a.formula)||void 0===t?void 0:t.result_type;switch(d){case"number":v.hj(c)&&O({value:c,propertySchema:a,environment:o});break;case"date":c&&l.U3(c)&&D({date:c,environment:o});break;case"text":c&&C.RD({stringValue:c.toString(),environment:o,copiedMessage:C.tq.copiedPropertyToClipboard});break;case"checkbox":case void 0:return;default:(0,S.t1)(d)}}({environment:t,store:i,schema:a,property:c,propertySchema:x});break;case"person":{const e=i.getPropertyValue(c);B({actors:s.DW({textValue:e,propertySchema:x,blockCreatorPointer:i.getCreatedByPointer()}),environment:t,store:i});break}case"created_by":{const e=i.getCreatedByPointer();e&&B({actors:[e],environment:t,store:i});break}case"last_edited_by":{const e=i.getLastEditedByPointer();e&&B({actors:[e],environment:t,store:i});break}case"number":O({value:s.VY(i.getPropertyValue(c)),propertySchema:x,environment:t});break;case"text":{const e=i.getPropertyValue(c);if(!e)return;const n=f.hW({textValue:{value:e,spaceId:i.getSpaceId()},getRecordModel:i.getRecordModel,getRecordRole:i.getRecordRole,disableHover:!1,disableStyleAnnotations:!1,disableInsertedDeletedAnnotations:!1,disableDateStyleAnnotations:!0,disableLinks:!1,disabled:!1,userTimeZone:(0,g.r)(),isClient:!0,isAndroid:y.isAndroid,isSafariOrIOS:y.isSafari||y.isIOS,isWindows:y.isWindows,showEmojiInline:y.isWindows,emojiType:"raw",theme:o,baseUrl:P.default.domainBaseUrl,publicDomainName:P.default.publicDomainName,currentUserId:t.currentUser.id,intl:w.default.getIntl(),katex:void 0,overwriteBaseUrlFromSpaceId:void 0,externalIntegrations:[],formulaValueTypes:[],emojiData:I.Z.state,isMobileNative:y.isMobileNative,isMobileNativeExternalLinkFixEnabled:j.default.checkGate("mobile_native_external_link_fix")}),r=(0,T.Xh)(i.getPropertyValue(c),i);C.g9({stringValue:r,htmlValue:n,environment:t,copiedMessage:C.tq.copiedPropertyToClipboard});break}case"url":case"email":case"phone_number":{const e=h.Jcv(i.getPropertyValue(c));C.RD({stringValue:e,environment:t,copiedMessage:C.tq.copiedPropertyToClipboard});break}case"date":{const e=i.getPropertyValue(c),o=s.Gl(e);o&&D({date:o,environment:t,dateFormat:x.date_format,timeFormat:x.time_format});break}case"last_edited_time":case"created_time":{const e=i.getKeyStore(x.type).getValue();if(e){D({date:d.CQ(e,(0,g.r)()),environment:t,dateFormat:x.date_format,timeFormat:x.time_format})}break}case"auto_increment_id":{const e=i.getPropertyValue(c);!function(e){const{value:t,environment:o,collectionContextStore:i}=e;if(t&&i){var r;const e=(null===(r=i.collectionStore())||void 0===r||null===(r=r.getRecordKeyStore())||void 0===r?void 0:r.getRecordKey())??"";C.RD({stringValue:(0,n.wf)(e,t),environment:o,copiedMessage:C.tq.copiedPropertyToClipboard})}}({value:s.ah(e),environment:t,collectionContextStore:m});break}}R.S$(t,m,{block_id:i.id,property:c,property_type:x.type})}}function B(e){const{actors:t,environment:o,store:i}=e,n=s.C1(t);C.RD({stringValue:(0,T.Xh)(n,i),environment:o,copiedMessage:C.tq.copiedPropertyToClipboard})}function O(e){const{value:t,propertySchema:o,environment:i}=e;if(!y.i2(t)&&!v.z4(t)){const e=(null==o?void 0:o.number_format)||m.dk,n=m.uf(t,e,w.default.getIntl());C.RD({stringValue:n,environment:i,copiedMessage:C.tq.copiedPropertyToClipboard})}}function D(e){const{date:t,environment:o,dateFormat:i,timeFormat:n}=e,r=(0,c.ZV)({value:t,date_format:i??l.sF,time_format:n??l.c_,allowRelativeDates:!0,intl:w.default.getIntl()});C.RD({stringValue:r,environment:o,copiedMessage:C.tq.copiedPropertyToClipboard})}async function F(e){const{element:t,rect:o,environment:n,onClick:r,store:l,additionalStores:c=[],property:d,format:p,collectionStore:u,blockPropertyValueOverlayStore:g,disableHorizontalEdgeScroll:m,collectionContextStore:h,mouseStore:f,statusSetCheckbox:y,preventClearSelection:S,collectionsBulkActionsToolbarStore:v,scrollers:C}=e,{device:P,WindowSizeStore:I}=n,T=h&&M.aJ({store:l,additionalStores:c,collectionContextStore:h}),j=T?h.normalizedSchemaStore.state:u.getSchema(),Z=T?d:u.getMappedProperty(d),B=j[Z],O=null==B?void 0:B.type;if(!O)return;if(M.g0({property:d,collectionStore:u}))return;const D=l.getPropertyStore(Z);if("checkbox"===O)D&&V.createAndCommit({userAction:"BlockPropertyValue.handleEditButtonClick",environment:n,perform:e=>{_.vO({stores:[l,...c],property:Z,transaction:e})}}),h&&R.rv({environment:n,collectionContextStore:h,block_id:D.id,property:Z,property_type:O,from:M.Sy(p),isFromBulkActionsToolbar:Boolean(v)});else if("status"===O&&"status"===B.type&&y){const e=l.getPropertyValue(Z),t=s.rO(e,B,w.default.getIntl());D&&V.createAndCommit({userAction:"BlockPropertyValue.handleEditButtonClick",environment:n,perform:e=>{const o=B.groups??[],i=!0===t?o[0]:o[o.length-1],r=(B.options??[]).find((e=>{var t;return e.id===(null==i||null===(t=i.optionIds)||void 0===t?void 0:t[0])}));if(r)for(const t of[l,...c])x.sO({environment:n,editorMode:"default",store:t.getNormalizedPropertyStore(Z),value:s.Is(r.value),transaction:e})}})}else{-1===a.uk.indexOf(O)&&(f&&f.setState({...f.state,mouseEntered:!1}),t&&C&&P.isMobileNative&&b.m[O]===k.kQ.Popup&&(L.bx({element:t,scrollers:C,vertical:{reveal:"bottom",paddingToTopEdge:4,paddingToBottomEdge:I.getSafePaddingBottomPx(320)},horizontal:{reveal:"closest"}}),await i.default.afterNextFlush()),_.bA({environment:n,blockPropertyValueOverlayStore:g,store:l,additionalStores:c,property:Z,format:p,rect:o,disableHorizontalEdgeScroll:m,collectionContextStore:h,preventClearSelection:S,collectionsBulkActionsToolbarStore:v}),h&&R.zF({environment:n,collectionContextStore:h,property:Z,property_type:O,from:M.Sy(p),isFromBulkActionsToolbar:Boolean(v)}))}r&&r()}},14473:(e,t,o)=>{o.d(t,{O:()=>p});var i=o(15145),n=o(1800),r=o(70219),a=o(80444),s=o(88923),l=o(6258),c=o(36610),d=o(8055);function p(e,t,o,r,p){const{mainEditorCurrentBlockStore:g}=a.default.state;if(!g)return;const m=e.find((e=>e.id===t.id));if(!m)return;let h;if(p){const e=l.G.createChildStore(g,m).getModel(),t=e?u(o,e.getSpaceId()):void 0;h=(0,n.Z)({pageId:m.id,pageModel:e,baseUrl:t,pageVisitSource:i.tY.MentionInPage})}else{const e=g.getModel(),t=e?u(o,e.getSpaceId()):void 0;h=(0,n.Z)({pageId:g.id,pageModel:e,baseUrl:t,peekViewBlockId:m.id,peekMode:(0,s.getUrlParamFromPeekMode)(s.default.state.mode),pageVisitSource:i.tY.MentionInPage}),c.XX(o,{from:r,meta_click:Boolean(p)})}d.c4({environment:o,url:h,openInNew:p})}function u(e,t){return(0,r.b)(e)(t)}},34078:(e,t,o)=>{o.d(t,{Z:()=>l});var i=o(67294),n=o(24405),r=o(44495),a=o(35948),s=o(85893);function l(e){let{setIsHovered:t}=e;const[o,l]=(0,a.C)();(0,i.useEffect)((()=>{t(l)}),[l,t]);const c=(0,n.yK)((e=>({container:{display:"inline-flex",alignItems:"center"},icon:{width:14,fill:l?e.mediumIconColor:e.lightIconColor,marginLeft:5,marginTop:1}})),[l]);return(0,s.jsx)("div",{ref:o,style:c.container,children:(0,r.D)(c.icon)})}},7801:(e,t,o)=>{o.d(t,{P:()=>l,f:()=>d});var i=o(77907),n=(o(67294),o(68785)),r=o(97372),a=o(85893);const s=(0,i.lazyComponent)(i.deps.collectionSettings,(e=>e.CollectionSettings));function l(e){return(0,a.jsx)(s,{...e,renderLoading:t=>(0,a.jsx)(r.ZP,{collectionSettingsStore:e.collectionSettingsStore,fullHeight:e.fullHeight,hideDesktopHeader:e.hideDesktopHeader,children:t&&(0,a.jsx)("div",{style:{display:"flex",justifyContent:"center",overflow:"hidden"},children:(0,a.jsx)(n.Z,{})})})})}const c=i.deps.collectionSettings,d=(0,i.lazyComponent)(c,(e=>e.CollectionSettingsButtonOptions))},30694:(e,t,o)=>{o.d(t,{L:()=>R,Z:()=>V});o(67294);var i=o(480),n=o(86628),r=o(24405),a=o(15145),s=o(61061),l=o(16184),c=o(26774),d=o(9291),p=o(31701),u=o(37810),g=o(75754),m=o(51592),h=o(7692),f=o(24946),y=o(28020),S=o(49616),v=o(14976),C=o(73744),x=o(98165),b=o(80444),k=o(6258),P=o(74016),I=o(64921),M=o(31278),T=o(85893);const w=(0,d.defineMessages)({shared:{defaultMessage:"Shared",id:"CollectionLocation.SidebarTitle.sectionShared"},private:{defaultMessage:"Private",id:"CollectionLocation.SidebarTitle.sectionPrivate"},noAccess:{defaultMessage:"No access",id:"CollectionLocation.noAccess"},emptyCollectionName:{id:"CollectionLocation.EmptyCollectionName",defaultMessage:"Untitled"}});function j(e){return(0,T.jsx)("span",{style:{paddingTop:4,paddingLeft:4,...e.style},children:"/"})}function R(e){const{collectionForLocation:t,collectionContextStore:o}=e,a=(0,i.O7)(),u=(0,d.useIntl)(),g=(0,n.VK)((()=>b.default.state.currentSpaceStore),[]),h=(0,n.VK)((()=>{const e=x.uJ(t);return e.reverse(),e}),[t]),f=(0,n.VK)((()=>o.collectionStoresStore.state),[o]),y=(0,n.VK)((()=>{if(g)return(0,m.x1)({environment:a,typedCollections:f,spaceStore:g})}),[f,a,g]),S=Boolean(null==y?void 0:y.privateDatabases[t.id]),v=Boolean(null==y?void 0:y.restrictedDatabases[t.id]),C=Boolean(null==y?void 0:y.sharedDatabases[t.id]),k=(0,n.VK)((()=>(0,p.gh)({theme:"light"})),[]),P=(0,r.yK)((e=>({textStyle:{color:k.popoverWaxPaperBackground,fontWeight:"normal"},shareTypeIndicatorIcon:{width:20,height:20,marginRight:2,color:e.mediumIconColor,padding:2,backgroundColor:k.accentColors.gray[100],borderRadius:3}})),[k]),I=S||v||C;let M=null;return S?M=(0,T.jsxs)(T.Fragment,{children:[(0,l.Q)(P.shareTypeIndicatorIcon),(0,T.jsx)("span",{children:u.formatMessage(w.private)})]}):v?M=(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)("div",{style:{...P.shareTypeIndicatorIcon,padding:0,paddingLeft:1,margin:0},children:(0,s.B)({...P.shareTypeIndicatorIcon,margin:0,background:void 0})}),(0,T.jsx)("span",{children:u.formatMessage(w.noAccess)})]}):C&&(M=(0,T.jsxs)(T.Fragment,{children:[(0,c.O)(P.shareTypeIndicatorIcon),(0,T.jsx)("span",{children:u.formatMessage(w.shared)})]})),(0,T.jsxs)("div",{style:{display:"flex"},children:[I&&(0,T.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",columnGap:4,...P.textStyle},children:[M,!v&&(0,T.jsx)(j,{style:{marginTop:-4,...P.textStyle}})]}),h.length>3?(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(_,{ancestorStore:h[0],showDivider:!0}),(0,T.jsx)("span",{style:{paddingLeft:2,paddingTop:4,...P.textStyle},children:"..."}),(0,T.jsx)(j,{style:P.textStyle}),!(S||C)&&(0,T.jsx)(_,{ancestorStore:h[h.length-2],showDivider:!0}),(0,T.jsx)(_,{ancestorStore:h[h.length-1],showDivider:!1})]}):h.map(((e,t)=>(0,T.jsx)(_,{ancestorStore:e,showDivider:t<h.length-1},e.id)))]})}function _(e){const{ancestorStore:t,showDivider:o}=e,i=(0,n.VK)((()=>(0,p.gh)({theme:"light"})),[]),a=(0,r.yK)((e=>({teamIconStyle:{background:e.popoverWaxPaperBackground},textStyle:{color:i.popoverWaxPaperBackground,fontWeigth:"normal"}})),[i]);return t instanceof k.zX?(0,T.jsxs)("div",{style:{display:"flex"},children:[(0,T.jsx)(f.Z,{store:t,showDivider:!1,maxWidth:160,iconSize:16,iconStyle:a.teamIconStyle,titleStyle:a.textStyle}),o&&(0,T.jsx)(j,{style:a.textStyle})]}):(0,T.jsxs)("div",{style:{display:"flex"},children:[(0,T.jsx)(h.Z,{store:t,showDivider:!1,emojiSize:18,maxWidth:160,titleStyle:a.textStyle},t.id),o&&(0,T.jsx)(j,{style:a.textStyle})]})}function L(e){const{team:t,collection:o}=e,i=(0,n.VK)((()=>o.getIcon()),[o]),a=(0,r.yK)((e=>({miniTeamSpaceIcon:{background:e.home.tile.background,position:"absolute",bottom:-3,right:-3,borderRadius:2},teamSpaceIcon:{borderRadius:2,marginRight:2}})),[]);return i?(0,T.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",position:"relative",marginRight:2},children:[(0,T.jsx)(M.Z,{icon:i,size:20,emojiSize:20,isEmptyPage:!1,bucket:"public",isLarge:!0,largeIcon:!0,disabled:!0}),(0,T.jsx)(P.p,{store:t,disabled:!0,size:12,style:a.miniTeamSpaceIcon},"icon")]}):(0,T.jsx)(P.p,{store:t,disabled:!0,size:20,style:a.teamSpaceIcon},"icon")}const V=function(e){const{collectionContextStore:t,collectionForLocation:o}=e,p=(0,i.O7)(),h=(0,d.useIntl)(),f=(0,n.VK)((()=>b.default.state.currentSpaceStore),[]),k=(0,n.VK)((()=>t.collectionStoresStore.state),[t]),P=(0,n.VK)((()=>{if(f)return(0,m.x1)({environment:p,typedCollections:k,spaceStore:f})}),[k,p,f]),j=(0,n.VK)((()=>x.VP(o)),[o]),R=Boolean(null==P?void 0:P.privateDatabases[o.id]),_=Boolean(null==P?void 0:P.restrictedDatabases[o.id]),V=Boolean(null==P?void 0:P.sharedDatabases[o.id]),Z=(0,n.VK)((()=>(0,v.Xh)(o.getName(),o)??h.formatMessage(w.emptyCollectionName)),[o,h]),B=(0,n.VK)((()=>o.getIcon()),[o]),O=(0,n.VK)((()=>{var e;return null===(e=t.collectionViewBlockStore())||void 0===e?void 0:e.id}),[t]),D=(0,n.VK)((()=>{let e=a.tY.LocationProperty;return O?((0,y.qG)(O)&&(e=t.isCompactView.state?a.tY.PersonalHomeTileTasks:a.tY.PersonalHomePageTasks),e):e}),[O,t]),F=(0,r.yK)((e=>({button:{color:e.accentColors.gray[800],cursor:"pointer"},inner:{display:"flex",flexDirection:"row",alignItems:"center",columnGap:4},shareTypeIndicatorIcon:{width:20,height:20,marginRight:2,color:e.mediumIconColor,padding:2,backgroundColor:e.fill.lightGray,borderRadius:3},miniShareTypeIndicatorIcon:{position:"absolute",bottom:-3,right:-3,width:12,height:12,color:e.mediumIconColor,backgroundColor:e.fill.gray,borderRadius:3,paddingTop:1,paddingBottom:1},collectionTitleTextStyle:{lineHeight:1,fontWeight:u.Z.fontWeight.medium,marginTop:2,marginLeft:2,whiteSpace:"nowrap",...(0,S.z0)(e)}})),[]);if(!(j||R||_||V))return null;const A=R||_||V;let N=(0,c.O)(F.shareTypeIndicatorIcon);return B?N=(0,T.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",position:"relative"},children:[(0,T.jsx)(M.Z,{icon:B,size:20,emojiSize:20,isEmptyPage:!1,bucket:"public",isLarge:!0,largeIcon:!0,disabled:!0}),R?(0,l.Q)(F.miniShareTypeIndicatorIcon):(0,c.O)(F.miniShareTypeIndicatorIcon)]}):_?N=(0,T.jsx)("div",{style:{...F.shareTypeIndicatorIcon,padding:0,paddingLeft:1,margin:0},children:(0,s.B)({...F.shareTypeIndicatorIcon,margin:0,background:void 0})}):R&&(N=(0,l.Q)(F.shareTypeIndicatorIcon)),(0,T.jsx)(I.Z,{hoveredStyle:{background:"transparent"},pressedStyle:{background:"transparent"},style:F.button,onClick:e=>{const t=o.getParentBlockStore();if(t){const o=(0,C.DJ)(e);g._c({environment:p,store:t,pageVisitSource:D,openInNew:o})}},children:(0,T.jsxs)("div",{style:F.inner,children:[j&&(0,T.jsx)(L,{team:j,collection:o}),A&&N,(0,T.jsx)("div",{style:F.collectionTitleTextStyle,children:Z})]})})}},56247:(e,t,o)=>{o.d(t,{b:()=>g});o(67294);var i=o(24405),n=o(23512),r=o(53965),a=o(19584),s=o(49616),l=o(33929),c=o(85248),d=o(78942),p=o(85893);const u=21;function g(e){const{numberValue:t,numberFormat:o,numberShowAs:g,shouldRenderTooltip:m,withComma:h,style:f}=e,y=(0,i.Fg)();if(r.i2(t)||a.z4(t))return null;const S=e.progressSize??u,v=(null==g?void 0:g.showValue)??!0,C=v&&n.uf(t,o,l.default.getIntl());let x;if("bar"===(null==g?void 0:g.type)||"ring"===(null==g?void 0:g.type)){const i=n.IM(t,g.maxValue),r="default"===g.color?y.selectLightGray:y.accentColors[g.color],a="dark"===y.mode?r[500]:r[400],l=r[50],u="dark"===y.mode?r[200]:y.selectLightGray[200],h=m?s.X7({numberValue:t,numberFormat:o,numberShowAs:g}):void 0;x="bar"===g.type?(0,p.jsx)(c.k,{percentage:i,filledColor:a,gapColor:l,unfilledColor:u,style:{marginLeft:v?8:0,height:S,...e.barStyle,...v?{}:{flexBasis:"100%"}},tooltip:h}):(0,p.jsx)(d.e,{percentage:i,filledColor:a,gapColor:l,unfilledColor:u,size:S,style:{marginLeft:v?8:0},tooltip:h})}const b={display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start",...f};return(0,p.jsxs)("div",{style:b,children:[C,x,h?", ":null]})}},13654:(e,t,o)=>{o.d(t,{QM:()=>D,ZP:()=>A});o(67294);var i=o(83355),n=o(480),r=o(86628),a=o(24405),s=o(49085),l=o(99036),c=o(80951),d=o(90199),p=o(16275),u=o(9291),g=o(53965),m=o(5149),h=o(24677),f=o(98104),y=o(7801),S=o(34078),v=o(75330),C=o(66890),x=o(68641),b=o(43224),k=o(19124),P=o(98742),I=o(39500),M=o(77907),T=o(69316),w=o(22294),j=o(85526),R=o(23063),_=o(64921),L=o(50478),V=o(53437),Z=o(26388),B=o(97820),O=o(85893);class D extends i.Z{constructor(){super(...arguments),this.popupContainer=null,this.storeTypes={isHoveringDescriptionIconStore:s.default.createClass(!1)},this.renderOrigin=e=>{const{property:t,schema:o,disabled:i,locked:n,canConfigureCollection:r,disableRowNameInteractivity:a}=this.props,{collectionContextStore:s}=this.context;if(!o[t])return;if(!(null==s?void 0:s.collectionStore())||!s)return;const l=s.permissionScopes.state,c={onClick:!a&&l.canConfigureBlock?()=>function(e,t,o){f.ZH(o),h.ZH(o),v.wG(),j.Z.setState({...j.Z.state,openProperty:{property:e,isInPeekRenderer:t}})}(this.props.property,this.props.isInPeekRenderer,this.environment):g.yR};return(0,O.jsx)(F,{hideIcon:Boolean(this.props.hideIcon),schema:o,property:t,disabled:i||Boolean(a),locked:n,canConfigureCollection:r,events:(0,P.Z)(c,e),propertyNameAriaId:this.props.propertyNameAriaId,setIsDescriptionIconTooltipHovered:e=>this.stores.isHoveringDescriptionIconStore.setState(e)})},this.renderPopup=()=>{const{collectionContextStore:e}=this.context,t=null==e?void 0:e.settingsStore;if(e&&t)return(0,O.jsx)(O.Fragment,{children:t.state.open?(0,O.jsx)(y.P,{context:x.HV.TopbarFilterPopup,collectionContextStore:e,collectionSettingsStore:t,hideDesktopHeader:!0}):(0,O.jsx)(M.LazyPagePropertiesRowNameMenu,{...this.props,popupContainer:this.popupContainer})})}}renderComponent(){const{property:e,schema:t,disabled:o,locked:i,canConfigureCollection:n,isInPeekRenderer:r,origin:a,hideDragHandle:s,blockStore:p}=this.props,g=t[e],{device:h}=this.environment;if(!g)return;const{collectionContextStore:f}=this.context,y=null==f?void 0:f.collectionStore();if(!y||!f)return;const S=j.Z.state.hoveredProperty===e&&!w.Z.state.isKeyboardMode&&!s,{openProperty:v}=j.Z.state,C=this.stores.isHoveringDescriptionIconStore.state;return(0,O.jsx)(Z.ZP,{renderTooltip:t=>{const o=(0,l.qQ)(g)&&("text"===g.type||(0,k.KZ)())&&(0,l.q3)(g),n=(0,c.KK)(p.getModel(),y.getModel(),e);return(0,O.jsxs)("div",{...t,style:b.F6,children:[(0,O.jsxs)("div",{children:[g.name,i&&(0,d.b)({width:12,fill:this.theme.regularInvertedTextColor,marginLeft:2,display:"inline-block",verticalAlign:"middle",paddingBottom:3})]}),void 0!==(null==g?void 0:g.description)&&g.description.length>0?(0,O.jsx)("div",{style:{color:this.theme.mediumInvertedTextColor},children:g.description}):null,o&&o.auto_update_on_edit&&(0,O.jsx)("div",{style:{color:this.theme.mediumInvertedTextColor},children:(0,O.jsx)(u.FormattedMessage,{defaultMessage:"Auto-updated by AI",id:"database.tableHeaderCell.tooltipAiAutofillDescription"})}),n&&(0,O.jsx)("div",{style:{color:this.theme.mediumInvertedTextColor},children:(0,O.jsx)(u.FormattedMessage,{defaultMessage:"Auto-updated by Notion Calendar",id:"database.tableHeaderCell.tooltipNotionCalendarDescription"})})]})},delayThreshold:C?0:500,placement:Z.ug.Left,render:t=>(0,O.jsxs)("div",{style:N(this.environment,this.theme,this.props.style),onMouseMove:()=>H(this.props.property),onMouseLeave:K,children:[!h.isMobile&&!o&&!(i||!n)&&!s&&(0,O.jsx)(R.Z,{isVisible:!0,animationStyle:{opacity:S?1:0},enterAnimationStyle:{opacity:0},exitAnimationStyle:{opacity:0},render:()=>(0,O.jsx)("div",{style:{width:L.C$+4,marginLeft:-(L.C$+4),...this.props.dragHandleStyle},onMouseMove:()=>H(this.props.property),onMouseLeave:K,children:(0,O.jsx)(L.ZP,{role:"cell",disallowTabbing:!0,onClick:e=>function(e,t,o){I.X9()||j.Z.setState({...j.Z.state,openProperty:{property:t,isInPeekRenderer:o}})}(0,this.props.property,this.props.isInPeekRenderer)})})}),(0,O.jsx)(V.ZP,{style:this.props.popupStyle,popupType:h.isMobile?V.kQ.SlideUp:V.kQ.Popup,originGap:1,alignmentToOrigin:V.ZP.Alignment.Start,render:this.renderPopup,open:Boolean(v&&!o&&v.property===e&&v.isInPeekRenderer===r),onDismiss:()=>{j.Z.setState({...j.Z.state,openProperty:void 0});const e=f.settingsStore;m.E3({collectionSettingsStore:e})},origin:a??this.renderOrigin(t),ref:e=>{this.popupContainer=e}})]},e)})}}function F(e){var t;const{schema:o,property:i,disabled:s,locked:l,canConfigureCollection:c,events:d}=e,u=o[i],{isMobile:g}=(0,n.Fy)(),{shouldHighlight:m,isFocusedHighlightMatch:h}=(0,r.VK)((()=>{var e;const{findQuery:t,open:n,currentFocusedResult:r}=T.Z.state;if(!n)return{shouldHighlight:!1,isFocusedHighlightMatch:!1};const a=r,s=null===(e=o[i])||void 0===e?void 0:e.name;return{shouldHighlight:!!(s&&t.length>0)&&s.toLowerCase().includes(t.toLowerCase()),isFocusedHighlightMatch:"property"===(null==a?void 0:a.type)&&a.propertyId===i}}),[i,o]),f=(0,a.yK)((e=>{const t=h?e.findHighlightMatch.selectedBackground:e.findHighlightMatch.unselectedBackground;return{highlight:{backgroundColor:m?t:void 0,outline:m?`5px solid ${t}`:void 0,borderRadius:m?4:void 0,color:h?"black":void 0}}}),[h,m]);return u?(0,O.jsx)(_.Z,{role:"cell",id:e.propertyNameAriaId,style:{display:"flex",alignItems:"center",height:"100%",width:"100%",borderRadius:4,padding:"0 6px"},disabled:s||l||!c,...d,onContextMenu:e=>{e.preventDefault(),d.onClick(e)},children:(0,O.jsx)(B.Z,{propertySchema:u,showIcon:!e.hideIcon,badge:(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(B.o,{propertySchema:u}),!g&&!(null===(t=u.description)||void 0===t||!t.length)&&(0,O.jsx)(S.Z,{setIsHovered:e.setIsDescriptionIconTooltipHovered})]}),style:{fontSize:14,...f.highlight},property:i,className:h?p.qp:void 0,iconStyle:{...h&&{fill:"black"}}})}):null}D.displayName="PagePropertiesRowName",D.contextTypes={...i.w,...C.xm};const A=(0,u.injectIntl)(D);function N(e,t,o){const{device:i}=e;return{display:"flex",alignItems:"center",height:34,width:i.isMobile?120:160,flex:"none",color:t.mediumTextColor,...o}}function K(){j.Z.setState({...j.Z.state,hoveredProperty:void 0})}function H(e){j.Z.setState({...j.Z.state,hoveredProperty:e})}},52247:(e,t,o)=>{o.d(t,{Z:()=>ue});o(57658);var i=o(67294),n=o(73935),r=o(83355),a=o(1302),s=o(86628),l=o(24405),c=o(49085),d=o(92996),p=o(41432),u=o(99036),g=o(80951),m=o(12396),h=o(84619),f=o(89767),y=o(47453),S=o(70663),v=o(35840),C=o(21202),x=o(70203),b=o(9291),k=o(7032),P=o(37810),I=o(36610),M=o(952),T=o(51365),w=o(31869),j=o(98834),R=o(60971),_=o(19785),L=o(9953),V=o(14473),Z=o(993),B=o(98104),O=o(13447),D=o(51592),F=o(66890),A=o(27105),N=o(49616),K=o(75079),H=o(33929),z=o(65598),W=o(29376),U=o(77907),E=o(86098),$=o(45452),q=o(77080),Q=o(29798),G=o(85526),X=o(6258),Y=o(78030),J=o(88071),ee=o(64921),te=o(79131),oe=o(32163),ie=o(72495),ne=o(26388),re=o(13654),ae=o(85893);const se={whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",minWidth:0};class le extends r.Z{constructor(){super(...arguments),this.storeTypes={menuListStore:Q.Z,customTokenLimit:c.default.createClass(10),draggableListStore:$.Z},this.getRelationMenuRows=(e,t,o,i,n,r)=>{const{store:a,collectionStore:s,disabled:l,property:c,locked:p}=this.props,g=o.getFormatStore().getKeyStore("app_config_uri").getValue()===d.p$;return e.reduce(((e,d,m)=>{const h=X.G.createChildStore(a,d),f=h.getAssociatedCollectionStore();if((null==f?void 0:f.id)===u.F0(t)){const d=q.default.checkGate("relation_menu_refactor")?U.LazyRelationMenuRow:U.LazyRelationMenuRowOld,u={key:h.id,render:e=>(0,ae.jsx)(d,{...e,canDrag:n&&1!==t.limit&&a.canEdit(),collectionStore:s,targetCollectionStore:o,relatedPageStore:h,disabled:l,canConfigureCollection:r,locked:p,isSelected:!0,pageStore:a,property:c,rowType:"section",onActionButtonClick:()=>function(e,t,o,i,n,r,a,s,l,c){const d=r[a];if("relation"!==(null==d?void 0:d.type)||!c)return;const p=d.limit,u=p?[]:e.filter((e=>e.id!==t.id));O.createAndCommit({userAction:"RelationSection.handleRemoveRelationClick",environment:i,perform:e=>{w.sf({store:n,propertyId:a,value:u,environment:i,relatedPageId:t.id,propertySchema:d,transaction:e,collectionContextStore:c,analyticsData:{isFromBulkActionsToolbar:N.VM(s),analyticsFrom:N.Sy(Y.C.Page)},isUnthrottled:!1})}}),I.WF(i,{from:"relation_section",collection_id:null==l?void 0:l.id,target_collection_id:null==o?void 0:o.id})}(i,h,o,this.environment,this.props.store,this.props.schema,this.props.property,this.props.blockPropertyValueOverlayStore,this.props.collectionStore,this.context.collectionContextStore),onMouseLeave:()=>this.stores.menuListStore.unsetFocus(),onSecondaryButtonClick:()=>fe(m+1,o,"relation_section_inline",this.environment,this.props.store,this.props.schema,this.props.property,this.props.collectionStore,this.stores.customTokenLimit,this.context.collectionContextStore),onInsertInline:g?()=>{B.ZH(this.environment)}:()=>fe(m+1,o,"relation_section_inline",this.environment,this.props.store,this.props.schema,this.props.property,this.props.collectionStore,this.stores.customTokenLimit,this.context.collectionContextStore),onOpenPageButtonClick:()=>{V.O(i,h,this.environment,"relation_section_inline")},index:m+1,propertyLimit:t.limit}),action:e=>{}};e.push(u)}return e}),[])},this.relationValueStore=this.createComputedStore((()=>{const{store:e,schema:t,property:o}=this.props,i=t[o];if(!i||"relation"!==i.type)return[];const n=e.getPropertyValue(o);return g.j$({relationValue:g.rq(n),propertySchema:i,getRecordModel:e.getRecordModel})}),!0),this.numberOfRelations=this.createComputedStore((()=>this.relationValueStore.state.length)),this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleDraggableListDrop=(e,t)=>function(e,t,o,i,n,r,a,s){const l=n[r];if(!l||"relation"!==l.type)return;const c=u.j0(l);if(!c)return;const d=X.NW.createChildStore(a,c);if(!(0,z.OY)(a)||!r)return;const p=a.getPropertyValue(r),m=g.j$({relationValue:g.rq(p),propertySchema:l,getRecordModel:a.getRecordModel}),h=[...e.map((e=>({id:e,spaceId:i.pointer.spaceId,table:C.iU}))),...m.slice(e.length)];me({value:h},d,a,r,o),I.yT(o,{from:"relation_section"}),R.sv({store:s,focus:{section:0,indexLocal:t.endPosition,indexGlobal:t.endPosition}})}(e,t,this.environment,this.props.collectionStore,this.props.schema,this.props.property,this.props.store,this.stores.menuListStore),this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleOpenProperty=(e,t,o)=>ye(e,t,o,this.environment,this.props.blockPropertyValueOverlayStore,this.props.store,this.props.property,this.context.collectionContextStore,this.relationPropertyPageSectionRef),this.handleRelationPropertyPageSectionRefMount=e=>{e&&(this.relationPropertyPageSectionRef=e)}}renderComponent(){const{schema:e,format:t,locked:o,property:i,collectionStore:n,store:r,disabled:a,visibility:s,isInPeekRenderer:l,topBorder:c,disableRowNameInteractivity:p}=this.props,{device:g}=this.environment,{collectionContextStore:m}=this.context,v=e[i];if("relation"!==(null==v?void 0:v.type)||!m)return;const C=u.j0(v);if(!C)return;const x=X.NW.createChildStore(r,C),k=m.permissionScopes.state,P=this.relationValueStore.state,{customTokenLimit:I}=this.stores,M=I.state,T=P.slice(0,M),w=x.getFormatStore().getKeyStore("app_config_uri").getValue()===d.p$;if("section_hide"===s)return;if("minimal"===s||0===this.numberOfRelations.state)return(0,ae.jsx)(ce,{property:i,propertySchema:v,numberOfRelations:this.numberOfRelations.state,onHandleOpenProperty:this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleOpenProperty,onHandleRelationPropertyPageSectionRefMount:this.handleRelationPropertyPageSectionRefMount,schema:e,format:t,disabled:a,locked:o,canConfigureCollection:k.canConfigureCollection,blockStore:r,collectionStore:n,collectionContextStore:m,isInPeekRenderer:l,targetCollectionStore:x});const j=1===v.limit,R=!(g.isMobile||a||o||j),_=this.getRelationMenuRows(T,v,x,P,R,k.canConfigureCollection),L=_.map((e=>e.key.toString())),V=(0,ae.jsx)(oe.Z,{type:oe.i.Vertical,store:this.stores.menuListStore,initialFocus:void 0,disableKeyboard:!0,style:{width:"100%"},sections:[{key:"section",render:e=>(0,ae.jsx)(ie.Z,{...e,disableDesktopPadding:!0,disableMobileBorders:!0,children:R?(0,ae.jsx)(te.ZP,{direction:"vertical",keys:L,renderKey:t=>e.children[L.indexOf(t)],onDrop:this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleDraggableListDrop,store:this.stores.draggableListStore}):e.children}),items:_}]}),Z=x.canEdit(),B=r.canEdit(),O={maxWidth:g.isMobile?"none":300,...!g.isMobile&&{width:"auto"},...g.isMobile&&{paddingLeft:"none"}};return(0,ae.jsx)(de,{collectionContextStore:m,title:(0,ae.jsx)(re.QM,{schema:e,format:t,property:i,blockStore:r,collectionStore:n,disabled:a,locked:o,canConfigureCollection:k.canConfigureCollection,intl:H.default.getIntl(),style:O,popupStyle:O,isInPeekRenderer:l,hideDragHandle:p,disableRowNameInteractivity:p}),collectionStore:n,targetCollectionStore:x,property:i,showRight:!0,disabled:a,schema:e,format:t,locked:o,canEditTargetCollection:x.canEdit(),canConfigureCollection:k.canConfigureCollection,canEditCurrentPage:B,handleMouseMove:this.props.handleMouseMove,onHandleOpenProperty:()=>{ye(!1,void 0,void 0,this.environment,this.props.blockPropertyValueOverlayStore,this.props.store,this.props.property,this.context.collectionContextStore,this.relationPropertyPageSectionRef)},onHandleRelationPropertyPageSectionRefMount:this.handleRelationPropertyPageSectionRefMount,onTitleEnter:()=>fe(void 0,x,"relation_section_inline",this.environment,this.props.store,this.props.schema,this.props.property,this.props.collectionStore,this.stores.customTokenLimit,this.context.collectionContextStore),handleClearProperty:()=>he(x,this.props.store,this.props.property,this.environment),topBorder:c,children:(0,ae.jsxs)("div",{style:{flex:1,minWidth:0,display:"flex",flexWrap:"wrap",flexDirection:"column",paddingBottom:"12px",paddingTop:"12px",width:"100%",...g.isMobile&&{paddingLeft:"none"}},onMouseMove:this.props.handleMouseMove,onMouseLeave:this.props.handleMouseLeave,children:[V,P.length>M&&(0,ae.jsx)(ee.Z,{style:{width:"100%",display:"flex",alignItems:"center",borderRadius:3,fontSize:14,minHeight:30,margin:0,padding:"6px 8px 7px 8px"},onClick:()=>I.setState(M+10),children:(0,ae.jsx)(J.Z,{count:P.length-M,format:h.lo.Medium,style:{margin:void 0},fixedHeight:!1,isCompact:!1})}),Z&&B&&!o&&(0,ae.jsxs)(ee.Z,{style:(D=this.theme,{display:"flex",alignItems:"center",color:D.lightTextColor,borderRadius:4,paddingLeft:4,paddingRight:6,height:32,width:"100%",fontSize:14}),onClick:()=>{w?he(x,this.props.store,this.props.property,this.environment):fe(P.length>=M?M:P.length+1,x,"relation_section_footer",this.environment,this.props.store,this.props.schema,this.props.property,this.props.collectionStore,this.stores.customTokenLimit,this.context.collectionContextStore)},disabled:a||o,children:[w?(0,f.R)({width:16,height:16,marginRight:11,marginTop:1,marginLeft:4,fill:"#868682"}):1===v.limit?(0,S.h)(ge(this.theme)):(0,y.R)(ge(this.theme)),(0,ae.jsxs)("div",{style:se,children:[w&&(0,ae.jsx)("span",{style:{color:this.theme.mediumTextColor},children:(0,ae.jsx)(b.FormattedMessage,{id:"RelationPropertyPageSection.button.replacePageSprint",defaultMessage:"Move to backlog"})}),!w&&(1===v.limit?(0,ae.jsx)(b.FormattedMessage,{id:"RelationPropertyPageSection.button.replacePage",defaultMessage:"Replace linked page from {propertyName}",values:{propertyName:v.name}}):(0,ae.jsx)(b.FormattedMessage,{id:"RelationPropertyPageSection.button.addPage",defaultMessage:"New page in {propertyName}",values:{propertyName:v.name}}))]})]})]})},i);var D}}function ce(e){const{property:t,propertySchema:o,numberOfRelations:n,schema:r,format:a,disabled:c,locked:p,canConfigureCollection:u,blockStore:g,collectionStore:h,onHandleOpenProperty:f,onHandleRelationPropertyPageSectionRefMount:y,isInPeekRenderer:S,targetCollectionStore:v}=e,C=(0,l.yK)((e=>({hoverButton:{display:"flex",alignItems:"baseline",justifyContent:"normal",color:e.mediumTextColor,width:"100%"},minimalButton:{display:"inline-flex",alignItems:"center",flexShrink:0,whiteSpace:"nowrap",height:28,borderRadius:4,fontSize:14,lineHeight:1.2,minWidth:0,paddingLeft:6,paddingRight:8,fontWeight:P.Z.fontWeight.medium,color:e.mediumTextColor},minimalButtonWrapper:{width:"100%",maxWidth:"100%",fontWeight:P.Z.fontWeight.medium,color:e.mediumTextColor},iconStyle:{width:14,height:14,fill:e.mediumIconColor,marginRight:6,alignItems:"baseline"},pagePropertiesRowName:{width:"100%",display:"inline-flex",flexWrap:"wrap"}})),[]),x=(0,l.Fg)(),k=(0,i.useCallback)((()=>{G.Z.setState({...G.Z.state,hoveredProperty:t})}),[t]),I=(0,i.useCallback)((()=>{G.Z.setState({...G.Z.state,hoveredProperty:void 0})}),[]),M=(0,s.VK)((()=>v.getFormatStore().getKeyStore("app_config_uri").getValue()),[v]),T=(0,D.sN)(d.p$),w=(0,D.Q_)(d.p$);return(0,ae.jsx)("div",{style:C.hoverButton,onMouseMove:k,onMouseLeave:I,children:(0,ae.jsx)(re.QM,{schema:r,format:a,property:t,blockStore:g,collectionStore:h,disabled:c,locked:p,canConfigureCollection:u,intl:H.default.getIntl(),style:C.pagePropertiesRowName,popupStyle:C.pagePropertiesRowName,origin:(0,ae.jsx)("div",{ref:y,style:C.minimalButtonWrapper,children:(0,ae.jsx)(ee.Z,{style:C.minimalButton,onClick:()=>f(!0),onContextMenu:e=>{c||p||!u||(e.preventDefault(),G.Z.setState({...G.Z.state,openProperty:{property:t,isInPeekRenderer:S}}))},children:(0,ae.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,ae.jsx)(m.ZP,{size:14,style:C.iconStyle,theme:x,type:o.type??"relation",icon:o.icon}),M===d.p$?(0,ae.jsx)(b.FormattedMessage,{id:"RelationPropertyPageSection.sprints.showSprintRelations",defaultMessage:"{numberOfRelations, plural, =0 {Add {propertyName}} one {1 {singleTypedItemName}} other {{numberOfRelations} {pluralTypedItemName}}}",values:{numberOfRelations:n,propertyName:o.name,singleTypedItemName:T,pluralTypedItemName:w}}):(0,ae.jsx)(b.FormattedMessage,{id:"RelationPropertyPageSection.showRelations",defaultMessage:"{numberOfRelations, plural, =0 {Add {propertyName}} one {1 {propertyName}} other {{numberOfRelations} {propertyName}}}",values:{numberOfRelations:n,propertyName:o.name}})]})},`minimal-section-${t}`)}),hideDragHandle:!0,isInPeekRenderer:S})})}function de(e){const{collectionStore:t,targetCollectionStore:o,property:i,showRight:n,disabled:r,locked:a,style:l,children:c,canEditTargetCollection:p,canConfigureCollection:g,canEditCurrentPage:m,handleMouseMove:h,onHandleOpenProperty:f,onHandleRelationPropertyPageSectionRefMount:S,onTitleEnter:C,topBorder:x=!0}=e,k=(0,s.VK)((()=>o.isSyncedCollection()),[o]),P=(0,s.VK)((()=>{const e=t.getSchema()[i];return Boolean(e&&u.NK(e))}),[t,i]),I=(0,s.VK)((()=>o.getFormatStore().getKeyStore("app_config_uri").getValue()===d.p$),[o]);return(0,ae.jsx)("div",{style:{width:"100%"},ref:S,children:(0,ae.jsx)(ie.Z,{...e,topBorder:x,children:c,noTextOverflow:!0,isTitleUppercase:!1,right:n&&!k&&!P&&(0,ae.jsxs)("div",{style:{height:"100%",display:"flex",alignItems:"center",width:"100%"},children:[m&&(0,ae.jsx)(pe,{disabled:r,handleMouseMove:h,onClick:f,icon:v.R,tooltipMessage:I?(0,ae.jsx)(b.FormattedMessage,{id:"database.RelationPropertyPageSectionHeaderButton.tooltip.searchButtonSprints.message",defaultMessage:"Search for a sprint"}):(0,ae.jsx)(b.FormattedMessage,{id:"database.RelationPropertyPageSectionHeaderButton.tooltip.searchButton.message",defaultMessage:"Link a page"})},`searchIcon-${i}`),p&&m&&!I&&!a&&(0,ae.jsx)(pe,{disabled:r,handleMouseMove:h,onClick:C,icon:y.R,tooltipMessage:I?(0,ae.jsx)(b.FormattedMessage,{id:"database.RelationPropertyPageSectionHeaderButton.tooltip.addButtonSprints.message",defaultMessage:"Create new sprint"}):(0,ae.jsx)(b.FormattedMessage,{id:"database.RelationPropertyPageSectionHeaderButton.tooltip.addButton.message",defaultMessage:"Add new page"})},`addIcon-${i}`),(0,ae.jsx)(U.LazyRelationPropertyCustomizeLayoutMenu,{collectionStore:t,targetCollectionStore:o,property:i,disabled:r||!g,rowType:"section"})]}),style:{paddingTop:0,paddingBottom:2,width:"100%",...l},desktopTitleStyle:{height:6,paddingLeft:0,paddingRight:8,paddingTop:24,fontWeight:"normal"},mobileTitleStyle:{paddingLeft:0,alignItems:"center",fontWeight:"normal"}})})}function pe(e){const{disabled:t,handleMouseMove:o,onClick:i,icon:n,tooltipMessage:r}=e,a=(0,l.yK)((e=>({buttonStyle:{width:24,height:24,borderRadius:4,display:"inline-flex",alignItems:"center",justifyContent:"center",marginRight:4},iconStyle:{width:14,height:14,flexGrow:0,flexShrink:0,fill:e.mediumIconColor}})),[]);return(0,ae.jsx)(ne.ZP,{renderTooltip:()=>r,render:e=>(0,ae.jsx)(ee.Z,{style:a.buttonStyle,onMouseMove:o,onClick:i,disabled:t,...e,children:n(a.iconStyle)})})}le.displayName="RelationPropertyPageSection",le.contextTypes={...r.w,...F.xm};const ue=le;function ge(e){return{width:16,height:16,marginRight:11,marginTop:1,marginLeft:4,fill:e.lightIconColor}}function me(e,t,o,i,n){if(!(0,z.OY)(o)||!i)return;let r;O.createAndCommit({userAction:"RelationToken.handleRelationPropertyMenuUpdate",environment:n,perform:a=>{const s=t.id;if(e.newPage&&s){const i=x.TPx(e.newPage.name);r=L.j4({environment:n,id:e.newPage.id,type:p.Ti.page,properties:{title:i},spaceId:e.newPage.spaceId,inMemoryRecordCache:t.inMemoryRecordCache,transaction:a,useCrdt:(0,A.S9)("collection_unknown_view")}),_.zw({childStore:r,parentStore:t,transaction:a});const s=X.G.createChildStore(o,r.pointer),l=t.getDefaultTemplatePageStore();l&&j.ob({title:{text:i},environment:n,store:s,templateStore:l,isKeyboard:!1,isCreateIn:!1,transaction:a,from:"relation_property_page_section"})}if(e.value){const t=g.ow(e.value),r=o.getNormalizedPropertyStore(i);Z.sO({environment:n,editorMode:"default",store:r,value:t,transaction:a})}}}),a.default.afterNextFlush((()=>{if(!r)return;const e=E.Z.findRow(r.id,"section",i);if(!e)return;const t=e.relationTokenBlockStoreRef.current;if(!t)return;const o=t.getBlockTitleStore(),n=o.getValue(),a=n?n[0][0].length:0,s={start:{index:a,store:o},end:{index:a,store:o}};B.NA({multiSelection:s})}))}function he(e,t,o,i){me({value:[]},e,t,o,i)}function fe(e,t,o,i,n,r,a,s,l,c){if(!a)return;const d=r[a];if(!d||"relation"!==d.type)return;if(!n.canEdit())return;const p=(0,k.ZP)(),u=s.pointer.spaceId,m=d.limit,h={id:p,table:C.iU,spaceId:u};if(!(0,z.OY)(n)||!a)return;const f=n.getPropertyValue(a),y=g.j$({relationValue:g.rq(f),propertySchema:d,getRecordModel:n.getRecordModel}),S=l.state;e&&e+1>S&&l.setState(e+1);me({newPage:{id:p,spaceId:u,name:""},value:m?[h]:e?[...y.slice(0,e),h,...y.slice(e)]:[h,...y]},t,n,a,i),M.W(i,{...(0,K.Pn)(c),from:o,type:"page",target_collection_id:null==t?void 0:t.id,new_page_id:p,creating_block_id:p})}function ye(e,t,o,i,r,a,s,l,c){const d=n.findDOMNode(c);if(!(d&&d instanceof Element))return;const p=o?null==o?void 0:o.getBoundingClientRect():d.getBoundingClientRect(),u=e?p.top+W.Mu:p.top+5,g=new DOMRect(p.left,u,p.width,p.height);T.bA({environment:i,blockPropertyValueOverlayStore:r,store:a,property:s,rect:g,format:Y.C.Page,mode:t,collectionContextStore:l}),I.ud(i,{from:"relation_section"})}},44831:(e,t,o)=>{o.d(t,{O:()=>y});o(67294);var i=o(480),n=o(86628),r=o(24405),a=o(99036),s=o(84242),l=o(37810),c=o(14976),d=o(77181),p=o(26842),u=o(26388),g=o(85893);const m=200,h=75,f=75;function y(e){let{blockStore:t,collectionContextStore:o,columnWidth:y}=e;const S=(0,n.VK)((()=>o.currentSubitemFormatStoreForCollection.state),[o]),v=(0,n.VK)((()=>t.getAssociatedCollectionStore()),[t]),C=(0,n.VK)((()=>{var e;return null===(e=o.collectionViewStore())||void 0===e?void 0:e.getType()}),[o]),x=(0,n.VK)((()=>{if(!S||!v)return;const e=v.getSchema()[S.property];return void 0!==e&&(0,a.p_)(e)?e:void 0}),[v,S]),b="table"===C||"list"===C||"timeline"===C,k=(0,i.O7)().device.isMobile?h:m,P=(0,r.yK)((e=>({parentItemIcon:{color:e.mediumIconColor,width:14,height:14,marginRight:2},wrapper:{display:"inline-flex",alignItems:"center",...b?{}:{maxWidth:"100%"},paddingRight:8},parentTitle:{...b?{maxWidth:y?Math.min(k,y-f):k}:{},textOverflow:"ellipsis",overflow:"hidden",color:e.lightTextColor,fontWeight:l.Z.fontWeight.medium,fontSize:l.Z.fontSize.UISmall.desktop,whiteSpace:"nowrap"}})),[y,b,k]),I=(0,n.VK)((()=>S&&x?(0,d.xb)({store:t,subitemFormat:S,propertySchema:x}):[]),[t,S,x]),M=(0,n.VK)((()=>{var e;if(0===I.length)return;const o=I[0],i=p.G.createChildStore(t,o),n=null===(e=i.getTitleStore())||void 0===e?void 0:e.getValue();return(0,c.Xh)(n,i)}),[t,I]);return(0,n.VK)((()=>(0,d.Cr)({collectionContextStore:o,blockId:t.id,blockStore:t})),[o,t])&&0!==I.length?(0,g.jsx)(u.ZP,{renderTooltip:()=>(0,g.jsx)("div",{children:M}),placement:u.ug.Bottom,alignment:u.v2.Start,delayThreshold:300,render:e=>(0,g.jsxs)("span",{style:P.wrapper,...e,children:[(0,s.v)(P.parentItemIcon),(0,g.jsx)("span",{style:P.parentTitle,children:M})]})}):null}},41137:(e,t,o)=>{o.d(t,{B:()=>p});o(67294);var i=o(86628),n=o(24405),r=o(99036),a=o(8505),s=o(37810),l=o(10906),c=o(77181),d=o(85893);function p(e){let{blockStore:t,collectionContextStore:o,wrapperStyle:p}=e;const u=(0,i.VK)((()=>o.currentSubitemFormatStoreForCollection.state),[o]),g=(0,i.VK)((()=>(0,l.Bm)({store:t,collectionContextStore:o})),[o,t]),m=(0,i.VK)((()=>{if(!u||!g)return;const e=g.getSchema()[u.property];return void 0!==e&&(0,r.p_)(e)?e:void 0}),[g,u]),h=(0,n.yK)((e=>({subItemIcon:{color:e.mediumIconColor,width:14,height:14,marginRight:2},wrapper:{display:"inline-flex",alignItems:"center",verticalAlign:" text-top",paddingRight:8,...p},numSubitemsSpan:{fontSize:s.Z.fontSize.UISmall.desktop,fontWeight:s.Z.fontWeight.medium,color:e.lightTextColor}})),[p]),f=(0,i.VK)((()=>u&&m?(0,c.CJ)({store:t,subitemFormat:u,propertySchema:m}):[]),[t,u,m]);return(0,i.VK)((()=>(0,c.wI)({collectionContextStore:o,blockStore:t})),[o,t])&&0!==f.length?(0,d.jsxs)("span",{style:h.wrapper,children:[(0,a.S)(h.subItemIcon),(0,d.jsx)("span",{style:h.numSubitemsSpan,children:f.length})]}):null}},91007:(e,t,o)=>{o.d(t,{Z:()=>M});var i=o(67294),n=o(480),r=o(86628),a=o(24405),s=o(13148),l=o(9291),c=o(31701),d=o(38208),p=o(91851),u=o(40663),g=o(66890),m=o(33929),h=o(85957),f=o(24646),y=o(80444),S=o(3418),v=o(88923),C=o(23063),x=o(73063),b=o(32662),k=o(85893);const P="pm_intro_tooltip",I=(0,l.defineMessages)({dismissTooltip:{defaultMessage:"Dismiss tooltip",id:"components.collections.projManagementIntroTooltip.dismissTooltip"}});function M(e){const t=(0,n.O7)(),o=(0,g.DK)(),M=(0,n.Fy)(),{store:T,origin:w,isFirstTooltip:j,phase:R,additionalPhaseToShowOn:_}=e,L=(0,r.VK)((()=>y.default.state.currentUserSettingsStore),[]),V=(0,r.VK)((()=>y.default.state.currentSpaceStore),[]),Z=(0,r.VK)((()=>(0,u.jH)(L,V)),[L,V]),B=(0,r.VK)((()=>{var e;return null==o||null===(e=o.settingsStore.state)||void 0===e?void 0:e.open}),[o]),O=(0,r.VK)((()=>{if("assign_to_someone"===Z||"change_task_status"===Z||"select_a_project"===Z){const e=v.default.isSidePeekOpen()?590:650;return(0,h.wq)(T)&&(0,h.PQ)(t)>=e||!(0,h.wq)(T)&&(0,f.$3)(t)>=e?"right":"bottom"}return"bottom"}),[Z,T,t]),D=(0,r.VK)((()=>{const e=y.default.state.inAppCalloutStore;return!(S.Z.state.openPopups.size>0||B||!e.canShow("pm_intro_tooltip"))&&(Z===R||(!(Z||!j)||!(!_||Z!==_)))}),[B,Z,R,j,_]),F=(0,i.useCallback)((()=>{j&&L&&V&&!Z&&p.uR({environment:t,requiredCurrPhase:void 0,nextPhase:"create_a_task",currentUserSettingsStore:L,currentSpaceStore:V})}),[Z,L,V,t,j]);(0,i.useEffect)((()=>{if(D){var e;y.default.state.inAppCalloutStore.updateCalloutStatus({calloutId:P,visible:!0}),d.AD(t,{phase:R,collection_id:null==o||null===(e=o.collectionStore())||void 0===e?void 0:e.id,space_id:null==V?void 0:V.id}),F()}}),[o,null==V?void 0:V.id,t,R,D,F]);const A=(0,i.useCallback)((()=>{var e;if(L&&V){if("create_a_task"===R)p.uR({environment:t,requiredCurrPhase:"create_a_task",nextPhase:"assign_to_someone",currentUserSettingsStore:L,currentSpaceStore:V});else{y.default.state.inAppCalloutStore.updateCalloutStatus({calloutId:P,visible:!1}),p.uR({environment:t,requiredCurrPhase:void 0,nextPhase:"complete",currentUserSettingsStore:L,currentSpaceStore:V})}d.rx(t,{phase:R,collection_id:null==o||null===(e=o.collectionStore())||void 0===e?void 0:e.id,space_id:null==V?void 0:V.id})}}),[o,V,L,t,R]),N=(0,a.yK)((e=>({popupContainer:{fontSize:12,color:c.ZP.white,position:"absolute",..."bottom"===O?{top:"calc(100% + 12px)",left:"calc(50% - 110px)"}:{},..."right"===O?{top:"select_a_project"===R?"calc(2px - 50%)":"calc(-5px - 50%)",left:"calc(100% + 12px)"}:{},background:"dark"===e.mode?e.accentColors.gray[400]:e.accentColors.gray[700],borderRadius:6,padding:"8px 12px 12px 12px",width:220,boxShadow:e.largeLightBoxShadow,zIndex:99},circle:{position:"absolute",..."bottom"===O?{top:-12,left:"calc(50% - 3px)"}:{},..."right"===O?{top:"calc(50% - 3px)",left:-12}:{},background:c.ZP.UIDocNotificationsDarkGrayColor,width:6,height:6,borderRadius:6,boxShadow:`0 0 0 1.5px ${e.contentBackground}`},verticalLine:{position:"absolute",..."bottom"===O?{top:-11,left:"calc(50% - 1px)",width:2,height:11}:{},..."right"===O?{top:"calc(50% - 1px)",left:-11,width:11,height:2}:{},background:c.ZP.UIDocNotificationsDarkGrayColor},popupTitle:{width:"90%",fontWeight:500,marginBottom:2},popupDescription:{opacity:.8,lineHeight:1.35},iconButtonStyle:{position:"absolute",top:4,right:4,opacity:.8},iconStyle:{width:12,fill:c.ZP.white},dotStyle:{width:5,height:5,borderRadius:"50%",background:c.FN.dark.gray[600]},activeDotStyle:{width:5,height:5,borderRadius:"50%",background:c.FN.dark.gray[800]}})),[O,R]),K=(0,i.useCallback)((()=>(0,k.jsxs)("div",{style:N.popupContainer,children:[(0,k.jsx)("div",{style:N.circle}),(0,k.jsx)("div",{style:N.verticalLine}),(0,k.jsxs)("div",{style:N.popupTitle,children:["create_a_task"===R&&(0,k.jsx)(l.FormattedMessage,{defaultMessage:"Create a new task",id:"pmIntroTooltip.title.createATask"}),"assign_to_someone"===R&&(0,k.jsx)(l.FormattedMessage,{defaultMessage:"Assign it to someone",id:"pmIntroTooltip.title.assignToSomeone"}),"change_task_status"===R&&(0,k.jsx)(l.FormattedMessage,{defaultMessage:"Update status",id:"pmIntroTooltip.title.changeTaskStatus"}),"click_view_settings"===R&&(0,k.jsx)(l.FormattedMessage,{defaultMessage:"Configure your tasks",id:"pmIntroTooltip.title.clickViewSettings"}),"select_a_project"===R&&(0,k.jsx)(l.FormattedMessage,{defaultMessage:"Select a project",id:"pmIntroTooltip.title.selectAProject"})]}),(0,k.jsxs)("div",{style:N.popupDescription,children:["create_a_task"===R&&(0,k.jsx)(l.FormattedMessage,{defaultMessage:"Start from scratch or use the dropdown to select or create a template",id:"pmIntroTooltip.subtitle.createATask"}),"assign_to_someone"===R&&(0,k.jsx)(l.FormattedMessage,{defaultMessage:"Click to select one or multiple people",id:"pmIntroTooltip.subtitle.assignToSomeone"}),"change_task_status"===R&&(0,k.jsx)(l.FormattedMessage,{defaultMessage:"Click to change the status to ‘In progress’ or something else",id:"pmIntroTooltip.subtitle.changeTaskStatus"}),"click_view_settings"===R&&(0,k.jsx)(l.FormattedMessage,{defaultMessage:"Further configure your tasks layout, grouping, properties and more",id:"pmIntroTooltip.subtitle.clickViewSettings"}),"select_a_project"===R&&(0,k.jsx)(l.FormattedMessage,{defaultMessage:"Click to add this task to a project",id:"pmIntroTooltip.subtitle.selectAProject"})]}),(0,k.jsxs)("div",{style:{display:"flex",flexDirection:"row",marginTop:8},children:[(0,k.jsx)("div",{style:"create_a_task"===R?N.activeDotStyle:N.dotStyle}),(0,k.jsx)(b.Z,{size:6}),(0,k.jsx)("div",{style:"assign_to_someone"===R?N.activeDotStyle:N.dotStyle}),(0,k.jsx)(b.Z,{size:6}),(0,k.jsx)("div",{style:"change_task_status"===R?N.activeDotStyle:N.dotStyle}),(0,k.jsx)(b.Z,{size:6}),(0,k.jsx)("div",{style:"select_a_project"===R||"click_view_settings"===R?N.activeDotStyle:N.dotStyle})]}),(0,k.jsx)(x.Z,{icon:s.U,style:N.iconButtonStyle,iconStyle:N.iconStyle,onClick:A,ariaLabel:m.default.formatMessage(I.dismissTooltip)})]})),[A,R,N.activeDotStyle,N.circle,N.dotStyle,N.iconButtonStyle,N.iconStyle,N.popupContainer,N.popupDescription,N.popupTitle,N.verticalLine]);return M.isMobile?(0,k.jsx)(k.Fragment,{children:w}):(0,k.jsxs)("div",{style:{position:"relative"},children:[w,(0,k.jsx)(C.Z,{isVisible:D,animationStyle:{opacity:1},enterAnimationStyle:{opacity:-10},exitAnimationStyle:{opacity:0},render:K})]})}},11028:(e,t,o)=>{o.d(t,{z:()=>m});var i=o(67294),n=o(24405),r=o(94308),a=o(50063),s=o(70693),l=o(4308),c=o(9291),d=o(1898),p=o(37810),u=o(53876),g=o(85893);function m(e){const{verificationValue:t,fontSize:o=u.z6}=e,m=(0,c.useIntl)(),h=(0,i.useMemo)((()=>l.WN(t)),[t]),f=h.type,y=(0,n.yK)((e=>({icon:{width:"expired"===f?8:14,height:"expired"===f?9:14,fill:"verified"===f?e.blueColor:e.mediumIconColor},caption:{fontVariantNumeric:"normal",fontWeight:p.Z.fontWeight.regular,color:e.regularTextColor,textTransform:"none",letterSpacing:0,marginLeft:6,marginRight:0,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontSize:o,lineHeight:u.Ac},expiredIconContainer:{width:14,height:14,borderRadius:6,border:"1px dashed",borderColor:e.mediumIconColor,display:"flex",justifyContent:"center",alignItems:"center",flexShrink:0}})),[f,o]);if("none"===f)return null;let S=null,v=null;const C=y.caption;switch(f){case"verified":S=(0,r.f)({...y.icon}),v=h.isIndefinite?(0,g.jsx)(c.FormattedMessage,{defaultMessage:"Verified",id:"VerificationPropertyButton.verifiedIndefinitely"}):(0,g.jsx)(c.FormattedMessage,{defaultMessage:"Until {date}",id:"VerificationPropertyButton.verifiedUntil",values:{date:s.mb({dateTime:h.dateTimeRange.end,intl:m})}});break;case"expired":S=(0,g.jsx)("div",{style:y.expiredIconContainer,children:(0,a.X)({...y.icon})}),v=(0,g.jsx)(c.FormattedMessage,{defaultMessage:"Expired {timeFromMoment}",id:"VerificationPropertyButton.expired",values:{timeFromMoment:l.kY(h.dateTimeRange.end)}});break;default:(0,d.t1)(f)}return(0,g.jsxs)("div",{style:{display:"flex",alignItems:"center",width:"100%"},children:[S,(0,g.jsx)("div",{style:C,children:v})]})}},58230:(e,t,o)=>{o.d(t,{Z:()=>h});o(67294);var i=o(480),n=o(86628),r=o(54368),a=o(77420),s=o(19889),l=o(70693),c=o(9291),d=o(1898),p=o(6258),u=o(39111),g=o(29302),m=o(85893);function h(e){const{isMobile:t}=(0,i.Fy)();return(0,m.jsx)("div",{style:t?{padding:"12px 20px",fontSize:14}:{fontSize:12,display:"flex",alignItems:"center"},children:(0,m.jsx)(f,{...e})})}function f(e){const{verificationState:t,blockStore:o}=e,i=(0,c.useIntl)();switch(t.type){case"none":return null;case"verified":return t.isIndefinite?(0,m.jsx)(c.FormattedMessage,{defaultMessage:"Verified by {user} on {date}",id:"VerificationSummary.verifiedIndefinitely",values:{user:(0,m.jsx)(y,{actorPointer:t.actorPointer,blockStore:o}),date:(0,l.mb)({dateTime:t.startDateTime,intl:i})}}):(0,m.jsx)(c.FormattedMessage,{defaultMessage:"Verified by {user} from {dateTimeRange}",id:"VerificationSummary.verified",values:{user:(0,m.jsx)(y,{actorPointer:t.actorPointer,blockStore:o}),dateTimeRange:(0,l.pe)({luxonRange:t.dateTimeRange,intl:i})}});case"expired":return(0,m.jsx)(c.FormattedMessage,{defaultMessage:"Last verified by {user} from {dateTimeRange}",id:"VerificationSummary.verificationExpired",values:{user:(0,m.jsx)(y,{actorPointer:t.actorPointer,blockStore:o}),dateTimeRange:(0,l.pe)({luxonRange:t.dateTimeRange,intl:i})}});default:(0,d.t1)(t)}}function y(e){const{actorPointer:t,blockStore:o}=e,i=(0,n.VK)((()=>p.t1.createChildStore(o,t)),[o,t]),l={display:"flex",marginLeft:4,marginRight:4};return i.table===s.KJ?(0,m.jsx)(g.Z,{userStore:i,inline:!0,style:l,avatarSize:16,avatarMarginRight:4}):i.table===a.cZ?(0,m.jsx)(u.Z,{botStore:i,style:l,avatarSize:16}):i.table===r.y0?(0,m.jsx)(g.Z,{userStore:void 0,inline:!0,style:l,avatarSize:16,avatarMarginRight:4}):void(0,d.t1)(i)}},49616:(e,t,o)=>{o.d(t,{AF:()=>k,Hw:()=>b,Sy:()=>C,TP:()=>w,VM:()=>v,X7:()=>P,X9:()=>M,aJ:()=>j,g0:()=>I,z0:()=>x});var i=o(15145),n=o(98953),r=o(80951),a=o(58810),s=o(17683),l=o(32240),c=o(23512),d=o(70203),p=o(9291),u=o(53965),g=o(1898),m=o(18265),h=o(19584),f=o(78030),y=o(84210),S=o(33929);function v(e){return Boolean(e.state.isOpen&&e.state.collectionsBulkActionsToolbarStore)}function C(e){switch(e){case f.C.Table:return"table";case f.C.Board:return"board";case f.C.ListView:return"list";case f.C.GalleryView:return"gallery";case f.C.Relation:case f.C.RelationSection:return"relation_section";case f.C.Timeline:return"timeline";case f.C.Calendar:return"calendar";case f.C.Page:return"page_properties";case f.C.CompactPage:return"compact_page";case f.C.Mini:return"mini_peek";case f.C.PropertyModule:return"property_module";default:(0,g.t1)(e)}}function x(e){return{backgroundImage:`linear-gradient(\n\t\tto right,\n\t\t${e.darkDividerColor} 0%,\n\t\t${e.darkDividerColor} 100%\n\t)`,backgroundRepeat:"repeat-x",backgroundPosition:"0 100%",backgroundSize:"100% 1px"}}function b(e){const{store:t,property:o,propertySchema:n}=e,a=null==n?void 0:n.type;if("title"===a)return(0,y.ZP)({store:t,fullyQualified:!1,pageVisitSource:i.tY.LinkInPage});{const e=t.getPropertyValue(o);return r.Hw(a,e)}}function k(e){let t=(0,d.Jcv)(e);if(!t||""===t.trim()||t.trim().includes(" "))return{domain:void 0,restOfUrl:void 0};t=t.trim();let o=m.Qc(t),i=o.host;if(o.protocol&&i||(o=m.Qc(`http://${t}`),i=o.host),!i)return{domain:void 0,restOfUrl:void 0};i&&(i=i.replace(/^www./i,""));const n=t.toLowerCase().indexOf(i.toLowerCase());if(-1===n)return{domain:void 0,restOfUrl:void 0};i=t.slice(n,n+i.length);return{domain:i,restOfUrl:t.slice(n+i.length)}}function P(e){const{numberValue:t,numberFormat:o,numberShowAs:i}=e;if(!(u.i2(t)||h.z4(t)||"bar"!==(null==i?void 0:i.type)&&"ring"!==(null==i?void 0:i.type))){const e=S.default.getIntl();return"percent"===o?c.uf(t,"percent",e):`${t} / ${i.maxValue}`}}function I(e){const{property:t,collectionStore:o}=e,i=o.isSyncedCollection();return Boolean(i)&&(0,n.w)(t)}function M(e,t){switch(e){case"side_peek":return{icon:l.y,tooltip:S.default.formatMessage(T.openInSidePeekTooltip),caption:t?"":S.default.formatMessage(T.openAsPageTitle)};case"center_peek":return{icon:s.Q,tooltip:S.default.formatMessage(T.openInCenterPeekTooltip),caption:t?"":S.default.formatMessage(T.openAsPageTitle)};case"full_page":return{icon:a.Z,tooltip:S.default.formatMessage(T.openAsPageTooltip),caption:t?"":S.default.formatMessage(T.openAsPageTitle)};default:(0,g.t1)(e)}}const T=(0,p.defineMessages)({openAsPageTitle:{defaultMessage:"Open",id:"database.actionButton.openAsPageTitle"},openAsPageTooltip:{defaultMessage:"Open as page",id:"database.actionButton.openAsPageTooltip"},openInCenterPeekTooltip:{defaultMessage:"Open in center peek",id:"database.actionButton.openInCenterPeekTooltip"},openInSidePeekTooltip:{defaultMessage:"Open in side peek",id:"database.actionButton.openInSidePeekTooltip"}});function w(e){const t=e.getSchema();if(t)for(const[i,n]of Object.entries(t)){var o;if(n&&"text"===n.type&&"summarize"===(null===(o=n.ai_inference)||void 0===o?void 0:o.type)){const t=e.getPropertyValue(i);if(t)return t}}}function j(e){const{store:t,additionalStores:o,collectionContextStore:i}=e,n=t.getAssociatedCollectionStore();return!("collectionTypedView"!==(null==i?void 0:i.contextType)||!n)&&o.some((e=>{var t;return(null===(t=e.getAssociatedCollectionStore())||void 0===t?void 0:t.id)!==n.id}))}},73807:(e,t,o)=>{o.d(t,{_:()=>r});var i=o(86628),n=o(77080);function r(){return(0,i.VK)((()=>n.default.getConfigKey("collection_request_settings","clientFormulaTimeoutMs")),[])}},61931:(e,t,o)=>{o.d(t,{$1:()=>v,A0:()=>u,A5:()=>p,Cm:()=>c,EP:()=>s,Er:()=>C,FK:()=>m,MI:()=>y,QF:()=>d,Uf:()=>l,Wx:()=>f,XX:()=>n,_U:()=>k,iO:()=>a,jO:()=>S,jX:()=>g,jq:()=>r,yc:()=>h});var i=o(1898);const n=80,r=40,a=24,s=20,l=270,c=405,d=480,p=16,u=8,g=44,m=144,h=144,f="linear-gradient(transparent 0%, black 10px)",y={backdropFilter:"blur(48px)",WebkitBackdropFilter:"blur(48px)"};function S(e){return{width:48,height:48,fill:e.lightIconColor}}function v(e){let{theme:t,isPhone:o}=e;return o?t.personalHomeBackgroundPhone:t.personalHomeBackgroundDesktop}function C(e){let{theme:t,isPhone:o,buttonState:i,hasCover:n}=e,r=t.whiteButtonBackground;switch(i){case"hovered":r=t.whiteButtonHoveredBackground;break;case"pressed":r=t.whiteButtonPressedBackground}return o&&(r=void 0),{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",background:r,...y,boxShadow:n?k({isPhone:o,theme:t}):void 0,width:28,height:28,borderRadius:4}}const x=1,b=.5;function k(e){let{isPhone:t,theme:o}=e;if("dark"===o.mode)return"unset";o.mode;const n=t?b:x,r=o.home.tile.border&&`0 0 0 ${n}px ${o.home.tile.border}`;return t?r:[r,"0 12px 40px rgba(0, 0, 0, 0.025)"].filter(i.$K).join(", ")}},86098:(e,t,o)=>{o.d(t,{Z:()=>r});var i=o(35431);class n extends i.Z{findRow(e,t,o){return this.find((i=>i.props.relatedPageStore.id===e&&i.props.rowType===t&&i.props.property===o))}}const r=new n},79576:(e,t,o)=>{o.d(t,{W:()=>a});var i=o(49085),n=o(7032);class r extends i.default{getInitialState(){return{type:"uninitialized"}}isWriting(){return"filling"===this.state.type&&!this.state.haveAllBlocksCompletedAutofill&&!this.state.didInterruptStreaming}setIsWriting(e){var t;const{propertySchema:o,stores:i,sessionIdForAnalytics:r}=e,a=i[0].getAssociatedCollectionId()??(null===(t=i[0].getCollectionViewCollectionStore())||void 0===t?void 0:t.id),s=r||(0,n.ZP)();return this.setState({type:"filling",propertySchema:o,collectionId:a,numBlocksToAutofill:i.length,numBlocksAutofilled:0,sessionId:s,didInterruptStreaming:!1,haveAllBlocksCompletedAutofill:!1}),s}}const a=new r},89767:(e,t,o)=>{o.d(t,{R:()=>r});o(67294);var i=o(45238),n=o(85893);const r=(0,i.IU)("collectionInbox",{viewBox:"0 0 14 14",svg:(0,n.jsx)("path",{d:"M11.0918,0 C11.5383,0 11.9307,0.295898 12.0533,0.725586 L13.9615,7.40332 C13.9871,7.49316 14,7.58594 14,7.67871 L14,13 C14,13.5527 13.5522,14 13,14 L1,14 C0.447754,14 0,13.5527 0,13 L0,7.67871 C0,7.58594 0.0129395,7.49316 0.0384521,7.40332 L1.94666,0.725586 C2.06934,0.295898 2.46167,0 2.9082,0 L11.0918,0 Z M4.27271,1.5 C3.83728,1.5 3.45178,1.78223 3.31982,2.19727 L1.91455,6.61328 C1.70947,7.25879 2.1908,7.91699 2.86755,7.91699 L4.70837,7.91699 C4.70837,8.93652 5.16663,10.168 7,10.168 C8.83337,10.168 9.29163,8.93652 9.29163,7.91699 L11.1478,7.89355 C11.8201,7.88477 12.2927,7.22852 12.0876,6.58887 L10.681,2.19531 C10.5485,1.78125 10.1635,1.5 9.72864,1.5 L4.27271,1.5 Z"})})},58810:(e,t,o)=>{o.d(t,{Z:()=>r});o(67294);var i=o(45238),n=o(85893);const r=(0,i.IU)("openAsPageThick",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M2.16895 7.19629C2.59277 7.19629 2.90723 6.88867 2.90723 6.45801V5.96582L2.75684 3.81934L4.35645 5.50098L6.3252 7.4834C6.46875 7.63379 6.65332 7.70215 6.85156 7.70215C7.30957 7.70215 7.6377 7.39453 7.6377 6.93652C7.6377 6.72461 7.55566 6.54004 7.41211 6.39648L5.43652 4.4209L3.74805 2.82129L5.91504 2.96484H6.44141C6.86523 2.96484 7.18652 2.65723 7.18652 2.22656C7.18652 1.7959 6.87207 1.48145 6.44141 1.48145L2.64746 1.48145C1.86816 1.48145 1.41699 1.93262 1.41699 2.71875L1.41699 6.45801C1.41699 6.88184 1.73828 7.19629 2.16895 7.19629ZM9.55176 14.6543H13.3389C14.125 14.6543 14.5762 14.2031 14.5762 13.417V9.67773C14.5762 9.25391 14.2549 8.93945 13.8242 8.93945C13.4004 8.93945 13.0859 9.24707 13.0859 9.67773V10.1699L13.2295 12.3164L11.6299 10.6348L9.66113 8.65234C9.52441 8.50195 9.33984 8.43359 9.1416 8.43359C8.68359 8.43359 8.35547 8.74121 8.35547 9.19922C8.35547 9.41113 8.43066 9.5957 8.57422 9.73926L10.5566 11.7148L12.2383 13.3145L10.0781 13.1709H9.55176C9.12793 13.1709 8.80664 13.4785 8.80664 13.9092C8.80664 14.3398 9.12109 14.6543 9.55176 14.6543Z"})})},84242:(e,t,o)=>{o.d(t,{v:()=>r});o(67294);var i=o(45238),n=o(85893);const r=(0,i.IU)("parentItem",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.29662 5.47368L7.33167 4.11653L6.30839 5.24265L4.22625 7.32458C4.16064 7.39019 4.0821 7.43856 3.99288 7.47024C3.90958 7.5013 3.82192 7.51646 3.73089 7.51646C3.54036 7.51646 3.37427 7.45062 3.24187 7.31823L3.23992 7.31628C3.11249 7.18353 3.04999 7.01804 3.04999 6.82921C3.04999 6.63758 3.12598 6.46746 3.2656 6.32285L3.26711 6.32129L7.4749 2.10083C7.62016 1.9509 7.79567 1.87 7.99651 1.87C8.19734 1.87 8.37284 1.95089 8.51809 2.10079L12.7355 6.32457C12.8705 6.46954 12.943 6.63917 12.943 6.82921C12.943 7.01927 12.8775 7.18502 12.7458 7.31725C12.617 7.45083 12.4522 7.51646 12.2621 7.51646C12.1706 7.51646 12.0814 7.50115 11.995 7.47068L11.9926 7.4698C11.9069 7.43769 11.8313 7.38908 11.7668 7.32458L9.6802 5.238L8.65635 4.11153L8.69652 5.47736L8.69011 9.81896C8.69011 10.5736 8.80303 11.157 9.01808 11.5793C9.2312 11.9935 9.55909 12.2887 10.0079 12.4675L10.0088 12.4678C10.4652 12.6536 11.062 12.7499 11.8051 12.7499C11.952 12.7499 12.0793 12.7478 12.1871 12.7436C12.303 12.7393 12.417 12.7372 12.5287 12.7372C12.7186 12.7372 12.8855 12.7955 13.0191 12.9179C13.1612 13.0441 13.2287 13.2138 13.2287 13.4117C13.2287 13.5394 13.2018 13.6569 13.1388 13.7556C13.0846 13.8467 13.0093 13.919 12.9157 13.9718C12.8317 14.0256 12.7415 14.0631 12.6459 14.0833C12.5373 14.1068 12.4035 14.12 12.2469 14.1243C12.0973 14.1286 11.931 14.1307 11.748 14.1307C10.2678 14.1307 9.14333 13.8104 8.40142 13.144C7.6536 12.4723 7.29657 11.3702 7.29657 9.87609L7.29662 5.47368Z"})})},70663:(e,t,o)=>{o.d(t,{h:()=>r});o(67294);var i=o(45238),n=o(85893);const r=(0,i.IU)("replace",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M3.26465 3.96094C2.95996 4.26562 2.979 4.66553 3.23291 4.8877C3.49316 5.12256 3.86133 5.12256 4.16602 4.83057C5.11182 3.80225 6.48291 3.15479 8 3.15479C10.6851 3.15479 12.856 5.12891 13.2051 7.66162H12.2466C11.7642 7.66162 11.6309 8.01709 11.9102 8.41064L13.4209 10.5435C13.6494 10.8608 13.9985 10.8608 14.2334 10.5435L15.7441 8.41699C16.0298 8.02344 15.8965 7.66162 15.4077 7.66162H14.519C14.1445 4.44336 11.3516 1.85986 8 1.85986C6.13379 1.85986 4.43262 2.68506 3.26465 3.96094ZM0.249512 8.42334C-0.0297852 8.81689 0.097168 9.17871 0.585938 9.17871H1.4873C1.85547 12.397 4.64844 14.9805 8 14.9805C9.87256 14.9805 11.5737 14.1553 12.748 12.873C13.0464 12.5684 13.0273 12.1685 12.7734 11.9399C12.5132 11.7051 12.1514 11.7114 11.8403 12.0034C10.9009 13.0381 9.52979 13.6855 8 13.6855C5.32129 13.6855 3.14404 11.7178 2.79492 9.17871H3.74707C4.22949 9.17871 4.36279 8.82324 4.0835 8.42969L2.57275 6.29688C2.34424 5.97949 1.99512 5.97949 1.7666 6.29688L0.249512 8.42334Z"})})},8505:(e,t,o)=>{o.d(t,{S:()=>r});o(67294);var i=o(45238),n=o(85893);const r=(0,i.IU)("subItem",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.88642 2.43778C1.98215 2.3846 2.09567 2.35999 2.22362 2.35999C2.41846 2.35999 2.58374 2.42299 2.71309 2.55179C2.84789 2.67678 2.91386 2.84079 2.91386 3.03655C2.91386 3.161 2.90926 3.28545 2.90008 3.40989C2.8956 3.52687 2.89335 3.66669 2.89335 3.82952C2.89335 4.6672 2.99989 5.34012 3.20906 5.85192C3.42107 6.35987 3.76386 6.73052 4.23921 6.9683C4.72178 7.20285 5.37665 7.32288 6.20897 7.32288H10.9303L12.4002 7.41264L10.2433 5.44074L8.72396 3.8939C8.66786 3.83269 8.6225 3.76177 8.58753 3.68184L8.58532 3.67681C8.55515 3.59133 8.54022 3.50307 8.54022 3.41252C8.54022 3.22504 8.60443 3.06601 8.73414 2.94147C8.86699 2.81372 9.02934 2.74963 9.21678 2.74963C9.40179 2.74963 9.5677 2.81976 9.71223 2.95431L9.71419 2.95614L14.2523 7.49436C14.4062 7.63869 14.4871 7.81019 14.4871 8.00627C14.4871 8.20241 14.4062 8.37593 14.2528 8.52459L9.72696 13.0436C9.57465 13.191 9.40407 13.2698 9.21678 13.2698C9.03026 13.2698 8.86827 13.2086 8.73525 13.0858L8.73305 13.0838C8.60434 12.9551 8.54022 12.7943 8.54022 12.6069C8.54022 12.5163 8.55535 12.4281 8.58551 12.3426C8.61631 12.2554 8.66304 12.1796 8.72601 12.1166L10.2463 10.5689L12.3938 8.61275L10.9258 8.69663L6.14745 8.69651C4.516 8.69651 3.32454 8.32105 2.59311 7.55211C1.86303 6.77991 1.50604 5.55355 1.50604 3.89104C1.50604 3.68942 1.51062 3.50571 1.51983 3.34C1.52904 3.17413 1.54527 3.03558 1.56915 2.92552C1.58898 2.82668 1.62376 2.73465 1.67362 2.64989C1.72566 2.56142 1.79795 2.48982 1.88642 2.43778Z"})})},50063:(e,t,o)=>{o.d(t,{X:()=>r});o(67294);var i=o(45238),n=o(85893);const r=(0,i.IU)("verificationCheck",{viewBox:"0 0 6 7",svg:(0,n.jsx)("path",{d:"M2.84245 6.11619C2.71116 6.30644 2.53392 6.40156 2.31072 6.40156C2.20131 6.40156 2.10066 6.37881 2.00875 6.33332C1.92123 6.28782 1.83589 6.21545 1.75274 6.11619L0.150985 4.25515C0.0503282 4.12694 0 3.99874 0 3.87053C0 3.73406 0.04814 3.61826 0.14442 3.52314C0.245077 3.42388 0.365427 3.37425 0.50547 3.37425C0.597374 3.37425 0.680525 3.39286 0.754923 3.43008C0.833698 3.46317 0.912473 3.52934 0.991247 3.6286L2.28446 5.21049L5.00875 1.07896C5.13129 0.892857 5.28446 0.799805 5.46827 0.799805C5.60394 0.799805 5.72648 0.841161 5.83589 0.923874C5.9453 1.00659 6 1.11618 6 1.25266C6 1.32297 5.98249 1.39327 5.94748 1.46358C5.91685 1.52975 5.88184 1.59178 5.84245 1.64968L2.84245 6.11619Z"})})},70693:(e,t,o)=>{o.d(t,{mb:()=>s,nK:()=>l,pe:()=>c});var i=o(40506),n=o(7057),r=o(53877),a=o(42875);function s(e){const{dateTime:t,intl:o,shortenDateAndRange:i}=e,a=r.OQ.toPersistedDate(t.valueOf());return n.ZV({value:a,allowRelativeDates:!0,intl:o,shortenDateAndRange:i,displayInUserTimezone:!0})}function l(e){const{dateTime:t,intl:o,userTimeZone:i,displayInUserTimezone:a,alwaysIncludeTimezone:s}=e,l=r.OQ.toPersistedDateTime(t.valueOf(),t.zoneName);return n.ZV({value:l,allowRelativeDates:!0,intl:o,userTimeZone:i,displayInUserTimezone:a,alwaysIncludeTimezone:s})}function c(e){const{luxonRange:t,intl:o}=e,s=r.OQ.toPersistedDateRange(t),l=n.ZV({value:s,allowRelativeDates:!1,shortenDateAndRange:!0,intl:o,displayInUserTimezone:!0}),c=t.end.setZone((0,a.r)()),d=n.mr({start_time:c.toFormat(i.jK),humanReadable:!1,intl:o});return o.formatMessage({id:"verification.timeRange",defaultMessage:"{formattedDateRange} at {formattedEndTime}"},{formattedDateRange:l,formattedEndTime:d})}}}]);