"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[7971],{91264:(e,t,i)=>{i.d(t,{Z:()=>x,v:()=>S});var n=i(67294),a=i(480),o=i(86628),s=i(24405),r=i(59054),l=i(89806),d=i(9291),c=i(47839),p=i(12714),g=i(97122),u=i(58297),m=i(95477),f=i(80444),C=i(84437),b=i(71574),h=i(85893);const S=(0,d.defineMessages)({continueWithGoogle:{id:"notionCalendarLaunchButton.continueWithGoogle",defaultMessage:"Continue with Google"},downloadApp:{id:"notionCalendarLaunchButton.downloadApp",defaultMessage:"Download app"},openCalendar:{id:"notionCalendarLaunchButton.openCalendar",defaultMessage:"Open Calendar"}});const x=function(e){let{style:t,openCalendarFrom:i,continueWithGoogleFrom:x,onOpenCalendarClick:v,onContinueWithGoogleClick:y,onDownloadClick:M}=e;const I=(0,a.O7)(),k=(0,s.yK)((e=>({button:{height:32,marginLeft:8,fontSize:14,whiteSpace:"nowrap",...t},googleLogoIcon:{width:14,height:14,marginRight:8}})),[t]),w=(0,o.VK)((()=>(0,b.tE)()),[]),[{value:L}]=(0,r.r5)((async()=>{var e;return!(null===(e=c.electronApi)||void 0===e||!e.isProtocolRegistered)&&c.electronApi.isProtocolRegistered(m.default.calendar.desktopProtocol)}),[]),j=(0,n.useCallback)((()=>{C.sh({environment:I,spaceStore:void 0,collectionViewStore:void 0,from:i}),null==v||v()}),[I,i,v]),N=(0,n.useCallback)((()=>{const{currentUserSettingsStore:e,currentSpaceStore:t}=f.default.state;e&&t&&(C.sh({environment:I,spaceStore:t,collectionViewStore:void 0,from:x}),null==y||y())}),[I,x,y]),T=(0,n.useCallback)((()=>{p.D({environment:I,url:m.default.calendar.downloadUrl}),null==M||M()}),[I,M]);return I.device.isElectron?L?(0,h.jsx)(u.Z,{style:k.button,onClick:j,children:(0,h.jsx)(d.FormattedMessage,{...S.openCalendar})}):(0,h.jsx)(u.Z,{style:k.button,onClick:T,children:(0,h.jsx)(d.FormattedMessage,{...S.downloadApp})}):w?(0,h.jsx)(u.Z,{style:k.button,onClick:j,children:(0,h.jsx)(d.FormattedMessage,{...S.openCalendar})}):(0,h.jsxs)(g.h,{styles:k.button,onClick:N,children:[(0,l.R)(k.googleLogoIcon),(0,h.jsx)(d.FormattedMessage,{...S.continueWithGoogle})]})}},35700:(e,t,i)=>{i.d(t,{J:()=>p});i(67294);var n=i(24405),a=i(89024),o=i(81254),s=i(7124),r=i(63296),l=i(85248),d=i(79872),c=i(85893);function p(e){const{title:t,description:i,cta:p,onClick:g,onDismiss:u,icon:m,iconStyle:f,progressFilledColor:C,progressPercent:b,isButtonDisabled:h,iconGroup:S,iconColorName:x}=e,v=(0,n.yK)((e=>({cardContainer:{padding:14,display:"flex",flexDirection:"column",alignItems:"flex-start",gap:4,alignSelf:"stretch"},buttonContainer:{paddingTop:8,width:"100%"},button:{width:"100%"},dismissButton:{position:"relative",top:0,right:0,left:4,background:"none"},cta:{textDecoration:"underline"},icon:{width:16,color:e.icon.secondary},unfilledBar:{color:e.tint.regular},filledBar:{color:e.icon.tertiary}})),[]),y=void 0!==b;return(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)("div",{style:v.cardContainer,children:[(0,c.jsxs)(a.jX,{direction:"row",gap:"auto",align:"center",children:[m?m({...v.icon,...f}):null,S?(0,c.jsx)(o.x,{iconGroup:S,variantName:"large",colorName:x}):null,void 0!==u&&(0,c.jsx)(d.U,{onClick:u,style:v.dismissButton})]}),(0,c.jsxs)(a.jX,{gap:y?8:4,children:[(0,c.jsx)(s.q,{styleName:"Body-13px/Medium",colorName:"primary",children:t}),y&&(0,c.jsx)(l.k,{percentage:100*b,height:6,filledColor:C??v.filledBar.color,unfilledColor:v.unfilledBar.color}),(0,c.jsx)(s.q,{styleName:"Body-13px/Regular",colorName:"secondary",children:i})]}),(0,c.jsx)("div",{style:v.buttonContainer,children:(0,c.jsx)(r.Z,{onClick:g,disabled:h,disabledFeedback:h,style:v.button,children:(0,c.jsx)(s.q,{styleName:"Body-13px/Medium",colorName:"primary",children:p})})})]})})}},91496:(e,t,i)=>{i.d(t,{Z:()=>y});i(67294);var n=i(480),a=i(86628),o=i(24405),s=i(53877),r=i(11751),l=i(9291),d=i(13447),c=i(37181),p=i(48779),g=i(35700),u=i(80444),m=i(44041),f=i(81886),C=i(70060),b=i(88893),h=i(35057),S=i(28956),x=i(85893);function v(e,t,i){if(i){if("warning"===t){if("settings"===e)return{disableWarningNotificationInSettings:!0,disableWarningNotificationInSidebar:i.disableWarningNotificationInSidebar,disableLimitNotificationInSettings:i.disableLimitNotificationInSettings,disableLimitNotificationInSidebar:i.disableLimitNotificationInSidebar,expirationDate:i.expirationDate};if("sidebar"===e)return{disableWarningNotificationInSettings:i.disableWarningNotificationInSettings,disableWarningNotificationInSidebar:!0,disableLimitNotificationInSettings:i.disableLimitNotificationInSettings,disableLimitNotificationInSidebar:i.disableLimitNotificationInSidebar,expirationDate:i.expirationDate}}if("limit_reached"===t){if("settings"===e)return{disableWarningNotificationInSettings:i.disableWarningNotificationInSettings,disableWarningNotificationInSidebar:i.disableWarningNotificationInSidebar,disableLimitNotificationInSettings:!0,disableLimitNotificationInSidebar:i.disableLimitNotificationInSidebar,expirationDate:i.expirationDate};if("sidebar"===e)return{disableWarningNotificationInSettings:i.disableWarningNotificationInSettings,disableWarningNotificationInSidebar:i.disableWarningNotificationInSidebar,disableLimitNotificationInSettings:i.disableLimitNotificationInSettings,disableLimitNotificationInSidebar:!0,expirationDate:i.expirationDate}}}return{disableWarningNotificationInSettings:"warning"===t&&"settings"===e,disableWarningNotificationInSidebar:"warning"===t&&"sidebar"===e,disableLimitNotificationInSettings:"limit_reached"===t&&"settings"===e,disableLimitNotificationInSidebar:"limit_reached"===t&&"sidebar"===e,expirationDate:(0,s.Xz)({date:Date.now(),daysToAdd:7})}}const y=function(e){const t=(0,f.MQ)(e.source),i=(0,a.VK)((()=>S.Z.state),[]),y=(0,n.O7)(),M=(0,o.yK)((e=>({aiColor:{color:e.icon.purple}})),[]),{membersCount:I,spaceName:k,settings:w,currentUserSettingsStore:L,hideBlockCounter:j}=(0,a.VK)((()=>{var e;return{membersCount:(0,b.qX)(),spaceName:u.default.state.currentSpaceStore&&(0,p.rn)(y,u.default.state.currentSpaceStore),settings:null===(e=u.default.state.currentUserSettingsStore)||void 0===e||null===(e=e.getSettings())||void 0===e?void 0:e.addOnLimitNotifications,currentUserSettingsStore:u.default.state.currentUserSettingsStore,hideBlockCounter:(0,C.nz)()}}),[y]),N=(0,a.VK)((()=>i?+i.spaceUsage/i.spaceLimit:0),[i]),{notificationType:T}=(0,a.VK)((()=>({notificationType:N>=f.Tq?"limit_reached":"warning"})),[N]),_=(0,a.VK)((()=>{var e;return Boolean(null==L||null===(e=L.getSettings())||void 0===e?void 0:e.dismissed_sidebar_timed_trial_nudge)}),[L]);if(!L)return null;if(!t)return null;if(j&&!_)return null;let A;"settings"===e.source&&I>=3&&(null!=w&&w.expirationDate?Date.now()<w.expirationDate&&(A=!0):(!function(e,t){d.createAndCommit({userAction:"addOnLimitNotifications.ai.initializeSettings",environment:e,perform:e=>{c.d2({transaction:e,userSettingsStore:t,data:{addOnLimitNotifications:{disableWarningNotificationInSettings:!1,disableWarningNotificationInSidebar:!1,disableLimitNotificationInSettings:!1,disableLimitNotificationInSidebar:!1,expirationDate:(0,s.Xz)({date:Date.now(),daysToAdd:7})}}})}})}(y,L),A=!0));const U="limit_reached"===T?(0,x.jsx)(l.FormattedMessage,{id:"addOnLimitUsage.description.usedAllFreeResponses.admins",defaultMessage:"{spaceName} has used all their free AI responses.",values:{spaceName:k}}):(0,x.jsx)(l.FormattedMessage,{id:"addOnLimitUsage.description.approachingLimit.admins",defaultMessage:"{spaceName} has used {spaceUsage} of the {usageLimit} free responses provided to this workspace.",values:{spaceName:k,spaceUsage:(null==i?void 0:i.spaceUsage)??0,usageLimit:(null==i?void 0:i.spaceLimit)??0}});return(0,x.jsx)(g.J,{title:(0,x.jsx)(l.FormattedMessage,{id:"spaceSettings.sidebar.addOnUpgradeLink",defaultMessage:"Notion AI"}),description:U,cta:(0,x.jsx)(l.FormattedMessage,{id:"spaceSettings.sidebar.addOnPurchase.buttonLabel",defaultMessage:"Upgrade AI"}),icon:r.t,iconStyle:M.aiColor,onClick:()=>function(e,t){m.y(e,{from:"sidebar"===t?"ai_limit_sidebar":"ai_limit_settings",for:(0,h.zt)(),addOnFeature:"ai"})}(y,e.source),onDismiss:A?void 0:()=>function(e,t,i){var n;const{currentUserSettingsStore:a}=u.default.state;if(!a)return;const o={addOnLimitNotifications:v(t,i,null===(n=a.getSettings())||void 0===n?void 0:n.addOnLimitNotifications)};d.createAndCommit({userAction:"addOnLimitNotifications.ai.markNotificationAsDismissed",environment:e,perform:e=>{c.d2({transaction:e,userSettingsStore:a,data:o})}})}(y,e.source,T),progressFilledColor:M.aiColor.color,progressPercent:N})}},71095:(e,t,i)=>{i.d(t,{Z:()=>Z});i(67294);var n=i(480),a=i(86628),o=i(24405);const s=(0,i(45238).CZ)("arrowUpCircled",{default:{loader:()=>i.e(6531).then(i.bind(i,76531)),size:20},small:{loader:()=>i.e(9974).then(i.bind(i,39974)),size:16},mini:{loader:()=>i.e(26).then(i.bind(i,80026)),size:14},large:{loader:()=>i.e(7148).then(i.bind(i,7148)),size:24}});var r=i(99288),l=i(84169),d=i(72263),c=i(9291),p=i(1898),g=i(86572),u=i(91376),m=i(13447),f=i(37181),C=i(89024),b=i(26388),h=i(48779),S=i(859),x=i(35700),v=i(4023),y=i(80444),M=i(87199),I=i(44041),k=i(70060),w=i(88893),L=i(88280),j=i(32861),N=i(85893);function T(e){const{percentageUsed:t,source:i,isAdmin:a}=e,o=(0,n.O7)(),s=function(e){if(e>=w.VF)return"block_limit_reached";if(e>=w.xP)return"approaching_block_limit"}(t);switch(s){case"block_limit_reached":return(0,N.jsx)(U,{environment:o,onClick:()=>D(o,a,i)});case"approaching_block_limit":return(0,N.jsx)(A,{percentageUsed:t,onClick:()=>D(o,a,i)});default:return null}}function _(e){const t=(0,c.useIntl)();return(0,N.jsx)(x.J,{title:t.formatMessage(M.h.trialTitle),description:(0,N.jsxs)(N.Fragment,{children:[t.formatMessage(M.h.trialDescription),(0,N.jsx)(B,{tooltipMessage:t.formatMessage(M.h.trialTooltip)})]}),cta:t.formatMessage(M.h.trialCta),iconGroup:r.M,iconColorName:"green",onClick:e.onClick,onDismiss:e.onDismiss})}function A(e){const{percentageUsed:t,onClick:i}=e,n=(0,c.useIntl)();return(0,N.jsx)(x.J,{title:n.formatMessage(M.h.approachingBlockLimitTitle),description:(0,N.jsxs)(N.Fragment,{children:[n.formatMessage(M.h.approachingBlockLimitDescription),(0,N.jsx)(B,{tooltipMessage:n.formatMessage(M.h.approachingBlockLimitTooltip,{percent:100*t})})]}),cta:n.formatMessage(M.h.approachingBlockLimitCta),iconGroup:s,iconColorName:"uiBlueSecondary",onClick:i})}function U(e){const{environment:t,onClick:i}=e,n=(0,S.r)(),o=(0,a.VK)((()=>n&&(0,h.rn)(t,n)),[t,n]),r=(0,c.useIntl)();return o?(0,N.jsx)(x.J,{title:r.formatMessage(M.h.reachedBlockLimitTitle),description:(0,N.jsxs)(N.Fragment,{children:[r.formatMessage(M.h.reachedBlockLimitDescription,{spaceName:o}),(0,N.jsx)(B,{tooltipMessage:r.formatMessage(M.h.reachedBlockLimitTooltip)})]}),cta:r.formatMessage(M.h.reachedBlockLimitCta),iconGroup:s,iconColorName:"uiRedSecondary",onClick:i}):null}function B(e){const{tooltipMessage:t}=e,i=F();return(0,N.jsx)(b.ZP,{placement:v.u.Top,style:i.tooltip,render:e=>(0,N.jsx)("span",{...e,style:i.tooltipIconContainer,children:(0,l.m)(i.tooltipIcon)}),renderTooltip:()=>t,textWrap:!0})}function D(e,t,i,n){t||u.r$(),I.y(e,{from:V(i,Boolean(n)),for:"plus",isTrial:n})}function V(e,t){if(t)return"timed_trial_sidebar";switch(e){case"settings":return"block_limit_settings";case"sidebar":return"block_limit_sidebar";default:(0,p.t1)(e)}}function F(){return(0,o.yK)((e=>({tooltip:{width:"300px"},tooltipIcon:{height:14,width:14,fill:e.icon.tertiary,left:6},membersIcon:{height:14,width:14,fill:e.accentColors.green[400],left:6},tooltipIconContainer:{position:"absolute",marginLeft:4,marginTop:2},warningColor:{color:e.text.uiRedSecondary}})),[])}const Z=function(e){const{source:t,currentTab:i}=e,o=(0,n.O7)(),s=F(),{isAdmin:r,isEligibleForGracePeriod:l,hideBlockCounter:p,blockUsageData:u}=(0,a.VK)((()=>{const e=L.subscriptionDataStoreInstance.state;return{isAdmin:w.GJ(e),isEligibleForGracePeriod:(0,k.du)(),hideBlockCounter:(0,k.nz)(),blockUsageData:e?{blockUsage:w.Lz(o,e),percentageUsed:w.zl(o,e),approachingBlockLimit:w.SX(o,e),usageDescription:w.cA(o,e)}:void 0}}),[o]),b=(0,a.VK)((()=>{var e;return null===(e=y.default.state.currentUserSettingsStore)||void 0===e?void 0:e.getSettings()}),[]);if(!u||0===u.blockUsage)return null;if(!u.approachingBlockLimit)return p&&!Boolean(null==b?void 0:b.dismissed_sidebar_timed_trial_nudge)&&"settings"!==t?(0,N.jsx)(_,{onClick:()=>D(o,r,t,!0),onDismiss:()=>function(e){g.j(e,{name:"sidebar_timed_trial_nudge_dismiss"});const{currentUserSettingsStore:t}=y.default.state;if(!t)return;m.createAndCommit({userAction:"sidebarTimedTrialNudge.markNotificationAsDismissed",environment:e,perform:e=>{f.d2({transaction:e,userSettingsStore:t,data:{dismissed_sidebar_timed_trial_nudge:!0}})}})}(o)}):null;if("settings"===t)return"plans"!==i?(0,N.jsx)(j.Z,{}):null;if(p)return(0,N.jsx)(T,{percentageUsed:u.percentageUsed,source:t,isAdmin:r});const h=!l&&u.percentageUsed>w.Tj;return(0,N.jsx)(x.J,{title:(0,N.jsx)(C.jX,{direction:"row",gap:6,align:"center-left",children:(0,N.jsx)(c.FormattedMessage,{id:"spaceSettings.sidebar.upgradeLink",defaultMessage:"Upgrade to go unlimited"})}),description:(0,N.jsxs)(N.Fragment,{children:[u.usageDescription,(0,N.jsx)(B,{tooltipMessage:(0,N.jsx)(c.FormattedMessage,{id:"BlockInfoTooltip.content",defaultMessage:"Every piece of content you create — whether it’s an image, table or text — is a single building block in a Notion page."})})]}),cta:r?(0,N.jsx)(c.FormattedMessage,{id:"spaceSettings.sidebar.button.upgrade",defaultMessage:"Upgrade plan"}):(0,N.jsx)(c.FormattedMessage,{id:"spaceSettings.sidebar.button.contactWorkspaceOwner",defaultMessage:"Contact a workspace owner"}),onClick:()=>D(o,r,t),icon:d._,iconStyle:h?s.warningColor:{},progressPercent:l?void 0:u.percentageUsed,progressFilledColor:h?s.warningColor.color:void 0,isButtonDisabled:"plans"===i})}},32861:(e,t,i)=>{i.d(t,{Z:()=>m});i(67294);var n=i(480),a=i(72263),o=i(9291),s=i(86572),r=i(13447),l=i(37181),d=i(35700),c=i(80444),p=i(92083),g=i(85893);const u=(0,o.defineMessages)({title:{id:"SidebarUpgradeNudge.title",defaultMessage:"Do more with Notion"},description:{id:"SidebarUpgradeNudge.description",defaultMessage:"Upgrade for access to premium features."},cta:{id:"SidebarUpgradeNudge.cta",defaultMessage:"View plans"}});const m=function(){const e=(0,n.O7)(),t=(0,o.useIntl)();return(0,g.jsx)(d.J,{title:t.formatMessage(u.title),description:t.formatMessage(u.description),cta:t.formatMessage(u.cta),icon:a._,onClick:()=>function(e){s.sA(e,{from:"sidebar_upgrade_nudge"}),p.Z.setState({open:!0,openedFrom:"upsell",currentTab:"plans",defaultSubtab:void 0,highlightedSetting:void 0})}(e),onDismiss:()=>function(e){s.j(e,{name:"sidebar_upgrade_nudge_dismiss"});const{currentUserSettingsStore:t}=c.default.state;if(!t)return;r.createAndCommit({userAction:"sidebarUpgradeNudge.markNotificationAsDismissed",environment:e,perform:e=>{l.d2({transaction:e,userSettingsStore:t,data:{dismissed_sidebar_upgrade_nudge:!0}})}})}(e)})}},81886:(e,t,i)=>{i.d(t,{MQ:()=>h,OL:()=>b,Tq:()=>f});var n=i(67294),a=i(480),o=i(86628),s=i(9291),r=i(1898),l=i(54642),d=i(48779),c=i(80444),p=i(88280),g=i(88893),u=i(85893);const m=.7,f=1;async function C(e,t,i,n){const a=p.subscriptionDataStoreInstance.state;if(!a)return!1;const o=g.SX(e,a),s=c.default.state.currentSpaceStore;if(!(s&&(0,d.rn)(e,s))||!(0,g.GJ)(a))return!1;if(!n)return!1;const r=await l.getAIUsageEligibility(e,{spaceId:n});if("failed"===r.type)return!1;const u=r.data,C=u?+u.spaceUsage/u.spaceLimit:0;return(!1!==(null==u?void 0:u.isEligible)||!u.isSalesAssisted)&&(!o&&function(e,t,i){const n=e>=f?"limit_reached":"warning";if("warning"===n){if("settings"===t&&null!=i&&i.disableWarningNotificationInSettings||"sidebar"===t&&null!=i&&i.disableWarningNotificationInSidebar)return!1}else if("limit_reached"===n&&("settings"===t&&null!=i&&i.disableLimitNotificationInSettings||"sidebar"===t&&null!=i&&i.disableLimitNotificationInSidebar))return!1;return e>=m}(C,t,i))}function b(e,t,i,n){if("ai"===e)return{addOnCostItem:(0,u.jsx)("div",{children:(0,u.jsx)(s.FormattedMessage,{id:"addOnUpgrade.confirmation.costSection.unlimitedAI",defaultMessage:"<bold>Notion AI</bold>",values:{bold:e=>(0,u.jsx)("b",{children:e})}})}),addOnCostItemWithMembers:(0,u.jsx)("span",{style:{whiteSpace:"pre-wrap"},children:(0,u.jsx)(s.FormattedMessage,{id:"addOnUpgrade.confirmation.costSection.unlimitedAI.memberInfo",defaultMessage:"({memberCount, plural, one {{memberCount} member} other {{memberCount} members}} x {price} per month{interval, select, month {} other { x 12 months}})",values:{memberCount:t,interval:i,price:n}})})};(0,r.t1)(e)}function h(e){const t=(0,a.O7)(),i=(0,o.VK)((()=>{var e;return null===(e=c.default.state.currentUserSettingsStore)||void 0===e||null===(e=e.getSettings())||void 0===e?void 0:e.addOnLimitNotifications}),[]),s=(0,o.VK)((()=>{var e;return null===(e=c.default.state.currentSpaceStore)||void 0===e?void 0:e.id}),[]),[r,l]=(0,n.useState)();return(0,n.useEffect)((()=>{!async function(){const n=await C(t,e,i,s);l(n)}()}),[t,e,i,s]),r}},14034:(e,t,i)=>{i.d(t,{E:()=>s});var n=i(480),a=i(86628),o=i(28020);function s(){var e;const t=(0,n.O7)();return(null===(e=(0,a.Kw)((0,o.k_)(t)))||void 0===e?void 0:e.userJoinedTeamsStores)??[]}},31931:(e,t,i)=>{i.d(t,{Z:()=>O,l:()=>V});i(57658);var n=i(67294),a=i(480),o=i(86628),s=i(24405),r=i(15145),l=i(92996),d=i(22758),c=i(9767),p=i(90334),g=i(9291),u=i(37810),m=i(62967),f=i(81193),C=i(47307),b=i(89858),h=i(75754),S=i(54814),x=i(34517),v=i(40663),y=i(51592),M=i(93405),I=i(72495),k=i(64369),w=(i(74523),i(83105)),L=(i(18514),i(77907)),j=i(74948),N=i(80444),T=i(35057),_=i(29949),A=i(85893);const U=(0,g.defineMessages)({moreTemplates:{id:"sidebar.addAPageButtonTeamToggle.moreTemplates",defaultMessage:"More templates"},browseTemplates:{id:"sidebar.addAPageButtonTeamToggle.browseTemplates",defaultMessage:"Browse templates"},blankPage:{id:"sidebar.addAPageButtonTeamToggle.addBlankPage",defaultMessage:"Blank page"},suggestedTemplatesSection:{id:"sidebar.addAPageButtonTeamToggle.suggestedTemplatesSection",defaultMessage:"Suggested templates"}});function B(e){let{type:t,icon:i,title:n,action:a}=e;return(0,m.cN)({key:t,displayName:void 0,analyticsName:t,validators:[],closeParentMenu:!0,action:a,render:e=>(0,A.jsx)(M.Z,{...e,svg:()=>i,title:n})})}function D(e){let{preset:t,databaseTypes:i}=e;const n=(0,l.Pi)(t);for(const a of n)if(i.has(a))return!0;return!1}async function V(e){let{environment:t,spaceId:i,presetUri:n,parentStore:a,teamId:o,from:s}=e;const r=await async function(e){let{environment:t,spaceId:i,presetUri:n,parentStore:a,teamId:o}=e;const s=i?await S.nc({environment:t,spaceId:i,databaseTypes:(0,l.Pi)(n),parentStore:a,teamId:o}):[];return 0===s.length?{shouldShowConfirmModal:!1}:{shouldShowConfirmModal:!0,existingDatabaseTypes:s}}({environment:t,spaceId:i,presetUri:n,parentStore:a,teamId:o}),{shouldShowConfirmModal:d}=r;if(!d)return!0;const{existingDatabaseTypes:c}=r;return new Promise((e=>{f.Yn(t,{from:s}),C.showDialog({handleCancel:()=>{f.nn(t,{from:s,option:"no"}),e(!1)},showCancel:!0,keepFocus:!1,message:(0,A.jsx)(F,{presetUri:n,existingDatabaseTypes:c}),description:false,items:[{label:(0,A.jsx)(g.FormattedMessage,{id:"sidebar.appTemplate.confirmAdditionalAppTemplate.confirmAddAnyway.label",defaultMessage:"Add anyway"}),color:"red",onAccept:()=>{f.nn(t,{from:s,option:"yes"}),e(!0)}}]})}))}function F(e){const{presetUri:t,existingDatabaseTypes:i}=e,n=(0,g.useIntl)(),a=(0,s.yK)((()=>({messageContainer:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:12,marginTop:8,marginBottom:8},titleIcon:{height:38,width:38,color:"#D34F43"},confirmationTitle:{fontWeight:u.Z.fontWeight.medium,fontSize:18,textAlign:"center",marginTop:8,marginBottom:4},confirmationSubtitle:{fontSize:14,textAlign:"center"}})),[]),{title:r,icon:l}=(0,o.VK)((()=>Z({presetUri:t,iconStyle:a.titleIcon})),[t,a.titleIcon]);return(0,A.jsxs)("div",{style:a.messageContainer,children:[l,(0,A.jsx)(k.Z,{isMultiline:!0,style:a.confirmationTitle,children:(0,A.jsx)(g.FormattedMessage,{id:"sidebar.appTemplate.confirmAdditionalAppTemplate",defaultMessage:"Are you sure you want to add another {templateName} template?",values:{templateName:r}})}),(0,A.jsx)(k.Z,{isMultiline:!0,style:a.confirmationSubtitle,children:i&&i.length>0?(0,A.jsx)(g.FormattedMessage,{id:"sidebar.appTemplate.confirmAdditionalAppTemplate.existingAppsCaption",defaultMessage:"{existingDatabaseTypes} already exist in this teamspace. This template works best if there is only one per teamspace.",values:{existingDatabaseTypes:n.formatList(i.map((e=>(0,y.Mn)(e))))}}):(0,A.jsx)(g.FormattedMessage,{id:"sidebar.appTemplate.confirmAdditionalAppTemplate.caption",defaultMessage:"{templateName} template works best if there is only one per teamspace.",values:{templateName:r}})})]})}function Z(e){let{presetUri:t,iconStyle:i}=e;return{title:W(t),icon:P({presetUri:t,style:i})}}function W(e){return e===l.rK?(0,A.jsx)(g.FormattedMessage,{id:"sidebar.addTemplateToExistingTeam.wiki",defaultMessage:"Wiki"}):(0,v.YC)((0,x.appConfigs)(),e).name}function P(e){var t,i;let{presetUri:n,style:a}=e;return l.xm.includes(n)?null===(t=(i=d.y[n]).icon)||void 0===t?void 0:t.call(i,a):null}const O=function(e){const{teamStore:t,from:i}=e,d=(0,a.O7)(),u=(0,a.Fy)(),{spaceStore:C,spaceViewStore:S}=(0,o.VK)((()=>({spaceStore:N.default.state.currentSpaceStore,spaceViewStore:N.default.state.currentSpaceViewStore})),[]),x=(0,n.useCallback)((async e=>{const{appTemplatesSetupActions:n}=await L.deps.AppTemplates.loader();f.ZE(d,{option:e,from:i});if(!(await V({presetUri:e,spaceId:t.getSpaceId(),environment:d,parentStore:t,teamId:t.id,from:i})))return;let a=!1;const o=[];if(C&&S){if((0,l.it)(e))a=await n.createWikiInTeam({environment:d,spaceStore:C,spaceViewStore:S,teamStore:t,appendOrPrepend:"append"}),o.push(a.id);else{const o=n.createTypedDBsInTeam({presetUri:e,spaceViewStore:S,environment:d,teamStore:t,from:i});o.length>0&&(a=o[0])}a&&h._c({environment:d,store:a,visitType:w.vu.Link,pageVisitSource:r.tY.Create})}}),[d,t,C,S,i]),v=(0,n.useCallback)((()=>{_.Z.open({analyticsFrom:i,cloneTo:"destination_picker",selectedTeam:t}),f.ZE(d,{option:"more_templates",from:i})}),[d,t,i]),y=(0,n.useCallback)((e=>{C&&S&&(b.mv({environment:d,event:e,from:"sidebar_team_section",spaceStore:C,spaceViewStore:S,teamStore:t,andNavigate:!0,appendOrPrepend:"append"}),u.isMobile&&j.close(),f.ZE(d,{option:"blank_page",from:i}))}),[u.isMobile,d,C,S,t,i]),M=(0,s.yK)((e=>({actionItemIcon:{fill:e.regularIconColor,width:16,height:16},actionItemIconGray:{fill:e.mediumIconColor,width:16,height:16},blankPageSection:{paddingTop:6,paddingBottom:0},blankPageWithBrowseTemplatesSection:{paddingTop:6,paddingBottom:6}})),[]),F=(0,o.VK)((()=>{if((0,T.QM)()||(0,T.Aw)())return[];const e=l.wC.existing_team,i=function(e){let{teamStore:t,presets:i}=e;const n=t.getSpaceId();if(!n)return new Set;const a=new Set;for(const r of t.getTeamPageStores()){var o;const e=null===(o=r.getCollectionStore())||void 0===o?void 0:o.getDatabaseType();e&&a.add(e)}const s=new Set;for(const r of i){D({preset:r,databaseTypes:a})&&s.add(r)}return s}({teamStore:t,presets:e});return e.filter((e=>!i.has(e)))}),[t]),W=(0,o.VK)((()=>F.map((e=>{const{icon:t,title:i}=Z({presetUri:e,iconStyle:M.actionItemIcon});return B({type:e,icon:t,title:i,action:()=>x(e)})}))),[x,F,M.actionItemIcon]),P=(0,m.cN)({key:"blank_page",displayName:U.blankPage,analyticsName:"blank_page",svg:()=>(0,c.s)(M.actionItemIcon),validators:[],closeParentMenu:!0,action:(e,t)=>y(t)}),O=0===F.length,{moreType:z,moreMessage:K}=O?{moreType:"browse_templates",moreMessage:U.browseTemplates}:{moreType:"more_templates",moreMessage:U.moreTemplates},G=!u.isMobile?B({type:z,title:(0,A.jsx)(k.Z,{isSecondaryColor:!0,children:(0,A.jsx)(g.FormattedMessage,{...K})}),icon:(0,p.O)(M.actionItemIconGray),action:v}):void 0;if(O)return[(0,m.$J)({key:"blank page with browse templates",render:e=>(0,A.jsx)(I.Z,{...e,style:M.blankPageWithBrowseTemplatesSection}),actions:[P,...G?[G]:[]]})];{const e=(0,m.$J)({key:"add blank page",render:e=>(0,A.jsx)(I.Z,{...e,style:M.blankPageSection}),actions:[P]}),t=(0,m.$J)({key:"add app templates",title:U.suggestedTemplatesSection,overrideSearchTitle:U.suggestedTemplatesSection,render:e=>(0,A.jsx)(I.Z,{...e}),actions:[...W,...G?[G]:[]]});return[e,t]}}},99288:(e,t,i)=>{i.d(t,{M:()=>n});const n=(0,i(45238).CZ)("people",{default:{loader:()=>i.e(9975).then(i.bind(i,99975)),size:20},small:{loader:()=>i.e(9880).then(i.bind(i,9880)),size:16},mini:{loader:()=>i.e(1269).then(i.bind(i,71269)),size:14},large:{loader:()=>i.e(9616).then(i.bind(i,9616)),size:24}})},9767:(e,t,i)=>{i.d(t,{s:()=>o});i(67294);var n=i(45238),a=i(85893);const o=(0,n.IU)("docBadgePlus",{viewBox:"0 0 16 16",svg:(0,a.jsx)("path",{d:"M3.719 8.066c.105-.018.21-.03.316-.04a2.6 2.6 0 01.653 0c.11.01.22.022.33.04V2.509c0-.303.078-.538.237-.705.158-.167.397-.25.718-.25h2.808v3.612c0 .47.114.821.343 1.054.233.233.584.35 1.055.35h3.553v5.721c0 .303-.08.536-.238.699-.158.163-.397.244-.718.244H8.57c-.04.233-.1.457-.184.672-.08.22-.18.429-.304.627h4.8c.707 0 1.24-.185 1.601-.554.36-.365.54-.901.54-1.609V6.392a4.83 4.83 0 00-.052-.778 1.721 1.721 0 00-.204-.587 2.456 2.456 0 00-.436-.56L10.877.953a2.373 2.373 0 00-.54-.428A1.72 1.72 0 009.763.32a3.897 3.897 0 00-.725-.06H5.861c-.708 0-1.241.185-1.602.554-.36.365-.54.9-.54 1.608v5.643zM9.922 5.04V1.731l3.632 3.698h-3.25c-.136 0-.235-.03-.297-.092-.057-.062-.085-.16-.085-.297zM4.372 15.74c.456 0 .89-.09 1.298-.27.413-.176.775-.42 1.087-.732a3.36 3.36 0 00.739-1.088 3.2 3.2 0 00.27-1.305c0-.466-.09-.903-.27-1.312a3.432 3.432 0 00-1.813-1.82 3.284 3.284 0 00-1.312-.263c-.466 0-.903.088-1.312.264a3.38 3.38 0 00-1.08.738 3.433 3.433 0 00-.732 1.081c-.18.409-.27.846-.27 1.312 0 .466.09.903.27 1.312.175.409.42.769.731 1.08a3.38 3.38 0 001.081.74c.41.175.846.263 1.312.263zm0-1.246a.446.446 0 01-.33-.125.45.45 0 01-.119-.323v-1.253H2.671a.437.437 0 01-.323-.125.424.424 0 01-.126-.323c0-.136.042-.244.126-.323a.437.437 0 01.323-.125h1.252v-1.253c0-.132.04-.24.119-.323a.446.446 0 01.33-.125c.135 0 .243.042.322.125a.437.437 0 01.125.323v1.253h1.253c.132 0 .24.041.323.125.083.08.125.187.125.323a.424.424 0 01-.125.323.437.437 0 01-.323.125H4.819v1.253c0 .132-.041.24-.125.323a.424.424 0 01-.323.125z"})})},89806:(e,t,i)=>{i.d(t,{R:()=>o});i(67294);var n=i(45238),a=i(85893);const o=(0,n.IU)("googleLogo",{viewBox:"0 0 20 20",svg:(0,a.jsxs)("g",{children:[(0,a.jsx)("path",{d:"M19.9996 10.2297C19.9996 9.54995 19.9434 8.8665 19.8234 8.19775H10.2002V12.0486H15.711C15.4823 13.2905 14.7475 14.3892 13.6716 15.0873V17.586H16.9593C18.89 15.8443 19.9996 13.2722 19.9996 10.2297Z",fill:"#4285F4"}),(0,a.jsx)("path",{d:"M10.2002 20.0003C12.9518 20.0003 15.2723 19.1147 16.963 17.5862L13.6753 15.0875C12.7606 15.6975 11.5797 16.0429 10.2039 16.0429C7.54224 16.0429 5.28544 14.2828 4.4757 11.9165H1.08301V14.4923C2.81497 17.8691 6.34261 20.0003 10.2002 20.0003Z",fill:"#34A853"}),(0,a.jsx)("path",{d:"M4.47227 11.9163C4.04491 10.6743 4.04491 9.32947 4.47227 8.0875V5.51172H1.08333C-0.363715 8.33737 -0.363715 11.6664 1.08333 14.4921L4.47227 11.9163Z",fill:"#FBBC04"}),(0,a.jsx)("path",{d:"M10.2002 3.95756C11.6547 3.93552 13.0605 4.47198 14.1139 5.45674L17.0268 2.60169C15.1824 0.904099 12.7344 -0.0292099 10.2002 0.000185607C6.34261 0.000185607 2.81497 2.13136 1.08301 5.51185L4.47195 8.08764C5.27795 5.71762 7.53849 3.95756 10.2002 3.95756Z",fill:"#EA4335"})]})})},68211:(e,t,i)=>{i.d(t,{D:()=>o});i(67294);var n=i(45238),a=i(85893);const o=(0,n.IU)("notionCalendarLogo",{viewBox:"0 0 20 21",svg:(0,a.jsxs)("svg",{width:"20",height:"21",viewBox:"0 0 20 21",fill:"none",children:[(0,a.jsxs)("g",{clipPath:"url(#clip0_970_53429)",children:[(0,a.jsx)("path",{d:"M2.17141 17.1924C1.81019 17.1884 1.48919 17.0958 1.23979 16.8633C1.23979 16.8633 1.23899 16.8633 1.23819 16.8617C1.20922 16.8336 1.18187 16.8046 1.15613 16.7756C0.959022 16.5504 0.852023 16.2615 0.852023 15.9494L0.849609 3.0915C0.849609 2.34732 1.47712 1.67957 2.21968 1.63371L15.0636 0.838839C15.0918 0.83723 15.1191 0.836426 15.1473 0.836426C15.4683 0.836426 15.7675 0.952277 15.996 1.16789C16.0274 1.19766 16.0572 1.22823 16.0845 1.26041C16.1585 1.34488 16.2197 1.43821 16.268 1.53877C16.2205 1.43901 16.1585 1.34569 16.0845 1.26121C16.2768 1.48487 16.3822 1.76967 16.3822 2.07861V2.40766C16.3822 2.40766 16.3902 2.67717 16.1231 2.69487L16.1247 2.69648L4.3114 3.43664C3.44494 3.49055 2.741 4.24117 2.741 5.10925C2.741 5.10925 2.73617 16.9768 2.73537 16.9961C2.72652 17.1924 2.56481 17.1924 2.43127 17.1924H2.17141Z",fill:"black"}),(0,a.jsx)("path",{d:"M19.1589 18.1882C19.1589 18.2075 19.1573 18.2269 19.1556 18.2462C19.1275 18.6589 18.7984 19.0225 18.3938 19.0973C18.3857 19.0973 18.3777 19.0998 18.3696 19.0998L4.66812 19.9292H4.62548C4.35758 19.9155 4.10979 19.8126 3.91671 19.6307C3.7003 19.4272 3.57882 19.1488 3.56997 18.8439C3.56997 18.8319 3.56836 18.8198 3.56836 18.8069V5.19278C3.56836 5.17347 3.56836 5.15497 3.56997 5.13566C3.59974 4.6988 3.96498 4.31746 4.40102 4.2724C4.41229 4.2724 4.42355 4.26919 4.43481 4.26838L17.5531 3.44616L18.1436 3.40915C18.1653 3.40754 18.187 3.40674 18.2087 3.40674C18.4557 3.40674 18.6858 3.49604 18.862 3.66097C18.9851 3.77601 19.072 3.92002 19.1186 4.08012C19.1388 4.14851 19.1508 4.22011 19.1556 4.29332V13.1785L19.1589 18.1874V18.1882Z",fill:"black"}),(0,a.jsx)("path",{d:"M20.001 4.36907C20.001 3.86302 19.8023 3.3972 19.4402 3.0577C19.0782 2.71819 18.6011 2.54763 18.0967 2.57981L17.3928 2.62245C17.2166 2.62808 17.2246 2.49212 17.2246 2.49212V2.08583C17.2246 1.49692 16.9929 0.955478 16.5722 0.560458C16.1514 0.165437 15.5955 -0.0324757 15.009 0.00372785L2.16349 0.798596C0.97121 0.872612 0.000976562 1.90482 0.000976562 3.09953L0.00339008 15.9574C0.00339008 16.5455 0.235088 17.0878 0.655844 17.4836C1.04442 17.8488 1.54724 18.0468 2.08465 18.0468C2.12889 18.0468 2.55448 18.0387 2.55448 18.0387C2.70975 18.0387 2.73549 18.1103 2.73549 18.2439V18.9012C2.73549 19.4289 2.94547 19.9157 3.32278 20.2705C3.67113 20.5979 4.12246 20.7749 4.60436 20.7749C4.62366 20.7749 4.64217 20.7733 4.66148 20.7733C4.67113 20.7733 4.67998 20.7749 4.68963 20.7749C4.73147 20.7749 4.7733 20.7733 4.81594 20.7709L18.3477 19.9519C18.4081 19.9478 18.4668 19.9406 18.5255 19.931C19.3461 19.8304 19.9994 19.1071 19.9994 18.2728L19.9978 18.2648C19.9978 18.2415 20.001 18.2181 20.001 18.1948V4.36907ZM2.17153 17.1996C1.81031 17.1956 1.48931 17.1031 1.23991 16.8705C1.23991 16.8705 1.23911 16.8705 1.23831 16.8689C1.20934 16.8408 1.18199 16.8118 1.15625 16.7829C0.959142 16.5576 0.852143 16.2688 0.852143 15.9566L0.84973 3.09873C0.84973 2.35454 1.47724 1.68679 2.2198 1.64093L15.0637 0.846063C15.0919 0.844454 15.1192 0.84365 15.1474 0.84365C15.4684 0.84365 15.7677 0.959501 15.9961 1.17511C16.0275 1.20488 16.0573 1.23545 16.0846 1.26763C16.1587 1.35211 16.2198 1.44543 16.2681 1.546C16.2206 1.44624 16.1587 1.35291 16.0846 1.26844C16.2769 1.49209 16.3823 1.7769 16.3823 2.08583V2.41488C16.3823 2.41488 16.3904 2.6844 16.1233 2.7021L16.1249 2.70371L4.31152 3.44387C3.44506 3.49777 2.74112 4.24839 2.74112 5.11647C2.74112 5.11647 2.73629 16.984 2.73549 17.0033C2.72664 17.1996 2.56493 17.1996 2.43139 17.1996H2.17153ZM19.1635 18.1948C19.1635 18.2141 19.1619 18.2334 19.1603 18.2527C19.1321 18.6654 18.8031 19.0291 18.3984 19.1039C18.3904 19.1039 18.3823 19.1063 18.3743 19.1063L4.67274 19.9358H4.6301C4.3622 19.9221 4.11441 19.8191 3.92133 19.6373C3.70492 19.4338 3.58344 19.1554 3.57459 18.8505C3.57459 18.8384 3.57298 18.8263 3.57298 18.8135V5.19934C3.57298 5.18003 3.57298 5.16152 3.57459 5.14221C3.60436 4.70536 3.9696 4.32402 4.40564 4.27896C4.41691 4.27896 4.42817 4.27574 4.43943 4.27494L17.5577 3.45272L18.1482 3.41571C18.1699 3.4141 18.1916 3.4133 18.2134 3.4133C18.4603 3.4133 18.6904 3.5026 18.8666 3.66752C18.9897 3.78257 19.0766 3.92658 19.1233 4.08668C19.1434 4.15507 19.1554 4.22667 19.1603 4.29988V13.185L19.1635 18.194V18.1948Z",fill:"white"}),(0,a.jsx)("path",{d:"M17.1877 17.7582L5.7163 18.426C5.24727 18.459 4.83215 18.2997 4.84502 17.685V8.11764C4.84502 7.7894 5.11533 7.57942 5.4138 7.56413L17.3398 6.84891C17.6375 6.83362 17.8812 7.04924 17.8812 7.34771V16.932C17.8812 17.2828 17.7935 17.7341 17.1901 17.7574H17.1885L17.1877 17.7582Z",fill:"white"}),(0,a.jsx)("path",{d:"M8.39759 10.4651C7.83685 10.4997 7.64699 10.9277 7.64779 11.5858V11.7016C7.58102 11.7177 7.5247 11.7322 7.45712 11.7362C7.05326 11.7612 6.76203 11.4329 6.76123 10.844C6.76042 9.94293 7.56654 9.09577 9.10234 9.00003C10.47 8.91475 11.3453 9.57607 11.3469 10.7426C11.3469 11.6204 10.6196 12.2439 9.90282 12.4386C11.248 12.5045 11.8095 13.2551 11.8111 14.2141C11.8127 15.8546 10.614 16.7838 8.76445 16.8988L8.71939 16.9012C7.32921 16.9881 6.35334 16.4596 6.35254 15.5472C6.35254 15.0275 6.73227 14.5882 7.30427 14.552C7.34932 14.5488 7.39357 14.5577 7.43862 14.5553C7.55206 15.4837 8.18037 15.8256 8.80789 15.787C9.41288 15.7492 9.83846 15.3413 9.83846 14.7636V14.7403C9.83766 13.8392 9.08625 13.7942 7.9535 13.7491L7.77329 12.6743C8.8272 12.4812 9.35334 12.1369 9.35254 11.5134C9.35254 10.8432 8.98166 10.4273 8.3984 10.4643H8.39759V10.4651Z",fill:"black"}),(0,a.jsx)("path",{d:"M13.4544 10.0227C12.3338 10.3469 12.0868 9.85373 12.2091 9.33803C12.8816 9.18034 14.6298 8.65579 15.2911 8.41846L15.2992 15.3374L16.5212 15.5152C16.5212 15.9657 16.2638 16.2473 15.8044 16.2762C15.4231 16.2996 14.5373 16.3317 14.1117 16.3583C13.4504 16.3993 12.2396 16.4983 12.2396 16.4983C12.2058 16.4082 12.1946 16.3165 12.1946 16.2352C12.1946 16.0156 12.2839 15.7903 12.5751 15.6913L13.4601 15.4049L13.4536 10.0227H13.4544Z",fill:"black"})]}),(0,a.jsx)("defs",{children:(0,a.jsx)("clipPath",{id:"clip0_970_53429",children:(0,a.jsx)("rect",{width:"20",height:"20.7752",fill:"white"})})})]})})}}]);