"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[2638],{5581:(e,t,i)=>{i.d(t,{Y:()=>o,h:()=>n});var s=i(97978);function n(e){s.j(e,"view_public_site_click")}function o(e,t){s.j(e,"share_menu_tab_click",t)}},93289:(e,t,i)=>{i.d(t,{Z:()=>r});var s=i(67294),n=i(13991),o=i(77907),a=i(85893);const r=function(e){let{firstDayOfWeek:t,value:i,selectValue:r=!0,onChange:l,disabledDays:d}=e;const c=(0,s.useMemo)((()=>new Date(i)),[i]),[m,u]=(0,s.useState)(c),p=(0,s.useRef)(i);(0,s.useLayoutEffect)((()=>{p.current!==i&&(u(new Date(i)),p.current=i)}),[i]);const g=(0,s.useCallback)(((e,t,i)=>{l(e.getTime())}),[l]);return(0,a.jsx)(o.LazyDayPicker,{locale:n.SP,className:"notion-calendar-picker",numberOfMonths:1,weekStartsOn:t,modifiers:r?{value:c}:{},showOutsideDays:!0,fixedWeeks:!0,onDayClick:g,onMonthSelected:u,disabled:d,month:m})}},18878:(e,t,i)=>{i.d(t,{mX:()=>f,mo:()=>g,nH:()=>h});i(67294);var s=i(86628),n=i(24405),o=i(72141),a=i(9291),r=i(1898),l=i(37810),d=i(34859),c=i(80444),m=i(53336),u=i(63381),p=i(85893);function g(e){const{openState:t}=e,{mainEditorCurrentBlockStore:i,currentSpaceStore:o}=(0,s.VK)((()=>c.default.state),[]),a=(0,n.yK)((e=>({scroller:{display:"flex",flexDirection:"column",maxHeight:290},editContainer:{marginTop:2,marginBottom:2,color:e.regularTextColor}})),[]);if(!i||!o)return null;const r=Date.now();return(0,p.jsx)(m.Z,{type:d.Z.Y,style:a.scroller,children:t.permissionChanges.map(((e,t)=>{let[s,n]=e;const l={timestamp:r,space_id:o.id,type:"permission-changed",permission_data:{before:s,after:n}};return(0,p.jsx)("div",{style:a.editContainer,children:(0,p.jsx)(u.Z,{rootStore:i,edit:l})},`${s.type}-${t}`)}))})}function h(e){return["remove","restrict"].includes(e.type)?(0,p.jsx)(a.FormattedMessage,{id:"restrictedPermissionConfirmationModal.actionButton.restrictAccess",defaultMessage:"Restrict access"}):"restoreTeamPermissions"===e.type?(0,p.jsx)(a.FormattedMessage,{id:"restrictedPermissionConfirmationModal.actionButton.restoreTeamPermissions",defaultMessage:"Reset Permissions"}):(0,p.jsx)(a.FormattedMessage,{id:"restrictedPermissionConfirmationModal.actionButton.restoreAccess",defaultMessage:"Restore access"})}function f(e){switch(e.type){case"remove":return(0,p.jsx)(a.FormattedMessage,{id:"restrictedPermissionConfirmationModal.restrict.description",defaultMessage:"Are you sure you want to remove this {permissionGroup} and restrict access? This page will no longer inherit share settings from the parent page.",values:{permissionGroup:x(e)}});case"restrict":return(0,p.jsx)(a.FormattedMessage,{id:"restrictedPermissionConfirmationModal.remove.description",defaultMessage:"Are you sure you want to change this role and restrict access? This page will no longer inherit share settings from the parent page."});case"restore":return e.permissionChanges.length>0?(0,p.jsx)(a.FormattedMessage,{id:"restrictedPermissionConfirmationModal.restore.description",defaultMessage:"Are you sure you want to restore access? This will inherit the following permissions from the parent page:"}):(0,p.jsx)(a.FormattedMessage,{id:"restrictedPermissionConfirmationModal.restoreNoChanges.description",defaultMessage:"Are you sure you want to restore access?"});case"restoreTeamPermissions":return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("div",{style:{fontWeight:l.Z.fontWeight.semibold,marginBottom:4},children:(0,p.jsx)(a.FormattedMessage,{id:"restrictedPermissionConfirmationModal.restoreTeamPermissions.mainDescription",defaultMessage:"Are you sure you want to reset permissions to match the teamspace defaults?"})}),(0,p.jsx)(a.FormattedMessage,{id:"restrictedPermissionConfirmationModal.restoreTeamPermissions.warningMessage",defaultMessage:"Everyone else who is not part of the teamspace will lose access, including guests."})]});default:throw r.t1(e)}}function x(e){return(0,o.jg)(e.permissionItem)?(0,p.jsx)(a.FormattedMessage,{id:"restrictedPermissionConfirmationModal.permissionGroup.user",defaultMessage:"user"}):(0,o.hV)(e.permissionItem)?(0,p.jsx)(a.FormattedMessage,{id:"restrictedPermissionConfirmationModal.permissionGroup.group",defaultMessage:"group"}):(0,o.ix)(e.permissionItem)?(0,p.jsx)(a.FormattedMessage,{id:"restrictedPermissionConfirmationModal.permissionGroup.space",defaultMessage:"workspace"}):(0,p.jsx)(a.FormattedMessage,{id:"restrictedPermissionConfirmationModal.permissionGroup.generic",defaultMessage:"permission"})}},31075:(e,t,i)=>{i.d(t,{i:()=>f});i(21703),i(57658),i(67294);var s=i(87479),n=i(23867),o=i(9291),a=i(91536),r=i(54642),l=i(47307),d=i(76464),c=i(13447),m=i(64369),u=i(18878),p=i(18245),g=i(77080),h=i(85893);async function f(e){const{oldPermissionItem:t,newPermissionItem:i,wasInherited:f,environment:x,store:b,sudoModeStore:y,restrictingVisibility:M,fromPermissionWrapper:j}=e;if(!(0,s.Kf)(t,i))throw new Error("Permission type mismatch.");const S=!!y&&y.shouldSaveTransactionWithSudoMode(b),C=(0,s.nl)(t.role,i.role);if(f&&C!==i.role||M)return void(await async function(e){const{environment:t,useSudoMode:i,store:s,permissionItem:n,fromPermissionWrapper:a}=e,r="none"===n.role?{type:"remove",permissionItem:n}:{type:"restrict"},p="user_permission"===n.type&&n.user_id===t.currentUser.id;(p||await l.confirmUserAction({message:(0,u.mX)(r),acceptLabel:(0,u.nH)(r),cancelLabel:(0,h.jsx)(o.FormattedMessage,{id:"restrictedPermissionConfirmationModal.actionButton.cancel",defaultMessage:"Close"}),description:(0,h.jsx)(m.Z,{isSmall:!0,isMultiline:!0,children:(0,h.jsx)(o.FormattedMessage,{id:"restrictedPermissionConfirmationModal.footer.whisperText",defaultMessage:"Admins will still be able to restore permissions from restricted pages."})})}))&&c.createAndCommit({userAction:"PermissionItem.onAccept",environment:t,useSudoMode:i,perform:e=>{d.Pk({environment:t,store:s,permissionItem:n,shouldInherit:!0,transaction:e,fromPermissionWrapper:a})}})}({environment:x,useSudoMode:S,store:b,permissionItem:i,fromPermissionWrapper:j}));!b.isTopLevel()&&t.role!==i.role&&C!==t.role&&a.SM(x);const w="public_permission"===t.type&&"public_permission"===i.type&&"none"===t.role&&"none"!==i.role,v=("public_permission"===t.type&&"public_permission"===i.type&&!t.allow_search_engine_indexing&&i.allow_search_engine_indexing||w&&Boolean(g.default.checkGate("include_nonindexed_public_content_for_scanning")))&&Boolean(g.default.checkGate("enable_public_content_scanning"));c.createAndCommit({userAction:"PermissionItem.handlePermissionItemChange",environment:x,useSudoMode:S,perform:t=>{const s=p.default.mark("share_menu.update_page_permission_lag");d.ep({environment:x,store:b,permissionItems:[i],transaction:t,pagePermissionChangeLocation:e.location,metric:s,fromPermissionWrapper:j}),v&&t.postSubmitCallbacks.push((async e=>{e||await r.enqueueScanContentTask(x,{pagePointer:{id:b.id,table:"block",spaceId:(0,n.C)(b.pointer.spaceId)}})}))}})}},32326:(e,t,i)=>{i.d(t,{x:()=>r});var s=i(67294),n=i(24405),o=i(91376),a=i(85893);function r(e){const{children:t}=e,i=(0,s.useCallback)((()=>{o.r$({currentTab:"settings"})}),[]),r=(0,n.yK)((e=>({settingsLink:{cursor:"pointer",userSelect:"none",WebkitUserSelect:"none",color:e.mediumTextColor,textDecoration:"underline"}})),[]);return(0,a.jsx)("span",{style:r.settingsLink,onClick:i,children:t})}},259:(e,t,i)=>{i.d(t,{V:()=>u});i(67294);var s=i(480),n=i(86628),o=i(24405),a=i(9291),r=i(64369),l=i(80444),d=i(81236),c=i(32326),m=i(85893);function u(e){const t=(0,s.O7)(),{WindowSizeStore:i}=t,{safePaddingLeftCSS:u,safePaddingRightCSS:p}=(0,n.VK)((()=>({safePaddingLeftCSS:i.getSafePaddingLeftCSS(8),safePaddingRightCSS:i.getSafePaddingRightCSS(8)})),[i]),{isMobile:g}=(0,s.Fy)(),{spaceStore:h,canChangeSettings:f,publicSpaceData:x}=(0,n.VK)((()=>{const e=l.default.state.currentSpaceStore;return e?{spaceStore:e,canChangeSettings:e.canAdmin(),publicSpaceData:d.Z.getData(t,{spaceId:e.id})}:{}}),[t]),b=(0,o.yK)((t=>({container:{boxShadow:`0 -1px 0 ${t.regularDividerColor}`,width:"100%",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",textAlign:"center",padding:"8px 8px",paddingLeft:u,paddingRight:p,color:t.mediumTextColor,backgroundColor:t.inputBackground,...e.style}})),[e.style,u,p]);return h?g?null:x&&f?(0,m.jsx)("span",{style:b.container,children:(0,m.jsx)("div",{style:{display:"flex"},children:(0,m.jsx)(r.Z,{isSmall:!0,isMobile:!1,isSecondaryColor:!0,style:{paddingRight:"4px"},children:e.title?e.title:(0,m.jsx)(a.FormattedMessage,{defaultMessage:"Set up a public domain in <settings>settings</settings>.",id:"blockPermissionsSettings.learnAboutAutogeneratedDomains.setDomainForPublicLinks",values:{settings:e=>(0,m.jsx)(c.x,{children:e})}})})})}):null:null}},79395:(e,t,i)=>{i.d(t,{Z:()=>fe});var s=i(67294),n=i(480),o=i(86628),a=i(24405),r=i(15145),l=i(41892),d=i(9999),c=i(45238),m=i(85893);const u=(0,c.IU)("blueCircleDot",{viewBox:"0 0 16 16",svg:(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("circle",{cx:"8",cy:"8",r:"8",fill:"none",stroke:"#2383E2",children:[(0,m.jsx)("animate",{attributeName:"r",from:"3",to:"8",dur:"1s",begin:"0s",repeatCount:"indefinite"}),(0,m.jsx)("animate",{attributeName:"opacity",from:"1",to:"0",dur:"1s",begin:"0s",repeatCount:"indefinite"})]}),(0,m.jsx)("circle",{cx:"8",cy:"8",r:"3",fill:"#2383E2"})]})});var p=i(40462),g=i(84169),h=i(27714),f=i(72141),x=i(21202),b=i(70203),y=i(9291),M=i(37810),j=i(36610),S=i(5581),C=i(893),w=i(91376),v=i(12714),P=i(64921),k=i(73063),I=i(74194),T=i(63296),Z=i(58297),_=i(24006),F=i(26388),L=i(64369),D=i(60442),R=i(97978),A=i(84210),B=i(33929),W=i(18514),V=i(48779),K=i(31075),U=i(68973),O=i(80444),E=i(77080),H=i(81236),G=i(54669),N=i(88893),z=i(259),Y=i(13991),$=i(7057),q=i(42853),J=i(53965),Q=i(19584),X=i(52275),ee=i(31945),te=i(78140),ie=i(32163),se=i(89728),ne=i(72495),oe=i(93289),ae=i(42782),re=i(28020),le=i(43250),de=i(60709),ce=i(61766),me=i(31194);function ue(e){const t=(0,n.Fy)(),[,,i]=(0,o.AF)(void 0,ce.Z),s=(0,a.Fg)(),r=(0,n.O7)(),l=(0,o.VK)((()=>(0,N.y$)(r)),[r]),d=(0,a.yK)((()=>({buttonMenuItemStyle:{opacity:e.disabled?.6:1,cursor:e.disabled?"not-allowed":""},buttonStyle:{display:"flex",marginLeft:0,marginRight:0,borderRadius:0,paddingLeft:14,paddingRight:14,width:"100%",minHeight:30},textWrapperStyle:{marginLeft:0,marginRight:0}})),[e.disabled]);return(0,m.jsx)(ee.ZP,{...e.upsellEvents,disablePopup:!l,disabled:e.disabled,popupType:t.isMobile?ee.Z4.SlideUp:ee.Z4.Popup,buttonPopupStore:i,renderOrigin:t=>(0,m.jsx)(X.Z,{...t,focused:!1,disabled:e.disabled,textWrapperStyle:d.textWrapperStyle,buttonStyle:d.buttonStyle,style:d.buttonMenuItemStyle,title:(0,m.jsxs)(L.Z,{children:[(0,m.jsx)(y.FormattedMessage,{id:"publicPermissionItem.expirationTime.label",defaultMessage:"Link expiration"}),e.upgradeLabel]}),right:(0,m.jsxs)(se.Z,{...t,disabled:e.disabled,ignoreLocalHoverState:!0,style:{paddingLeft:0,paddingRight:0},children:[(0,m.jsx)(pe,{permissionItem:e.permissionItem}),(0,q.i)({width:10,marginLeft:4,fill:s.lightIconColor})]})}),alignmentToOrigin:me.lU.End,placementToOrigin:me.Iw.Bottom,render:i=>{const s=[{key:"options",render:e=>(0,m.jsx)(ne.Z,{...e}),items:he().map((t=>({key:t.type,action:()=>{ge(e,r,t.time),i.close()},render:e=>(0,m.jsx)(X.Z,{...e,focused:e.focused,disabled:!1,title:t.title,caption:t.caption})})))},{key:"custom",render:e=>(0,m.jsx)(ne.Z,{...e,topBorder:!0}),items:[{key:"custom",action:()=>{i.close()},render:(t,s)=>(0,m.jsx)(ae.Z,{...t,renderOrigin:e=>(0,m.jsx)(X.Z,{...e,disabled:!1,title:(0,m.jsx)(y.FormattedMessage,{id:"publicPermissionItem.expiration.chooseDate",defaultMessage:"Choose date"})}),onFocus:s.onFocus,disableDefaultClick:!0,renderExtension:(t,s)=>(0,m.jsx)("div",{style:{padding:"18px 14px 14px"},children:(0,m.jsx)(oe.Z,{...t,firstDayOfWeek:re.AK.state,value:e.permissionItem.expiration_timestamp||(new Date).getTime(),onChange:t=>{ge(e,r,t),s.close(),i.close()},disabledDays:{before:new Date}})})})}]}];let n;return n=t.isMobile?{menuType:de.og.Modal,title:(0,m.jsx)(y.FormattedMessage,{id:"publicPermissionsMenu.expiration.mobile.title",defaultMessage:"Expiration time"}),right:(0,m.jsx)(y.FormattedMessage,{id:"publicPermissionsMenu.expiration.mobile.label",defaultMessage:"Done"}),onClickRight:i.close}:{menuType:de.og.Popup,width:264},(0,m.jsx)(te.Z,{className:le.IpQ,...n,children:(0,m.jsx)(ie.Z,{type:ie.i.Vertical,initialFocus:void 0,sections:s})})}})}function pe(e){const{permissionItem:t}=e;return!t.expiration_timestamp||(0,f.o7)(t)?(0,m.jsx)(y.FormattedMessage,{id:"publicPermissionItem.expiration.never",defaultMessage:"Never"}):(0,m.jsx)(L.Z,{children:e.permissionItem.expiration_timestamp&&(0,$.tv)(e.permissionItem.expiration_timestamp,Y.SP)})}function ge(e,t,i){const{permissionItem:s,onChange:n}=e;if("public_permission"!==s.type)return;if(void 0!==i&&i<=(new Date).getTime())return;const o=s,a=J.d9(o),r=i;a.expiration_timestamp=r,n(a),j.n4(t,{expiration_time:r})}function he(){const e=(new Date).getTime()+Q.U6,t=(new Date).getTime()+Q.A0,i=(new Date).getTime()+7*Q.A0;return[{type:"never",time:void 0,title:(0,m.jsx)(y.FormattedMessage,{id:"publicPermissionItem.expiration.never",defaultMessage:"Never"})},{type:"hour",time:e,title:(0,m.jsx)(y.FormattedMessage,{id:"permissionItem.publicPermissionItem.expiration.hour",defaultMessage:"In an hour"}),caption:new Intl.DateTimeFormat(Y.SP,{hour:"numeric",minute:"numeric"}).format(e)},{type:"day",time:t,title:(0,m.jsx)(y.FormattedMessage,{id:"permissionItem.publicPermissionItem.expiration.day",defaultMessage:"In a day"}),caption:new Intl.DateTimeFormat(Y.SP,{day:"numeric",month:"long",hour:"numeric",minute:"numeric"}).format(t)},{type:"week",time:i,title:(0,m.jsx)(y.FormattedMessage,{id:"permissionItem.publicPermissionItem.expiration.week",defaultMessage:"In a week"}),caption:new Intl.DateTimeFormat(Y.SP,{day:"numeric",month:"long",hour:"numeric",minute:"numeric"}).format(i)}]}function fe(e){const{store:t,mostPermissivePublicItem:i,permissionItemArgs:l,shouldAskForConfirmationOnPublish:c,onUnpublish:h,showAllPublishedSites:f}=e,{permissionItem:j,from:C}=i,{sudoModeStore:I,location:_,onUpgradeButtonClick:D}=l,R=(0,n.O7)(),{isMobile:B}=R.device,E=(0,o.VK)((()=>{const e=O.default.state.currentSpaceStore;return!B&&!(0,V.Cx)(e)&&f}),[B,f]),G=(0,o.VK)((()=>{const e=R.WindowSizeStore;return{marginLeft:e.getSafePaddingLeftCSS(14),marginRight:e.getSafePaddingRightCSS(14)}}),[R]),N=(0,a.yK)((e=>({titleContainer:{color:e.blueColor,fontWeight:M.Z.fontWeight.medium,fontSize:14,display:"flex",alignItems:"center",margin:"0px 16px 10px",paddingTop:B?4:0},title:{display:"flex",alignItems:"center",color:e.blueColor,fontWeight:M.Z.fontWeight.medium},helpIcon:{width:16,height:16,fill:e.blueColor},icon:{height:16,width:16,marginRight:6},linkSharingOptions:{marginTop:10,marginBottom:15,marginLeft:2,marginRight:2},learnAboutDomainsCTA:{fontSize:14,marginTop:3,marginLeft:6,marginRight:6,padding:0,backgroundColor:void 0,boxShadow:void 0,textAlign:"left",alignItems:"flex-start"},buttonGroup:{marginLeft:14,marginRight:14,marginTop:16,marginBottom:12,display:"flex",gap:10},button:{flexGrow:1,height:34},disabledButton:{opacity:.7,cursor:"not-allowed"},allSitesButton:{display:"flex",alignItems:"center",justifyContent:"center",marginBottom:12,padding:4,borderRadius:4,...G},aliasIcon:{marginRight:4,height:16,width:16,fill:e.mediumTextColor},divider:{color:e.regularDividerColor}})),[B,G]),Y=(0,o.VK)((()=>t.canAdmin()),[t]),$=(0,o.VK)((()=>{var e;return t.id===(null===(e=t.getSpaceStore())||void 0===e?void 0:e.getPublicHomePage())}),[t]),q=!Y||$,J=C.table===x.iU?C.blockId:C.teamId,Q=(0,s.useCallback)((e=>{(0,K.i)({oldPermissionItem:j,newPermissionItem:{...j,...e},wasInherited:J!==t.id,environment:R,store:t,sudoModeStore:I,location:_})}),[j,J,t,R,I,_]),X=(0,s.useCallback)((async()=>{let e=!0;c&&(e=await U.eT(b.QaF(t.getTitleValue()))),e&&(Q({role:"none"}),h&&h())}),[Q,h,c,t]),ee=(0,o.VK)((()=>(0,A.ZP)({store:t,preferPublicLink:!0,getSpaceDomain:()=>{var e;return null===(e=H.Z.getData(R,{spaceId:t.getSpaceId()}))||void 0===e?void 0:e.domain},pageVisitSource:r.tY.LinkInPage})),[t,R]),te=(0,s.useCallback)((()=>{S.h(R),v.D({url:ee,environment:R})}),[R,ee]),ie=(0,s.useCallback)((()=>{w.r$({currentTab:"sites"})}),[]);return(0,m.jsxs)("div",{children:[(0,m.jsxs)("div",{style:N.titleContainer,children:[u(N.icon),(0,m.jsx)("div",{style:N.title,children:(0,m.jsx)(y.FormattedMessage,{defaultMessage:"Live on the web.",id:"publishTab.settings.liveOnWeb.title"})}),(0,m.jsx)(k.Z,{iconStyle:N.helpIcon,onClick:()=>{v.D({environment:R,url:(0,W.UY)("guides.autogeneratedDomains")})},icon:g.m,ariaLabel:"Learn more about sites"})]}),(0,m.jsx)(xe,{currentBlockStore:t}),(0,m.jsx)(z.V,{style:N.learnAboutDomainsCTA}),(0,m.jsx)("div",{style:N.linkSharingOptions,children:(0,m.jsx)(ye,{currentBlockStore:t,permissionItem:j,onChange:Q,onUpgradeButtonClick:D})}),(0,m.jsxs)("div",{style:N.buttonGroup,children:[(0,m.jsx)(F.ZP,{disableTooltip:!q,renderTooltip:()=>$?(0,m.jsx)(y.FormattedMessage,{defaultMessage:"You cannot unpublish the public home page of the workspace",id:"publishTab.settings.liveOnWeb.unpublishHomePageTooltip"}):(0,m.jsx)(y.FormattedMessage,{defaultMessage:"You must have full access to this page to unpublish it",id:"publishTab.settings.liveOnWeb.unpublishTooltip"}),render:e=>(0,m.jsx)(T.Z,{onClick:X,disabled:q,style:q?{...N.button,...N.disabledButton}:N.button,...e,children:(0,m.jsx)(y.FormattedMessage,{defaultMessage:"Unpublish",id:"publishTab.settings.liveOnWeb.unpublish"})})}),(0,m.jsxs)(Z.Z,{onClick:te,style:N.button,children:[(0,p.o)({height:16,width:16,marginRight:4}),(0,m.jsx)(y.FormattedMessage,{defaultMessage:"View site",id:"publishTab.settings.liveOnWeb.viewSite"})]})]}),E?(0,m.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:(0,m.jsxs)(P.Z,{onClick:ie,style:N.allSitesButton,children:[(0,d.J)(N.aliasIcon),(0,m.jsx)(L.Z,{isSecondaryColor:!0,children:(0,m.jsx)(y.FormattedMessage,{defaultMessage:"All published sites",id:"publishTab.settings.liveOnWeb.allSites"})})]})}):null]})}function xe(e){const{currentBlockStore:t}=e,i=(0,n.O7)(),l=(0,o.VK)((()=>be(i)),[i]),d=(0,a.yK)((e=>({container:{...l,height:"auto"},flex:{flex:1},wrapper:{display:"flex",padding:"1px 0"},input:{flex:1,borderTopRightRadius:0,borderBottomRightRadius:0,paddingRight:0},button:{height:28,borderTopLeftRadius:0,borderBottomLeftRadius:0,borderLeft:"none"}})),[l]),c=(0,o.VK)((()=>(0,A.ZP)({store:t,preferPublicLink:!0,getSpaceDomain:()=>{var e;return null===(e=H.Z.getData(i,{spaceId:t.getSpaceId()}))||void 0===e?void 0:e.domain},pageVisitSource:r.tY.CopyLink})),[t,i]),u=(0,s.useCallback)((()=>{i.mobileNative?i.mobileNative.copyText(c,B.default.formatMessage(C.tq.copiedLinkToClipboard)):C.RD({environment:i,stringValue:c,copiedMessage:C.tq.copiedLinkToClipboard}),R.j(i,"copy_web_link")}),[i,c]);return(0,m.jsx)("div",{style:d.container,children:(0,m.jsx)("div",{style:d.flex,children:(0,m.jsxs)("div",{style:d.wrapper,children:[(0,m.jsx)(I.Z,{value:c,disabled:!0,style:d.input}),(0,m.jsx)(T.Z,{onClick:u,style:d.button,icon:h.N})]})})})}function be(e){const t=e.WindowSizeStore;return{display:"flex",alignItems:"center",width:"100%",height:e.device.isMobile?36:30,paddingTop:5,paddingBottom:5,paddingLeft:t.getSafePaddingLeftCSS(14),paddingRight:t.getSafePaddingRightCSS(14)}}function ye(e){const{permissionItem:t,onUpgradeButtonClick:i,onChange:r,currentBlockStore:l}=e,d=(0,n.O7)(),c=(0,o.VK)((()=>!l.canAdmin()),[l]),u=(0,o.VK)((()=>{var e;return Boolean(null===(e=O.default.state.currentSpaceStore)||void 0===e?void 0:e.getDisableMoveToSpace())}),[]),p=f.RF(t.role),g=!1!==t.allow_duplicate,h=f.J5(t.role),x=Boolean(t.allow_search_engine_indexing),b=(0,s.useCallback)((()=>{r({role:h?"comment_only":"read_and_write"})}),[h,r]),M=(0,s.useCallback)((()=>{r({role:p?"reader":"comment_only"})}),[p,r]),S=(0,s.useCallback)((()=>{const e=!x;r({allow_search_engine_indexing:e}),j.g0(d,{allow_search_engine_indexing:e})}),[d,r,x]),C=(0,s.useCallback)((()=>{const e=!g;r({allow_duplicate:e}),j.l7(d,{allow_duplicate:e})}),[g,d,r]),w=(0,o.VK)((()=>E.default.checkGate("expiring_public_links")),[]),v=(0,o.VK)((()=>!(0,N.y$)(d)&&(0,N.M9)(d)),[d]),k=(0,o.VK)((()=>be(d)),[d]),I=(0,o.VK)((()=>c||u&&!g),[c,g,u]),T=(0,a.yK)((()=>({container:{display:"flex",flexDirection:"column",marginTop:8},optionLabel:{marginRight:"auto",opacity:c?.6:1},optionButton:c?{...k,cursor:"not-allowed"}:k})),[c,k]);return(0,m.jsxs)("div",{style:T.container,children:[(0,m.jsxs)(m.Fragment,{children:[w&&(0,m.jsx)(G.Z,{alwaysAllowClick:Boolean(t.expiration_timestamp),onClick:()=>{},analyticsName:"public_permission_item_expiration",requireUpgradeToTier:v,tooltipPlacement:F.ug.Left,renderTooltip:Se,renderUpgradeTooltip:Ce,onUpgradeClick:i,render:(e,i)=>(0,m.jsx)(ue,{upsellEvents:e,upgradeLabel:i,permissionItem:t,onChange:r,disabled:c})}),(0,m.jsx)(F.ZP,{placement:F.ug.Left,renderTooltip:Me,render:e=>(0,m.jsxs)(P.Z,{onClick:b,style:T.optionButton,disabled:c,...e,children:[(0,m.jsx)(L.Z,{style:T.optionLabel,children:(0,m.jsx)(y.FormattedMessage,{defaultMessage:"Allow editing",id:"pagePermissionItem.allowEdits.setting"})}),(0,m.jsx)(_.Z,{on:h,onClick:b,disabled:c})]})}),(0,m.jsx)(F.ZP,{placement:F.ug.Left,renderTooltip:je,render:e=>(0,m.jsxs)(P.Z,{onClick:M,style:T.optionButton,disabled:c,...e,children:[(0,m.jsx)(L.Z,{style:T.optionLabel,children:(0,m.jsx)(y.FormattedMessage,{defaultMessage:"Allow commenting",id:"pagePermissionItem.allowComments.setting"})}),(0,m.jsx)(_.Z,{on:p,onClick:M,disabled:c})]})})]}),(0,m.jsx)(F.ZP,{placement:F.ug.Left,renderTooltip:u&&!g?ve:we,render:e=>(0,m.jsxs)(P.Z,{onClick:C,disabled:I,style:T.optionButton,...e,children:[(0,m.jsx)(L.Z,{style:T.optionLabel,children:(0,m.jsx)(y.FormattedMessage,{defaultMessage:"Allow duplicate as template",id:"pagePermissionItem.allowDuplicateTemplate.setting"})}),(0,m.jsx)(_.Z,{on:g,onClick:C,disabled:I})]})}),(0,m.jsx)(F.ZP,{placement:F.ug.Left,renderTooltip:Se,render:e=>(0,m.jsxs)(P.Z,{style:T.optionButton,disabled:c,...e,children:[(0,m.jsx)(L.Z,{style:T.optionLabel,children:(0,m.jsx)(y.FormattedMessage,{defaultMessage:"Search engine indexing",id:"pagePermissionItem.allowSearchEngines.setting"})}),(0,m.jsx)(_.Z,{on:x,onClick:S,disabled:c})]})})]})}function Me(){return(0,m.jsx)(D.Z,{caption:(0,m.jsx)(y.FormattedMessage,{defaultMessage:"Any logged in Notion user can edit this page. Share the site link with people you trust.",id:"pagePermissionItem.allowEdits.tooltip"}),imageHeight:120,imageWidth:240,imageURL:l.Z.images.tooltips.share.allowEditingPng})}function je(){return(0,m.jsx)(D.Z,{caption:(0,m.jsx)(y.FormattedMessage,{defaultMessage:"Any logged in Notion user can comment on this page.",id:"pagePermissionItem.allowComments.tooltip"}),imageHeight:120,imageWidth:240,imageURL:l.Z.images.tooltips.share.allowCommentsPng})}function Se(){return(0,m.jsx)(D.Z,{caption:(0,m.jsx)(y.FormattedMessage,{defaultMessage:"If allowed, your public page may appear in search engines such as Google.",id:"pagePermissionItem.allowSearchEngine.tooltip"}),imageHeight:120,imageWidth:240,imageURL:l.Z.images.tooltips.share.allowSearchEnginesPng})}function Ce(){return(0,m.jsx)(D.Z,{imageURL:l.Z.images.tooltips.upsells.searchEngineIndexingPng,imageWidth:240,imageHeight:100,title:(0,m.jsx)(y.FormattedMessage,{defaultMessage:"Upgrade for search engine indexing",id:"pagePermissionItem.searchEngineUpgradeTooltip.title"}),caption:(0,m.jsx)(y.FormattedMessage,{defaultMessage:"Have your page appear in search engine results.",id:"pagePermissionItem.searchEngineUpgradeTooltip.caption"})})}function we(){return(0,m.jsx)(D.Z,{caption:(0,m.jsx)(y.FormattedMessage,{defaultMessage:"If allowed, this will allow other people to duplicate your public page to their workspace.",id:"pagePermissionItem.allowDuplicateTemplate.tooltip"}),imageHeight:120,imageWidth:240,imageURL:l.Z.images.tooltips.share.allowDuplicatePng})}function ve(){return(0,m.jsx)(D.Z,{caption:(0,m.jsx)(y.FormattedMessage,{defaultMessage:"This workspace does not allow page duplication to other workspaces.",id:"pagePermissionItem.duplicateTemplateDisabled.tooltip"}),imageWidth:240})}},85354:(e,t,i)=>{i.d(t,{u:()=>o});i(67294);var s=i(45238),n=i(85893);const o=(0,s.IU)("sites",{viewBox:"0 0 22 17",svg:(0,n.jsx)("path",{d:"M3.305 15.164c-.844 0-1.482-.216-1.914-.648-.433-.428-.649-1.058-.649-1.891V3.117c0-.838.216-1.471.649-1.898.437-.427 1.075-.64 1.914-.64h13.382c.844 0 1.482.213 1.915.64.432.427.648 1.06.648 1.898v5.524l-1.234-1.25a.985.985 0 00-.149-.11.613.613 0 00-.148-.086v-2.57H2.28v7.867c0 .38.097.664.29.852.197.187.476.281.835.281h11.469l-.023 1.54H3.305zm.148-11.836a.68.68 0 00.508-.219.697.697 0 000-1.015.68.68 0 00-.508-.219.714.714 0 00-.523.219.71.71 0 00-.211.508c0 .192.07.362.21.507.147.146.321.22.524.22zm2.305 0c.198 0 .367-.07.508-.21a.705.705 0 000-1.024.68.68 0 00-.508-.219.714.714 0 00-.524.219.71.71 0 00-.21.508.718.718 0 00.734.726zm2.297 0c.198 0 .37-.07.515-.21a.705.705 0 000-1.024.705.705 0 00-.515-.219.705.705 0 00-.516.219.71.71 0 00-.21.508.718.718 0 00.726.726zm7.922 10.695l.078-6.156c.005-.161.073-.265.203-.312.13-.052.25-.024.36.086l4.234 4.336c.125.12.153.247.085.382-.062.13-.174.198-.335.204L19 12.608l1.344 3.11a.374.374 0 01.023.25c-.02.088-.08.153-.18.195l-.773.305a.313.313 0 01-.266-.008.41.41 0 01-.18-.195l-1.265-3.149-1.117 1.133a.372.372 0 01-.398.102c-.146-.047-.217-.157-.211-.329z"})})}}]);