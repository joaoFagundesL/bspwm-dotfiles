"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[5008,5945,5061],{26797:(e,t,i)=>{i.d(t,{Fv:()=>I,JN:()=>M,QG:()=>N,cQ:()=>w,f$:()=>k,fX:()=>T,td:()=>C,xD:()=>A});i(57658);var o=i(30120),n=i(80951),s=i(40506),r=i(53877),a=i(42875),l=i(6287),c=i(53965),d=i(1898),u=i(10906),m=i(95802),p=i(15723),h=i(17746),g=i(6258),f=i(8406),b=i(54569),v=i(75134),y=i(19785),S=i(9953),x=i(993);function M(e){const{environment:t,droppedStores:i,duplicate:c,calendarBy:d,transaction:m,collectionContextStore:p}=e,h=o.ou.fromMillis(e.startOfDay);let g=!0;for(const o of i){const t=e.collectionStore?e.collectionStore:(0,u.Bm)({store:o,collectionContextStore:p});if(o.getParentTable()===l.vF||!t){g=!1;break}y.zw({childStore:o,parentStore:t,transaction:m})||(g=!1)}const v=b.Ab({environment:t,droppedStores:i,duplicate:c,duplicateUseCrdt:"same_as_store",transaction:m,collectionStore:e.collectionStore});for(const o of v){const i=e.collectionStore?e.collectionStore:(0,u.Bm)({store:o,collectionContextStore:p});if(!i)continue;const l=i.getMappedProperty(d),c=o.getPropertyStore(l),v=n.Gl(c.getValue())||r.Lg((0,a.r)()),y=r.c$(v,(0,a.r)()),S=h.toFormat(r.Iq);let x;if("date"===y.type||"datetime"===y.type)x={...y,start_date:S};else{const e=r.NK(y,(0,a.r)());if(!e.end)return;const t={...y,start_date:S},i=r.NK(t,(0,a.r)()).start.diff(e.start,"days"),o=e.end.plus(i).toFormat(r.Iq);x={...y,start_date:S,end_date:o}}const M=r.c$(x,s.yw(v)||(0,a.r)());b.mp({environment:t,store:o,collectionStore:i,collectionContextStore:p,shouldCoerce:!0,groupsPointer:[],transaction:m,alreadyMovedToCollection:g}),A({environment:t,type:"dateValue",propertyId:l,store:o,transaction:m,dateValue:M}),f.rv({environment:t,collectionContextStore:p,block_id:o.id,property:l,property_type:"date",from:"calendar"})}}function k(e){const{calendarStore:t,direction:i,target:o}=e;t.setState({...t.state,isDragging:!0,target:o,direction:i,temporaryValue:void 0})}function C(e){const{calendarStore:t,x:i,y:l,calendarBy:d}=e,u=t.state;if(u.isDragging){const e=n.Gl(u.target.getPropertyStore(d).getValue());if(!e)return;const g=r.c$(e,(0,a.r)()),f=u.temporaryValue||e,b=r.c$(f,(0,a.r)()),v=[];u.dayStoreMap.forEach(((e,t)=>{v.push({store:e,timestamp:t})}));const y=v.find((e=>{let{store:t}=e;const o=m.C.getRectFromStore(t);return Boolean(o&&p.uh(o,i,l))}));let S;if(y){const e=o.ou.fromMillis(y.timestamp),t=e.endOf("day"),i=e.toFormat(r.Iq);if(g){const n=r.NK(g,(0,a.r)());if(u.direction===h.t.Left)if(o.Xp.fromDateTimes(e,t).contains(n.start))S=g;else{let e;e="datetimerange"===g.type||"daterange"===g.type?{...g,start_date:i,end_date:g.end_date}:"datetime"===g.type?{type:"datetimerange",start_date:i,start_time:g.start_time,end_date:g.start_date,end_time:g.start_time,time_zone:g.time_zone,reminder:g.reminder}:{type:"daterange",start_date:i,end_date:g.start_date,reminder:g.reminder};const t=r.NK(e,(0,a.r)());S=!n.end&&t.start>n.start||n.end&&t.start>n.end?b:e}else if(n.end?o.Xp.fromDateTimes(e,t).contains(n.end):o.Xp.fromDateTimes(e,t).contains(n.start))S=g;else{let e;e="date"===g.type?{...g,type:"daterange",end_date:i}:"datetime"===g.type?{...g,type:"datetimerange",end_date:i,end_time:"00:00"}:{...g,end_date:i};const t=r.NK(e,(0,a.r)());S=t.end&&t.end<t.start?b:e}}}if(S&&!c.Xy(b,S)){const e=r.c$(S,s.yw(f)||(0,a.r)());t.setState({...u,temporaryValue:e})}}}function T(e){const{environment:t,calendarStore:i,calendarBy:o,transaction:n}=e,s=i.state;s.isDragging&&s.temporaryValue&&(A({type:"dateValue",environment:t,dateValue:s.temporaryValue,propertyId:o,store:s.target,transaction:n}),i.setState({...i.state,isDragging:!1}))}function w(e){const{calendarStore:t}=e,i=t.state;i.isDragging&&t.setState({...i,isDragging:!1})}function I(e){const{environment:t,store:i,collectionStore:s,collectionContextStore:l,startDayOfWeek:c,transaction:d}=e,u=l.dateRangeStart.state,m=(0,a.r)(),p=l.normalizedQueryStore.state;if(!p||!p.calendar_by)return;const h=(null==s?void 0:s.getMappedProperty(p.calendar_by))??p.calendar_by,g=r.gQ(u,c,m),f=g.startOf("month"),v=g.endOf("month"),y=o.ou.now().startOf("day");let x;return x=o.Xp.fromDateTimes(f,v).contains(y)?r.hT(y.valueOf(),m):r.hT(r.em(u,c,m).valueOf(),m),S.sW({store:i.getPropertiesStore(),data:{[h]:n.d7(x)},transaction:d}),b.mp({environment:t,store:i,collectionStore:s,collectionContextStore:l,shouldCoerce:!0,groupsPointer:[],transaction:d}),i}function A(e){const{environment:t,store:i,propertyId:o,transaction:s}=e;let l;"timestamp"===e.type?l=r.hT(e.timestampMs.valueOf(),(0,a.r)()):"dateValue"===e.type?l=e.dateValue:(0,d.t1)(e);const c=i.getPropertyValue(o),u=n.d7(l);S.sW({store:i.getPropertiesStore(),data:{[o]:u},transaction:s}),v.H({environment:t,store:i,dateProperty:{id:o,oldValue:c,newValue:u}})}function N(e){const{environment:t,collectionStore:i,calendarBy:o,store:n,insertStores:s,collectionContextStore:r,transaction:a}=e,l=n.getPropertyStore(o).getValue();for(const c of s)b.mp({environment:t,store:c,collectionStore:i,collectionContextStore:r,shouldCoerce:!0,groupsPointer:[],transaction:a}),x.sO({environment:t,editorMode:"default",store:c.getNormalizedPropertyStore(o),value:l,transaction:a});return s.map((e=>g.G.createChildStore(i,e.pointer)))}},13401:(e,t,i)=>{i.d(t,{Z:()=>d});var o=i(67294),n=i(24405),s=i(47453),r=i(31701),a=i(31339),l=i(52275),c=i(85893);const d=o.forwardRef(((e,t)=>{const i=(0,n.yK)((t=>({base:{color:e.isBlue?r.ZP.blue:t.mediumTextColor}})),[e.isBlue]),{color:o}=i.base;return(0,c.jsx)(l.Z,{ref:t,...e,title:(0,c.jsx)("div",{style:{color:o,fill:o},children:e.title}),icon:(0,c.jsx)(a.Z,{icon:s.R,styles:{fill:o}})})}))},31339:(e,t,i)=>{i.d(t,{Z:()=>s});i(67294);var o=i(480),n=i(85893);const s=function(e){const t=((0,o.O7)().device.isMobile,{width:16});return(0,n.jsx)("div",{style:t,children:e.icon(e.styles)})}},75498:(e,t,i)=>{i.d(t,{Z:()=>b});var o=i(67294),n=i(83355),s=i(1302),r=i(86628),a=i(49085),l=i(53965),c=i(15828),d=i(75330),u=i(77080),m=i(48190),p=i(85893);class h extends n.Z{constructor(){super(...arguments),this.reducerId=this.props.id,this.instanceId=(0,c.ZP)(),this.localResultStoreChangeIsQueued=!1,this.storeTypes={resultStore:a.default.createClass(void 0)},this.handleLocalResultStoreChange=()=>{this.localResultStoreChangeIsQueued||(this.localResultStoreChangeIsQueued=!0,s.default.afterNextFlush(this.dequeueLocalResultStoreChange))},this.dequeueLocalResultStoreChange=()=>{const{resultStore:e}=this.stores;if(this.localResultStoreChangeIsQueued=!1,!this.componentIsMounted)return;const t=this.getCurrentResult();l.Xy(t,e.state)||e.setState(t)}}UNSAFE_willMount(e){const{collectionContextStore:t}=e;t.remoteResult.addListener(this.handleLocalResultStoreChange),t.localResultStore.addListener(this.handleLocalResultStoreChange),this.updateReducer(e),this.handleLocalResultStoreChange()}UNSAFE_willUpdate(e){this.updateReducer(e)}willUnmount(){super.willUnmount();const{collectionContextStore:e,groupsPointer:t}=this.props;d.$D({reducerId:this.reducerId,instanceId:this.instanceId,reducer:void 0,collectionContextStore:e,groupsPointer:t}),e.remoteResult.removeListener(this.handleLocalResultStoreChange),e.localResultStore.removeListener(this.handleLocalResultStoreChange)}renderComponent(){const{render:e}=this.props;if(e)return e(this.stores.resultStore)}updateReducer(e){const{reducer:t,collectionContextStore:i,groupsPointer:o}=e;d.$D({reducerId:this.reducerId,instanceId:this.instanceId,reducer:t,collectionContextStore:i,groupsPointer:o})}getCurrentResult(){const{reducer:e,collectionContextStore:t}=this.props,i=t.localResultStore.state,o=t.remoteResult.state,n=i&&"reducer"===i.type?i.reducerResults[this.reducerId]:void 0,s=o&&"reducer"===o.type?o.reducerResults[this.reducerId]:void 0;return(0,m.P)({reducerId:this.reducerId,localReducerResult:n,remoteReducerResult:s,reducer:e,collectionContextStore:t})}}function g(e){const{resultStore:t,render:i,...n}=e,s=(0,m.Z)(n),l=(0,r.qz)(t,a.default.createClass(void 0));(0,o.useEffect)((()=>{l.setState(s)}),[s,l]);const c=(0,r.VK)((()=>i?i(l):null),[i,l]);return(0,p.jsx)(p.Fragment,{children:c})}h.displayName="CollectionReducerRequest";const f=o.memo(g);const b=function(e){const t=(0,r.VK)((()=>u.default.checkGate("use_collection_reducer_request_hook")),[]),[i]=(0,o.useState)(t);return i?(0,p.jsx)(f,{...e}):(0,p.jsx)(h,{...e})}},46945:(e,t,i)=>{i.d(t,{Z:()=>f});var o=i(67294),n=i(13991),s=i(86628),r=i(24405),a=i(53877),l=i(42875),c=i(31701),d=i(37810),u=i(28020),m=i(77907),p=i(13854),h=i(85893);const g={monthControl:{position:"absolute",top:0,right:0,display:"flex"},selectedRange:{backgroundColor:c.ZP.blueWithAlpha(.15)},active:{backgroundColor:c.ZP.blue,color:c.ZP.white},inactive:{backgroundColor:c.ZP.blueWithAlpha(.43)},disabled:{pointerEvents:"none"},today:{fontWeight:d.Z.fontWeight.regular}};const f=function(e){let{readonly:t,store:i,value:d,validate:f,onUpdate:b,disabled:v,dateTimeStore:y}=e;const S=(0,r.Fg)(),x=(0,o.useRef)(),M=(0,s.VK)((()=>{if(i.state.displayMonth)return i.state.displayMonth.toJSDate();if("starting"===i.getFocus()){if(d.starting)return a.OQ.notionDateToJsDate(d.starting);if(d.ending)return a.OQ.notionDateToJsDate(d.ending)}if("ending"===i.getFocus()){if(d.ending)return a.OQ.notionDateToJsDate(d.ending);if(d.starting)return a.OQ.notionDateToJsDate(d.starting)}if(!x.current){const e=a.Lg((0,l.r)());x.current=a.OQ.notionDateToJsDate(e)}return x.current}),[x,i,d]),k=(0,s.VK)((()=>u.AK.state),[]),C=(0,s.VK)((()=>function(e,t,i){const o=function(e,t,i){if(i)return e=>!0;const o=e=>"ending"===t.getFocus()&&{before:e},n=e=>"starting"===t.getFocus()&&{after:e};if(e.starting&&e.ending){const t=a.OQ.notionDateToJsDate(e.starting),i=a.OQ.notionDateToJsDate(e.ending);return o(t)||n(i)}if(e.starting){return o(a.OQ.notionDateToJsDate(e.starting))}if(e.ending){return n(a.OQ.notionDateToJsDate(e.ending))}return!1}(t,e,i),{hovered:n}=e.state;if(i)return{disabled:o};if(t.starting&&t.ending){const e=a.OQ.notionDateToJsDate(t.starting),i=a.OQ.notionDateToJsDate(t.ending);return{range:{from:e,to:i},start:e,end:i,disabled:o}}if(t.starting){const e=a.OQ.notionDateToJsDate(t.starting);return{range:n&&{from:e,to:n},start:e,end:n,disabled:o,selected:[e,n]}}if(t.ending){const e=a.OQ.notionDateToJsDate(t.ending);return{range:n&&{from:n,to:e},start:n,end:e,disabled:o,selected:[e,n]}}}(i,d,v)),[i,d,v]),T=(0,s.VK)((()=>function(e,t){const i=g,o=function(e){return{disabled:{color:e.lightTextColor},today:{color:c.ZP.white}}}(t),n=e.getFocus(),s=i.selectedRange,r={...i.disabled,...o.disabled},a={...i.today,...o.today};return{range:s,start:"starting"===n?i.active:i.inactive,end:"ending"===n?i.active:i.inactive,disabled:r,today:a}}(i,S)),[i,S]);return(0,h.jsx)(m.LazyDayPicker,{className:"notion-calendar-picker",defaultMonth:M,month:M,numberOfMonths:1,weekStartsOn:k,locale:n.SP,showOutsideDays:!0,fixedWeeks:!0,onDayClick:e=>function(e,t,i,o,n,s,r,l){if(s||l)return;const c=t.getFocus(),d=a.OQ.toPersistedDate(e.valueOf()),u=o(c,{value:d}),m=u.error?u:{value:{[c]:u.value[c]}};n(m),t.setState({...t.state,hovered:void 0}),r&&r.setState({...r.state,hovered:void 0});if(u.error)return;"starting"!==c||i.ending||(t.setState({...t.state,focus:"ending"}),r&&r.setState({...r.state,focus:p.yO.ending}));const h="starting"===c?"ending":"starting";t.setState({...t.state,focus:h}),r&&r.setState({...r.state,focus:p.yO[h]})}(e,i,d,f,b,v,y,t),onDayMouseEnter:e=>function(e,t,i,o,n,s){const r=t.getFocus(),l=a.OQ.jsDateToLuxon(e);if(o||s)return;if("starting"===r&&i.ending&&!i.starting){a.OQ.notionDateToLuxon(i.ending)>=l&&(t.setState({...t.state,hovered:e}),n&&n.setState({...n.state,hovered:e}))}else if("ending"===r&&i.starting&&!i.ending){a.OQ.notionDateToLuxon(i.starting)<=l&&(t.setState({...t.state,hovered:e}),n&&n.setState({...n.state,hovered:e}))}}(e,i,d,v,y,t),onMonthSelected:e=>function(e,t,i){t.setState({...t.state,displayMonth:a.OQ.jsDateToLuxon(e)}),i&&i.setState({...i.state,displayMonth:a.OQ.jsDateToLuxon(e)})}(e,i,y),modifiers:C,modifiersStyles:T,disabled:!!t||void 0})}},20423:(e,t,i)=>{i.d(t,{Z:()=>S});i(67294);var o=i(480),n=i(86628),s=i(24405),r=i(45238),a=i(85893);const l=(0,r.IU)("teamSize",{viewBox:"0 0 20 20",svg:(0,a.jsx)("path",{d:"M7.333 14.667a4.667 4.667 0 1 0 0-9.334 4.667 4.667 0 0 0 0 9.334zm4.356-.548A5.977 5.977 0 0 1 7.333 16a5.977 5.977 0 0 1-4.355-1.881A7.295 7.295 0 0 0 0 20h14.667a7.296 7.296 0 0 0-2.978-5.881zm1.599-4.832a4.664 4.664 0 1 0-5.242-5.241 6.01 6.01 0 0 1 5.242 5.241zm.003 1.347a6.024 6.024 0 0 1-.794 2.414 8.571 8.571 0 0 1 1.656 1.619H20a7.296 7.296 0 0 0-2.978-5.882 5.983 5.983 0 0 1-3.731 1.849z"})});var c=i(9291),d=i(1357),u=i(60709),m=i(88632),p=i(53610),h=i(35057),g=i(64921),f=i(31945),b=i(78140),v=(i(64369),i(27386),i(14694)),y=i(44625);const S=function(e){let{store:t}=e;const i=(0,o.O7)(),s=(0,n.VK)((()=>(0,h.Mk)()),[]),r=(0,n.VK)((()=>t.isDefined()),[t]),{mobileNative:l}=i,d=(0,n.VK)((()=>(null==l?void 0:l.supportsNativeHomeOnPhone())||!1),[l]),S=(0,n.VK)((()=>m.Z.state.online),[]);return s&&r?(0,a.jsx)(f.ZP,{buttonPopupStore:p.Z,popupType:f.Z4.SlideUp,hidesMobileNativeBottomBar:d,preventSlideUpTransition:d,renderOrigin:e=>(0,a.jsx)(g.Z,{mobileFeedback:!0,...e,children:(0,a.jsx)(v.Z,{left:(0,a.jsx)(x,{}),disableMobileBorder:!0,children:(0,a.jsx)(c.FormattedMessage,{defaultMessage:"Members",id:"memberSettingsButton.mobileSidebar.label"})})}),render:()=>{if(S){const e={menuType:u.og.Modal,title:(0,a.jsx)(c.FormattedMessage,{defaultMessage:"Members",id:"memberSettingsButton.mobileMemberSettings.title"}),right:(0,a.jsx)(c.FormattedMessage,{defaultMessage:"Done",id:"memberSettingsButton.rightActionButton.done"}),onClickRight:()=>M(i),onCancel:()=>M(i)};return(0,a.jsx)(b.Z,{...e,children:(0,a.jsx)(y.Z,{store:t,isMobile:!0})})}}}):null};function x(){const e=(0,s.Fg)();return l({fill:e.mediumIconColor,width:16})}function M(e){const{mobileNative:t}=e,i=()=>{p.Z.setState({open:!1})};null!=t&&t.supportsNativeHomeOnPhone()?d.d(e,i):i()}},20066:(e,t,i)=>{i.r(t),i.d(t,{default:()=>X});i(67294);var o=i(83355),n=i(13991),s=i(480),r=i(86628),a=i(24405),l=i(41432),c=i(42853),d=i(69634),u=i(5377),m=i(45238),p=i(85893);const h=(0,m.IU)("indentDown",{viewBox:"0 0 30 30",svg:(0,p.jsx)("path",{d:"M24,15l-1.406-1.406L16,20.188V2h-2v18.188l-6.594-6.594L6,15l9,9L24,15z M2,26v2h26v-2H2z"})}),g=(0,m.IU)("keyboard",{viewBox:"0 0 30 30",svg:(0,p.jsxs)("g",{children:[" ",(0,p.jsx)("path",{d:"M15,30l8-10H7Zm0-3.2L11.16,22h7.68Z"})," ",(0,p.jsx)("path",{d:"M6,4H4V6H6V4Zm4,0H8V6h2V4Zm4,0H12V6h2V4Zm4,0H16V6h2V4Zm4,0H20V6h2V4Zm4,0H24V6h2V4ZM10,8H8v2h2V8Zm4,0H12v2h2V8Zm4,0H16v2h2V8Zm4,0H20v2h2V8Zm-2,4H10v2H20V12Zm5,0H22v2h3V12ZM5,14H8V12H5v2ZM0,0V18H30V0H0ZM28,16H2V2H28V16Z"})," "]})}),f=(0,m.IU)("moveUp",{viewBox:"0 0 30 30",svg:(0,p.jsx)("path",{d:"M14,5.813V24h2V5.813l6.594,6.594L24,11l-9-9l-9,9l1.406,1.406L14,5.813z M2,26v2h26v-2H2z"})});var b=i(38491),v=i(45137),y=i(73426),S=i(33702),x=i(37612),M=i(55863),k=i(9291),C=i(53965),T=i(37810),w=i(83249),I=i(44886),A=i(52423),N=i(24677),R=i(98104),P=i(99768),j=i(51783),B=i(52533),V=i(68056),_=i(89224),Z=i(39615),D=i(5162),O=i(17903),F=i(72653),L=i(69454),E=i(27724),U=i(24666),K=i(64921),q=i(53437),H=i(64131),W=i(82945),G=i(40464),z=i(32404),$=i(73383);const Q={width:34,justifyContent:"center"},Y=42;class J extends o.Z{constructor(){super(...arguments),this.scrollerDiv=void 0,this.currentlyShownTimer=void 0,this.previouslyShownOnNative=!1,this.handleScrollerRef=e=>{e&&(this.scrollerDiv=e)},this.handleActionsScrollDebounced=C.Ds((()=>{return e=this.environment,void w.FG(e);var e}),500),this.listenForPositionChanges=this.createComputedStore((()=>{const e=U.default.state;if("editing"===e.mode){const t=e.multiSelection.end;return{scrollTop:O.Z.state.scrollTop,editing:!0,store:t.store.id,selection:t}}return{scrollTop:O.Z.state.scrollTop,editing:!1}})),this.renderStore=this.createComputedStore((()=>{var e;return j.$3(this.environment,this.props.currentBlockStore,null===(e=this.pageContext)||void 0===e?void 0:e.publicEditModeStore.state)})),this.shouldShowTextActions=this.createComputedStore((()=>j.oQ(this.props.stores.ignoreSelectionAreaStore,this.environment.TextSelectionCompositionStore))),this.canTriggerBlockActions=this.createComputedStore((()=>!this.shouldShowTextActions.state&&j.Bo(this.pageContext&&this.pageContext.publicEditModeStore.state))),this.canTriggerTextActions=this.createComputedStore((()=>j.eQ(this.pageContext&&this.pageContext.publicEditModeStore.state,this.props.currentBlockStore))),this.hasMultiBlockSelection=this.createComputedStore((()=>{const e=U.default.state;return"editing"===e.mode&&!(0,V.qS)(e.multiSelection)}))}UNSAFE_willMountOrUpdate(){const{device:e}=this.environment,t=this.renderStore.state.shouldShow;if(e.isMobileBrowser){const e=this.props.stores.store.state.isOpen;t?e?void 0!==this.currentlyShownTimer&&(window.clearTimeout(this.currentlyShownTimer),this.currentlyShownTimer=void 0):(this.props.stores.store.setState({...this.props.stores.store.state,isOpen:!0}),this.scrollerDiv&&(this.scrollerDiv.scrollLeft=0)):e&&void 0===this.currentlyShownTimer&&(this.currentlyShownTimer=window.setTimeout((()=>{this.currentlyShownTimer=void 0,this.props.stores.store.setState({...this.props.stores.store.state,isOpen:!1})}),200))}else t!==this.previouslyShownOnNative&&(this.previouslyShownOnNative=t,this.scrollerDiv&&(this.scrollerDiv.scrollLeft=0))}renderComponent(){const{device:e,WindowSizeStore:t}=this.environment,i=function(e,t,i){const{device:o}=e;return o.isMobileBrowser?t.store.state.isOpen:i.state.shouldShow}(this.environment,this.props.stores,this.renderStore),o=e.isMobile&&F.Z.state;if(this.props.position===B.nd.Bottom){let e=0;return(0,D.Y)("supportsFixedSizeWebView")?e=L.Z.estimatedNativeWebBottomOverlap():o&&(e=t.getSafePaddingBottomCSS(Z.VG)),(0,p.jsx)("div",{style:{position:"absolute",bottom:e,left:0,height:Y,width:"100%",pointerEvents:i?"auto":"none",opacity:i?1:0,transform:i?"translateY(0)":`translateY(${Y}px)`,transition:"opacity 120ms ease-out, transform 120ms ease-out"},children:this.renderActionButtons()})}{this.listenForPositionChanges.state;const e=this.props.stores.ignoreSelectionAreaStore.state.savedTextSelectionRect||_.getSelectionRect();if(!e)return;const t=document.body.getBoundingClientRect(),o={...e,left:10,top:e.top+10-t.top},{device:n}=this.environment;return(0,p.jsx)(q.ZP,{popupType:n.isMobileNative?q.ZP.PopupType.SlideUp:q.ZP.PopupType.Popup,open:i,preventBlockRenderQueueOnEnter:!0,placementToOrigin:q.ZP.Placement.Bottom,alignmentToOrigin:q.ZP.Alignment.Start,originRect:o,disableMouseCapture:!0,keepFocus:!0,render:()=>(0,p.jsx)("div",{style:{height:Y,width:"calc(80wv)",borderRadius:4,overflow:"hidden"},children:this.renderActionButtons()})})}}renderActions(){return j.Tz({environment:this.environment,store:this.props.currentBlockStore})?(0,p.jsx)(Se,{stores:this.props.stores}):this.shouldShowTextActions.state?this.renderTextActions():this.renderBlockActions()}renderActionButtons(){return(0,p.jsxs)("div",{style:he(this.props.position,this.environment,this.theme),children:[this.renderActions(),(0,p.jsx)(K.Z,{mobileFeedback:!0,disabledFeedback:!0,style:{...ve(this.environment.device.isSmallPhone,this.theme),borderLeft:pe(this.theme),borderRight:"none"},onClick:e=>{return t=this.props.stores,i=this.environment,N.ZH(i),t.store.setState({...t.store.state,isInsertOpen:!1}),me("hide_keyboard",i),void R.sD();var t,i},children:ce})]})}renderBlockActions(){const e=this.canTriggerBlockActions.state;let t=!1,i=!1;const o=this.props.currentBlockStore.getType();if(o){const e=this.props.currentBlockStore.getFormat();(0,l._T)(o,e)||(t=!0),(0,l.lQ)(o)||(i=!0)}const{device:n}=this.environment;return(0,p.jsxs)("div",{ref:this.handleScrollerRef,style:ue(),onScroll:this.handleActionsScrollDebounced,children:[(0,p.jsxs)(K.Z,{mobileFeedback:!0,disabledFeedback:!0,style:{...ve(this.environment.device.isSmallPhone,this.theme),...!n.isSmallPhone&&{paddingLeft:12,paddingRight:12}},onClick:e=>{return t=this.props.stores,i=this.environment,t.store.setState({...t.store.state,isInsertOpen:!0}),void me("insert",i);var t,i},disabled:!e,children:[le,(0,p.jsx)(ge,{})]}),(0,p.jsxs)(K.Z,{mobileFeedback:!0,disabledFeedback:!0,style:{...ve(this.environment.device.isSmallPhone,this.theme),fontWeight:T.Z.fontWeight.medium},onClick:e=>{this.props.stores.store.setState({...this.props.stores.store.state,isTurnIntoOpen:!0}),me("turn_into",this.environment)},disabled:!e,children:[(0,p.jsx)(k.FormattedMessage,{defaultMessage:"Turn into",id:"mobileActionBar.turnInto.buttonTitle"}),(0,p.jsx)(ge,{})]}),(0,p.jsx)(P.Z,{capture:!0,render:e=>(0,p.jsx)(K.Z,{mobileFeedback:!0,disabledFeedback:!0,...e,style:ve(this.environment.device.isSmallPhone,this.theme),onClick:e=>{return t=this.environment,void j.Z3(t);var t},disabled:!i,children:(0,p.jsx)("span",{style:{fontSize:19,lineHeight:1,fontWeight:T.Z.fontWeight.medium,marginBottom:n.isAndroid?4:0},children:"@"})})}),(0,p.jsx)(K.Z,{mobileFeedback:!0,disabledFeedback:!0,style:ve(this.environment.device.isSmallPhone,this.theme),onClick:e=>{return t=this.environment,void j.ol(t,"mobile_action_bar");var t},disabled:!t,children:ae}),(0,p.jsx)(K.Z,{mobileFeedback:!0,disabledFeedback:!0,style:ve(this.environment.device.isSmallPhone,this.theme),onClick:e=>{return t=this.environment,void j.vs(t);var t},disabled:!e,children:de}),(0,p.jsx)(K.Z,{mobileFeedback:!0,disabledFeedback:!0,style:ve(this.environment.device.isSmallPhone,this.theme),onClick:e=>{return t=this.environment,void j.fn(t);var t},disabled:!e,children:re}),(0,p.jsx)(xe,{canTriggerBlockActionsStore:this.canTriggerBlockActions}),(0,p.jsx)(ye,{}),(0,p.jsxs)(K.Z,{mobileFeedback:!0,disabledFeedback:!0,style:{...ve(this.environment.device.isSmallPhone,this.theme),fontWeight:T.Z.fontWeight.medium},onClick:e=>{this.props.stores.store.setState({...this.props.stores.store.state,isColorOpen:!0}),me("color",this.environment)},disabled:!e,children:[(0,p.jsx)(k.FormattedMessage,{defaultMessage:"Color",id:"mobileActionBar.color.buttonTitle"}),(0,p.jsx)(ge,{})]}),(0,p.jsxs)(K.Z,{mobileFeedback:!0,disabledFeedback:!0,style:{...ve(this.environment.device.isSmallPhone,this.theme),fontWeight:T.Z.fontWeight.medium},onClick:e=>function(e,t){j.w1(t,e.clientX,e.clientY)}(e,this.environment),disabled:!e,children:[(0,p.jsx)(k.FormattedMessage,{defaultMessage:"More",id:"mobileActionBar.more.buttonTitle"}),(0,p.jsx)(ge,{})]})]})}renderTextActions(){const e=this.canTriggerTextActions.state,t=this.hasMultiBlockSelection.state,i=this.props.currentBlockStore.canComment(),o=E.default.state.stores[0],s={display:"flex",alignItems:"center",padding:"0 8px",whiteSpace:"nowrap"};return(0,p.jsxs)("div",{style:ue(),onScroll:this.handleActionsScrollDebounced,children:[(0,p.jsx)(W.Z,{style:ve(this.environment.device.isSmallPhone,this.theme),blockStore:E.default.state.stores[0],disabled:!i,iconOnly:!1}),(0,p.jsx)(G.Z,{type:"b",style:ve(this.environment.device.isSmallPhone,this.theme),onClick:()=>me("bold",this.environment),disabled:!e,children:(0,p.jsx)("span",{style:{fontWeight:T.Z.fontWeight.semibold},children:(0,p.jsx)(k.FormattedMessage,{defaultMessage:"B",id:"mobileActionBar.bold.symbol"})})}),(0,p.jsx)(G.Z,{type:"i",style:ve(this.environment.device.isSmallPhone,this.theme),onClick:()=>me("italic",this.environment),disabled:!e,children:(0,p.jsx)("span",{style:{fontStyle:"italic",fontWeight:T.Z.fontWeight.semibold},children:(0,p.jsx)(k.FormattedMessage,{defaultMessage:"i",id:"mobileActionBar.italic.symbol"})})}),(0,p.jsx)(G.Z,{type:"_",style:ve(this.environment.device.isSmallPhone,this.theme),onClick:()=>me("underline",this.environment),disabled:!e,children:(0,p.jsx)("span",{style:{textDecoration:"underline"},children:(0,p.jsx)(k.FormattedMessage,{defaultMessage:"U",id:"mobileActionBar.underline.symbol"})})}),(0,p.jsx)(G.Z,{type:"s",style:ve(this.environment.device.isSmallPhone,this.theme),onClick:()=>me("strike_through",this.environment),disabled:!e,children:(0,p.jsx)("span",{style:{textDecoration:"line-through"},children:(0,p.jsx)(k.FormattedMessage,{defaultMessage:"S",id:"mobileActionBar.strikeThrough.symbol"})})}),(0,p.jsx)(K.Z,{mobileFeedback:!0,disabledFeedback:!0,style:s,disabled:!I.gq(o),onClick:e=>fe(e,this.environment),children:ee}),(0,p.jsx)(K.Z,{mobileFeedback:!0,disabledFeedback:!0,style:{...s,borderRight:pe(this.theme)},disabled:!I.nt(o),onClick:e=>be(e,this.environment),children:te}),(0,p.jsx)(G.Z,{type:"c",style:ve(this.environment.device.isSmallPhone,this.theme),onClick:()=>me("code",this.environment),disabled:!e,children:(0,p.jsx)("span",{style:{fontFamily:T.Z.getCompositeFontFamily(n.SP).githubMono},children:(0,p.jsx)(k.FormattedMessage,{defaultMessage:"Code",id:"mobileActionBar.code.symbol"})})}),(0,p.jsx)($.Z,{style:ve(this.environment.device.isSmallPhone,this.theme),disabled:!e||t,children:(0,p.jsx)("span",{style:{borderBottom:`1px solid ${this.theme.linkDecorationColor}`},children:(0,p.jsx)(k.FormattedMessage,{defaultMessage:"Link",id:"mobileActionBar.link.symbol"})})}),(0,p.jsx)(z.Z,{onClick:()=>me("equation",this.environment),disabled:!e||t,style:ve(this.environment.device.isSmallPhone,this.theme),children:(0,d.G)({width:16,height:16})}),(0,p.jsx)(H.Z,{style:ve(this.environment.device.isSmallPhone,this.theme),ignoreSelectionAreaStore:this.props.stores.ignoreSelectionAreaStore,disabled:!e})]})}}J.displayName="MobileActionBar";const X=(0,k.injectIntl)(J),ee=h({width:18,height:18,transform:"rotate(90deg)",position:"relative",left:1}),te=h({width:18,height:18,transform:"rotate(-90deg)",position:"relative",left:-1}),ie=f({width:18,height:18,position:"relative",left:2}),oe=f({width:18,height:18,transform:"rotate(180deg)",position:"relative",left:2}),ne=(0,M.s)({width:19,height:19}),se=(0,b.N)({width:19,height:19}),re=(0,x.y)({width:18,height:18}),ae=(0,v.o)({width:18,height:18}),le=(0,S.C)({width:14,height:14}),ce=g({width:18,height:18}),de=(0,u.y)({width:18,height:18});function ue(){return{flexGrow:1,flexShrink:1,marginRight:-1,display:"flex",overflowX:"auto",overflowY:"hidden",WebkitOverflowScrolling:"touch"}}function me(e,t){w.YO(t,{itemName:e})}function pe(e){return`1px solid ${e.regularDividerColor}`}function he(e,t,i){const{device:o,WindowSizeStore:n}=t;return{height:"100%",width:"100%",fontSize:15,display:"flex",boxShadow:e===B.nd.Bottom?i.bottomActionBarShadow:i.mediumBoxShadow,backgroundColor:i.keyboardActionBarBackground,paddingLeft:o.isMobileNative?n.state.paddingLeftCSS:0,paddingRight:o.isMobileNative?n.state.paddingRightCSS:0}}function ge(){const e=(0,a.Fg)();return(0,c.i)({width:10,marginLeft:4,fill:e.lightIconColor})}function fe(e,t){j.$$(t)}function be(e,t){j.O2(t)}function ve(e,t){return{display:"flex",alignItems:"center",justifyContent:"center",paddingLeft:e?8:10,paddingRight:e?8:10,borderRight:pe(t),whiteSpace:"nowrap",height:Y,flexShrink:0,flexGrow:0,flexBasis:"auto",color:t.regularTextColor,minWidth:e?42:44}}function ye(){const e=(0,a.Fg)(),t=(0,s.O7)(),i=(0,r.VK)((()=>t.device.isSmallPhone),[t]),o=(0,r.VK)((()=>A.L0()),[]),n=(0,r.VK)((()=>A.AZ()),[]);return(0,p.jsxs)("div",{style:{...ve(i,e),paddingLeft:6,paddingRight:6},children:[(0,p.jsx)(K.Z,{mobileFeedback:!0,disabledFeedback:!0,style:Q,disabled:!o,onClick:()=>function(e){j.i2(e)}(t),children:ne}),(0,p.jsx)(K.Z,{mobileFeedback:!0,disabledFeedback:!0,style:Q,disabled:!n,onClick:()=>function(e){j.GH(e)}(t),children:se})]})}function Se(e){let{stores:t}=e;const i=(0,a.Fg)(),o=(0,s.O7)(),n=(0,r.VK)((()=>o.device.isSmallPhone),[o]);return(0,p.jsx)("div",{style:{flexGrow:1,flexShrink:1,marginRight:-1,display:"flex",overflowX:"auto",overflowY:"hidden",WebkitOverflowScrolling:"touch"},children:(0,p.jsxs)(K.Z,{mobileFeedback:!0,disabledFeedback:!0,style:{...ve(n,i),borderRight:"none",fontWeight:T.Z.fontWeight.medium},onClick:e=>{t.store.setState({...t.store.state,isTemplatesOpen:!0}),me("templates",o)},children:[(0,y.i)({width:20,marginRight:8}),(0,p.jsx)(k.FormattedMessage,{defaultMessage:"Choose a template...",id:"mobileActionBar.templates.buttonTitle"}),(0,p.jsx)(ge,{})]})})}function xe(e){let{canTriggerBlockActionsStore:t}=e;const i=(0,a.Fg)(),o=(0,s.O7)(),n=(0,r.VK)((()=>t.state),[t]),l=(0,r.VK)((()=>E.default.state.stores[0]),[]),c=(0,r.VK)((()=>I.gq(l)),[l]),d=(0,r.VK)((()=>I.nt(l)),[l]),u=(0,r.VK)((()=>o.device.isSmallPhone),[o]);return(0,p.jsxs)("div",{style:{...ve(u,i),paddingLeft:6,paddingRight:6},children:[(0,p.jsx)(K.Z,{mobileFeedback:!0,disabledFeedback:!0,style:Q,disabled:!n||!c,onClick:e=>fe(0,o),children:ee}),(0,p.jsx)(K.Z,{mobileFeedback:!0,disabledFeedback:!0,style:Q,disabled:!n||!d,onClick:e=>be(0,o),children:te}),(0,p.jsx)(K.Z,{mobileFeedback:!0,disabledFeedback:!0,style:Q,disabled:!n,onClick:e=>function(e,t){j.s0(t)}(0,o),children:ie}),(0,p.jsx)(K.Z,{mobileFeedback:!0,disabledFeedback:!0,style:Q,disabled:!n,onClick:e=>function(e,t){j.rZ(t)}(0,o),children:oe})]})}},87038:(e,t,i)=>{i.r(t),i.d(t,{default:()=>L});var o=i(67294),n=i(480),s=i(97511),r=i(86628),a=i(24405),l=i(84465),c=i(51454),d=i(9291),u=i(21797),m=i(46225),p=i(11732),h=i(81193),g=i(4617),f=i(99768),b=i(60709),v=i(51783),y=i(48779),S=i(80444),x=i(63334),M=i(29798),k=i(49085);class C extends k.default{getInitialState(){return{isOpen:!1,isInsertOpen:!1,isTurnIntoOpen:!1,isColorOpen:!1,isTemplatesOpen:!1}}}const T=C;var w=i(27724),I=i(24666),A=i(81023),N=i(65435),R=i(48019),P=i(56940),j=i(78140),B=i(32163),V=i(40721),_=i(53437),Z=i(72495),D=i(40698),O=i(59658),F=i(85893);const L=function(e){let{currentBlockStore:t,makeActionBarComponent:i}=e;const a=(0,n.O7)(),u=(0,s.l)(),m=(0,r.qz)(void 0,M.Z),p=(0,r.qz)(void 0,x.Z),h=(0,r.qz)(void 0,T),b=(0,r.VK)((()=>{var e;return Object.entries((0,N.it)({userPersona:(0,y.kO)().function,subscriptionTier:null===(e=S.default.state.currentSpaceStore)||void 0===e?void 0:e.getSubscriptionTier()})).map((e=>{let[t,i]=e;const n={key:t,render:e=>(0,F.jsx)(Z.Z,{title:(0,F.jsx)(d.FormattedMessage,{...l._5[t]}),children:e.children},t),items:i.map((e=>function(e,t){const i={key:e.name,render:t=>(0,o.createElement)(O.Z,{...t,key:e.name,title:e.name,type:"page_template",format:"phone-modal",locked:!1}),action:()=>{g.$7({environment:t,item:e,createNewPage:!1,isPrivate:!1})}};return i}(e,a)))};return n}))}),[a]),k=(0,r.VK)((()=>v.$3(a,t,null==u?void 0:u.publicEditModeStore.state)),[a,t,u]),{shouldShow:C}=k,{device:w,WindowSizeStore:I}=a,A=(0,r.VK)((()=>function(e,t,i){const{device:o}=e;return o.isMobileBrowser?t.state.isOpen:i}(a,h,C)),[a,h,C]),R=(0,r.VK)((()=>I.state.paddingBottomCSS),[I]);return(0,F.jsxs)(o.Fragment,{children:[(0,F.jsx)(f.Z,{capture:!0,render:e=>(0,F.jsxs)("div",{...e,style:{position:"relative",width:"100%",height:0,zIndex:c.Eo},children:[i({store:h,ignoreSelectionAreaStore:p,templatePickerMenuListStore:m}),(0,F.jsx)(K,{ignoreSelectionAreaStore:p}),(0,F.jsx)(H,{store:h}),(0,F.jsx)(W,{store:h}),(0,F.jsx)(G,{store:h}),(0,F.jsx)(z,{currentBlockStore:t,store:h,templatePickerMenuListStore:m,templatePreviewSections:b})]})}),!A&&w.isIPhoneX&&w.isNative&&(0,F.jsx)("div",{style:{position:"absolute",bottom:0,background:"transparent",height:R,width:"100%",pointerEvents:"none",WebkitUserSelect:"none"}})]})};function E(e,t){return e.isLargeDatabaseIcon?{width:16,fill:t.regularIconColor,marginLeft:4,marginRight:4}:{width:20,fill:t.regularIconColor,marginLeft:2,marginRight:2}}function U(e,t,i,n){const s=t;return{key:e.name,render:t=>{var i;return(0,o.createElement)(O.Z,{...t,key:e.name,format:"phone-modal",title:e.name,type:e.type,icon:null===(i=e.iconFn)||void 0===i?void 0:i.call(e,E(e,n)),locked:!1})},action:t=>{s&&A.M_(i)&&(h.rN(i,{template_name:e.name,is_keyboard:"keydown"===t.event.type}),e.onClick(i,s))}}}function K(e){let{ignoreSelectionAreaStore:t}=e;const i=(0,n.O7)(),o=i.NativeMobileActionBarStore,s=(0,r.VK)((()=>"editing"!==I.default.state.mode&&!(null==o||!o.state.shouldRestoreSelectionForMenu)),[o]),a=(0,r.VK)((()=>v.y6(i)),[i]);return o?(0,F.jsx)(P.Z,{store:t,capture:a,ignoreBlockSelection:!1,restoreSelection:s,render:e=>null}):null}function q(e){e.setState({...e.state,isInsertOpen:!1})}function H(e){let{store:t}=e;const i=(0,n.O7)(),s=(0,o.useCallback)((()=>q(t)),[t]),{device:a}=i,l=(0,r.VK)((()=>t.state.isInsertOpen),[t]);return(0,F.jsx)(P.Z,{capture:l,ignoreBlockSelection:!1,restoreSelection:!1,render:e=>(0,F.jsx)(_.ZP,{popupType:a.isMobile?_.ZP.PopupType.SlideUp:_.ZP.PopupType.Popup,preventBlockRenderQueueOnEnter:!0,open:l,keepFocus:!0,onDismiss:()=>{e(),q(t)},render:()=>(0,F.jsx)(j.Z,{menuType:b.og.Modal,title:(0,F.jsx)(d.FormattedMessage,{defaultMessage:"Insert block",id:"mobileActionBar.insertBlock.modalTitle"}),right:(0,F.jsx)(V.CancelMenuText,{}),onClickRight:()=>{e(),q(t)},children:(0,F.jsx)(R.Z,{sections:m.w.state.insertActions,context:{environment:i,blocks:w.default.state.stores,publicEditMode:void 0},onAccept:s})})})})}function W(e){let{store:t}=e;const i=(0,n.O7)(),s=(0,o.useCallback)((()=>function(e){e.setState({...e.state,isTurnIntoOpen:!1})}(t)),[t]),a=(0,r.VK)((()=>t.state.isTurnIntoOpen),[t]),{device:l}=i;return(0,F.jsx)(P.Z,{capture:a,ignoreBlockSelection:!1,restoreSelection:!0,render:()=>(0,F.jsx)(_.ZP,{popupType:l.isMobile?_.ZP.PopupType.SlideUp:_.ZP.PopupType.Popup,open:a,keepFocus:!0,onDismiss:s,preventBlockRenderQueueOnEnter:!0,render:()=>(0,F.jsx)(j.Z,{menuType:b.og.Modal,title:(0,F.jsx)(d.FormattedMessage,{defaultMessage:"Turn into",id:"mobileActionBar.turnInto.modalTitle"}),right:(0,F.jsx)(V.CancelMenuText,{}),onClickRight:s,children:(0,F.jsx)(R.Z,{sections:[{...p.g,title:""}],context:{environment:i,blocks:w.default.state.stores,publicEditMode:void 0},onAccept:s})})})})}function G(e){let{store:t}=e;const i=(0,n.O7)(),s=(0,o.useCallback)((()=>function(e){e.setState({...e.state,isColorOpen:!1})}(t)),[t]),{device:a}=i,l=(0,r.VK)((()=>t.state.isColorOpen),[t]);return(0,F.jsx)(P.Z,{capture:l,ignoreBlockSelection:!1,restoreSelection:!0,render:()=>(0,F.jsx)(_.ZP,{popupType:a.isMobile?_.ZP.PopupType.SlideUp:_.ZP.PopupType.Popup,open:l,keepFocus:!0,onDismiss:s,preventBlockRenderQueueOnEnter:!0,render:()=>(0,F.jsx)(j.Z,{menuType:b.og.Modal,title:(0,F.jsx)(d.FormattedMessage,{defaultMessage:"Block color",id:"mobileActionBar.blockColor.modalTitle"}),right:(0,F.jsx)(V.CancelMenuText,{}),onClickRight:s,children:(0,F.jsx)(R.Z,{sections:[u.te,u.rz,u.Vm],context:{environment:i,blocks:w.default.state.stores,publicEditMode:void 0},onAccept:s})})})})}function z(e){let{currentBlockStore:t,store:i,templatePickerMenuListStore:s,templatePreviewSections:l}=e;const c=(0,a.Fg)(),u=(0,n.O7)(),m=(0,o.useCallback)((()=>function(e){e.setState({...e.state,isTemplatesOpen:!1})}(i)),[i]),p=(0,r.VK)((()=>i.state.isTemplatesOpen),[i]),{device:h}=u;return(0,F.jsx)(P.Z,{capture:p,ignoreBlockSelection:!1,restoreSelection:!1,render:()=>(0,F.jsx)(_.ZP,{popupType:h.isMobile?_.ZP.PopupType.SlideUp:_.ZP.PopupType.Popup,open:p,keepFocus:!0,render:()=>(0,F.jsx)(j.Z,{menuType:b.og.Modal,title:(0,F.jsx)(d.FormattedMessage,{defaultMessage:"Templates",id:"mobileActionBar.templates.modalTitle"}),right:(0,F.jsx)(V.CancelMenuText,{}),onClickRight:m,children:(0,F.jsx)(B.Z,{type:B.i.Vertical,store:s,initialFocus:void 0,disableInitialScroll:!0,disableCommandEnter:!0,onAccept:m,sections:[{key:"Basic",render:e=>(0,F.jsx)(Z.Z,{children:e.children}),items:D.ss.map((e=>U(e,t,u,c)))},{key:"Database",render:e=>(0,F.jsx)(Z.Z,{title:(0,F.jsx)(d.FormattedMessage,{defaultMessage:"Database",id:"mobileActionBar.databaseSection.title"}),children:e.children}),items:D.Im.filter((e=>e.shouldShow(u))).map((e=>U(e,t,u,c)))},...l]})})})})}},90108:(e,t,i)=>{i.r(t),i.d(t,{default:()=>I});var o=i(67294),n=i(480),s=i(86628),r=i(24405),a=i(45238),l=i(85893);const c=(0,a.IU)("mobileBottomBarAddPage",{viewBox:"0 0 26 26",svg:(0,l.jsx)("path",{d:"M22.5713 3.95215L23.3447 3.15722C23.71 2.78125 23.7207 2.25488 23.3555 1.90039L23.1084 1.64258C22.7754 1.30957 22.2383 1.35254 21.8945 1.69629L21.1104 2.46972L22.5713 3.95215ZM10.207 15.124L12.3018 14.2109L21.7764 4.73633L20.3047 3.28613L10.8408 12.7607L9.87402 14.7803C9.78809 14.9629 10.0029 15.21 10.207 15.124ZM5.74902 23.1162H18.3604C20.2832 23.1162 21.4111 21.999 21.4111 19.7861V7.83008L19.6816 9.55957V19.7002C19.6816 20.8174 19.0693 21.3867 18.3281 21.3867H5.77051C4.69629 21.3867 4.10547 20.8174 4.10547 19.7002V7.50781C4.10547 6.39062 4.69629 5.81054 5.77051 5.81054H15.0625L16.792 4.08105H5.74902C3.50391 4.08105 2.37598 5.19824 2.37598 7.41113V19.7861C2.37598 22.0098 3.50391 23.1162 5.74902 23.1162Z"})}),d=(0,a.IU)("mobileBottomBarRedo",{viewBox:"0 0 26 26",svg:(0,l.jsx)("path",{d:"M2.84863 17.498C2.84863 21.6123 5.54492 24.3516 10.3574 24.3516H12.8389C13.4297 24.3516 13.8164 23.9219 13.8164 23.3955C13.8164 22.8691 13.4297 22.4395 12.8389 22.4395H10.3682C6.70508 22.4395 4.76074 20.291 4.76074 17.3906C4.76074 14.501 6.70508 12.4814 10.3682 12.4814H17.7373L20.2617 12.374L18.2207 14.1143L15.127 17.1328C14.9551 17.3047 14.8691 17.5088 14.8691 17.7881C14.8691 18.3467 15.2451 18.7334 15.8145 18.7334C16.0508 18.7334 16.3301 18.626 16.5127 18.4326L22.8291 12.2344C23.0439 12.0303 23.1514 11.7832 23.1514 11.5254C23.1514 11.2568 23.0439 11.0098 22.8291 10.8057L16.5127 4.60742C16.3301 4.4248 16.0508 4.30664 15.8145 4.30664C15.2451 4.30664 14.8691 4.69336 14.8691 5.25195C14.8691 5.53125 14.9551 5.73535 15.127 5.90723L18.2207 8.93652L20.2617 10.6768L17.7373 10.5586H10.5293C5.62012 10.5586 2.84863 13.3945 2.84863 17.498Z"})});var u=i(57037);const m=(0,a.IU)("mobileBottomBarUndo",{viewBox:"0 0 26 26",svg:(0,l.jsx)("path",{d:"M23.1514 17.498C23.1514 13.3945 20.3691 10.5586 15.4707 10.5586H8.25195L5.73828 10.6768L7.76855 8.93652L10.873 5.90723C11.0342 5.73535 11.1309 5.53125 11.1309 5.25195C11.1309 4.69336 10.7549 4.30664 10.1748 4.30664C9.94922 4.30664 9.66992 4.4248 9.4873 4.60742L3.1709 10.8057C2.95605 11.0098 2.84863 11.2568 2.84863 11.5254C2.84863 11.7832 2.95605 12.0303 3.1709 12.2344L9.4873 18.4326C9.66992 18.626 9.94922 18.7334 10.1748 18.7334C10.7549 18.7334 11.1309 18.3467 11.1309 17.7881C11.1309 17.5088 11.0342 17.3047 10.873 17.1328L7.76855 14.1143L5.73828 12.374L8.25195 12.4814H15.6318C19.2949 12.4814 21.2285 14.501 21.2285 17.3906C21.2285 20.291 19.2949 22.4395 15.6318 22.4395H13.1611C12.5703 22.4395 12.1836 22.8691 12.1836 23.3955C12.1836 23.9219 12.5703 24.3516 13.1611 24.3516H15.6426C20.4443 24.3516 23.1514 21.6123 23.1514 17.498Z"})});var p=i(51454),h=i(83249),g=i(52423),f=i(87531),b=i(43250),v=i(51811),y=i(39615),S=i(74948),x=i(5162),M=i(80444),k=i(72653),C=i(64921),T=i(80133);const w=54;const I=function(){const e=(0,r.Fg)(),t=(0,n.O7)(),i=(0,s.VK)((()=>k.Z.state),[]),o=(0,x.Y)("supportsNativeBottomBar"),{isTablet:a}=(0,n.Fy)(),c=(0,s.VK)((()=>function(e,t,i){const{WindowSizeStore:o}=t,{isTablet:n}=t.device;return{position:"absolute",left:0,right:0,bottom:0,display:"flex",justifyContent:n?"flex-start":"space-around",height:o.getSafePaddingBottomCSS(y.VG),paddingBottom:o.state.paddingBottomCSS,background:i.contentBackground,borderTop:`1px ${i.darkDividerColor} solid`,zIndex:p.D_,pointerEvents:e?"auto":"none",cursor:"pointer"}}(i,t,e)),[i,t,e]);return i?o?(0,l.jsx)("div",{className:b.alX,children:(0,l.jsx)(A,{})}):(0,l.jsx)("div",{style:c,className:b.rKl,children:a?(0,l.jsx)(V,{}):(0,l.jsx)(B,{})}):null};function A(){const e=(0,n.O7)(),t=(0,s.VK)((()=>e.device.isTablet),[e]);return(0,l.jsx)(T.Z,{format:t?v.EX.MobileBottomBarTablet:v.EX.MobileBottomBarPhone})}function N(e){return{width:26,fill:e.regularTextColor}}function R(){const e=(0,r.Fg)(),t=(0,n.O7)(),i=(0,s.VK)((()=>function(e){const{WindowSizeStore:t}=e,{isTablet:i}=e.device;return{display:"flex",alignItems:"center",justifyContent:"flex-start",flex:1,paddingLeft:t.getSafePaddingLeftCSS(18),...i&&{flex:"none",paddingLeft:2,width:w,justifyContent:"center"}}}(t)),[t]);return(0,l.jsx)(C.Z,{style:i,onClick:()=>function(e){f.Kf({environment:e,analyticsFrom:"mobile-bottom-bar"}),h.nB(e,{itemName:"search"})}(t),mobileFeedback:!0,children:(0,u.w)(N(e))})}function P(){const e=(0,r.Fg)(),t=(0,n.O7)(),i=(0,s.VK)((()=>function(e){const{WindowSizeStore:t}=e;return{display:"flex",alignItems:"center",justifyContent:"flex-start",flex:"none",paddingLeft:t.getSafePaddingLeftCSS(18),width:w}}(t)),[t]),a=(0,s.VK)((()=>g.L0()),[]),c=(0,s.VK)((()=>g.AZ()),[]);return(0,l.jsxs)(o.Fragment,{children:[(0,l.jsx)(C.Z,{style:i,onClick:()=>function(e){g.Yw(e,!0),h.nB(e,{itemName:"undo"})}(t),mobileFeedback:!0,disabled:!a,disabledFeedback:!0,children:m(N(e))}),(0,l.jsx)(C.Z,{style:{display:"flex",alignItems:"center",justifyContent:"center",flex:"none",width:w,paddingRight:4},onClick:()=>function(e){g.KX(e,!0),h.nB(e,{itemName:"redo"})}(t),mobileFeedback:!0,disabled:!c,disabledFeedback:!0,children:d(N(e))})]})}function j(){const e=(0,r.Fg)(),t=(0,n.O7)(),i=(0,s.VK)((()=>function(e){const{WindowSizeStore:t}=e,{isTablet:i}=e.device;return{display:"flex",alignItems:"center",justifyContent:"flex-end",flex:1,paddingRight:t.getSafePaddingRightCSS(18),...i&&{justifyContent:"center",flex:"none",paddingRight:0,width:w,marginRight:"auto"}}}(t)),[t]),o=(0,s.VK)((()=>Boolean(M.default.state.currentSpaceStore&&M.default.state.currentSpaceStore.canEdit())),[]);return(0,l.jsx)(C.Z,{style:i,onClick:()=>function(e){S.quickAddPage({environment:e,from:"mobile_bottom_bar"}),h.nB(e,{itemName:"add_page"})}(t),mobileFeedback:!0,disabled:!o,disabledFeedback:!0,children:c(N(e))})}function B(){return(0,l.jsxs)(o.Fragment,{children:[(0,l.jsx)(R,{}),(0,l.jsx)(A,{}),(0,l.jsx)(j,{})]})}function V(){return(0,l.jsxs)(o.Fragment,{children:[(0,l.jsx)(R,{}),(0,l.jsx)(A,{}),(0,l.jsx)(j,{}),(0,l.jsx)(P,{})]})}},54230:(e,t,i)=>{i.r(t),i.d(t,{default:()=>ne});var o=i(30120),n=i(67294),s=i(83355),r=i(480),a=i(86628),l=i(49085),c=i(15145),d=i(40506),u=i(7057),m=i(53877),p=i(42875),h=i(2585),g=i(5257),f=i(21202),b=i(9291),v=i(53965),y=i(26797),S=i(54569),x=i(8055),M=i(13447),k=i(66213),C=i(40863),T=i(84210),w=i(60709);class I extends l.default{getInitialState(){return{}}}const A=I;var N=i(6258),R=i(13401),P=i(75498),j=i(73063),B=i(78140),V=i(43765),_=i(40721),Z=i(72495),D=i(78948),O=i(24405),F=i(6695),L=i(95855),E=i(54497),U=i(37810),K=i(33929),q=i(65598),H=i(80444),W=i(97039),G=i(78030),z=i(52275),$=i(16354),Q=i(31278),Y=i(76798),J=i(85893);const X=function(e){let{time:t,store:i,format:o,schema:s,blockPropertyValueOverlayStore:r,collectionStore:l}=e;const d=(0,O.Fg)(),u=(0,a.VK)((()=>i.getIcon()),[i]),m=(0,a.VK)((()=>i.hasIcon()||!i.isEmptyPage()),[i]),p=(0,a.VK)((()=>i.hasError()),[i]),h=(0,a.VK)((()=>i.isEmptyPage()),[i]),g=(0,a.VK)((()=>(0,T.ZP)({store:i,fullyQualified:!1,pageVisitSource:c.tY.LinkInPage})),[i]),f=(0,a.VK)((()=>q.Xp(i,{recursivelyLoadAllDiscussions:!1})),[i]),b=(0,a.VK)((()=>{var e;return!0===(null==o||null===(e=o.calendar_properties)||void 0===e||null===(e=e.find((e=>"title"===(null==e?void 0:e.property))))||void 0===e?void 0:e.wrap)}),[o.calendar_properties]);return(0,J.jsx)($.Z,{href:g,children:(0,J.jsx)(z.Z,{focused:!1,title:(0,J.jsxs)(n.Fragment,{children:[t&&(0,J.jsx)("div",{style:{display:"flex",color:d.mediumTextColor,fontSize:14,marginTop:8,marginBottom:6},children:t}),(0,J.jsxs)("div",{style:{display:"flex",alignItems:"center",...t&&{marginBottom:8}},children:[m&&!p&&(0,J.jsx)(Q.Z,{disabled:!0,icon:u,isEmptyPage:h,size:24,style:{flexShrink:0,marginRight:8,alignSelf:"baseline"}}),p&&(0,E.t)({marginLeft:2,marginRight:10,width:20,fill:d.accentColors.orange[500]}),(0,J.jsx)(Y.Z,{store:i,style:{fontWeight:U.Z.fontWeight.semibold,whiteSpace:b?"pre-wrap":void 0}}),f>0&&(0,J.jsxs)("div",{style:{display:"flex",alignItems:"center",color:d.mediumTextColor,fontSize:12,marginLeft:4,flexShrink:0,alignSelf:"baseline"},children:[(0,L.z)({width:12,height:12,marginRight:4,fill:d.mediumIconColor}),f]})]})]}),caption:(0,J.jsx)(te,{format:o,schema:s,store:i,blockPropertyValueOverlayStore:r,collectionStore:l})})})};function ee(e){let{property:t,schema:i,store:o,blockPropertyValueOverlayStore:n,collectionStore:s}=e;return i[t]?(0,J.jsx)(W.Z,{store:o,property:t,disabled:!0,locked:!1,format:G.C.Calendar,tableWrap:!1,blockPropertyValueOverlayStore:n,collectionStore:s},t):null}function te(e){let{format:t,schema:i,store:o,blockPropertyValueOverlayStore:n,collectionStore:s}=e;const r=(0,a.VK)((()=>(t.calendar_properties?t.calendar_properties.filter((e=>e.visible)).map((e=>e.property)):[]).filter((e=>{var t;return F.XU({block:o.getModel(),property:e,schema:i,getRecordModel:o.getRecordModel,userId:null===(t=H.default.state.currentUserStore)||void 0===t?void 0:t.id,userTimeZone:(0,p.r)(),intl:K.default.getIntl()})}))),[t.calendar_properties,i,o]);return r.length>0?(0,J.jsx)("div",{style:{marginTop:8},children:r.map((e=>(0,J.jsx)(ee,{property:e,schema:i,store:o,blockPropertyValueOverlayStore:n,collectionStore:s},e)))}):null}const ie={display:"flex",alignItems:"center",height:"100%"};class oe extends s.Z{constructor(){super(...arguments),this.storeTypes={store:A,resultStore:l.default.createClass(void 0)},this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_renderResults=()=>(0,J.jsx)(ue,{collectionContextStore:this.props.collectionContextStore,calendarBy:this.props.calendarBy,initialStartOfDay:this.props.initialStartOfDay,disabled:this.props.disabled,onDismiss:this.props.onDismiss,blockPropertyValueOverlayStore:this.props.blockPropertyValueOverlayStore,schema:this.props.schema,format:this.props.format,store:this.stores.store,resultStore:this.stores.resultStore,overrideLinkClick:this.context.overrideLinkClick}),this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleLeftClick=()=>le(this.props.initialStartOfDay,this.stores.store),this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleRightClick=()=>ce(this.props.initialStartOfDay,this.stores.store),this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleAddItemClick=()=>de(this.environment,this.props.collectionContextStore,this.props.calendarBy,this.props.initialStartOfDay,this.stores.store,this.context.overrideLinkClick),this.reducerStore=this.createComputedStore((()=>{const{collectionContextStore:e}=this.props;return(0,C.YG)({collectionContextStore:e,startOfDay:ae(this.props.initialStartOfDay,this.stores.store).valueOf()})}),!0)}renderComponent(){const{collectionContextStore:e}=this.props,t=this.reducerStore.state;if(t)return(0,J.jsx)(P.Z,{id:"calendar_day_results",reducer:t,collectionContextStore:e,render:this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_renderResults,resultStore:this.stores.resultStore})}}oe.displayName="MobileCalendarDayMenu",oe.contextTypes={...k.wK,...s.w};const ne=(0,b.injectIntl)(oe);function se(e){let{item:t,currentStartOfDay:i,currentEndOfDay:o,schema:n,calendarBy:s,intl:r}=e;const a=n[s];if(!a||"date"!==a.type)return;const l=a.date_format||d.sF,c=a.time_format||d.c_,h=t.start,g=t.end,f=Boolean(!(i<=h&&h<=o)||g&&!(i<=g&&g<=o));if(t.end){const e=m.iC(t.start.valueOf(),t.end?t.end.valueOf():t.start.valueOf(),t.timeZone??(0,p.r)());return f?(0,u.ZV)({value:e,date_format:l,time_format:c,userTimeZone:t.timeZone,allowRelativeDates:!0,intl:r}):(0,u.ns)({start_time:e.start_time,end_time:e.end_time,time_format:c,humanReadable:!0,intl:r})}return(0,u.mr)({start_time:m.CQ(t.start.valueOf(),t.timeZone??(0,p.r)()).start_time,time_format:c,humanReadable:!0,intl:r})}function re(e){let{blockStore:t,item:i,currentStartOfDay:o,currentEndOfDay:n,disabled:s,blockPropertyValueOverlayStore:r,collectionContextStore:l,schema:c,calendarBy:d,intl:u,format:m}=e;const p=(0,a.VK)((()=>l.collectionStore()),[l]);return p?(0,J.jsx)(X,{store:t,time:i.includeTime?se({schema:c,calendarBy:d,intl:u,item:i,currentStartOfDay:o,currentEndOfDay:n}):void 0,disabled:s,format:m,schema:c,blockPropertyValueOverlayStore:r,collectionStore:p},i.id):null}function ae(e,t){const{currentStartOfDay:i}=t.state;return i?o.ou.fromMillis(i):o.ou.fromMillis(e)}function le(e,t){const i=ae(e,t);t.setState({...t.state,currentStartOfDay:i.minus({day:1}).valueOf()})}function ce(e,t){const i=ae(e,t);t.setState({...t.state,currentStartOfDay:i.plus({day:1}).valueOf()})}function de(e,t,i,o,n,s){const r=ae(o,n),a=M.createAndCommit({userAction:"MobileCalendarDayMenu.newStore",environment:e,perform:o=>{const n=S.IW({environment:e,collectionContextStore:t,groupsPointer:[],insertAtIndex:0,shouldCoerce:!1,initializeDefaultTemplate:!0,transaction:o,from:"mobile_calendar_day_menu"});if(n)return y.xD({type:"timestamp",environment:e,store:n.newStore,propertyId:i,timestampMs:r.valueOf(),transaction:o}),n.newStore}});if(!a.performResult)return;!function(e,t,i){i?i(e):x.c4({environment:t,url:e})}((0,T.ZP)({store:a.performResult,pageVisitSource:c.tY.Create}),e,s)}function ue(e){let{collectionContextStore:t,calendarBy:i,initialStartOfDay:o,disabled:s,onDismiss:l,blockPropertyValueOverlayStore:c,schema:d,format:m,store:p,resultStore:y,overrideLinkClick:S}=e;const x=(0,r.O7)(),M=(0,b.useIntl)(),k=(0,n.useCallback)((()=>de(x,t,i,o,p,S)),[x,t,i,o,p,S]),T=(0,n.useCallback)((()=>ce(o,p)),[o,p]),I=(0,n.useCallback)((()=>le(o,p)),[o,p]),A=(0,a.VK)((()=>t.collectionStore()),[t]),P=(0,a.VK)((()=>ae(o,p)),[o,p]),O=P.endOf("day"),F=(0,a.VK)((()=>function(e,t,i,o){const n=t.collectionStore();if(!n)return;const s=o.state,r=t.normalizedQueryStore.state,a=t.normalizedSchemaStore.state,l=r?r.calendar_by:void 0;if(!(s&&r&&l&&a))return;let c=v.oA(s.blockIds.map((t=>{const o=N.G.createChildStore(n,{id:t,table:f.iU});return(0,C.BO)({blockStore:o,calendarBy:l,schema:a,getRecordValue:n.getRecordValue,userId:e.currentUser.id,intl:i})})));return r.sort||(c=v.MR(c,(e=>e.start))),c}(x,t,M,y)),[x,t,M,y]);return A?(0,J.jsxs)(B.Z,{menuType:w.og.Modal,title:(0,J.jsxs)("div",{style:ie,children:[(0,J.jsx)(j.Z,{onClick:I,icon:h.f,style:{marginRight:8,marginTop:2},mobileFeedback:!0}),(0,J.jsx)("div",{children:(0,u.ZW)(P,"month_day_long")}),(0,J.jsx)(j.Z,{onClick:T,icon:g.o,style:{marginLeft:8,marginTop:2},mobileFeedback:!0})]}),right:(0,J.jsx)(_.DoneMenuText,{}),onClickRight:l,children:[!F&&(0,J.jsx)(Z.Z,{children:(0,J.jsx)(D.Z,{})}),F&&0===F.length&&(0,J.jsx)(Z.Z,{children:(0,J.jsx)(V.Z,{title:(0,J.jsx)(b.FormattedMessage,{defaultMessage:"No items",id:"mobileCalendarDayMenu.noResults.message"})})}),F&&F.length>0&&(0,J.jsx)(Z.Z,{children:F.map((e=>{const o=N.G.createChildStore(A,{id:e.id,table:f.iU});return(0,J.jsx)(re,{disabled:s,blockPropertyValueOverlayStore:c,collectionContextStore:t,schema:d,calendarBy:i,intl:M,format:m,blockStore:o,item:e,currentStartOfDay:P,currentEndOfDay:O},e.id)}))}),!s&&(0,J.jsx)(Z.Z,{topBorder:!0,children:(0,J.jsx)(R.Z,{focused:!1,onClick:k,title:(0,J.jsx)(b.FormattedMessage,{defaultMessage:"New item",id:"mobileCalendarDayMenu.newItemButton.label"})})})]}):null}},21326:(e,t,i)=>{i.r(t),i.d(t,{default:()=>N});var o=i(67294),n=i(15828),s=i(51811),r=i(480),a=i(86628),l=i(27328),c=i(59054),d=i(70203),u=i(35793),m=i(8055),p=i(87531),h=i(29974),g=i(81598),f=i(28344),b=i(72909),v=i(76976),y=i(99768),S=i(48779),x=i(5162),M=i(80444),k=i(98180),C=i(66881),T=i(69454),w=i(85893);const I=function(){const e=(0,r.O7)(),[t,i]=(0,o.useState)(!1),n=(0,a.VK)((()=>C.g.state),[]),s=(0,a.VK)((()=>(0,l.w_)(e.TabbedRouterStore.state)),[e]),I=(0,a.VK)((()=>{var e,t;return Boolean("web"===s.type&&("nativeTab"===s.route.name&&"assistant"===s.route.tab||"nativeTab"===(null===(e=s.redirectedTo)||void 0===e?void 0:e.route.name)&&"assistant"===(null===(t=s.redirectedTo)||void 0===t?void 0:t.route.tab)))}),[s]),A=(0,a.VK)((()=>e.WindowSizeStore.state.paddingTopCSS),[e.WindowSizeStore]),N=(0,a.VK)((()=>T.Z.mobileNativeBottomPadding(e)),[e]),R=(0,a.VK)((()=>({paddingLeft:e.WindowSizeStore.state.paddingLeftCSS,paddingRight:e.WindowSizeStore.state.paddingRightCSS})),[e]);return(0,c.r5)((async()=>{const t=u.Bs(),o=M.default.state.currentSpaceViewStore;if(t){const i=h.F1({environment:e,spaceId:t})??(o?await(0,S.rg)(e,o):void 0);i&&M.default.setState({...M.default.state,mainEditorCurrentBlockStore:i})}const{assistantActions:s}=await g.L6.loader();if(!k.Z.getActiveSessionId()||n.shouldReset){var r;C.g.update((e=>({...e,shouldReset:!1})));const t=Boolean(n.query&&n.query.length>p.LR),o=t?void 0:n.query;(0,b.setPrimeTextInput)(o);const a=k.Z.getNextSessionId();if(t){const t=await s.resetAndInitializeAssistantSession({environment:e});await s.commitHumanStep({environment:e,text:(0,d.TPx)(n.query),sessionId:t.sessionId})}const l=null===(r=k.Z.getSessionContext(a))||void 0===r||null===(r=r.assistantConfigurationStore)||void 0===r?void 0:r.state,c=k.Z.getSessionContext(a);f.trackQnAOpened(e,{hasQuery:t,from:n.from??"mobile_app_start",searchSessionId:n.searchSessionId,isReminder:!1,reminderType:void 0,sessionId:a,startTimestamp:(null==l?void 0:l.sessionStartTimestamp)||Date.now(),transcript:(null==c?void 0:c.evaluator.getTranscript())||[]}),i(!0)}else I&&i(!0)}),[e,n,i,I]),(0,o.useEffect)((()=>{var i;I&&t&&(null===(i=e.mobileNative)||void 0===i||i.markTransitionReady({type:"assistant"}))}),[e.mobileNative,I,t]),(0,w.jsx)(y.Z,{capture:!0,render:t=>(0,w.jsx)("div",{style:{paddingTop:A,paddingBottom:N,...R,flex:1,minWidth:0},...t,children:(0,w.jsx)(v.Qn,{renderAsFullPage:!0,showBackButton:!(0,x.Y)("supportsHorizon1Navigation"),isMobile:!0,onClose:()=>m.op(e)})})})};var A=i(80133);const N=function(e){const{route:t}=e;return"updates"===t.tab?(0,w.jsx)(A.Z,{format:s.EX.RenderAsPage,renderId:(0,n.ZP)()}):"assistant"===t.tab?(0,w.jsx)(I,{}):null}},61671:(e,t,i)=>{i.d(t,{Z:()=>b});i(67294);var o=i(480),n=i(86628),s=i(24405),r=i(16001),a=i(9291),l=i(1357),c=i(60709),d=i(97799),u=i(64921),m=i(31945),p=i(78140),h=i(15311),g=i(14694),f=i(85893);const b=function(e){let{passwordRequestStore:t}=e;const i=(0,s.Fg)(),l=(0,o.O7)(),{device:b,mobileNative:y}=l,S=(0,n.VK)((()=>d.Z.state.open),[]),x=(0,n.VK)((()=>d.Z.state.source!==d.Y.Updates&&((null==y?void 0:y.supportsNativeHomeOnPhone())||!1)),[y]);return(0,f.jsx)(m.ZP,{popupType:b.isMobile?m.Z4.SlideUp:m.Z4.Popup,hidesMobileNativeBottomBar:x,preventSlideUpTransition:x,buttonPopupStore:d.Z,renderOrigin:e=>(0,f.jsx)(u.Z,{mobileFeedback:b.isMobile,...e,children:(0,f.jsx)(g.Z,{left:(0,r.r)({fill:i.mediumIconColor,width:16}),style:{background:S?i.buttonHoveredBackground:"none"},disableMobileBorder:!0,children:(0,f.jsx)(a.FormattedMessage,{defaultMessage:"Notifications & settings",id:"notificationSettingsButton.mobileSidebar.label"})})}),render:()=>{let e;return e=b.isMobile?{menuType:c.og.Modal,title:(0,f.jsx)(a.FormattedMessage,{defaultMessage:"Notifications & settings",id:"notificationSettingsButton.mobileSidebar.title"}),right:(0,f.jsx)(a.FormattedMessage,{defaultMessage:"Done",id:"notificationSettingsButton.rightActionButton.done"}),onClickRight:()=>v(l),onCancel:()=>v(l),whiteBackground:!0}:{menuType:c.og.Popup},(0,f.jsx)(p.Z,{...e,children:(0,f.jsx)(h.Z,{isMobile:!0,passwordRequestStore:t})})}})};function v(e){const{mobileNative:t}=e,i=()=>{d.Z.setState({open:!1})};d.Z.state.source!==d.Y.Updates&&((null==t?void 0:t.supportsNativeHomeOnPhone())||!1)?l.d(e,i):i()}},40698:(e,t,i)=>{i.d(t,{Im:()=>V,K0:()=>A,b6:()=>_,dQ:()=>w,pd:()=>N,re:()=>I,ss:()=>P});i(57658);var o=i(15145),n=i(35013),s=i(21321),r=i(69628),a=i(17948),l=i(42696),c=i(10405),d=i(7220),u=i(54855),m=i(46783),p=i(73426),h=i(9291),g=i(7032),f=i(57549),b=i(75754),v=i(59389),y=i(13447),S=i(33929),x=i(89014),M=i(67940),k=i(92083),C=i(29949);const T=(0,h.defineMessages)({emptyWithIcon:{defaultMessage:"Empty page with icon",id:"templatePickerHelpers.basicTemplateItems.emptyWithIcon"},empty:{defaultMessage:"Empty page",id:"templatePickerHelpers.basicTemplateItems.empty"},templates:{defaultMessage:"Templates",id:"templatePickerHelpers.basicTemplateItems.templates"},import:{defaultMessage:"Import",id:"templatePickerHelpers.basicTemplateItems.import"}}),w={name:S.default.formatMessage(T.empty),iconFn:u.a,type:"empty_page",shouldShow:()=>!0,onClick:(e,t)=>{y.createAndCommit({userAction:"templatePickerHelpers.emptyTemplateItems",environment:e,perform:i=>{v.eV({environment:e,store:t,transaction:i})}})}},I={name:S.default.formatMessage(T.templates),type:"templates",iconFn:e=>(0,p.i)(e),shouldShow:()=>!0,onClick:()=>{C.Z.open({cloneTo:"current_page",analyticsFrom:"newPage"})}},A={name:S.default.formatMessage(T.templates),type:"templates",iconFn:e=>(0,m.w)(e),shouldShow:()=>!0,onClick:()=>{C.Z.open({cloneTo:"current_page",analyticsFrom:"newPage"})}},N={name:S.default.formatMessage(T.import),type:"import",iconFn:d.l,shouldShow:()=>!0,onClick:(e,t)=>{const i=(0,g.ZP)();M.Z.setState({flowId:i}),f.Sy(e,{from:"new_page",flowId:i}),k.Z.setState({...k.Z.state,open:!0,currentTab:"imports",highlightedSetting:void 0,defaultSubtab:void 0})}},R=(0,h.defineMessages)({pageWithIcon:{defaultMessage:"Page with icon",id:"templatePickerHelpers.mobileBasicTemplateItems.pageWithIcon"},emptyPage:{defaultMessage:"Empty page",id:"templatePickerHelpers.mobileBasicTemplateItems.emptyPage"}}),P=[{name:S.default.formatMessage(R.pageWithIcon),type:"page_with_icon",shouldShow:()=>!0,onClick:(e,t)=>{y.createAndCommit({userAction:"templatePickerHelpers.mobileBasicTemplateItems",environment:e,perform:i=>{v.T_({environment:e,store:t,transaction:i})}})}},{name:S.default.formatMessage(R.emptyPage),type:"empty_page",shouldShow:()=>!0,onClick:(e,t)=>{y.createAndCommit({userAction:"templatePickerHelpers.mobileBasicTemplateItems",environment:e,perform:i=>{v.eV({environment:e,store:t,transaction:i})}})}}],j=(0,h.defineMessages)({table:{defaultMessage:"Table",id:"templatePickerHelpers.databaseTemplateNames.table"},board:{defaultMessage:"Board",id:"templatePickerHelpers.databaseTemplateNames.board"},list:{defaultMessage:"List",id:"templatePickerHelpers.databaseTemplateNames.list"},calendar:{defaultMessage:"Calendar",id:"templatePickerHelpers.databaseTemplateNames.calendar"},gallery:{defaultMessage:"Gallery",id:"templatePickerHelpers.databaseTemplateNames.gallery"},timeline:{defaultMessage:"Timeline",id:"templatePickerHelpers.databaseTemplateNames.timeline"},tableView:{defaultMessage:"Table view",id:"templatePickerHelpers.databaseTemplateNames.tableView"},boardView:{defaultMessage:"Board view",id:"templatePickerHelpers.databaseTemplateNames.boardView"},listView:{defaultMessage:"List view",id:"templatePickerHelpers.databaseTemplateNames.listView"},calendarView:{defaultMessage:"Calendar view",id:"templatePickerHelpers.databaseTemplateNames.calendarView"},galleryView:{defaultMessage:"Gallery view",id:"templatePickerHelpers.databaseTemplateNames.galleryView"},timelineView:{defaultMessage:"Timeline view",id:"templatePickerHelpers.databaseTemplateNames.timelineView"}});function B(e){const{environment:t,store:i,viewType:n}=e;y.createAndCommit({userAction:"templatePickerHelpers.handleClickForViewType",environment:t,perform:e=>{v.Ud({environment:t,store:i,viewType:n,transaction:e}),b._c({environment:t,store:i,pageVisitSource:o.tY.LinkInPage});const s=i.getCollectionViewStores()[0];s&&(0,x.u)(s.id,{viewType:n})}})}const V=[{name:S.default.formatMessage(j.table),type:"table",iconFn:l.t,isLargeDatabaseIcon:!0,shouldShow:()=>!0,onClick:(e,t)=>B({environment:e,store:t,viewType:"table"})},{name:S.default.formatMessage(j.board),type:"board",iconFn:n.i,isLargeDatabaseIcon:!0,shouldShow:()=>!0,onClick:(e,t)=>B({environment:e,store:t,viewType:"board"})},{name:S.default.formatMessage(j.list),type:"list",iconFn:a.O,isLargeDatabaseIcon:!0,shouldShow:()=>!0,onClick:(e,t)=>B({environment:e,store:t,viewType:"list"})},{name:S.default.formatMessage(j.timeline),type:"timeline",iconFn:c._,isLargeDatabaseIcon:!0,shouldShow:()=>!0,onClick:(e,t)=>B({environment:e,store:t,viewType:"timeline"})},{name:S.default.formatMessage(j.calendar),type:"calendar",iconFn:s.N,isLargeDatabaseIcon:!0,shouldShow:()=>!0,onClick:(e,t)=>B({environment:e,store:t,viewType:"calendar"})},{name:S.default.formatMessage(j.gallery),type:"gallery",iconFn:r.n,isLargeDatabaseIcon:!0,shouldShow:()=>!0,onClick:(e,t)=>B({environment:e,store:t,viewType:"gallery"})}];function _(e,t){const i=new Map(e.map((e=>[e.type,e])));return t.reduce(((e,t)=>(i.has(t)&&e.push(i.get(t)),e)),[])}},59658:(e,t,i)=>{i.d(t,{Z:()=>S});i(67294);var o=i(480),n=i(97511),s=i(86628),r=i(24405),a=i(49271),l=i(53523),c=i(45238),d=i(85893);const u=(0,c.IU)("repeatDisabled",{viewBox:"0 0 16 14",svg:(0,d.jsxs)("svg",{children:[(0,d.jsx)("path",{d:"M1.11621 8.32422C0.888346 8.32422 0.69694 8.24674 0.541992 8.0918C0.391602 7.93685 0.316406 7.74772 0.316406 7.52441V6.77246C0.316406 6.08431 0.469076 5.49186 0.774414 4.99512C1.08431 4.49837 1.51953 4.11784 2.08008 3.85352C2.64518 3.58464 3.31283 3.4502 4.08301 3.4502H9.23047V1.95312C9.23047 1.76628 9.28288 1.62272 9.3877 1.52246C9.49251 1.41764 9.63607 1.36523 9.81836 1.36523C9.90495 1.36523 9.9847 1.37891 10.0576 1.40625C10.1305 1.43359 10.1966 1.47233 10.2559 1.52246L13.0107 3.83301C13.1566 3.9515 13.2272 4.09277 13.2227 4.25684C13.2227 4.4209 13.152 4.56217 13.0107 4.68066L10.2559 6.99121C10.1966 7.03678 10.1305 7.07552 10.0576 7.10742C9.9847 7.13477 9.90495 7.14844 9.81836 7.14844C9.63607 7.14844 9.49251 7.09603 9.3877 6.99121C9.28288 6.88639 9.23047 6.74284 9.23047 6.56055V5.00195H3.98047C3.34245 5.00195 2.83659 5.17741 2.46289 5.52832C2.09375 5.87923 1.90918 6.35319 1.90918 6.9502V7.52441C1.90918 7.74772 1.83171 7.93685 1.67676 8.0918C1.52181 8.24674 1.33496 8.32422 1.11621 8.32422ZM14.8906 7.54492C15.1094 7.54492 15.2962 7.6224 15.4512 7.77734C15.6061 7.92773 15.6836 8.11686 15.6836 8.34473V9.09668C15.6836 9.78483 15.5286 10.3773 15.2188 10.874C14.9134 11.3708 14.4782 11.7536 13.9131 12.0225C13.348 12.2868 12.6803 12.4189 11.9102 12.4189H6.7627V13.9229C6.7627 14.1051 6.71029 14.2464 6.60547 14.3467C6.50521 14.4515 6.36393 14.5039 6.18164 14.5039C6.09505 14.5039 6.01302 14.4902 5.93555 14.4629C5.86263 14.4355 5.79655 14.3968 5.7373 14.3467L2.98242 12.0361C2.84115 11.9222 2.77051 11.7832 2.77051 11.6191C2.77051 11.4505 2.84115 11.307 2.98242 11.1885L5.7373 8.87793C5.79655 8.8278 5.86263 8.78906 5.93555 8.76172C6.01302 8.73438 6.09505 8.7207 6.18164 8.7207C6.36393 8.7207 6.50521 8.77311 6.60547 8.87793C6.71029 8.97819 6.7627 9.12174 6.7627 9.30859V10.8604H12.0127C12.6553 10.8604 13.1611 10.6872 13.5303 10.3408C13.904 9.98991 14.0908 9.51595 14.0908 8.91895V8.34473C14.0908 8.11686 14.166 7.92773 14.3164 7.77734C14.4714 7.6224 14.6628 7.54492 14.8906 7.54492Z",fill:"#C7C6C4"}),(0,d.jsx)("path",{d:"M4 2L12 14",stroke:"white",strokeWidth:"3",strokeLinecap:"round"}),(0,d.jsx)("path",{d:"M4 2L12 14",stroke:"#C7C6C4",strokeLinecap:"round"})]})});var m=i(9291),p=i(31701),h=i(37810),g=i(19124),f=i(77080),b=i(64921),v=i(52275),y=i(73420);const S=function(e){let{format:t,className:i,icon:o,title:n,isDefault:s,recurrence:r,recurrenceDisabled:a,right:l,focused:c,onClick:u,onMouseMove:m,onMouseEnter:p,onMouseLeave:h,locked:g,type:f}=e;return"collection-overlay"===t?(0,d.jsx)(M,{className:i,icon:o,format:t,title:n,isDefault:s,recurrence:r,recurrenceDisabled:a,right:l,focused:c,onClick:u,onMouseMove:m,onMouseEnter:p,onMouseLeave:h,locked:g,type:f}):"phone-modal"===t?(0,d.jsx)(k,{icon:o,format:t,title:n,isDefault:s,recurrence:r,focused:c,onClick:u}):"experimental-new-page"===t?(0,d.jsx)(w,{focused:c,onClick:u,onMouseMove:m,onMouseEnter:p,onMouseLeave:h,icon:o,title:n}):"experimental-new-page-submenu"===t?(0,d.jsx)(I,{focused:c,onClick:u,onMouseMove:m,onMouseEnter:p,onMouseLeave:h,icon:o,title:n}):(0,d.jsx)(T,{focused:c,onClick:u,onMouseMove:m,onMouseEnter:p,onMouseLeave:h,icon:o,format:t,title:n,isDefault:s,recurrence:r,recurrenceDisabled:a,right:l})};function x(e){let{format:t,title:i,isDefault:o,recurrence:n,recurrenceDisabled:a}=e;const c=(0,r.Fg)(),g=(0,s.VK)((()=>f.default.checkGate("recurrence_queue_task_improvements")),[]);return"collection-overlay"!==t?(0,d.jsx)(d.Fragment,{children:i}):(0,d.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[i,(0,d.jsxs)("span",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[o&&(0,d.jsx)("span",{style:{fontSize:12,fontWeight:h.Z.fontWeight.medium,color:c.mediumTextColor},children:(0,d.jsx)(m.FormattedMessage,{defaultMessage:"DEFAULT",id:"database.templatePickerMenuItem.default"})}),n&&(0,l.N)({width:14,color:p.ZP.blue,marginLeft:8}),a&&g&&u({width:14,height:12.25,color:p.ZP.lightIconColor,marginLeft:8})]})]})}function M(e){let{className:t,icon:i,format:n,title:s,isDefault:r,recurrence:a,recurrenceDisabled:l,right:c,focused:u,onClick:m,onMouseMove:p,onMouseEnter:h,onMouseLeave:g,locked:f,type:b}=e;const y=(0,o.O7)(),{device:S}=y;return(0,d.jsx)(v.Z,{className:t,icon:i,title:(0,d.jsx)(x,{format:n,title:s,isDefault:r,recurrence:a,recurrenceDisabled:l}),right:c,focused:u,onClick:m,onMouseMove:p,onMouseEnter:h,onMouseLeave:g,showDragHandle:!S.isMobile&&!f,dragHandleDisabled:"empty_page"===b})}function k(e){let{icon:t,format:i,title:o,isDefault:n,recurrence:s,focused:r,onClick:a}=e;return(0,d.jsx)(v.Z,{icon:t,title:(0,d.jsx)(x,{format:i,title:o,isDefault:n,recurrence:s}),focused:r,onClick:a,showDragHandle:!1})}function C(e,t,i){const{device:o}=e;return{...a.ZD,display:"flex",alignItems:"center",flexGrow:1,height:o.isMobile?36:32,fontSize:16,borderRadius:4,paddingLeft:8,marginBottom:2,color:i?t.mediumTextColor:t.lightTextColor}}function T(e){let{focused:t,onClick:i,onMouseMove:a,onMouseEnter:l,onMouseLeave:c,icon:u,format:m,title:p,isDefault:h,recurrence:f,recurrenceDisabled:v,right:y}=e;const S=(0,r.Fg)(),M=(0,o.O7)(),k=(0,n.l)(),T=(0,s.VK)((()=>{const e=null==k?void 0:k.publicEditModeStore.state;return(0,g.GD)(e)}),[k]);return(0,d.jsxs)(b.Z,{style:C(M,S,T),hovered:t,onClick:i,onMouseMove:a,onMouseEnter:l,onMouseLeave:c,hoveredStyle:{background:S.buttonHoveredBackground,color:S.regularTextColor},pressedStyle:{background:S.buttonPressedBackground},children:[(0,d.jsx)("div",{style:{display:"flex",alignItems:"center",width:24,height:24,marginRight:10},children:u}),(0,d.jsx)(x,{format:m,title:p,isDefault:h,recurrence:f,recurrenceDisabled:v}),y&&(0,d.jsx)("div",{style:{marginLeft:"auto",marginRight:4},children:y})]})}function w(e){const{focused:t,onClick:i,onMouseMove:o,onMouseEnter:n,onMouseLeave:s,icon:a,title:l}=e,c=(0,r.yK)((e=>({item:{display:"flex",alignItems:"center",padding:"6px 14px 6px 10px",border:`1px solid ${e.stroke.regular}`,borderRadius:100},itemFocused:{background:e.tint.regular}})),[]);return(0,d.jsx)("div",{onClick:i,onMouseMove:o,onMouseEnter:n,onMouseLeave:s,style:{...c.item,...t?c.itemFocused:{}},children:(0,d.jsxs)(y.X2,{gap:4,alignItems:"center",children:[a,l]})})}function I(e){const{focused:t,onClick:i,onMouseMove:o,onMouseEnter:n,onMouseLeave:s,icon:a,title:l}=e,c=(0,r.yK)((e=>({item:{display:"flex",alignItems:"center",padding:"4px 10px 4px 8px"},itemFocused:{background:e.tint.regular}})),[]);return(0,d.jsx)("div",{onClick:i,onMouseMove:o,onMouseEnter:n,onMouseLeave:s,style:{...c.item,...t?c.itemFocused:{}},children:(0,d.jsxs)(y.X2,{gap:8,alignItems:"center",children:[a,l]})})}},47082:(e,t,i)=>{i.d(t,{U:()=>S,Z:()=>M});var o=i(67294),n=i(83355),s=i(480),r=i(24405),a=i(53465),l=i(53965),c=i(60709),d=i(98742),u=i(34859),m=i(64113),p=i(64921),h=i(37601),g=i(74194),f=i(3386),b=i(53336),v=i(64369),y=i(85893);let S=function(e){return e[e.Select=0]="Select",e[e.Person=1]="Person",e[e.Relation=2]="Relation",e[e.FilterValue=3]="FilterValue",e[e.Share=4]="Share",e[e.Group=5]="Group",e}({});class x extends n.Z{constructor(){super(...arguments),this.inputRef=o.createRef(),this.storeTypes={store:m.Z},this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleFocused=()=>{this.stores.store.setState({focused:!0})},this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleBlurred=()=>{this.stores.store.setState({focused:!1})},this.handleContainerClick=()=>{var e,t,i;this.props.disabled||(null===(e=this.inputRef.current)||void 0===e||e.focusInput(),null===(t=(i=this.props).onClick)||void 0===t||t.call(i))}}UNSAFE_willMount(){(this.props.focus||this.props.focusInitial)&&this.stores.store.setState({focused:!0})}UNSAFE_willUpdate(){void 0!==this.props.focus&&this.stores.store.setState({focused:this.props.focus})}renderComponent(){const{disabled:e}=this.props;return(0,y.jsx)(f.Z,{debugName:"TokenInputMenuItem",capture:!e,onLeft:l.yR,onRight:l.yR,onSelectAll:l.yR,onRedo:l.yR,onUndo:l.yR,onToggleBold:l.yR,onToggleItalics:l.yR,onToggleCode:l.yR,onCut:l.yR,onCopy:l.yR,onPaste:l.yR,onKeypress:l.yR,children:(0,y.jsx)(f.Z,{debugName:"TokenInputMenuItem",capture:!e&&this.props.value.length>0,onDelete:l.yR,onBackspace:l.yR,children:(0,y.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"stretch",flex:1,minWidth:0,gap:this.props.message?4:void 0},children:[this.renderTokenInput(),this.props.message&&(0,y.jsx)(v.Z,{isSmall:!0,children:this.props.message})]})})})}renderTokenInput(){const{right:e,showClearButton:t}=this.props;return e||t?(0,y.jsxs)(b.Z,{type:u.Z.All,style:{...A(this.environment,this.theme,this.props.format,this.props.focus,this.props.dontShowBorderBottom,this.props.disabled,this.props.showBorder,this.context.menu),flexWrap:"nowrap",...this.props.style},onClick:this.handleContainerClick,children:[(0,y.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",flexGrow:1,minWidth:0,...this.props.inputAndTokenWrapRightStyle},children:[this.props.tokens,!this.props.hideInput&&this.renderInput()]}),(0,y.jsx)("div",{style:{flexShrink:0},children:(0,y.jsx)(I,{showClearButton:this.props.showClearButton,right:this.props.right,onClearButtonClick:this.props.onClearButtonClick,tokens:this.props.tokens,value:this.props.value})})]}):this.environment.device.isMobile?(0,y.jsxs)("div",{style:{...A(this.environment,this.theme,this.props.format,this.props.focus,this.props.dontShowBorderBottom,this.props.disabled,this.props.showBorder,this.context.menu),flexWrap:"nowrap",...this.props.style},onClick:this.handleContainerClick,children:[(0,y.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",flexGrow:1,minWidth:0,overflow:"hidden",marginRight:k(this.props.format)?6:0},children:[this.props.tokens,!this.props.hideInput&&this.renderInput()]}),(0,y.jsx)(h.Z,{show:this.stores.store.state.focused})]}):(0,y.jsxs)(b.Z,{type:u.Z.All,style:{...A(this.environment,this.theme,this.props.format,this.props.focus,this.props.dontShowBorderBottom,this.props.disabled,this.props.showBorder,this.context.menu),...this.props.style},onClick:this.handleContainerClick,children:[this.props.tokens,!this.props.hideInput&&this.renderInput()]})}renderInput(){const e=0===this.props.tokens.length;return(0,y.jsx)(g.Z,{disabled:this.props.disabled,format:g.B.Transparent,...(0,d.Z)({onKeyDown:e=>function(e,t,i,o){"Backspace"===e.key&&0===t.length&&i();o&&o(e)}(e,this.props.value,this.props.onRemoveLastToken,this.props.onKeyDown)},{onChange:this.props.onChange}),value:this.props.value,focus:this.props.focus,focusInitial:this.props.focusInitial,focusAfterAnimation:this.props.focusAfterAnimation,style:(t=this.props.format,i=this.environment,o=this.theme,n=this.props.inputFullWidth,s=this.props.inputDivStyle,{flexGrow:1,flexShrink:1,flexBasis:n?"100%":60,minWidth:60,width:"auto",lineHeight:"20px",...i.device.isMobile?{margin:"0 8px 8px 0"}:w(o)[t].inputDivDesktopStyle,...s}),inputStyle:this.props.inputStyle||{height:this.environment.device.isMobile?24:k(this.props.format)?20:18},size:1,ref:this.inputRef,type:this.props.type,placeholder:e?this.props.placeholder:"",onSubmit:e=>function(e,t,i,o){0===t.length&&i&&i();o&&o(e)}(e,this.props.value,this.props.onEmptySubmit,this.props.onSubmit),onFocus:this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleFocused,onBlur:this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleBlurred,textarea:this.props.textarea,autoComplete:this.props.autoComplete});var t,i,o,n,s}}x.displayName="TokenInputMenuItem",x.contextTypes={...c.mw,...n.w};const M=x;function k(e){return e===S.Group}function C(e,t){return{display:"flex",flexWrap:"wrap",alignItems:"flex-start",background:t?"none":e.tokenInputMenuItemBackground,cursor:"text",overflow:"hidden"}}function T(e){return{display:"flex",flexWrap:"wrap",alignItems:"flex-start",flexShrink:0,minHeight:44,borderBottom:`1px solid ${e.regularDividerColor}`,fontSize:16,background:e.popoverBackground}}function w(e){const t={desktopWrapStyle:{padding:"8px 9px 1px",width:"100%",minHeight:34,fontSize:14},inputDivDesktopStyle:{margin:"0 6px 6px 0",borderTopLeftRadius:4,borderTopRightRadius:4},inputDivDesktopFocusStyle:{}};return{[S.Select]:t,[S.Person]:t,[S.Relation]:t,[S.Group]:t,[S.FilterValue]:{desktopWrapStyle:{padding:"6px 6px 1px",boxShadow:e.inputBoxShadow,background:e.inputBackground,margin:"6px 8px 2px 8px",minHeight:30,fontSize:12,borderRadius:4},inputDivDesktopStyle:{margin:"0 6px 4px 0"},inputDivDesktopFocusStyle:{boxShadow:"rgba(35, 131, 226, 0.57) 0px 0px 0px 1px inset, rgba(35, 131, 226, 0.35) 0px 0px 0px 2px"}},[S.Share]:{desktopWrapStyle:{padding:"8px 9px 1px",width:"100%",minHeight:34,fontSize:14},inputDivDesktopStyle:{margin:"0 0 0 2px",borderTopLeftRadius:4,borderTopRightRadius:4},inputDivDesktopFocusStyle:{}}}}function I(e){let{showClearButton:t,right:i,onClearButtonClick:o,tokens:n,value:l}=e;const c=(0,r.Fg)(),d=(0,s.O7)(),{isMobile:u}=d.device;return i?(0,y.jsx)(y.Fragment,{children:i}):t&&(n.length>0||l.length>0)?(0,y.jsx)(p.Z,{onClick:o,style:{flexShrink:0,flexGrow:0,borderRadius:u?24:20,marginTop:2},children:(0,a.X)({width:u?16:14,height:u?16:14,fill:c.lightIconColor})}):null}function A(e,t,i,o,n,s,r,a){const{WindowSizeStore:l}=e;return{...e.device.isMobile?{...T(t),paddingTop:14,paddingBottom:8,paddingLeft:(null==a?void 0:a.menuType)!==c.og.Popup?l.getSafePaddingLeftCSS(16):16,paddingRight:(null==a?void 0:a.menuType)!==c.og.Popup?l.getSafePaddingRightCSS(16):16,...n&&{borderBottom:"none"}}:{...C(t,s),...w(t)[i].desktopWrapStyle},...r&&{boxShadow:"rgba(15, 15, 15, 0.1) 0px 0px 0px 1px inset"},...r&&o&&{boxShadow:"rgba(35, 131, 226, 0.57) 0px 0px 0px 1px inset, rgba(35, 131, 226, 0.35) 0px 0px 0px 2px"},...!e.device.isMobile&&o&&w(t)[i].inputDivDesktopFocusStyle}}},48190:(e,t,i)=>{i.d(t,{P:()=>u,Z:()=>d});var o=i(67294),n=i(1302),s=i(86628),r=i(28155),a=i(40107),l=i(53965),c=i(75330);function d(e){const{id:t,reducer:i,collectionContextStore:r,groupsPointer:d}=e,m=(0,s.VK)((()=>d),[d],{useDeepEqual:!0}),p=(0,s.VK)((()=>i),[i],{useDeepEqual:!0}),h=(0,s.VK)((()=>r.collectionViewStore()),[r]),g=(0,s.VK)((()=>{var e;return null==h||null===(e=h.getFormatStore())||void 0===e?void 0:e.getKeyStore("collection_view_source").getValue()}),[h]),f=(0,o.useRef)(!1),b=(0,a.S)(),[v,y]=(0,o.useReducer)(((e,t)=>l.Xy(e,t)?e:t),void 0),S=(0,o.useCallback)((()=>{const e=r.localResultStore.state,i=r.remoteResult.state,o=e&&"reducer"===e.type?e.reducerResults[t]:void 0,n=i&&"reducer"===i.type?i.reducerResults[t]:void 0;return u({reducerId:t,collectionContextStore:r,reducer:p,localReducerResult:o,remoteReducerResult:n})}),[r,p,t]),x=(0,o.useCallback)((()=>{f.current=!1,b()||y(S())}),[S,b]),M=(0,o.useCallback)((()=>{f.current||(f.current=!0,n.default.afterNextFlush(x))}),[x]);return(0,o.useEffect)((()=>(r.remoteResult.addListener(M),r.localResultStore.addListener(M),()=>{r.remoteResult.removeListener(M),r.localResultStore.removeListener(M)})),[r,M]),(0,o.useEffect)((()=>(c.$D({reducerId:t,instanceId:void 0,reducer:p,collectionContextStore:r,groupsPointer:m}),()=>{c.$D({reducerId:t,instanceId:void 0,reducer:void 0,collectionContextStore:r,groupsPointer:m})})),[r,h,g,m,p,t]),(0,o.useEffect)((()=>{M()}),[]),v}function u(e){const{reducerId:t,localReducerResult:i,remoteReducerResult:o,collectionContextStore:n,reducer:s}=e,a=n.reducers.state,c=n.remoteResult.state;if(n.isClientModeEnabled.state)return i;if("aggregation"===s.type||"groups"===s.type){if(null!=c&&c.reducerResults[t])return c.reducerResults[t];const e=Boolean(c&&"reducer"===c.type&&l.sE(c.reducerResults,((e,t)=>{const i=a[t];return Boolean(i&&"results"===i.reducer.type&&!i.reducer.searchQuery&&"results"===e.type&&e.hasMore&&l.Xy(s.filter,i.reducer.filter))})));return e?i:o}if("results"===s.type){var d;const e=n.wasCreatedThisSession.state,s=Boolean(c&&"reducer"===c.type&&c.reducerResults[t]),a=(0,r.nx)(null===(d=n.collectionViewStore())||void 0===d?void 0:d.getCollectionSource());if((s||e)&&!a&&i&&"results"===i.type){return{...i,hasMore:o&&"results"===o.type?o.hasMore:i.hasMore}}return o}}},30664:(e,t,i)=>{i.d(t,{Z:()=>P});var o=i(67294),n=i(480),s=i(6740),r=i(86628),a=i(24405),l=i(84169),c=i(9291),d=i(25888),u=i(13991),m=i(88642),p=i(39634),h=i(97978),g=i(79897),f=i(58455),b=i(77080);var v=i(43250),y=i(98742),S=i(77907),x=i(475),M=i(16194),k=i(55031),C=i(64921),T=i(31945),w=i(26388),I=i(14694),A=i(85893);const N="?";function R(e){const t=(0,n.O7)(),{isMobile:i}=t.device,d=(0,c.useIntl)(),u=(0,a.Fg)(),m=(0,r.VK)((()=>x.Z.state.open),[]),p=(0,a.yK)((e=>({helpIcon:{fill:e.mediumIconColor,width:16,height:16},hoveredStyle:{background:e.whiteButtonHoveredBackground},pressedStyle:{background:e.whiteButtonPressedBackground}})),[]),h=(0,o.useCallback)((e=>{const t=e.target;t instanceof HTMLElement&&(0,s.E)(t)&&M.Z.setState(!0)}),[]),g=(0,o.useCallback)((()=>{M.Z.setState(!1)}),[]);if(i)return(0,A.jsx)(C.Z,{hovered:m,testId:v.lmr,mobileFeedback:i,...e,children:(0,A.jsx)(I.Z,{left:(0,l.m)(p.helpIcon),disableMobileBorder:!0,children:(0,A.jsx)(c.FormattedMessage,{defaultMessage:"Help & feedback",id:"helpButton.mobileHelpFeedbackButton.label"})})});const f=d.formatMessage({defaultMessage:"Help, feedback, and keyboard shortcuts",id:"helpButton.desktopHelpButton.ariaLabel"}),b=(0,y.Z)(e,{onFocus:h,onBlur:g});return(0,A.jsx)(A.Fragment,{children:(0,A.jsx)(w.ZP,{renderTooltip:()=>(0,A.jsx)("span",{children:(0,A.jsx)(c.FormattedMessage,{defaultMessage:"Help, feedback, and {br}keyboard shortcuts",id:"helpButton.desktopHelpButton.tooltip",values:{br:(0,A.jsx)("br",{})}})}),render:e=>(0,A.jsx)(C.Z,{ariaLabel:f,className:v.lmr,testId:v.lmr,style:(0,k.y)(t,{theme:u,rightEdgeDistance:16,isInPeekRenderer:!1}),hoveredStyle:p.hoveredStyle,pressedStyle:p.pressedStyle,...(0,y.Z)(b,e),children:N})})})}const P=(0,c.injectIntl)((function(){const e=(0,n.O7)(),{isMobile:t}=e.device,i=(0,r.VK)((()=>{var t;return(null===(t=e.mobileNative)||void 0===t?void 0:t.supportsNativeHomeOnPhone())||!1}),[e]),s=(0,o.useCallback)((()=>{d.Ar(e,{from:"corner"}),function(e){const t=f.default.state;if((0,h.Ug)()&&t.isZendeskEnabled){const{userHighestPlanType:i,isSalesAssistedPlan:o}=(0,g.rf)(e);m.j({locale:u.SP,analyticsSettings:t,isForethoughtEnabled:b.default.checkGate("forethought"),forethoughtInitializeArgs:p.z(e),userHighestPlanType:i,isSalesAssistedPlan:o,cookieService:e.cookieService})}}(e)}),[e]);return(0,A.jsx)(T.ZP,{popupType:t?T.Z4.SlideUp:T.Z4.Popup,hidesMobileNativeBottomBar:i,preventSlideUpTransition:i,renderOrigin:e=>(0,A.jsx)(R,{...e}),originGap:t?0:12,placementToOrigin:t?T.pO.Right:T.pO.Top,alignmentToOrigin:t?T.vR.Center:T.vR.End,buttonPopupStore:x.Z,onClick:s,render:()=>(0,A.jsx)(S.LazyHelpButtonContent,{shouldRenderAsStaticModal:i})})}))},61735:(e,t,i)=>{i.r(t),i.d(t,{default:()=>Oe});var o=i(67294),n=i(83355),s=i(68719),r=i(480),a=i(41432),l=i(31701),c=i(1898),d=i(63811),u=i(12847);function m(e,t,i){const{content:o,apiRequestValue:n}=i;return{id:e,content:o,action:{type:t,apiRequestValue:n}}}const p=["insertBlock","turnInto","textColor","textSelectionColor"],h=["suggested","textFormatting","slashMenu","turnInto","textColor","textSelectionColor","more"];function g(e,t){return{type:e,apiRequestValue:t}}function f(e,t,i){const o={type:e,from:i,data:t};return JSON.stringify(o)}const b={showActionBarMenu:u.object({required:{type:u.literal("showActionBarMenu"),data:u.object({required:{actionBarMenuId:u.literals("template")},optional:{}})},optional:{}}),blockAction:u.object({required:{type:u.literals("blockAction"),data:u.object({required:{action:u.literals("bold","italic","underline","strikethrough","link","code","equation","mention","trash","comment","filePicker","indent","unindent","moveUp","moveDown","undo","redo","dismissKeyboard","more","ai","voiceInput","filing")},optional:{}})},optional:{from:u.literals("mobile_action_bar","mobile_text_formatting_menu")}})},v=Object.keys(b);let y=function(e){return e[e.InvalidActionType=0]="InvalidActionType",e[e.MissingPayload=1]="MissingPayload",e[e.InvalidRequestType=2]="InvalidRequestType",e[e.InvalidData=3]="InvalidData",e}({});class S{constructor(e,t){this.type=e,this.message=t}}function x(e){return 0===e.reduce(((e,t)=>e+t.items.length),0)}const M=m("mab.button.back","nativeAction_setSubMenuType",{content:{type:"icon",imageReference:{sfProGlyphName:"chevron.backward.2",localImageIdentifier:"back"},accessibilityText:""},apiRequestValue:{subMenuType:null}}),k=m("mab.button.noResults","nativeAction_setSubMenuType",{content:{type:"text_and_icon",imageReference:{},accessibilityText:"",text:"No results",fullWidth:!0,disabled:!0},apiRequestValue:{subMenuType:null}});function C(e,t){return m("mab.button.filePicker","webAction_generic",{content:{type:"icon",imageReference:{sfProGlyphName:"photo.on.rectangle.angled",localImageIdentifier:"filePicker"},disabled:e,accessibilityText:t},apiRequestValue:{jsonPayload:f("blockAction",{action:"filePicker"})}})}function T(e,t){return m("mab.button.comment","webAction_generic",{content:{type:"icon",imageReference:{sfProGlyphName:"bubble.left",localImageIdentifier:"comment"},disabled:e,accessibilityText:t},apiRequestValue:{jsonPayload:f("blockAction",{action:"comment"},"mobile_action_bar")}})}function w(e,t){return m("mab.button.undo","webAction_generic",{content:{type:"icon",imageReference:{sfProGlyphName:"arrow.uturn.backward",localImageIdentifier:"undo"},disabled:e,accessibilityText:t},apiRequestValue:{jsonPayload:f("blockAction",{action:"undo"})}})}function I(e,t){return m("mab.button.delete","webAction_generic",{content:{type:"icon",imageReference:{sfProGlyphName:"trash",localImageIdentifier:"trash"},disabled:e,accessibilityText:t},apiRequestValue:{jsonPayload:f("blockAction",{action:"trash"})}})}function A(e,t){return m("mab.button.mention","webAction_generic",{content:{type:"icon",imageReference:{sfProGlyphName:"at",localImageIdentifier:"mention"},disabled:e,accessibilityText:t},apiRequestValue:{jsonPayload:f("blockAction",{action:"mention"})}})}function N(e,t,i){return m("mab.button.indent","webAction_generic",{content:{type:"icon",imageReference:{sfProGlyphName:"increase.indent",localImageIdentifier:"indent"},disabled:e||t,accessibilityText:i},apiRequestValue:{jsonPayload:f("blockAction",{action:"indent"})}})}function R(e,t,i){return m("mab.button.unindent","webAction_generic",{content:{type:"icon",imageReference:{sfProGlyphName:"decrease.indent",localImageIdentifier:"unindent"},accessibilityText:i,disabled:e||t},apiRequestValue:{jsonPayload:f("blockAction",{action:"unindent"})}})}function P(e,t){return m("mab.button.moveUp","webAction_generic",{content:{type:"icon",imageReference:{sfProGlyphName:"arrow.up.to.line.alt",localImageIdentifier:"moveUp"},accessibilityText:t,disabled:e},apiRequestValue:{jsonPayload:f("blockAction",{action:"moveUp"})}})}function j(e,t){return m("mab.button.moveDown","webAction_generic",{content:{type:"icon",imageReference:{sfProGlyphName:"arrow.down.to.line.alt",localImageIdentifier:"moveDown"},accessibilityText:t,disabled:e},apiRequestValue:{jsonPayload:f("blockAction",{action:"moveDown"})}})}function B(e){const{buttonMap:t,accessibilityTexts:i}=e;return[M,t.filePicker,t.comment,t.undo,t.mention,t.delete,t.indent,t.unindent,t.moveUp,t.moveDown,m("mab.button.more","webAction_generic",{content:{type:"icon",imageReference:{sfProGlyphName:"ellipsis",localImageIdentifier:"more"},accessibilityText:i.more},apiRequestValue:{jsonPayload:f("blockAction",{action:"more"})}})]}var V=i(70203),_=i(9291),Z=i(53965),D=i(36610),O=i(44886),F=i(52423),L=i(24677),E=i(84084),U=i(993),K=i(98104),q=i(13447),H=i(22705),W=i(28020),G=i(4708),z=i(19124),$=i(33929),Q=i(51783),Y=i(68056),J=i(45162),X=i(65598),ee=i(37034),te=i(89086),ie=i(35328);var oe=i(77907),ne=i(53809);const se=new class{constructor(){this.lruKeyStore=new ne.D({key:"frequentlyUsedActions",namespace:"NativeMobileActionBar",important:!1,trackingType:"necessary"})}load(){const e=this.lruKeyStore.state;var t={};try{t=e&&JSON.parse(e)||{}}catch(i){}return t}get(){const e=this.load();return Object.keys(e).sort(((t,i)=>{const o=e[t]||0,n=e[i]||0;return o===n?0:n-o}))}track(e){var t=this.load();t[e]=(t[e]??0)+1,this.lruKeyStore.setState(JSON.stringify(t))}};var re=i(44534),ae=i(64359),le=i(5162),ce=i(80444),de=i(21273),ue=i(807),me=i(77080),pe=i(6258),he=i(27724),ge=i(10743),fe=i(24666),be=(i(57658),i(21797)),ve=i(46225),ye=i(11732),Se=i(83249),xe=i(11302),Me=i(32450),ke=i(68204),Ce=i(58239),Te=i(31352);function we(e){const{type:t,actionSections:i,closeParentMenu:o,context:n}=e,s={},r=[];for(const a of i){const e={id:`${a.key}`,title:a.title,items:a.actions.map((e=>{var i;const r=`${e.key}-${e.displayName||""}`;return s[r]={...e,closeParentMenu:o},{id:r,title:e.displayName||"",icon:(null===(i=e.nativeImageReference)||void 0===i?void 0:i.call(e,n))??{},action:g("webAction_genericAction",{menuType:t,actionId:r}),checked:!1}}))};r.push(e)}return{actions:s,sections:r}}function Ie(e){const{key:t,displayName:i,analyticsName:o,closeParentMenu:n,action:s}=e,r=i;return{key:`action ${t}`,displayName:i?$.default.formatMessage(i):void 0,analyticsName:o||`textformatting_action_${t}`,searchName:r?`${$.default.formatMessage(r)} ${r.defaultMessage}`:void 0,validators:[],action:s,closeParentMenu:Boolean(n)}}const Ae={bold:Ie({key:"bold",closeParentMenu:!1,action:e=>{let{environment:t}=e;Q.pk(t,["b"])}}),italic:Ie({key:"italic",closeParentMenu:!1,action:e=>{let{environment:t}=e;Q.pk(t,["i"])}}),underline:Ie({key:"underline",closeParentMenu:!1,action:e=>{let{environment:t}=e;Q.pk(t,["_"])}}),strikethrough:Ie({key:"strikethrough",closeParentMenu:!1,action:e=>{let{environment:t}=e;Q.pk(t,["s"])}}),code:Ie({key:"code",closeParentMenu:!1,action:e=>{let{environment:t}=e;Q.pk(t,["c"])}}),comment:Ie({key:"comment",closeParentMenu:!0,action:async e=>{var t;let{environment:i}=e;await(null===(t=i.NativeMobileActionBarStore)||void 0===t?void 0:t.clearNativeActionMenuAndRestoreSelectionIfNecessary()),Q.ol(i,"mobile_action_bar"),Se.YO(i,{itemName:"comment",from:"mobile_action_bar"})}}),equation:Ie({key:"equation",closeParentMenu:!0,action:async e=>{var t;let{environment:i}=e;await(null===(t=i.NativeMobileActionBarStore)||void 0===t?void 0:t.clearNativeActionMenuAndRestoreSelectionIfNecessary()),Q._W(i)}}),filePicker:Ie({key:"filePicker",closeParentMenu:!0,action:async e=>{var t;let{environment:i}=e;await(null===(t=i.NativeMobileActionBarStore)||void 0===t?void 0:t.clearNativeActionMenuAndRestoreSelectionIfNecessary()),Q.vs(i)}}),indent:Ie({key:"indent",closeParentMenu:!1,action:e=>{let{environment:t}=e;Q.O2(t)}}),unindent:Ie({key:"unindent",closeParentMenu:!1,action:e=>{let{environment:t}=e;Q.$$(t)}}),moveDown:Ie({key:"moveDown",closeParentMenu:!1,action:e=>{let{environment:t}=e;Q.rZ(t)}}),moveUp:Ie({key:"moveUp",closeParentMenu:!1,action:e=>{let{environment:t}=e;Q.s0(t)}}),undo:Ie({key:"undo",closeParentMenu:!1,action:e=>{let{environment:t}=e;Q.i2(t)}}),redo:Ie({key:"redo",closeParentMenu:!1,action:e=>{let{environment:t}=e;Q.GH(t)}}),trash:Ie({key:"trash",closeParentMenu:!1,action:e=>{let{environment:t}=e;Q.fn(t)}}),mention:Ie({key:"mention",closeParentMenu:!0,action:async e=>{var t;let{environment:i}=e;await(null===(t=i.NativeMobileActionBarStore)||void 0===t?void 0:t.clearNativeActionMenuAndRestoreSelectionIfNecessary()),Q.Z3(i)}}),ai:Ie({key:"ai",closeParentMenu:!0,action:async e=>{var t;let{environment:i}=e;await(null===(t=i.NativeMobileActionBarStore)||void 0===t?void 0:t.clearNativeActionMenuAndRestoreSelectionIfNecessary()),Q.QG(i)}}),voiceInput:Ie({key:"voiceInput",closeParentMenu:!0,action:async e=>{var t;let{environment:i}=e;await(null===(t=i.NativeMobileActionBarStore)||void 0===t?void 0:t.clearNativeActionMenuAndRestoreSelectionIfNecessary());H.ZP.state.enabled?Me.dictationActions.stopDictation():await Me.dictationActions.startDictation({environment:i})}}),link:Ie({key:"link",closeParentMenu:!0,action:async e=>{var t;let{environment:i}=e;await(null===(t=i.NativeMobileActionBarStore)||void 0===t?void 0:t.clearNativeActionMenuAndRestoreSelectionIfNecessary()),Q.UF(i)}}),more:Ie({key:"more",closeParentMenu:!1,action:e=>{let{environment:t}=e;Q.w1(t,void 0,void 0)}}),filing:Ie({key:"filing",closeParentMenu:!1,action:async e=>{let{environment:t}=e;const i=(0,W.np)();if(!i)return;const o=i.getParentStore();if(!o)return;K.sD(),L.ZH(t);const{currentSpaceStore:n}=ce.default.state,s=o instanceof pe.H2&&n&&o.id===n.id;await xe.$X({environment:t,blocks:[i],moveToContext:"quick_add",onAccept:e=>{const{currentSpaceStore:i}=ce.default.state;i&&"page"===t.RouterStore.state.route.name&&t.RouterStore.state.route.saveParent&&(0,Ce.rq)({currentUserId:t.currentUser.id,spaceId:i.id,value:e}),Se.xx(t)},isAddTo:!0,isDefaultPrivateLocation:s})}}),dismissKeyboard:Ie({key:"dismissKeyboard",closeParentMenu:!0,action:e=>{let{environment:t}=e;L.ZH(t),re.HM.clearSelection(),Q.hc(t,null,!1),Q.hD(t,null),Q.Oh(t,"hide_keyboard"),K.sD()}})};function Ne(e,t){const i=Te.zK(t.textStore,t.oldTextValue,!t.isAddMenu),o=(0,ke.sG)({sections:t.isAddMenu?ve.v.state.insertActions:[ye.g],context:e,query:i||""}).flatMap((e=>e.actions)).map((i=>{var o;const n=`${i.key}-${i.displayName||""}`,s=(null===(o=i.nativeImageReference)||void 0===o?void 0:o.call(i,e))??{},r=g("webAction_genericAction",{menuType:t.isAddMenu?"insertBlock":"turnInto",actionId:n});return m(n,"webAction_genericAction",{content:{type:"text_and_icon",imageReference:s,accessibilityText:i.displayName||"",text:i.displayName||""},apiRequestValue:r.apiRequestValue})})).filter(c.$K);return 0===o.length?[k]:[M,...o]}function Re(e){const t=ke.L1([ye.g],e).flatMap((t=>t.actions.map((t=>{var i;const o=`${t.key}-${t.displayName||""}`,n=(null===(i=t.nativeImageReference)||void 0===i?void 0:i.call(t,e))??{},s=g("webAction_genericAction",{menuType:"turnInto",actionId:o});return m(o,"webAction_genericAction",{content:{type:"text_and_icon",imageReference:n,accessibilityText:t.displayName||"",text:t.displayName||""},apiRequestValue:s.apiRequestValue})})))).filter(c.$K);return[M,...t]}function Pe(e,t){const i=ke.L1("textColor"===t?[be.rz,be.Vm]:[be.b4,be.Sw],e).flatMap((i=>i.actions.map((i=>{var o;const n=`${i.key}-${i.displayName||""}`,s=(null===(o=i.nativeImageReference)||void 0===o?void 0:o.call(i,e))??{},r=g("webAction_genericAction",{menuType:t,actionId:n});return m(n,"webAction_genericAction",{content:{type:"icon",imageReference:s,accessibilityText:i.displayName||""},apiRequestValue:r.apiRequestValue})})))).filter(c.$K);return[M,...i]}function je(e,t,i,o){var n=[];const s=e=>e.sort(((e,t)=>{const i=o.indexOf(e)||0,n=o.indexOf(t)||0;return i===n?0:n-i})).map((e=>t[e]));switch(i){case"indent":{const e=["ai","insert","turnInto","biu","mention","delete","comment"];n=[t.unindent,t.indent,t.moveUp,t.moveDown,...s(e)].filter(c.$K);break}case"empty":{const e=["turnInto","filePicker","biu","mention","comment","moveUp","moveDown"];n=[t.ai,t.insert,...s(e)].filter(c.$K);break}case"simple_table":case void 0:break;default:(0,c.t1)(i)}return[M,...n]}var Be=i(85893);const Ve=(0,_.defineMessages)({subMenuLabelSuggested:{defaultMessage:"Suggested",id:"mobileActionBar.subMenuLabel.suggested"},subMenuLabelInsert:{defaultMessage:"Add",id:"mobileActionBar.subMenuLabel.insert"},subMenuLabelTurnInto:{defaultMessage:"Turn into",id:"mobileActionBar.subMenuLabel.turnInto"},subMenuLabelTextFormatting:{defaultMessage:"Format",id:"mobileActionBar.subMenuLabel.textFormatting"},subMenuLabelTextColor:{defaultMessage:"Text color",id:"mobileActionBar.subMenuLabel.textColor"},templatesButtonTitle:{defaultMessage:"Choose a template...",id:"mobileActionBar.templateButtonTitle"},actionMenuInsertBlockTitle:{defaultMessage:"Insert Block",id:"mobileActionBar.actionMenuTitle.insertBlock"},actionMenuTurnIntoTitle:{defaultMessage:"Turn Into",id:"mobileActionBar.actionMenuTitle.turnInto"},actionMenuColorTitle:{defaultMessage:"Color",id:"mobileActionBar.actionMenuTitle.blockColor"},accessibilityInsert:{defaultMessage:"Add block",id:"mobileActionBar.accessibility.insertBlock"},accessibilityTurnInto:{defaultMessage:"Turn into block",id:"mobileActionBar.accessibility.turnInto"},accessibilityFilePicker:{defaultMessage:"Add image",id:"mobileActionBar.accessibility.filePicker"},accessibilityMention:{defaultMessage:"Add mention",id:"mobileActionBar.accessibility.mention"},accessibilityBlockColor:{defaultMessage:"Change block color",id:"mobileActionBar.accessibility.blockColor"},accessibilityTextFormatting:{defaultMessage:"Open text formatting menu",id:"mobileActionBar.accessibility.textFormatting"},accessibilityComment:{defaultMessage:"Add comment",id:"mobileActionBar.accessibility.comment"},accessibilityTrash:{defaultMessage:"Delete block",id:"mobileActionBar.accessibility.trash"},accessibilityIndent:{defaultMessage:"Indent block",id:"mobileActionBar.accessibility.indent"},accessibilityDedent:{defaultMessage:"Unindent block",id:"mobileActionBar.accessibility.unindent"},accessibilityMoveUp:{defaultMessage:"Move a block up",id:"mobileActionBar.accessibility.moveUp"},accessibilityMoveDown:{defaultMessage:"Move a block down",id:"mobileActionBar.accessibility.moveDown"},accessibilityUndo:{defaultMessage:"Undo edit",id:"mobileActionBar.accessibility.udno"},accessibilityRedo:{defaultMessage:"Redo edit",id:"mobileActionBar.accessibility.redo"},accessibilityMore:{defaultMessage:"More block actions",id:"mobileActionBar.accessibility.more"},accessibilityBold:{defaultMessage:"Bold",id:"mobileActionBar.accessibility.bold"},accessibilityItalics:{defaultMessage:"Italicize",id:"mobileActionBar.accessibility.italics"},accessibilityUnderline:{defaultMessage:"Underline",id:"mobileActionBar.accessibility.underline"},accessibilityStrikethrough:{defaultMessage:"Strikethrough",id:"mobileActionBar.accessibility.strikethrough"},accessibilityTextColor:{defaultMessage:"Text color",id:"mobileActionBar.accessibility.textColor"},accessibilityCode:{defaultMessage:"Code",id:"mobileActionBar.accessibility.code"},accessibilityLink:{defaultMessage:"Add link",id:"mobileActionBar.accessibility.link"},accessibilityEquation:{defaultMessage:"Add equation",id:"mobileActionBar.accessibility.equation"},accessibilityFiling:{defaultMessage:"Page location",id:"mobileActionBar.accessibility.filing"},accessibilityCloseTextFormattingMenu:{defaultMessage:"Close text formatting menu",id:"mobileActionBar.accessibility.close"},accessibilityDismissKeyboard:{defaultMessage:"End editing",id:"mobileActionBar.accessibility.endEditing"},accessibilityCloseActionMenu:{defaultMessage:"Close menu",id:"mobileActionBar.accessibility.closeMenu"},accessibilityAi:{defaultMessage:"AI Assist",id:"mobileActionBar.accessibility.ai"},filingButtonPrivateSection:{defaultMessage:"Private",id:"mobileActionBar.filing.private"}}),_e={text:!1,to_do:!0,bulleted_list:!0,numbered_list:!0,toggle:!0,column:!1,transclusion_container:!1,callout:!1,quote:!1};function Ze(e){var t;const{onAction:i,fallbackRenderer:n,...a}=e,l=null===(t=(0,r.O7)().mobileNative)||void 0===t?void 0:t.api.renderMobileActionBar,c=(0,s.e)(l,a);return function(e,t,i,n){var s;const a=null===(s=(0,r.O7)().mobileNative)||void 0===s?void 0:s.componentEvents;(0,o.useEffect)((()=>{if(a&&n&&t)return a.addListener(e,t,i,n)}),[e,t,i,n,a])}("MobileActionBar",c,"onAction",i),!c&&n?(0,Be.jsx)(Be.Fragment,{children:n()}):null}class De extends n.Z{constructor(){super(...arguments),this.handleMobileActionBarBridgeEvent=e=>{const{action:t}=e;switch(t.type){case"nativeAction_setMenuType":!function(e,t){const i=function(e){if("nativeAction_setMenuType"!==e.type)return new S(y.InvalidActionType,void 0);const t=e.apiRequestValue;if(!t||!("menuType"in t))return new S(y.MissingPayload,void 0);const i=u.object({required:{menuType:u.literals(...p,null)},optional:{}}),o=(0,d.Gu)(i,t);return o?new S(y.InvalidRequestType,JSON.stringify(o)):t.menuType}(e);if(i instanceof S)return void console.error(JSON.stringify(i));if((t.NativeMobileActionBarStore?t.NativeMobileActionBarStore.state.menuType:null)===i)Q.hc(t,null,!0);else switch(Q.hc(t,i,!0),i){case"insertBlock":Q.Oh(t,"insert");break;case"turnInto":Q.Oh(t,"turn_into");break;case"textColor":Q.Oh(t,"color","mobile_action_bar");break;case"textSelectionColor":Q.Oh(t,"color","mobile_text_formatting_menu")}}(t,this.environment);break;case"nativeAction_setSubMenuType":!function(e,t,i){const o=function(e){if("nativeAction_setSubMenuType"!==e.type)return new S(y.InvalidActionType,void 0);const t=e.apiRequestValue;if(!t||!("subMenuType"in t))return new S(y.MissingPayload,void 0);const i=u.object({required:{subMenuType:u.literals(...h,null)},optional:{}}),o=(0,d.Gu)(i,t);return o?new S(y.InvalidRequestType,JSON.stringify(o)):t.subMenuType}(e);if(o instanceof S)return void console.error(JSON.stringify(o));if(!(0,le.Y)("supportsNativeMobileDynamicActionBar")||"slashMenu"!==o&&"turnInto"!==o)Q.hD(t,o);else{const e="slashMenu"===o;Q.hc(t,null,!0);const n=fe.default.state,s="editing"===n.mode&&(0,Y.QY)(n.multiSelection);s&&q.createAndCommit({userAction:"NativeMobileActionBar.SlashMenu.insertTurnInto",environment:t,perform:o=>{U.hJ({environment:t,editorMode:i,store:s.store,string:E.pZ(),selection:s.selection,disableMentions:!1,disableSlashCommands:!1,disableEmojiCommands:!0,transaction:o,mobileActionBarEnableInsertInsteadOfTurnIntoInSlashCommands:e})}})}}(t,this.environment,this.editorMode.state);break;case"webAction_generic":!function(e,t,i,o,n,s){const r=function(e){if("webAction_generic"!==e.type)return new S(y.InvalidActionType,void 0);const t=e.apiRequestValue;if(!t||!("jsonPayload"in t))return new S(y.MissingPayload,void 0);const i=JSON.parse(t.jsonPayload),o=u.object({required:{type:u.literals(...v)},optional:{}}),n=(0,d.Gu)(o,i);if(n)return new S(y.InvalidRequestType,JSON.stringify(n));const s=i,r=b[s.type],a=(0,d.Gu)(r,s);return a?new S(y.InvalidData,JSON.stringify(a)):s}(e);if(r instanceof S)return void console.error(JSON.stringify(r));switch(r.type){case"blockAction":const e=Ae[r.data.action];if(!e)break;const a=e.action;if(a){const{mainEditorCurrentBlockStore:o}=ce.default.state;if(!o)break;const{device:l}=n;e.closeParentMenu&&!l.isTablet&&Q.hc(n,null,!0),a({environment:n,blocks:[o],publicEditMode:void 0,lazyDependencies:{markdownLinkifyIt:t,tinyMceMicrosoftWordPasteFilter:i}}),s(r.data.action)}break;case"showActionBarMenu":if("template"===r.data.actionBarMenuId)!function(e,t){L.ZH(t),K.sD(),e.store.update((e=>({...e,isTemplatesOpen:!0}))),Q.Oh(t,"templates")}(o,n)}}(t,this.props.markdownLinkifyIt,this.props.tinyMceMicrosoftWordPasteFilter,this.props.stores,this.environment,(e=>{const t=e;this.buttonMap.state[t]&&se.track(t)}));break;case"webAction_genericAction":this.handleActionRegistryAction(t)}},this.handleTextSelectionCompositeStoreChanged=()=>{if(!this.textSelectionCompositeStore.state)return;const{source:e}=this.textSelectionCompositeStore.state,{NativeMobileActionBarStore:t,device:i}=this.environment;"TextSelectionStore"!==e||null===(null==t?void 0:t.state.menuType)||i.isTablet||Q.hc(this.environment,null,!0)},this.handleTextSelectionStoreChanged=()=>{if(!this.textSelectionPositionsStore.state)return;const{NativeMobileActionBarStore:e}=this.environment;e&&null!==e.state.subMenuType&&!ge.Z.state.open&&Q.hD(this.environment,null)},this.handleCurrentBlockStoreChanged=()=>{if(!(0,le.Y)("supportsNativeMobileDynamicActionBar"))return;const e=this.suggestedMenuTypeStore.state;Boolean(e)&&Q.hD(this.environment,"suggested")},this.actionBarTextSelectionStore=this.createComputedStore((()=>{const e="editing"===fe.default.state.mode&&fe.default.state.multiSelection,t=this.props.stores.ignoreSelectionAreaStore.state.savedTextSelectionStoreState,i=t&&"editing"===t.mode&&t.multiSelection;return e||i||void 0}),!0),this.textSelectedBlocksStore=this.createComputedStore((()=>{var e;const t=this.actionBarTextSelectionStore.state;return t&&(null===(e=(0,J.tp)({multiSelection:t,focus:void 0,filterCommonAncestors:!1}))||void 0===e?void 0:e.stores)})),this.disableMentionCommentsStore=this.createComputedStore((()=>{const e=this.actionBarTextSelectionStore.state,t=Boolean(e&&(0,Y.qS)(e)),i=this.props.currentBlockStore.getType(),o=function(e,t){if(e&&(0,a._T)(e,t))return!0;return!1}(i,this.props.currentBlockStore.getFormat())||Boolean(this.renderStore.state.disableComment),n=!t,s=!t||function(e){if(e&&(0,a.lQ)(e))return!0;return!1}(i);return{disableCommentAction:o,disableLinkAction:n,disableMentionAction:s,disableEquationAction:!t}})),this.disableIndentStore=this.createComputedStore((()=>{const e=he.default.state.stores;return{disableIndent:!e.every(O.nt),disableUnindent:!e.every(O.gq)}})),this.editorMode=this.createComputedStore((()=>{var e,t;return null!==(e=this.pageContext)&&void 0!==e&&e.pageStore?ue.Z.getMode(null===(t=this.pageContext)||void 0===t?void 0:t.pageStore):"default"})),this.disableUndoRedoStore=this.createComputedStore((()=>({disableUndo:!F.L0(),disableRedo:!F.AZ()}))),this.isEditingCurrentPageTitleStore=this.createComputedStore(W.JE),this.isEditingCollectionViewTitleStore=this.createComputedStore(W.VV),this.showTemplatesButtonStore=this.createComputedStore((()=>!(0,G.kS)(this.environment)&&Q.Tz({environment:this.environment,store:this.props.currentBlockStore}))),this.reactiveMemoizedNativeMenusStore=this.createComputedStore((()=>this.memoizedNativeMenus({blocks:he.default.state.stores,environment:this.environment}))),this.getCurrentActionBarSchema=this.createComputedStore(this.recomputeCurrentActionBarSchema.bind(this),!0,"getCurrentActionBarSchema"),this.buttonSectionsConfigStore=this.createComputedStore((()=>{var e;const{NativeMobileActionBarStore:t}=this.environment,i=Boolean(this.renderStore.state.disableStyleAnnotations),o=t?t.state.menuType:null;var n=null;const s=this.showTemplatesButtonStore.state,r=ge.Z.state.open,a=this.shouldShowTextActions.state,l=t?t.state.subMenuType:null;r?n="slashMenu":a&&!i?n="textFormatting":l&&(n=l);const c=!this.canTriggerTextActions.state,d=!this.canTriggerBlockActions.state,{disableCommentAction:u,disableLinkAction:m,disableMentionAction:p,disableEquationAction:h}=this.disableMentionCommentsStore.state,{disableIndent:g,disableUnindent:f}=this.disableIndentStore.state,b=this.isEditingCurrentPageTitleStore.state||this.isEditingCollectionViewTitleStore.state,{disableUndo:v,disableRedo:y}=this.disableUndoRedoStore.state,S=(0,z.GD)(null===(e=this.pageContext)||void 0===e?void 0:e.publicEditModeStore.state),M=ae.Z.state.isActive,k=b||M,C=this.reactiveMemoizedNativeMenusStore.state;return{selectedSubMenu:n,createAIAction:S,disableAIAction:k,disableBlockActions:d,disableCommentAction:u,disableMentionAction:p,selectedMenuType:o,disableTextFormatting:i,disableTextColorAction:x(C.textColor.sections),disableDeleteBlock:b,disableInsertBlockAction:x(C.insertBlock.sections),disableTurnIntoAction:x(C.turnInto.sections),shouldShowTemplatesButton:s,disableIndent:g,disableUnindent:f,disableUndo:v,disableRedo:y,disableTextActions:c,isEditingTitle:b,disableLinkAction:m,disableEquationAction:h,shouldShowTextActions:!0===a,filingButtonTitle:this.filingButtonTitle.state}})),this.templateButtonSectionsStore=this.createComputedStore((()=>({id:"mab.buttonSection.template",buttons:[m("mab.button.choose_template","webAction_generic",{content:{type:"text_and_icon",imageReference:{localImageIdentifier:"template"},text:$.default.formatMessage(Ve.templatesButtonTitle)},apiRequestValue:{jsonPayload:f("showActionBarMenu",{actionBarMenuId:"template"})}})]}))),this.shouldShowFiling=this.createComputedStore((()=>{var e;return Boolean("page"===this.environment.RouterStore.state.route.name&&this.environment.RouterStore.state.route.showMoveTo&&(null===(e=this.pageContext)||void 0===e?void 0:e.pageStore.canEdit())&&this.environment.currentUser.isLoggedIn()&&(0,G.kS)(this.environment))})),this.filingButtonTitle=this.createComputedStore((()=>{var e;if(!this.shouldShowFiling.state)return null;const t=null===(e=this.pageContext)||void 0===e?void 0:e.pageStore;if(!t)return null;if(!t.isEmptyPage())return null;const i=t.getParentStore();if(!i)return null;if(!(i instanceof pe.G||i instanceof pe.H2||i instanceof pe.NW||i instanceof pe.Xr||i instanceof pe.zX))return null;const{currentSpaceStore:o}=ce.default.state;function n(e){if(!e)return null;return e.length>10?`${e.slice(0,10)}`:e}return i instanceof pe.H2&&o&&i.id===o.id?n($.default.formatMessage(Ve.filingButtonPrivateSection)):n((0,ee.V)(i,this.props.intl,this.environment,de.Z.shouldEnablePageTitleDiffs()))})),this.buttonMap=this.createComputedStore((()=>{const{createAIAction:e,disableAIAction:t,disableBlockActions:i,disableTextActions:o,disableCommentAction:n,disableMentionAction:s,selectedMenuType:r,disableInsertBlockAction:a,disableTurnIntoAction:c,disableTextFormatting:d,disableTextColorAction:u,disableDeleteBlock:p,disableUndo:h,disableIndent:g,disableUnindent:b,disableLinkAction:v,disableEquationAction:y,shouldShowTextActions:S,filingButtonTitle:x}=this.buttonSectionsConfigStore.state;return function(e){const{createAIAction:t,disableTextActions:i,disableAIAction:o,disableBlockActions:n,disableCommentAction:s,disableMentionAction:r,selectedMenuType:a,disableInsertBlockAction:c,disableTurnIntoAction:d,disableTextFormatting:u,disableTextColorAction:p,disableDeleteBlock:h,disableUndo:g,disableIndent:b,disableUnindent:v,disableLinkAction:y,disableEquationAction:S,supportsDynamicMobileActionBar:x,supportsVoiceInput:M,voiceInputActive:k,accessibilityTexts:B,shouldShowTextActions:V,textColorImageReference:_,selections:Z,filingButtonTitle:D}=e,O=V?"textSelectionColor":"textColor";return{ai:t?m("mab.button.ai","webAction_generic",{content:{type:"icon",imageReference:{sfProGlyphName:"sparkles",localImageIdentifier:"ai",imageTintColor:(0,l.J1)(l.FN.light.purple[500])},disabled:o,accessibilityText:B.ai},apiRequestValue:{jsonPayload:f("blockAction",{action:"ai"})}}):void 0,speech:M?m("mab.button.speech","webAction_generic",{content:{type:"icon",imageReference:{sfProGlyphName:k?"stop.circle.fill":"mic",localImageIdentifier:k?"micFilled":"mic",imageTintColor:k?(0,l.J1)(l.FN.light.red[500]):void 0},disabled:!1,accessibilityText:B.ai},apiRequestValue:{jsonPayload:f("blockAction",{action:"voiceInput"})}}):void 0,insert:x?m("mab.button.insert","nativeAction_setSubMenuType",{content:{type:"icon",imageReference:{sfProGlyphName:"plus",localImageIdentifier:"insertBlock"},accessibilityText:B.insert,disabled:n||c,selected:"insertBlock"===a},apiRequestValue:{subMenuType:"slashMenu"}}):m("mab.button.insert","nativeAction_setMenuType",{content:{type:"icon",imageReference:{sfProGlyphName:"plus",localImageIdentifier:"insertBlock"},accessibilityText:B.insert,disabled:n||c,selected:"insertBlock"===a},apiRequestValue:{menuType:"insertBlock"}}),turnInto:x?m("mab.button.turnInto","nativeAction_setSubMenuType",{content:{type:"icon",imageReference:{sfProGlyphName:"arrow.2.squarepath",localImageIdentifier:"turnInto"},disabled:n||d,selected:"turnInto"===a,accessibilityText:B.turnInto},apiRequestValue:{subMenuType:"turnInto"}}):m("mab.button.turnInto","nativeAction_setMenuType",{content:{type:"icon",imageReference:{sfProGlyphName:"arrow.2.squarepath",localImageIdentifier:"turnInto"},disabled:n||d,selected:"turnInto"===a,accessibilityText:B.turnInto},apiRequestValue:{menuType:"turnInto"}}),filePicker:C(n,B.filePicker),mention:A(r,B.mention),comment:T(s,B.comment),biu:m("bold.italic.underline","nativeAction_setSubMenuType",{content:{type:"icon",imageReference:{sfProGlyphName:"textformat",localImageIdentifier:"textFormat"},disabled:u,accessibilityText:B.textFormatting},apiRequestValue:{subMenuType:"textFormatting"}}),delete:I(h,B.trash),undo:w(g,B.undo),more:x?m("mab.button.more","nativeAction_setSubMenuType",{content:{type:"icon",imageReference:{sfProGlyphName:"ellipsis",localImageIdentifier:"more"},disabled:n,accessibilityText:B.more},apiRequestValue:{subMenuType:"more"}}):m("mab.button.more","webAction_generic",{content:{type:"icon",imageReference:{sfProGlyphName:"ellipsis",localImageIdentifier:"more"},accessibilityText:B.more,disabled:n},apiRequestValue:{jsonPayload:f("blockAction",{action:"more"})}}),indent:N(n,b,B.indent),unindent:R(n,v,B.unindent),moveUp:P(n,B.moveUp),moveDown:j(n,B.moveDown),color:x?m("mab.button.textFormatting.textSelectionColor.native","nativeAction_setSubMenuType",{content:{type:"icon",imageReference:_,disabled:i||p,selected:a===O,accessibilityText:B.textColor},apiRequestValue:{subMenuType:O}}):m("mab.button.textFormatting.textSelectionColor.native","nativeAction_setMenuType",{content:{type:"icon",imageReference:_,disabled:i||p,selected:a===O,accessibilityText:B.textColor},apiRequestValue:{menuType:O}}),bold:m("mab.button.bold","webAction_generic",{content:{type:"icon",imageReference:{sfProGlyphName:"bold",localImageIdentifier:"bold"},accessibilityText:B.bold,disabled:i,selected:Z.bold},apiRequestValue:{jsonPayload:f("blockAction",{action:"bold"})}}),italic:m("mab.button.italic","webAction_generic",{content:{type:"icon",imageReference:{sfProGlyphName:"italic",localImageIdentifier:"italic"},disabled:i,selected:Z.italic,accessibilityText:B.italics},apiRequestValue:{jsonPayload:f("blockAction",{action:"italic"})}}),underline:m("mab.button.underline","webAction_generic",{content:{type:"icon",imageReference:{sfProGlyphName:"underline",localImageIdentifier:"underline"},disabled:i,selected:Z.underline,accessibilityText:B.underline},apiRequestValue:{jsonPayload:f("blockAction",{action:"underline"})}}),strikethrough:m("mab.button.strikethrough","webAction_generic",{content:{type:"icon",imageReference:{sfProGlyphName:"strikethrough",localImageIdentifier:"strikethrough"},disabled:i,selected:Z.strikethrough,accessibilityText:B.strikethrough},apiRequestValue:{jsonPayload:f("blockAction",{action:"strikethrough"})}}),link:m("mab.button.link","webAction_generic",{content:{type:"icon",imageReference:{sfProGlyphName:"link",localImageIdentifier:"link"},accessibilityText:B.link,disabled:i||y,selected:Z.link},apiRequestValue:{jsonPayload:f("blockAction",{action:"link"})}}),code:m("mab.button.code","webAction_generic",{content:{type:"icon",imageReference:{sfProGlyphName:"chevron.left.slash.chevron.right",localImageIdentifier:"code"},accessibilityText:B.code,disabled:i,selected:Z.code},apiRequestValue:{jsonPayload:f("blockAction",{action:"code"})}}),equation:m("mab.button.equation","webAction_generic",{content:{type:"icon",imageReference:{sfProGlyphName:"x.squareroot",localImageIdentifier:"equation"},accessibilityText:B.equation,disabled:i||S,selected:Z.equation},apiRequestValue:{jsonPayload:f("blockAction",{action:"equation"})}}),filing:m("mab.button.filing","webAction_generic",{content:D?{type:"text_and_icon",text:D,style:"filled",imageReference:{sfProGlyphName:"folder",localImageIdentifier:"folder"},accessibilityText:B.filing}:{type:"icon",style:"filled",imageReference:{sfProGlyphName:"folder",localImageIdentifier:"folder"},accessibilityText:B.filing},apiRequestValue:{jsonPayload:f("blockAction",{action:"filing"})}})}}({createAIAction:e,disableTextActions:o,disableAIAction:t,disableBlockActions:i,disableCommentAction:n,disableMentionAction:s,selectedMenuType:r,disableInsertBlockAction:a,disableTurnIntoAction:c,disableTextFormatting:d,disableTextColorAction:u,disableDeleteBlock:p,disableUndo:h,disableIndent:g,disableUnindent:b,disableLinkAction:v,disableEquationAction:y,shouldShowTextActions:S,filingButtonTitle:x,supportsDynamicMobileActionBar:(0,le.Y)("supportsNativeMobileDynamicActionBar"),voiceInputActive:H.ZP.state.enabled,supportsVoiceInput:me.default.checkGate("mobile_horizon1_dictation"),textColorImageReference:Fe(this.textSelectionColorStore.state,this.theme),selections:this.textFormattingSelectionStore.state,accessibilityTexts:{insert:$.default.formatMessage(Ve.accessibilityInsert),turnInto:$.default.formatMessage(Ve.accessibilityTurnInto),filePicker:$.default.formatMessage(Ve.accessibilityFilePicker),mention:$.default.formatMessage(Ve.accessibilityMention),comment:$.default.formatMessage(Ve.accessibilityComment),textFormatting:$.default.formatMessage(Ve.accessibilityTextFormatting),trash:$.default.formatMessage(Ve.accessibilityTrash),ai:$.default.formatMessage(Ve.accessibilityAi),undo:$.default.formatMessage(Ve.accessibilityUndo),more:$.default.formatMessage(Ve.accessibilityMore),indent:$.default.formatMessage(Ve.accessibilityIndent),unindent:$.default.formatMessage(Ve.accessibilityDedent),moveUp:$.default.formatMessage(Ve.accessibilityMoveUp),moveDown:$.default.formatMessage(Ve.accessibilityMoveDown),bold:$.default.formatMessage(Ve.accessibilityBold),italics:$.default.formatMessage(Ve.accessibilityItalics),underline:$.default.formatMessage(Ve.accessibilityUnderline),strikethrough:$.default.formatMessage(Ve.accessibilityStrikethrough),textColor:$.default.formatMessage(Ve.accessibilityTextColor),code:$.default.formatMessage(Ve.accessibilityCode),link:$.default.formatMessage(Ve.accessibilityLink),equation:$.default.formatMessage(Ve.accessibilityEquation),close:$.default.formatMessage(Ve.accessibilityCloseTextFormattingMenu),filing:$.default.formatMessage(Ve.accessibilityFiling)}})})),this.primaryActionButtonSectionsStoreV2=this.createComputedStore((()=>{const{isEditingTitle:e,disableBlockActions:t,disableIndent:i,disableUnindent:o}=this.buttonSectionsConfigStore.state,n=this.textSelectedBlocksStore.state,s=!!n&&n.some((e=>{const t=e.getType();return t&&_e[t]}));return function(e){const{buttonMap:t,isEditingTitle:i,disableBlockActions:o,disableIndent:n,disableUnindent:s,someBlockPrioritizesIndentation:r,supportsSectionAnimation:a,supportsDynamicMobileActionBar:l,shouldShowFiling:d}=e,u=!(o||n&&s);if(l)return[{id:"mab.buttonSection.main",buttons:(i?[t.ai,t.speech,t.insert,t.mention,t.comment,t.more]:[t.ai,t.speech,t.insert,t.turnInto,t.biu,t.more]).filter(c.$K)}];if(u&&r){const e=[t.unindent,t.indent,t.moveUp,t.moveDown].filter(c.$K),i=[t.ai,t.insert,t.turnInto,t.filePicker,t.speech,t.biu,t.comment,t.undo,t.mention,t.delete,t.more].filter(c.$K);return a?[{id:"mab.buttonSection.listPrioritized",buttons:e,skipSectionDivider:!0},{id:"mab.buttonSection.main",buttons:i}]:[{id:"mab.buttonSection.listPrioritized",buttons:[...e,...i],skipSectionDivider:!0}]}return[{id:"mab.buttonSection.main",buttons:i&&d?[t.filing,t.ai,t.insert,t.filePicker,t.speech].filter(c.$K):[d?t.filing:void 0,t.ai,t.insert,t.turnInto,t.filePicker,t.speech,t.biu,t.comment,t.undo,t.mention,t.delete,t.indent,t.unindent,t.moveUp,t.moveDown,t.more].filter(c.$K)}]}({buttonMap:this.buttonMap.state,isEditingTitle:e,disableBlockActions:t,disableIndent:i,disableUnindent:o,someBlockPrioritizesIndentation:s,shouldShowFiling:this.shouldShowFiling.state,supportsSectionAnimation:this.environment.device.isIOS,supportsDynamicMobileActionBar:(0,le.Y)("supportsNativeMobileDynamicActionBar")})})),this.textFormattingButtonSectionsStoreV2=this.createComputedStore((()=>{const{shouldShowTextActions:e}=this.buttonSectionsConfigStore.state;return function(e){const{buttonMap:t,shouldShowTextActions:i}=e;let o;return o=i?[M,t.turnInto,t.ai,t.color,t.comment,t.bold,t.italic,t.underline,t.strikethrough,t.link,t.code,t.equation].filter(c.$K):[M,t.color,t.bold,t.italic,t.underline,t.strikethrough,t.link,t.code,t.equation],{id:"mab.buttonSection.textFormatting",shouldFadeIn:!0,buttons:o}}({buttonMap:this.buttonMap.state,shouldShowTextActions:e})})),this.mainButtonSectionsStoreV2=this.createComputedStore((()=>{const{shouldShowTemplatesButton:e}=this.buttonSectionsConfigStore.state;return e?[this.templateButtonSectionsStore.state]:this.primaryActionButtonSectionsStoreV2.state})),this.textSelectionPositionsStore=this.createComputedStore((()=>{const e=this.textSelectionCompositeStore.state;if(!e)return;const{source:t,...i}=e;return i}),!0),this.currentBlockStore=this.createComputedStore((()=>{const e=this.textSelectedBlocksStore.state;return 1===(null==e?void 0:e.length)?e[0]:void 0}),!0),this.suggestedMenuTypeStore=this.createComputedStore((()=>{const e=this.currentBlockStore.state,t=null==e?void 0:e.getType(),i=t&&_e[t],o=e&&(0,X.PF)(e);return i?"indent":o?"empty":void 0})),this.suggestedMenuStore=this.createComputedStore((()=>{if(!(0,le.Y)("supportsNativeMobileDynamicActionBar"))return{id:"mab.buttonSection.suggested",shouldFadeIn:!0,buttons:[]};this.environment,he.default.state.stores;return{id:"mab.buttonSection.suggested",shouldFadeIn:!0,buttons:je(0,this.buttonMap.state,this.suggestedMenuTypeStore.state,se.get())}})),this.slashSubMenuStore=this.createComputedStore((()=>{if(!(0,le.Y)("supportsNativeMobileDynamicActionBar"))return{id:"mab.buttonSection.slashMenu",shouldFadeIn:!0,buttons:[]};const e=ge.Z.state;if(!e.open)return{id:"mab.buttonSection.slashMenu",shouldFadeIn:!0,buttons:[]};return{id:"mab.buttonSection.slashMenu",shouldFadeIn:!0,buttons:Ne({environment:this.environment,blocks:he.default.state.stores,publicEditMode:void 0},e)}})),this.turnIntoSubmenuStore=this.createComputedStore((()=>{if(!(0,le.Y)("supportsNativeMobileDynamicActionBar"))return{id:"mab.buttonSection.turnInto",shouldFadeIn:!0,buttons:[]};return{id:"mab.buttonSection.turnInto",shouldFadeIn:!0,buttons:Re({environment:this.environment,blocks:he.default.state.stores,publicEditMode:void 0})}})),this.moreSubmenuStore=this.createComputedStore((()=>(0,le.Y)("supportsNativeMobileDynamicActionBar")?{id:"mab.buttonSection.more",shouldFadeIn:!0,buttons:B({buttonMap:this.buttonMap.state,accessibilityTexts:{more:$.default.formatMessage(Ve.accessibilityMore)}})}:{id:"mab.buttonSection.turnInto",shouldFadeIn:!0,buttons:[]})),this.textColorSubmenuStore=this.createComputedStore((()=>{if(!(0,le.Y)("supportsNativeMobileDynamicActionBar"))return{id:"mab.buttonSection.textColor",shouldFadeIn:!0,buttons:[]};return{id:"mab.buttonSection.textColor",shouldFadeIn:!0,buttons:Pe({environment:this.environment,blocks:he.default.state.stores,publicEditMode:void 0},"textColor")}})),this.textSelectionColorSubmenuStore=this.createComputedStore((()=>{if(!(0,le.Y)("supportsNativeMobileDynamicActionBar"))return{id:"mab.buttonSection.textSelectionColor",shouldFadeIn:!0,buttons:[]};return{id:"mab.buttonSection.textSelectionColor",shouldFadeIn:!0,buttons:Pe({environment:this.environment,blocks:he.default.state.stores,publicEditMode:void 0},"textSelectionColor")}})),this.textSelectionCompositeStore=this.createComputedStore((()=>{const e=(e,t)=>{if(!e||"editing"!==e.mode)return;const{multiSelection:i}=e;return{startRecord:i.start.store.pointer,startIndex:i.start.index,endRecord:i.end.store.pointer,endIndex:i.end.index,source:t}};return e(fe.default.state,"TextSelectionStore")||e(this.props.stores.ignoreSelectionAreaStore.state.savedTextSelectionStoreState,"IgnoreSelectionAreaStore")}),!0),this.renderStore=this.createComputedStore((()=>{var e;const t=Q.$3(this.environment,this.props.currentBlockStore,null===(e=this.pageContext)||void 0===e?void 0:e.publicEditModeStore.state);if(!t){const e=this.environment.NativeMobileActionBarStore;null!==(null==e?void 0:e.state.menuType)&&Z.gw((()=>{var e;Q.$3(this.environment,this.props.currentBlockStore,null===(e=this.pageContext)||void 0===e?void 0:e.publicEditModeStore.state)||Q.hc(this.environment,null,!1)}),500),null!==(null==e?void 0:e.state.subMenuType)&&Z.gw((()=>{var e;Q.$3(this.environment,this.props.currentBlockStore,null===(e=this.pageContext)||void 0===e?void 0:e.publicEditModeStore.state)||Q.hD(this.environment,null)}),500)}return t})),this.shouldShowTextActions=this.createComputedStore((()=>Q.oQ(this.props.stores.ignoreSelectionAreaStore,this.environment.TextSelectionCompositionStore))),this.canTriggerBlockActions=this.createComputedStore((()=>Q.Bo(this.pageContext&&this.pageContext.publicEditModeStore.state))),this.canTriggerTextActions=this.createComputedStore((()=>Q.eQ(this.pageContext&&this.pageContext.publicEditModeStore.state,this.props.currentBlockStore))),this.memoizedNativeMenus=Z.HP((e=>{const{blocks:t,environment:i}=e;return o={environment:i,blocks:t,publicEditMode:void 0},{insertBlock:we({type:"insertBlock",actionSections:ke.L1(ve.v.state.insertActions,o),context:o,closeParentMenu:!0}),turnInto:we({type:"turnInto",actionSections:ke.L1([ye.g],o),context:o,closeParentMenu:!0}),textColor:we({type:"textColor",actionSections:ke.L1([be.rz,be.Vm],o),context:o,closeParentMenu:!0}),textSelectionColor:we({type:"textSelectionColor",actionSections:ke.L1([be.b4,be.Sw],o),context:o,closeParentMenu:!0})};var o}),(e=>{let{blocks:t,environment:i}=e;const o=t.map((e=>e.key)).join(",");return`${i.key}-${o}`})),this.textFormattingSelectionStore=this.createComputedStore((()=>{let e;e="editing"===fe.default.state.mode?(0,te.k2)([V.GKr.Bold,V.GKr.Italic,V.GKr.Underline,V.GKr.Strike,V.GKr.Code,V.GKr.Link,V.GKr.Equation,V.GKr.Highlight],fe.default.state.multiSelection,fe.default.state.forceExtendAnnotations):{};const t=e[V.GKr.Highlight];return{bold:Boolean(e[V.GKr.Bold]),italic:Boolean(e[V.GKr.Italic]),underline:Boolean(e[V.GKr.Underline]),strikethrough:Boolean(Boolean(e[V.GKr.Strike])),code:Boolean(e[V.GKr.Code]),link:Boolean(e[V.GKr.Link]),equation:Boolean(e[V.GKr.Equation]),highlight:t?(0,V.zIN)(t):void 0}})),this.textSelectionColorStore=this.createComputedStore((()=>{const{NativeMobileActionBarStore:e}=this.environment,t=e&&null!==e.state.menuType?this.props.stores.ignoreSelectionAreaStore.state.savedTextSelectionStoreState:void 0;if(!t)return this.textFormattingSelectionStore.state.highlight;const i="editing"===t.mode&&(0,te.a6)("h",t.multiSelection,t.forceExtendAnnotations);return i?(0,V.zIN)(i):void 0}))}didMount(){this.textSelectionCompositeStore.addListener(this.handleTextSelectionCompositeStoreChanged),this.textSelectionPositionsStore.addListener(this.handleTextSelectionStoreChanged),this.currentBlockStore.addListener(this.handleCurrentBlockStoreChanged)}willUnmount(){this.textSelectionCompositeStore.removeListener(this.handleTextSelectionCompositeStoreChanged),this.textSelectionPositionsStore.removeListener(this.handleTextSelectionStoreChanged),this.currentBlockStore.removeListener(this.handleCurrentBlockStoreChanged),this.props.renderApi&&this.props.renderApi({type:"unmount",id:""})}renderComponent(){const{fallbackRenderer:e,stores:t}=this.props;return(0,Be.jsx)(Ze,{isOpen:this.renderStore.state.shouldShow,canShow:this.renderStore.state.canShowNativeBar,isEmpty:this.renderStore.state.isEmpty,schema:this.getCurrentActionBarSchema.state,onAction:this.handleMobileActionBarBridgeEvent,fallbackRenderer:e&&(()=>e(t))})}recomputeCurrentActionBarSchema(){const{selectedMenuType:e,selectedSubMenu:t}=this.buttonSectionsConfigStore.state,i=(0,le.Y)("supportsNativeMobileDynamicActionBar"),o=this.reactiveMemoizedNativeMenusStore.state;return function(e){const{version:t,selectedMenu:i,selectedSubMenu:o,nativeMenus:n,buttonSections:s,nativeSubMenus:r,accessibilityTexts:a,localizedMessages:l}=e;return{nativeMenus:n,nativeSubMenus:r,localizedMessages:l,state:{buttonSections:s,selectedMenu:i,selectedSubMenu:o,dismissKeyboardButton:null!==i?m("mab.dismissKeyboard","nativeAction_setMenuType",{content:{type:"icon",imageReference:{sfProGlyphName:"xmark.circle.fill",localImageIdentifier:"cancel",imageTintColor:"#72706B64"},accessibilityText:a.closeActionMenu},apiRequestValue:{menuType:null}}):m("mab.dismissKeyboard","webAction_generic",{content:{type:"icon",imageReference:{sfProGlyphName:"keyboard.chevron.compact.down",localImageIdentifier:"keyboardDown"},accessibilityText:a.dismissKeyboard},apiRequestValue:{jsonPayload:f("blockAction",{action:"dismissKeyboard"})}})},version:t}}({version:(0,le.Y)("supportsNativeMobileDynamicActionBar")?2:1,selectedMenu:e,selectedSubMenu:t,nativeMenus:{textColor:{id:"textColor",title:$.default.formatMessage(Ve.actionMenuColorTitle),sections:i?[]:o.textColor.sections},textSelectionColor:{id:"textSelectionColor",title:$.default.formatMessage(Ve.actionMenuColorTitle),sections:i?[]:o.textSelectionColor.sections},insertBlock:{id:"insertBlock",title:$.default.formatMessage(Ve.actionMenuInsertBlockTitle),sections:i?[]:o.insertBlock.sections},turnInto:{id:"turnInto",title:$.default.formatMessage(Ve.actionMenuTurnIntoTitle),sections:i?[]:o.turnInto.sections}},nativeSubMenus:{suggested:[this.suggestedMenuStore.state],textFormatting:[this.textFormattingButtonSectionsStoreV2.state],slashMenu:[this.slashSubMenuStore.state],turnInto:[this.turnIntoSubmenuStore.state],textColor:[this.textColorSubmenuStore.state],textSelectionColor:[this.textSelectionColorSubmenuStore.state],more:[this.moreSubmenuStore.state]},buttonSections:this.mainButtonSectionsStoreV2.state,accessibilityTexts:{dismissKeyboard:$.default.formatMessage(Ve.accessibilityDismissKeyboard),closeActionMenu:$.default.formatMessage(Ve.accessibilityCloseActionMenu)},localizedMessages:{...this.getLabelForSelectedSubMenu(t)}})}getLabelForSelectedSubMenu(e){var t=void 0;switch(e){case null:break;case"suggested":t=$.default.formatMessage(Ve.subMenuLabelSuggested);break;case"slashMenu":t=ge.Z.state.open&&ge.Z.state.isAddMenu?$.default.formatMessage(Ve.subMenuLabelInsert):$.default.formatMessage(Ve.subMenuLabelTurnInto);break;case"turnInto":t=$.default.formatMessage(Ve.subMenuLabelTurnInto);break;case"textFormatting":t=$.default.formatMessage(Ve.subMenuLabelTextFormatting);break;case"textColor":case"textSelectionColor":t=$.default.formatMessage(Ve.subMenuLabelTextColor)}return t?{selectedSubMenuLabel:t}:void 0}handleActionRegistryAction(e){var t,i;const{markdownLinkifyIt:o,tinyMceMicrosoftWordPasteFilter:n}=this.props,s=null===(t=e.apiRequestValue)||void 0===t?void 0:t.menuType,r=null===(i=e.apiRequestValue)||void 0===i?void 0:i.actionId;if(!s||!r)return;const a=this.memoizedNativeMenus({environment:this.environment,blocks:he.default.state.stores})[s].actions[r];if(!a)return;const l=a.action;l&&(a.closeParentMenu&&Q.hc(this.environment,null,!0),(0,le.Y)("supportsNativeMobileDynamicActionBar")&&ge.Z.state.open&&q.createAndCommit({userAction:"NativeMobileActionBar.SlashMenu.handleAccept",environment:this.environment,perform:e=>{E.RL({environment:this.environment,transaction:e})}}),l({environment:this.environment,blocks:he.default.state.stores,publicEditMode:void 0,lazyDependencies:{markdownLinkifyIt:o,tinyMceMicrosoftWordPasteFilter:n}}));const c=he.default.state.stores[0];if(c){const e=c.getType(),t=c.getFormat();D.dh(this.environment,{analyticsName:a.analyticsName,action_type:a.analyticsActionType,from:"slash_menu",block_id:c.id,block_type:e,is_toggleable:e?(0,ie._A)(e,t):void 0,slash_menu_filter_length:0,slash_menu_section:`Mobile Action Bar ${s}`,parent_collection_id:c.getParentCollectionIdUpToTwoLevels()})}}}function Oe(e){const t=(0,_.useIntl)(),{value:i}=(0,oe.useDependency)(oe.deps.markdownLinkifyIt),{value:o}=(0,oe.useDependency)(oe.deps.tinyMceMicrosoftWordPasteFilter);return(0,Be.jsx)(De,{...e,intl:t,markdownLinkifyIt:i,tinyMceMicrosoftWordPasteFilter:o})}function Fe(e,t){let i="textColor";const o=l.E_.find((t=>t===e));let n;"default"===e||o&&(o.includes("background")?(n="background",i="textBackgroundColor"):n="color");const s=n&&o?(0,l.fi)(o,t)[n]:void 0;return{localImageIdentifier:i,imageTintColor:s?(0,l.J1)(s):void 0}}De.displayName="NativeMobileActionBar"},99930:(e,t,i)=>{i.r(t),i.d(t,{default:()=>ze});i(57658);var o=i(67294),n=i(1302),s=i(480),r=i(86628),a=i(24405),l=i(27328),c=i(99747),d=i(15145),u=i(42853),m=i(13148),p=i(63261),h=i(45238),g=i(85893);const f=(0,h.IU)("mobileOffline",{viewBox:"0 0 26 26",svg:(0,g.jsx)("path",{d:"M26.0029 13.2441C25.9922 11.9873 24.2842 11.0742 22.2324 11.0742H17.9033C17.3018 11.0742 17.0762 10.9775 16.7217 10.5693L9.50293 2.69531C9.27734 2.4375 8.99805 2.30859 8.67578 2.30859H7.42969C7.15039 2.30859 6.98926 2.55566 7.12891 2.85645L10.8457 11.0742L5.38867 11.6973L3.44434 8.13086C3.30469 7.8623 3.06836 7.74414 2.71387 7.74414H2.25195C1.97266 7.74414 1.79004 7.92676 1.79004 8.20605V18.2822C1.79004 18.5615 1.97266 18.7334 2.25195 18.7334H2.71387C3.06836 18.7334 3.30469 18.6152 3.44434 18.3574L5.38867 14.791L10.8457 15.4141L7.12891 23.6318C6.98926 23.9219 7.15039 24.1797 7.42969 24.1797H8.67578C8.99805 24.1797 9.27734 24.04 9.50293 23.793L16.7217 15.9082C17.0762 15.5107 17.3018 15.4141 17.9033 15.4141H22.2324C24.2842 15.4141 25.9922 14.4902 26.0029 13.2441Z"})}),b=(0,h.IU)("mobileTopbarComments",{viewBox:"0 0 27 27",svg:(0,g.jsx)("path",{d:"M8.74414 24.6816C9.22266 24.6816 9.55469 24.4277 10.1504 23.9004L13.5195 20.9023H19.7891C22.6992 20.9023 24.2617 19.291 24.2617 16.4297V8.94922C24.2617 6.08789 22.6992 4.47656 19.7891 4.47656H7.21094C4.30078 4.47656 2.73828 6.07812 2.73828 8.94922V16.4297C2.73828 19.3008 4.30078 20.9023 7.21094 20.9023H7.67969V23.4414C7.67969 24.1934 8.06055 24.6816 8.74414 24.6816ZM9.14453 22.8945V20.0625C9.14453 19.5352 8.93945 19.3301 8.41211 19.3301H7.21094C5.23828 19.3301 4.31055 18.3242 4.31055 16.4199V8.94922C4.31055 7.04492 5.23828 6.04883 7.21094 6.04883H19.7891C21.752 6.04883 22.6895 7.04492 22.6895 8.94922V16.4199C22.6895 18.3242 21.752 19.3301 19.7891 19.3301H13.4609C12.9141 19.3301 12.6406 19.4082 12.2695 19.7891L9.14453 22.8945ZM8.4707 9.99414H18.4121C18.7246 9.99414 18.9688 9.75 18.9688 9.42773C18.9688 9.125 18.7246 8.87109 18.4121 8.87109H8.4707C8.1582 8.87109 7.9043 9.125 7.9043 9.42773C7.9043 9.75 8.1582 9.99414 8.4707 9.99414ZM8.4707 13.1777H18.4121C18.7246 13.1777 18.9688 12.9238 18.9688 12.6016C18.9688 12.2988 18.7246 12.0449 18.4121 12.0449H8.4707C8.1582 12.0449 7.9043 12.2988 7.9043 12.6016C7.9043 12.9238 8.1582 13.1777 8.4707 13.1777ZM8.4707 16.3516H14.9355C15.248 16.3516 15.4922 16.1074 15.4922 15.7949C15.4922 15.4727 15.248 15.2188 14.9355 15.2188H8.4707C8.1582 15.2188 7.9043 15.4727 7.9043 15.7949C7.9043 16.1074 8.1582 16.3516 8.4707 16.3516Z"})});var v=i(35840),y=i(89101),S=i(21202),x=i(51454),M=i(9291),k=i(31701),C=i(37810),T=i(36610),w=i(83249),I=i(19719),A=i(11302),N=i(75754),R=i(8055),P=i(1357),j=i(87531),B=i(24677),V=i(29974),_=i(98104),Z=i(13447),D=i(39865),O=i(3043),F=i(33767),L=i(10417),E=i(24098),U=i(28020),K=i(43250),q=i(4708),H=i(60709),W=i(46654),G=i(58239),z=i(18514),$=i(48779),Q=i(73819),Y=i(77907),J=i(64719),X=i(81170),ee=i(94841),te=i(57345),ie=i(74948),oe=i(24646),ne=i(38676),se=i(21853),re=i(4023),ae=i(5162),le=i(80444),ce=i(92547),de=i(69454),ue=i(42330),me=i(30496),pe=i(6258),he=i(24666),ge=i(52258),fe=i(66708),be=i(91754),ve=i(64921),ye=i(31945),Se=i(61519),xe=i(73063),Me=i(78140),ke=i(40721),Ce=i(89728),Te=i(53437),we=i(31278),Ie=i(76798),Ae=i(45653),Ne=i(39849),Re=i(10642),Pe=i(81258),je=i(84708),Be=i(82598);function Ve(){const e=(0,o.useCallback)((()=>(0,g.jsx)(Be.Z,{message:(0,g.jsx)(M.FormattedMessage,{defaultMessage:"Any changes to this page will show up here.",id:"updatesModal.currentPageTab.emptyPrompt"}),title:(0,g.jsx)(M.FormattedMessage,{defaultMessage:"No page updates",id:"updatesModal.currentPageTab.emptyPromptTitle"})})),[]),t=(0,r.VK)((()=>le.default.state.currentSpaceStore),[]),i=(0,r.VK)((()=>le.default.state.mainEditorCurrentBlockStore),[]),n=(0,r.VK)((()=>{var e;const t=null==i||null===(e=i.getCollectionPointer())||void 0===e?void 0:e.id,o=null==i?void 0:i.isCollectionView();return null!=i&&i.isDefined()?{id:i.id,isCollection:o,collectionId:t}:void 0}),[i]),s=(0,a.yK)((()=>({getNotifiedFor:{padding:18}})),[]);return t&&n&&i?(0,g.jsxs)("div",{children:[(0,g.jsx)("div",{style:s.getNotifiedFor,children:(0,g.jsx)(Re.GetNotifiedFor,{navigableBlock:i,from:"page_updates",buttonPopupStore:Pe.Z})}),(0,g.jsx)(je.Z,{navigableBlock:i,collectionId:n.collectionId,spaceId:t.id,empty:e,source:"updates_sidebar"},"current-page")]}):null}var _e=i(92955),Ze=i(58493),De=i(13612),Oe=i(99342),Fe=i(99659),Le=i(25906),Ee=i(71039),Ue=i(84920),Ke=i(26399),qe=i(42543),He=i(86467),We=i(7715),Ge=i(94107);const ze=function(e){let{store:t,shouldShowAddTo:i,pageVisitStore:n,presenceStore:a,hideActionButtons:l,isInvalidPage:c,spaceStore:d,collectionViewStore:u,spaceViewStore:m,saveParent:p,isOffline:h,banners:b}=e;const v=(0,s.O7)(),{WindowSizeStore:y,device:S}=v,k=(0,r.VK)((()=>(0,W.IJ)(v,t)),[v,t]),C=(0,o.useMemo)((()=>new ce.Z),[]),T=(0,r.VK)((()=>(t.isLocked()||C.state.justUnlocked)&&t.canEdit()),[t,C]),w=(0,r.VK)((()=>(!k||t.canEditCollection())&&S.isPhone&&(t.isRestricted()||T)),[t,k,S,T]);return(0,g.jsx)(E.Z,{capture:!0,render:e=>(0,g.jsxs)("header",{...e,style:{width:"100%",maxWidth:"100vw",zIndex:x.lI},children:[k?(0,g.jsx)(ct,{store:t,shouldShowAddTo:i}):(0,g.jsx)(bt,{store:t,pageVisitStore:n,presenceStore:a,hideActionButtons:l,isInvalidPage:c,spaceStore:d,collectionViewStore:u,shouldShowAddTo:i,spaceViewStore:m,saveParent:p}),w&&(0,g.jsxs)(be.Z,{styleKey:be.v.White,isMobile:!0,style:{justifyContent:"unset"},children:[(0,g.jsx)(Ze.Z,{store:t,isMobile:!0,lockStore:C},t.id),t.isRestricted()&&(0,g.jsxs)(g.Fragment,{children:[T&&(0,g.jsx)(Se.Z,{vertical:!0,size:10,style:{height:"50%"}}),(0,g.jsx)(We.Z,{style:{marginRight:8},onClick:()=>te.lG(v)})]})]}),h&&(0,g.jsx)(be.Z,{styleKey:be.v.White,isMobile:!0,children:(0,g.jsxs)("div",{style:{display:"flex",alignItems:"center",width:"100%",paddingLeft:y.getSafePaddingLeftCSS(10),paddingRight:y.getSafePaddingRightCSS(14)},children:[f({width:26,marginRight:12}),(0,g.jsx)("div",{children:(0,g.jsx)(M.FormattedMessage,{defaultMessage:"You're offline",id:"topbarMobile.offline.message"})})]})}),(0,g.jsx)(Y.LazyBannersRenderer,{banners:b,isMobile:!0,isInPeekRenderer:!1})]})})};function $e(){const e={menuType:H.og.Modal,title:(0,g.jsx)(M.FormattedMessage,{defaultMessage:"Page Updates",id:"pageUpdatesModal.mobileMenu.title"}),right:(0,g.jsx)(ke.DoneMenuText,{}),onClickRight:()=>me.Z.setState({open:!1}),whiteBackground:!0},t=(0,r.VK)((()=>me.Z.state.open),[]);return(0,g.jsx)(Te.ZP,{open:t,popupType:ye.Z4.SlideUp,alignmentToOrigin:re.v.Start,placementToOrigin:re.u.Right,onDismiss:()=>me.Z.setState({open:!1}),originGap:0,isWideTabletWidth:!0,render:()=>(0,g.jsx)(Me.Z,{...e,children:(0,g.jsx)(Ve,{})}),isFullWidthOnMobile:!0,preventScaleTransition:!0})}function Qe(e){const t=e.getParentStore(),{currentSpaceStore:i}=le.default.state;return t instanceof pe.H2&&i&&t.id===i.id}function Ye(e){let{store:t,spaceViewStore:i,isInvalidPage:o}=e;const n=(0,Q.cR)(t);return o||!i?null:(0,g.jsxs)(g.Fragment,{children:[!n&&(0,g.jsx)(Ke.Z,{store:t,spaceViewStore:i}),(0,g.jsx)(X.Z,{})]})}function Je(e){let{store:t,collectionViewStore:i,shouldShowAddTo:o}=e;return(0,g.jsx)(Y.LazyTopbarMoreButton,{store:t,buttonPopupStore:ge.Z,shouldShowAddTo:o})}function Xe(e){let{store:t,shouldShowAddTo:i}=e;return(0,g.jsx)(Y.LazyTopbarShareButton,{store:t,buttonPopupStore:fe.Z,shouldShowAddTo:i})}function et(e){return(0,ae.Y)("supportsNativeHome")&&e.device.isTablet}function tt(e){const{shouldShowAddTo:t,environment:i}=e,{TabbedRouterStore:o}=i;if(t&&(0,q.kS)(i))return!1;const n=(0,z.NW)(i)||"native"===(0,l.w_)(o.state).type;return!(0,z.__)(i)||n}function it(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2?arguments[2]:void 0;const{mobileNative:o}=e;return{flexGrow:0,marginLeft:null!=o&&o.supportsNativeHomeOnPhone()?t?0:20:2,overflow:"auto",WebkitOverflowScrolling:"touch",marginRight:i?16:8,height:"100%"}}function ot(){const e=(0,s.O7)(),t=(0,r.VK)((()=>(0,oe.Jr)(e)&&ne.sidebarExpandedStore.state),[e]);return(0,g.jsxs)(ve.Z,{mobileFeedback:!0,style:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,height:"100%",width:36,marginLeft:4},onClick:()=>{var t;if(et(e))null===(t=e.mobileNative)||void 0===t||t.toggleNativeHome();else if((0,oe.Jr)(e))ie.setExpand({environment:e,isExpanded:!ne.sidebarExpandedStore.state,from:"topbar_mobile"});else{const{NativeMobileActionBarStore:t}=e,i=t?t.state.menuType:null;"editing"===he.default.state.mode||null!==i?(_.ZH(e),null==t||t.clear(!1),de.Z.onHide((()=>{n.default.afterNextFlush((()=>ie.open({fromElectron:!1})))}))):ie.open({fromElectron:!1})}w.jD(e)},children:[(0,p._)({width:18,height:18}),t?(0,g.jsx)(Ne.Z,{color:Ne.N.Red,style:{position:"absolute",top:9,right:1},count:0}):(0,g.jsx)(_e.Z,{type:e.device.isMobileBrowser?"allSpaces":"otherSpaces",color:Ne.N.Red,style:{position:"absolute",top:9,right:1}})]})}function nt(e,t,i){const{WindowSizeStore:o}=t;let n=`0 1px 0 ${i.regularDividerColor}`;return e&&(0,q.kS)(t)&&(n=void 0),{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",maxWidth:"100vw",height:c.g,marginTop:o.state.paddingTopCSS,paddingLeft:o.getSafePaddingLeftCSS(0),paddingRight:e?o.getSafePaddingRightCSS(0):o.getSafePaddingRightCSS(7),boxShadow:n,background:i.contentBackground,transition:"box-shadow 300ms",WebkitUserSelect:"none",cursor:"pointer"}}function st(){const e=(0,a.Fg)();return(0,u.i)({marginLeft:4,width:10,fill:e.lightTextColor})}function rt(e){B.ZH(e)}function at(e,t){const i=le.default.state.mainEditorCurrentBlockStore,o=ue.ZP.state.lastPageId;if(i){var n;const e=null===(n=t.mobileNative)||void 0===n?void 0:n.supportsNativeHomeOnPhone();e?P.d(t):o?N._c({environment:t,store:pe.G.createChildStore(i,{table:S.iU,id:o}),showMoveTo:!1,saveParent:!1,redirect:e,pageVisitSource:d.tY.BackForward}):R.c4({environment:t,url:y._j.root,redirect:!0}),Z.createAndCommit({userAction:"TopbarMobile.handleCancelQuickAdd",environment:t,perform:e=>{D.y8({environment:t,blocks:[i],transaction:e}),e.postSubmitCallbacks.push((e=>{e||T.dh(t,{analyticsName:"delete",from:"mobile_topbar",block_id:i.id,block_type:"page"})}))}})}}async function lt(e,t,i){await A.$X({environment:i,blocks:[e],moveToContext:"quick_add",onAccept:e=>function(e,t,i){const{currentSpaceStore:o}=le.default.state;o&&t&&(0,G.rq)({currentUserId:i.currentUser.id,spaceId:o.id,value:e}),w.xx(i)}(e,t,i),isAddTo:!0,isDefaultPrivateLocation:Qe(e)})}function ct(e){let{store:t,shouldShowAddTo:i}=e;const n=(0,a.Fg)(),l=(0,s.O7)(),c=(0,s.Fy)(),u=Boolean(l.currentUser.isLoggedIn()||l.publicDomainUserId),m=c.isTablet,p=(0,r.VK)((()=>nt(i,l,n)),[l,i,n]),h=(0,r.VK)((()=>it(l,!0,m)),[l,m]);return(0,g.jsxs)("div",{onClick:()=>rt(l),style:p,className:K.ZHw,children:[l.currentUser.isLoggedIn()&&(0,g.jsxs)(o.Fragment,{children:[(0,g.jsx)(ve.Z,{style:{display:"flex",alignItems:"center",height:"100%",paddingLeft:14,paddingRight:14,fontWeight:C.Z.fontWeight.medium,color:n.regularTextColor,whiteSpace:"nowrap"},mobileFeedback:!0,onClick:()=>function(e){const{currentUserRootStore:t,currentUserSettingsStore:i}=le.default.state;t&&i&&V.L5({environment:e,userRootStore:t,userSettingsStore:i,pageVisitSource:d.tY.SwitchSpace})}(l),children:(0,g.jsx)(M.FormattedMessage,{defaultMessage:"Back",id:"topbarMobile.backButton.label"})}),(0,g.jsx)("div",{style:{height:18,width:1,flexShrink:0,marginRight:6,background:n.darkDividerColor}})]}),(0,g.jsx)(O.l2,{store:t,style:h,maxAncestorCount:1,showCurrentPageControls:!1,ancestorMaxWidth:100,currentPageMaxWidth:220,isMobile:!0}),(0,g.jsx)("div",{style:{flexGrow:1,flexShrink:1}}),(0,g.jsx)(Ce.Z,{onClick:()=>function(e){j.UT({environment:e,analyticsFrom:"public-page-topbar"})}(l),children:(0,v.R)({width:20,height:20})}),(0,g.jsx)(De.Z,{store:t,buttonPopupStore:ge.Z,useEllipsisIcon:!u}),!u&&(0,g.jsx)(Fe.C,{onClick:()=>async function(e){await(0,qe.i3)({environment:e,route:y._j.signup})}(l)})]})}function dt(e){let{store:t,saveParent:i,shouldShowAddTo:o}=e;const n=(0,a.Fg)(),l=(0,s.O7)(),c=(0,r.VK)((()=>t.getParentStore()),[t]),d=(0,r.VK)((()=>Qe(t)),[t]),u=(0,r.VK)((()=>t instanceof pe.H2?(0,$.Wd)(l,t):t.getIcon()),[t,l]),m=(0,r.VK)((()=>(null==c?void 0:c.table)===S.iU&&c.isEmptyPage()),[c]),p=(0,r.VK)((()=>c instanceof pe.H2?(0,$.rn)(l,c):void 0),[l,c]),h=(0,r.VK)((()=>(0,U.B7)(l)),[l]),f=(0,r.VK)((()=>function(e){const{shouldShowAddTo:t,environment:i}=e;let o=0;return o=et(i)?8:tt({shouldShowAddTo:t,environment:i})?6:16,{display:"flex",alignItems:"center",paddingLeft:o,paddingRight:12,fontSize:C.Z.fontSize.UIRegular.mobile,lineHeight:C.Z.lineHeight.UIRegular.mobile,whiteSpace:"nowrap",minWidth:0}}({shouldShowAddTo:o,environment:l})),[o,l]);if(c instanceof pe.T5||c instanceof pe.zq||c instanceof pe.Vf)return null;if(c){if(d){const e=n.mediumTextColor;return(0,g.jsxs)(ve.Z,{mobileFeedback:!0,style:f,onClick:()=>lt(t,i,l),children:[(0,g.jsx)(M.FormattedMessage,{defaultMessage:"<mediumcolor>Add to</mediumcolor>{userAvatar}<mediumweight>Private pages</mediumweight>",id:"topbarMobile.addToPrivateSectionButton.label",values:{mediumcolor:t=>(0,g.jsx)("span",{style:{color:e,marginRight:8},children:t}),mediumweight:e=>(0,g.jsx)("span",{style:{fontWeight:C.Z.fontWeight.medium,marginLeft:4},children:e}),userAvatar:(0,g.jsx)(Ae.Z,{size:22,avatarShouldShowShadow:!0,userStore:h})}}),(0,g.jsx)(st,{})]})}return(0,g.jsxs)(ve.Z,{mobileFeedback:!0,style:f,onClick:()=>lt(t,i,l),children:[(0,g.jsxs)("span",{style:{color:n.mediumTextColor},children:[(0,g.jsx)(M.FormattedMessage,{defaultMessage:"Add to",id:"topbarMobile.addToPageOrWorkspaceSectionButton.label"})," "]}),(0,g.jsx)(we.Z,{disabled:!0,icon:u,isEmptyPage:m,title:p,size:24,style:{marginLeft:8,marginRight:4}}),(0,g.jsx)(Ie.Z,{style:{fontWeight:C.Z.fontWeight.semibold},store:c}),(0,g.jsx)(st,{})]})}return null}function ut(){const e=(0,s.O7)();return(0,g.jsx)(ve.Z,{mobileFeedback:!0,style:{display:"flex",alignItems:"center",height:"100%",paddingLeft:16,paddingRight:16,fontWeight:C.Z.fontWeight.medium,color:k.ZP.blue},onClick:t=>at(0,e),children:(0,g.jsx)(M.FormattedMessage,{defaultMessage:"Cancel",id:"topbarMobile.cancelQuickAddButton.label"})})}function mt(){const e=(0,s.O7)(),t=(0,M.useIntl)(),i=(0,a.yK)((e=>({iconButton:{background:e.tint.regular,marginRight:16,borderRadius:17,width:34,height:34}})),[]);return(0,g.jsx)(xe.Z,{icon:e=>(0,m.U)({width:20,height:20}),style:i.iconButton,isDarkIconColor:!0,onClick:t=>at(0,e),ariaLabel:t.formatMessage({defaultMessage:"Close",id:"topbarMobile.closeButton.label"})})}function pt(){const e=(0,s.O7)(),t=(0,a.yK)((e=>({doneButton:{display:"flex",alignItems:"center",height:34,paddingLeft:12,paddingRight:12,marginLeft:4,marginRight:8,fontWeight:C.Z.fontWeight.medium,color:e.text.primary,background:e.tint.regular,borderRadius:17}})),[]);return(0,g.jsx)(ve.Z,{mobileFeedback:!0,style:t.doneButton,onClick:t=>function(e,t){const i=le.default.state.mainEditorCurrentBlockStore,o=ue.ZP.state.lastPageId;if(i){var n;const e=null===(n=t.mobileNative)||void 0===n?void 0:n.supportsNativeHomeOnPhone();e?P.d(t):o?N._c({environment:t,store:pe.G.createChildStore(i,{table:S.iU,id:o}),showMoveTo:!1,saveParent:!1,redirect:e,pageVisitSource:d.tY.BackForward}):R.c4({environment:t,url:y._j.root,redirect:!0})}}(0,e),children:(0,g.jsx)(M.FormattedMessage,{defaultMessage:"Done",id:"topbarMobile.doneQuickAddButton.label"})})}function ht(e){let{showingHistoryButtons:t=!0,shouldShowAddTo:i,store:o,saveParent:n}=e;const a=(0,s.O7)(),l=(0,s.Fy)().isTablet,c=(0,r.VK)((()=>it(a,t,l)),[a,l,t]),d=(0,r.VK)((()=>(0,q.kS)(a)),[a]);return i?d?null:(0,g.jsx)(dt,{store:o,saveParent:n,shouldShowAddTo:i}):(0,g.jsx)(O.l2,{store:o,style:c,maxAncestorCount:l?2:1,showCurrentPageControls:!1,ancestorMaxWidth:l?160:100,currentPageMaxWidth:l?240:220,isMobile:!0})}function gt(e){let{hasUnreadComments:t}=e;const i=(0,r.VK)((()=>se.Z.state.open),[]),[n,s]=(0,o.useState)(Date.now());return(0,o.useEffect)((()=>{i&&s(Date.now())}),[i]),(0,g.jsx)(ye.ZP,{buttonPopupStore:se.Z,popupType:ye.Z4.SlideUp,alignmentToOrigin:re.v.Start,placementToOrigin:re.u.Right,originGap:0,stopClickPropagation:!0,isWideTabletWidth:!0,render:e=>(0,g.jsx)(Oe.J,{timeViewed:n,location:"popup",onMobileClose:()=>e.close()}),isFullWidthOnMobile:!0,preventScaleTransition:!0,renderOrigin:e=>(0,g.jsxs)("div",{style:{position:"relative",height:"100%"},children:[(0,g.jsx)(xe.Z,{icon:b,iconStyle:{width:26,height:26,fill:"inherit"},isDarkIconColor:!0,style:{marginLeft:6,marginRight:6,height:"100%"},mobileFeedback:!0,...e}),t&&(0,g.jsx)("div",{style:{position:"absolute",top:9,right:5,height:8,width:8,borderRadius:4,background:k.ZP.red}})]})})}function ft(e){let{store:t,spaceStore:i,isInvalidPage:n,collectionViewStore:a,shouldShowAddTo:l,mobileHorizon1QuickCaptureEnabled:c}=e;const d=(0,s.O7)(),{value:u}=(0,Y.useDependency)(F.Av),m=(0,r.VK)((()=>{if(!u)return!1;const{discussionViewActions:e,discussionHelpers:{getAndSortCommentStoresByTime:i}}=u;return(0,L.getDiscussions)(t).some((t=>!t.getResolved()&&i(t).some((i=>e.isCommentUnread({discussionStore:t,commentStore:i})))))}),[u,t]),p=(0,r.VK)((()=>Boolean(i&&!i.canEdit())),[i]),h=(0,r.VK)((()=>t.canEdit()),[t]),f=(0,Le.UP)({isSpaceGuest:p,canEditPage:h}),b=(0,r.VK)((()=>(0,Le.W2)({canEditPage:h,device:d.device})),[d,h]),v=(0,r.VK)((()=>l&&(0,q.kS)(d)),[d,l]);return n?null:v?(0,g.jsxs)(o.Fragment,{children:[f&&(0,g.jsx)(Xe,{store:t,shouldShowAddTo:l}),(0,g.jsx)(Je,{store:t,collectionViewStore:a,shouldShowAddTo:l}),(0,g.jsx)(pt,{})]}):(0,g.jsxs)(o.Fragment,{children:[(0,g.jsx)($e,{}),f&&(0,g.jsx)(Xe,{store:t,shouldShowAddTo:l}),(0,g.jsx)(gt,{hasUnreadComments:m}),b&&(0,g.jsx)(Ge.l,{onClick:()=>function(e){me.Z.setState({open:!0}),I.gM(e)}(d)}),(0,g.jsx)(Je,{store:t,collectionViewStore:a,shouldShowAddTo:l})]})}function bt(e){let{store:t,pageVisitStore:i,presenceStore:o,hideActionButtons:n,isInvalidPage:l,spaceStore:c,collectionViewStore:d,shouldShowAddTo:u,spaceViewStore:m,saveParent:p}=e;const h=(0,a.Fg)(),f=(0,s.O7)(),{isTablet:b}=(0,s.Fy)(),v=(0,r.VK)((()=>tt({shouldShowAddTo:u,environment:f})),[u,f]),y=(0,r.VK)((()=>(0,ee.WE)(t)),[t]),S=(0,r.VK)((()=>t.canEditCollection()),[t]),x=(0,r.VK)((()=>(0,q.kS)(f)),[f]),M=(0,r.VK)((()=>t.isRestricted()),[t]),k=(0,r.VK)((()=>t.canEdit()),[t]),C=(0,r.VK)((()=>function(e,t){return e&&function(e){return e.isEmptyTitle()&&e.isEmptyPage()}(t)}(u,t)),[u,t]),T=(0,r.VK)((()=>(0,U.qG)(t.id)),[t]);let w=(0,g.jsx)(ft,{store:t,spaceStore:c,isInvalidPage:l,collectionViewStore:d,shouldShowAddTo:u,mobileHorizon1QuickCaptureEnabled:x});C?w=x?(0,g.jsx)(mt,{}):(0,g.jsx)(ut,{}):T&&(w=(0,g.jsx)(Ye,{store:t,spaceViewStore:m,isInvalidPage:l}));const I=y?(0,g.jsx)(J.E,{store:t,isInvalidPage:Boolean(l)}):(0,g.jsxs)(g.Fragment,{children:[M&&b&&(0,g.jsx)(We.Z,{style:{marginRight:8},onClick:()=>te.lG(f)}),b&&k&&i&&o&&(0,g.jsx)(He.Z,{rootStore:t,pageVisitStore:i,presenceStore:o}),w]}),A=(0,r.VK)((()=>nt(u,f,h)),[f,u,h]),N=(0,r.VK)((()=>function(e){return et(e)||!(0,ae.Y)("supportsNativeHome")}(f)),[f]);return(0,g.jsxs)("div",{onClick:()=>rt(f),style:A,className:K.ZHw,children:[N&&(0,g.jsx)(ot,{}),v&&(0,g.jsx)(Ee.Z,{supportsNativeHomeTabPhone:!b&&(0,ae.Y)("supportsNativeHome")}),!l&&(0,g.jsx)(ht,{shouldShowAddTo:u,store:t,saveParent:p,showingHistoryButtons:v}),S&&b&&(0,g.jsx)(Ze.Z,{store:t,isMobile:!1},t.id),(0,g.jsx)(Ue.Z,{}),!n&&I]})}},40863:(e,t,i)=>{i.d(t,{$G:()=>M,BO:()=>b,Ft:()=>m,Lh:()=>x,YG:()=>p,du:()=>f,y$:()=>g});i(57658);var o=i(30120),n=i(30823),s=i(40506),r=i(53877),a=i(42875),l=i(59753),c=i(9291),d=i(53965),u=i(28020);function m(e){const{collectionContextStore:t}=e,i=t.collectionViewStore();if(!i)return;const o=t.normalizedSchemaStore.state,n=i.getQuery(o);if(!n||!n.calendar_by)return;const s=t.dateRangeStart.state,l=t.dateRangeEnd.state,c=(0,r.hT)(s,(0,a.r)()),d=(0,r.hT)(l,(0,a.r)());return h({calendarBy:n.calendar_by,dateRangeStartDate:c,dateRangeEndDate:d})}function p(e){const{collectionContextStore:t,startOfDay:i}=e,n=t.collectionViewStore();if(!n)return;const s=t.normalizedSchemaStore.state,l=n.getQuery(s);if(!l||!l.calendar_by)return;const c=o.ou.fromMillis(i).endOf("day").valueOf(),d=(0,r.hT)(i,(0,a.r)()),u=(0,r.hT)(c,(0,a.r)());return h({calendarBy:l.calendar_by,dateRangeStartDate:d,dateRangeEndDate:u})}function h(e){const{dateRangeStartDate:t,dateRangeEndDate:i,calendarBy:o}=e;return{type:"results",filter:{operator:"and",filters:[{property:o,filter:{operator:"date_is_on_or_after",use_end:!0,value:{type:"exact",value:t}}},{property:o,filter:{operator:"date_is_on_or_before",value:{type:"exact",value:i}}}]},limit:5e3}}function g(e){var t;const{collectionContextStore:i,results:o,getRecordValue:n,intl:l}=e,c=i.collectionViewStore(),m=i.normalizedQueryStore.state,p=i.normalizedSchemaStore.state,h=m?m.calendar_by:void 0,g=i.dateRangeStart.state,y=i.dateRangeEnd.state,S=(null===(t=i.collectionViewStore())||void 0===t?void 0:t.getFormat().calendar_show_weekends)??!0,x=u.AK.state,M=(0,a.r)(),k=i.getCurrentUserId();if(!(c&&m&&h&&p))return;const C=d.oA(o.map((e=>b({blockStore:e,calendarBy:h,schema:p,getRecordValue:n,userId:k,intl:l})))),T={};o.forEach(((e,t)=>{T[e.id]=t}));0===(m.sort||[]).length&&C.sort(((e,t)=>{const i=e.start.valueOf(),o=t.start.valueOf();if(i===o){return T[e.id]-T[t.id]}return i-o}));const w=S?(0,r.em)(g,x,M):(0,r.Ty)(g,x,M),I=S?(0,r.gQ)(y,x,M):(0,r.Kw)(y,x,M);let A=w;const N=[];do{const e=S?(0,r.gQ)(A.valueOf(),x,M):(0,r.Kw)(A.valueOf(),x,M),t={},i=C.filter((t=>(0,s.b8)(A.valueOf(),e.valueOf(),t.start.valueOf(),t.end?t.end.valueOf():void 0))).map((i=>{const{id:o,start:n,end:s,includeTime:r,timeZone:a}=i,{startColumn:l,columnCount:c}=f({startUnixTimestampMS:n.valueOf(),endUnixTimestampMS:s?s.valueOf():void 0,startOfWeekUnixTimestampMS:A.valueOf(),endOfWeekUnixTimestampMS:e.valueOf()}),d=v(l,c,t);return{id:o,start:n.valueOf(),end:s?s.valueOf():void 0,row:d,includeTime:r,timeZone:a}}));N.push({start:A.valueOf(),end:e.valueOf(),items:i}),A=S?(0,r.em)(A.plus({week:1}).plus({hour:25}).valueOf(),x,M):(0,r.Ty)(A.plus({week:1}).plus({hour:25}).valueOf(),x,M)}while(A<I);return N}function f(e){const t=o.ou.fromMillis(e.startUnixTimestampMS),i=e.endUnixTimestampMS?o.ou.fromMillis(e.endUnixTimestampMS):void 0,n=o.ou.fromMillis(e.startOfWeekUnixTimestampMS),s=o.ou.fromMillis(e.endOfWeekUnixTimestampMS),r=t.startOf("day"),a=o.ou.max(n,r),l=Math.ceil(a.diff(n,"days").get("days"));let c=1;if(i){const e=i.endOf("day"),t=o.ou.min(s,e);c=Math.ceil(t.diff(a,"days").get("days"))}return{start:t,end:i,startOfWeek:n,endOfWeek:s,startColumn:l,columnCount:c}}function b(e){const{blockStore:t,calendarBy:i,schema:o,getRecordValue:s,intl:c,userId:d}=e,u=t.getAssociatedCollectionStore(),m=t.getModel();if(!m)return;const p=(0,n.FT)({property:i,schema:o,block:m,getRecordModel:l.om.fromGetRecordValueFn(s),propertyMapping:null==u?void 0:u.getPropertyMapping(),collectionRequestContext:{userId:d,userTimeZone:(0,a.r)(),depth:0,intl:c,visitedProperties:new Set,resultCache:new Map}}).next().value;if("date"!==p.type)return;const h=p.value,g=h&&(0,r.NK)(h,(0,a.r)());if(!h||!g)return;return{id:m.id,start:g.start,end:g.end,includeTime:"datetime"===h.type||"datetimerange"===h.type,timeZone:"datetime"===h.type||"datetimerange"===h.type?h.time_zone:void 0}}function v(e,t,i){let o=0;for(;;){let n=!1;for(let s=0;s<t;s++)y(i,e+s,o)&&(n=!0);if(!n)break;o++}for(let n=0;n<t;n++)S(i,e+n,o);return o}function y(e,t,i){return Boolean(e[i]&&e[i][t])}function S(e,t,i){e[i]||(e[i]={}),e[i][t]=!0}const x=(0,c.defineMessages)({week:{defaultMessage:"Week",id:"calendar.viewRanges.week"},month:{defaultMessage:"Month",id:"calendar.viewRanges.month"}});function M(e){const t=(null==e?void 0:e.attendees)||[];return e.hasParticipants&&t.filter((e=>!e.self&&!e.resource)).every((e=>"declined"===e.responseStatus))}},30439:(e,t,i)=>{i.r(t),i.d(t,{TopLevelMobileComponents:()=>b});i(67294);var o=i(480),n=i(86628),s=i(30664),r=i(20423),a=i(61671),l=i(69157),c=i(23586),d=i(43250),u=i(71119),m=i(75538),p=i(27177),h=i(80444),g=i(72087),f=i(85893);function b(){const e=(0,o.O7)(),t=(0,n.qz)(void 0,g.Z),i=(0,n.VK)((()=>{const e=m.default.state;return e.isOnboarding&&"workspace_setup"===e.stage}),[]),b=(0,n.VK)((()=>h.default.state.currentSpaceStore),[]),v=(0,n.VK)((()=>h.default.state.mainEditorCurrentBlockStore),[]),y=(0,n.VK)((()=>b&&b.canEdit()),[b]);return i?(0,f.jsx)(f.Fragment,{}):(0,f.jsxs)("div",{className:d.alX,children:[(0,f.jsx)(p.Z,{createType:"add-account"}),b&&(0,f.jsx)(r.Z,{store:b}),(0,f.jsx)(c.Z,{request:{},render:()=>null,requestStore:t,performRequest:()=>(0,u.pu)(e)}),(0,f.jsx)(a.Z,{passwordRequestStore:t}),y&&v&&(0,f.jsx)(l.Z,{store:v,isMobile:!0}),(0,f.jsx)(s.Z,{})]})}},57345:(e,t,i)=>{i.d(t,{Cv:()=>T,a6:()=>C,lG:()=>k,qg:()=>A,zd:()=>I});i(67294);var o=i(33728),n=i(68626),s=i(72141),r=i(9291),a=i(52629),l=i(7032),c=i(36610),d=i(47307),u=i(76464),m=i(64964),p=i(19306),h=i(26907),g=i(46654),f=i(18245),b=i(88923),v=i(99332),y=i(29677),S=i(66708),x=i(28578),M=i(85893);function k(e){b.default.state.open?v.Z.setState({...v.Z.state,open:!0}):S.Z.setState({...S.Z.state,open:!0}),c.DB(e,{share_menu_session_id:x.ZP.state.sessionId})}function C(e){b.default.state.open?v.Z.setState({...v.Z.state,open:!1}):S.Z.setState({...S.Z.state,open:!1}),c.Rb(e,{share_menu_session_id:x.ZP.state.sessionId}),x.ZP.reset()}function T(e){const{success:t,inviteTargets:i,requestedUserEmails:o}=e;if(0!==i.length){if(!t||0!==(null==o?void 0:o.length))return t&&o.length>0?o.length===i.length?void m.oV({label:(0,M.jsx)(r.FormattedMessage,{id:"shareMenu.inviteSuccess.snackbarMessage.requestedUsersOnly",defaultMessage:"Sent request to invite {users} to this page",values:{users:w(i)}})}):void m.oV({label:(0,M.jsx)(r.FormattedMessage,{id:"shareMenu.inviteSuccess.snackbarMessage.requestedAndInvitedUsers",defaultMessage:"Invited {users} and requested inviting {numberOfRequestedUsers, plural, one {{numberOfRequestedUsers} guest} other {{numberOfRequestedUsers} guests}}",values:{users:w(i.filter((e=>!(0,y.fZ)(e)&&!(0,y.cl)(e)||!o.includes(e.value.email)))),numberOfRequestedUsers:o.length}})}):void m.oV({label:(0,M.jsx)(r.FormattedMessage,{id:"shareMenu.inviteFailure.snackbarMessage",defaultMessage:"Failed to invite {users}",values:{users:w(i)}})});m.oV({label:(0,M.jsx)(r.FormattedMessage,{id:"shareMenu.inviteSuccess.snackbarMessage",defaultMessage:"Successfully invited {users}",values:{users:w(i)}})})}}function w(e){return(0,p.W)(e.map((e=>"group"===e.type?e.value.name??"group":"invalidUser"===e.type?e.value.text:e.value.email)))}async function I(e){const{inviteTargetsStore:t}=e,i=(0,M.jsx)(r.FormattedMessage,{id:"shareMenu.closeInviteDialog.confirmationMessage",defaultMessage:"Your changes have not been saved. Discard changes?"}),o=(0,M.jsx)(r.FormattedMessage,{id:"shareMenu.closeInviteDialog.confirmationButton.label",defaultMessage:"Yes"}),n=(0,M.jsx)(r.FormattedMessage,{id:"shareMenu.closeInviteDialog.cancelButton.label",defaultMessage:"Cancel"});if(t.state.inviteTargets.length>0){return(await d.confirmUserActionV2({message:i,acceptLabel:o,cancelLabel:n})).accept}return!1}async function A(e){const t=f.default.mark("share_menu.invite_user_lag"),{environment:i,blockStore:r,inviteTargetsStore:c,sudoModeStore:d,onInviteClick:m,onInviteComplete:p,inviteOrigin:b,role:v,emailMessage:y,flowId:S}=e;let x={success:!1,requestedUserEmails:[]};try{x=await async function(e){const{environment:t,blockStore:i,sudoModeStore:n,inviteTargetsStore:r,role:a,inviteOrigin:c,emailMessage:d,onInviteStart:m}=e,p=e.flowId||(0,l.ZP)();if(!(0,s.iC)(a))return{success:!1,requestedUserEmails:[]};const{tokenQuery:f,inviteTargets:b}=r.state;if((0,o.oH)(f.trim())&&0===b.length){const e={type:"newUser",value:{email:f.trim()},source:"email"};h.H({target:e,inviteTargetsStore:r})||r.setState({inviteTargets:[...r.state.inviteTargets,e],tokenQuery:""})}const v=await g.mU(i,h.B({inviteTargetsStore:r}));null==m||m();const y=await u.n_({environment:t,store:i,sudoModeStore:n,inviteTargets:v,inviteRole:a,isOnboarding:!1,invite:{inviteFlowId:p,inviteMessage:d,inviteOrigin:c}});return{success:y.success,requestedUserEmails:y.success?Object.keys(y.requestedUsers):[]}}({environment:i,blockStore:r,sudoModeStore:d,inviteTargetsStore:c,role:v,emailMessage:y,inviteOrigin:b,onInviteStart:m,flowId:S})}catch(M){n.log({level:"error",from:"shareMenuActions",type:"handleInviteClick",error:(0,a.Ui)(M)})}finally{null==p||p(x.success,x.requestedUserEmails)}f.default.measure(t,{environment:i})}},67950:(e,t,i)=>{i.d(t,{B:()=>n,Z:()=>r});var o=i(49085);const n={INVALID_DATE:"Invalid date",INVALID_RANGE:"Invalid range"};class s extends o.default{getInitialState(){return{edited:!1,temporary:"",error:void 0}}}const r=s},76150:(e,t,i)=>{i.d(t,{Hv:()=>n,ZP:()=>a,pd:()=>s});var o=i(49085);let n=function(e){return e.StartDate="startDate",e.StartTime="startTime",e.EndDate="endDate",e.EndTime="endTime",e}({}),s=function(e){return e.InvalidDate="Invalid date",e.InvalidTime="Invalid time",e.InvalidRange="Invalid range",e}({});class r extends o.default{getInitialState(){return{focus:n.StartDate,inputIsFocused:!1,inputTemporaryValue:{startDate:void 0,startTime:void 0,endDate:void 0,endTime:void 0},error:{startDate:void 0,startTime:void 0,endDate:void 0,endTime:void 0}}}}const a=r},13854:(e,t,i)=>{i.d(t,{QJ:()=>s,ZP:()=>l,yO:()=>r});var o=i(49085),n=i(76150);const s={[n.Hv.StartDate]:"starting",[n.Hv.StartTime]:"starting",[n.Hv.EndDate]:"ending",[n.Hv.EndTime]:"ending"},r={starting:n.Hv.StartDate,ending:n.Hv.EndDate};class a extends o.default{getInitialState(){return{isOpen:!1,focus:n.Hv.StartDate,temporaryDateRange:{starting:void 0,ending:void 0},displayMonth:void 0,hovered:void 0,showTime:!1}}getFocus(){return this.state.focus}toggleShowTime(){this.setState({...this.state,showTime:!this.state.showTime})}clearTemporaryDateRange(){this.setState({...this.state,temporaryDateRange:{starting:void 0,ending:void 0}})}}const l=a},67940:(e,t,i)=>{i.d(t,{Z:()=>r});var o=i(49085),n=i(7032);class s extends o.default{getInitialState(){return{flowId:void 0}}getOrCreateFlowId(){const e=this.state.flowId||(0,n.ZP)();return this.state.flowId&&this.setState({flowId:e}),e}}const r=new s},53610:(e,t,i)=>{i.d(t,{Z:()=>o});const o=new(i(61766).Z)},66881:(e,t,i)=>{i.d(t,{g:()=>o});const o=i(49085).default.createValue({shouldReset:!1})},72653:(e,t,i)=>{i.d(t,{Z:()=>a});var o=i(14577),n=i(5162),s=i(69454),r=i(55320);const a=new o.Z((()=>{const{phase:e}=s.Z.state;if(r.default.state.open)return!0;return(0,n.Y)("supportsFixedSizeWebView")&&!s.Z.state.shouldResizeWebView||e===s.i.hidden||e===s.i.willHide}),{debugName:"MobileBottomBarStore"})},41558:(e,t,i)=>{i.d(t,{Z:()=>s});var o=i(49085);class n extends o.default{getInitialState(){return{isOpen:!1,focus:"starting",temporaryDateRange:{starting:void 0,ending:void 0},displayMonth:void 0,hovered:void 0,dateFilterType:"lastEditedTime"}}getFocus(){return this.state.focus}clearTemporaryDateRange(){this.setState({...this.state,temporaryDateRange:{starting:void 0,ending:void 0}})}}const s=n},55061:(e,t,i)=>{i.d(t,{$2:()=>ce,Bg:()=>ae,P6:()=>Z,Qs:()=>F,W9:()=>ne,Wy:()=>ie,XW:()=>D,_2:()=>X,_u:()=>oe,c_:()=>se,gt:()=>J,iR:()=>G,jQ:()=>le,kU:()=>ee,oP:()=>E,pF:()=>re,qJ:()=>_,rn:()=>H,sn:()=>U,tA:()=>$,v4:()=>te,xS:()=>O});i(57658);var o=i(9291),n=i(53965),s=i(1898),r=i(19584),a=i(66897),l=i(53196),c=i(41432),d=i(15070),u=i(35011),m=i(99036),p=i(80951),h=i(40506),g=i(7057),f=i(6695),b=i(38297),v=i(22808),y=i(59753),S=i(87479),x=i(82883),M=i(58129),k=i(98963),C=i(21202),T=i(77420),w=i(6287),I=i(75246),A=i(29369),N=i(19889),R=i(99108),P=i(70203),j=i(7928),B=i(70693),V=i(4308);const _=(0,o.defineMessages)({defaultPluralizedUserNames:{defaultMessage:"Someone",id:"pushNotification.pluralizedUserNames.defaultLabel"},defaultPermissionGroupName:{defaultMessage:"Deleted group",id:"pushNotification.permissionGroupName.defaultLabel"},defaultPageName:{defaultMessage:"a Notion page",id:"pushNotification.pageName.defaultLabel"},untitledPermissionGroupName:{defaultMessage:"Untitled group",id:"pushNotification.permissionGroupName.untitledLabel"},userEditedPermissionGroup:{defaultMessage:"{userName} edited {permissionGroupName}",id:"pushNotification.userEditedTarget.label"},userDeletedPermissionGroup:{defaultMessage:"{userName} deleted {permissionGroupName}",id:"pushNotification.userDeletedTarget.label"},userCreatedPermissionGroup:{defaultMessage:"{userName} created {permissionGroupName}",id:"pushNotification.userCreatedTarget.label"},unknownAuthor:{defaultMessage:"Unknown author",id:"pushNotification.authorPhrase.unknown"},untitledSpaceName:{defaultMessage:"Untitled",id:"pushNotification.untitledSpaceName.label"},untitledTeamName:{defaultMessage:"Untitled",id:"pushNotification.untitledTeamName.label"},untitledCollectionName:{defaultMessage:"Untitled",id:"pushNotification.untitledCollectionName.placeholder"},untitledBlockTitle:{defaultMessage:"Untitled",id:"pushNotification.untitledBlockTitle.placeholder"},twoUserNames:{defaultMessage:"{firstAuthor} and {secondAuthor}",id:"pushNotification.twoUserNames.label"},threePlusUserNames:{defaultMessage:"{othersCount, plural, one {{firstAuthor} and {othersCount} other} other {{firstAuthor} and {othersCount} others}}",id:"pushNotification.threePlusUserNames.label"},editorPermissionLabel:{defaultMessage:"Full access",id:"pushNotifications.editorPermissionLevel.label"},readerPermissionLabel:{defaultMessage:"Read only",id:"pushNotifications.readerPermissionLevel.label"},editOnlyPermissionLabel:{defaultMessage:"Edit only",id:"pushNotifications.editOnlyPermissionLevel.label"},editPermissionLabel:{defaultMessage:"Edit",id:"pushNotifications.editPermissionLevel.label"},commentOnlyPermissionLabel:{defaultMessage:"Comment only",id:"pushNotifications.commentOnlyPermissionLevel.label"},noAccessPermissionLabel:{defaultMessage:"No access",id:"pushNotifications.noAccessPermissionLevel.label"},publicPermissionRoleLabel:{defaultMessage:"Public ({permissionLevel})",id:"pushNotifications.publicPermissions.label"},userNameWithRole:{defaultMessage:"{userName} ({permissionLevel})",id:"pushNotifications.userPermissionsWithRole.label"},botNameWithRole:{defaultMessage:"{botName} ({permissionLevel})",id:"pushNotifications.botPermissionsWithRole.label"},spaceNameWithRole:{defaultMessage:"{spaceName} ({permissionLevel})",id:"pushNotifications.spacePermissionsWithRole.label"},imageInPushNotification:{defaultMessage:"{imageEmoji} Image",id:"pushNotification.imageInPushNotification.placeholder"},topLevelBlockCreated:{defaultMessage:"{userName} created {targetName} in {spaceName}",id:"pushNotification.userCreatedBlockInSpace.message"},topLevelBlockDeleted:{defaultMessage:"{userName} deleted {targetName} in {spaceName}",id:"pushNotification.userDeletedBlockInSpace.message"},collectionRowCreated:{defaultMessage:"{userName} created {targetName} in {collectionName}",id:"pushNotification.userCreatedRowInCollection.message"},collectionRowDeleted:{defaultMessage:"{userName} deleted {targetName} in {collectionName}",id:"pushNotification.userDeletedRowInCollection.message"},emptyBlockEditedProperty:{defaultMessage:"Empty",id:"pushNotification.emptyBlockPropertyValueEdited.placeholderLabel"},propertyNameAndValueEdited:{defaultMessage:"{propertyName} ({propertyValue})",id:"pushNotification.propertyNameWithEditedValue.notificationSubject"},propertyNameAndValueNotificationBody:{defaultMessage:"{propertyName} ({propertyValue})",id:"pushNotification.propertyNameWithEditedValue.notificationBody"},blockDeletedEditBody:{defaultMessage:"[Deleted] {renderedBlock}",id:"pushNotification.deletedBlock.notificationContents"},blockEditedNotification:{defaultMessage:"{userName} edited {blockName}",id:"pushNotification.blockEdited.notificationSubject"},blockPropertyEditedNotification:{defaultMessage:"{userName} edited {blockName}",id:"pushNotification.blockPropertyEdited.notificationSubject"},mobileBlockPropertyEditedNotification:{defaultMessage:"{userName} edited",id:"pushNotification.mobileBlockPropertyEdited.notificationSubject"},userEditedPermissionsFor:{defaultMessage:"{userName} edited permissions for {targetName}",id:"pushNotifications.permissionsEditedForPageOrSpace.notificationSubject"},userMentionedIn:{defaultMessage:"{userName} mentioned you in {targetName}",id:"pushNotifications.userMentionedInPage.notificationSubject"},mobileUserMentionedIn:{defaultMessage:"{userName} mentioned you",id:"pushNotifications.mobileUserMentionedInPage.notificationSubject"},permissionGroupMentionedIn:{defaultMessage:"{userName} mentioned {groupName} in {targetName}",id:"pushNotifications.groupMentionedInPage.notificationSubject"},userDeletedComment:{defaultMessage:"[Deleted] {commentText}",id:"pushNotifications.userDeletedCommentText.notificationContents"},userCommentedSubject:{defaultMessage:"{userName} commented in {targetName}",id:"pushNotifications.userCommentedSubject.notificationSubject"},mobileUserCommentedSubject:{defaultMessage:"{userName} commented",id:"pushNotifications.mobileUserCommentedSubject.notificationSubject"},userAddedToSpace:{defaultMessage:"{userName} added you to {workspaceName}",id:"pushNotifications.userAddedToSpace.notificationSubject"},userInvitedToSpace:{defaultMessage:"{userName} invited you to {workspaceName}",id:"pushNotifications.userInvitedToSpace.notificationSubject"},userInvitedToSpaceByBot:{defaultMessage:"You have been invited to {workspaceName}",id:"pushNotifications.userInvitedToSpaceByBot.notificationSubject"},userEditedCollectionSubject:{defaultMessage:"{userName} edited {collectionName}",id:"pushNotifications.collectionEdited.notificationSubject"},userCreatedCollectionSubject:{defaultMessage:"{userName} created {collectionName}",id:"pushNotifications.collectionCreated.notificationSubject"},collectionDescriptionDeleted:{defaultMessage:"{userName} deleted the description for {collectionName}",id:"pushNotifications.collectionDescriptionDeleted.notificationSubject"},collectionDescriptionCreated:{defaultMessage:"{userName} added a description for {collectionName}",id:"pushNotifications.collectionDescriptionAdded.notificationSubject"},untitledCollectionView:{defaultMessage:"Untitled",id:"pushNotifications.untitledCollection.label"},collectionViewEditedSubject:{defaultMessage:"{userName} edited view {collectionViewName} in {collectionName}",id:"pushNotifications.collectionViewEdited.notificationSubject"},collectionPropertyEditedUnknown:{defaultMessage:"Unknown",id:"pushNotifications.unknownCollectionPropertyName.label"},collectionPropertyEditedSubject:{defaultMessage:"{userName} edited property {propertyType} in {collectionName}",id:"pushNotifications.collectionPropertyEdited.subject"},reminderSubject:{defaultMessage:"Reminder in {pageName}",id:"pushNotifications.reminderChanged.subject"},pageLockedActivity:{defaultMessage:"{userName} locked {pageName}",id:"pushNotifications.pageLocked.subject"},pageUnlockedActivity:{defaultMessage:"{userName} unlocked {pageName}",id:"pushNotifications.pageUnlocked.subject"},emailEditedActivity:{defaultMessage:"{userName} edited their account settings",id:"pushNotifications.emailAccountSettingsEdited.subject"},emptyPropertyBody:{defaultMessage:"Empty",id:"pushNotifications.emptyPropertyValueInCollection.label"},unknownRelationValueChange:{defaultMessage:"Unknown",id:"pushNotifications.unknownRelationPropertyChanged.label"},unknownAuthorInPropertySchemaChange:{defaultMessage:"Unknown author",id:"pushNotifications.unknownAuthorUpdatedProperty.label"},accessRequestedSubject:{defaultMessage:"{userName} requested access to {pageName}",id:"pushNotifications.accessRequested.subject"},editAccessRequestedSubject:{defaultMessage:"{userName} requested edit access to {pageName}",id:"pushNotifications.editAccessRequested.subject"},accessRequestResolvedApprovedSubject:{defaultMessage:"Your request to invite {guestEmail} to {pageName} has been approved",id:"pushNotifications.accessRequestResolved.approved.subject"},accessRequestResolvedRejectedSubject:{defaultMessage:"Your request to invite {guestEmail} to {pageName} has been rejected",id:"pushNotifications.accessRequestResolved.subject"},membershipRequestedSubject:{defaultMessage:"{userName} requested to add a new member to {workspaceName}",id:"pushNotifications.membershipRequested.subject"},guestInviteRequestedSubject:{defaultMessage:"{userName} requested to invite a guest to {workspaceName}",id:"pushNotifications.guestInviteRequested.subject"},blockFormatEditPageIconName:{defaultMessage:"Page Icon",id:"pushNotifications.formatChange.pageIcon.label"},pageIconImagePlaceholder:{defaultMessage:"Image",id:"pushNotifications.formatChange.pageIcon.imagePlaceholder"},pageDeletedActivity:{defaultMessage:"{userName} deleted {pageName}",id:"pushNotifications.pageDeleted.subject"},pageRestoredActivity:{defaultMessage:"{userName} restored {pageName}",id:"pushNotifications.pageRestored.subject"},pagePermanentlyDeletedActivity:{defaultMessage:"{userName} permanently deleted {pageName}",id:"pushNotifications.pagePermanentlyDeleted.subject"},userInvitedToTeam:{defaultMessage:"{userName} invited you to {teamName} team",id:"pushNotifications.userInvitedToTeam.notificationSubject"},privateContentTransferred:{defaultMessage:"{author} transferred private content from {fromUserName} to you: {pageName}",id:"pushNotifications.privateContentTransferred.notificationSubject"},verificationExpired:{defaultMessage:"Verification expired for {pageName}",id:"pushNotifications.verificationExpired.notificationSubject"},importSuccessful:{defaultMessage:"Your {importSource} import was successful",id:"pushNotifications.importCompleted.notificationSubject"},importFailed:{defaultMessage:"Your {importSource} import has failed",id:"pushNotifications.importFailed.notificationSubject"},exportCompleted:{defaultMessage:"Your workspace export is ready",id:"pushNotifications.exportCompleted.notificationSubject"},inAppNotificationAutomationActionTriggered:{defaultMessage:"{automationName} sent you a notification",id:"pushNotifications.inAppNotificationAutomationActionTriggered.notificationSubject"}});function Z(e){const{activity:t,getRecordValue:i}=e,o=t.getEdits();return n.oA((0,r.cf)(n.xH(o.map((e=>e.authors||[])))).map((e=>{const t=i(e);if(t)return(0,a.LU)({table:e.table,value:t})})))}function D(e,t){const i=e.map((e=>e?(0,a.$4)(t,e):t.formatMessage(_.unknownAuthor)));return function(e,t){if(1===t.length)return t[0];if(2===t.length)return e.formatMessage(_.twoUserNames,{firstAuthor:t[0],secondAuthor:t[1]});if(t.length>2){const i=t.length-1;return e.formatMessage(_.threePlusUserNames,{othersCount:i,firstAuthor:t[0]})}return e.formatMessage(_.defaultPluralizedUserNames)}(t,i)}function O(e){var t;if(n.xb(e))return;const i=e[0];var o;return i.table===N.KJ&&null!==(t=i.asActor)&&void 0!==t&&t.profile_photo?null===(o=i.asActor)||void 0===o?void 0:o.profile_photo:void 0}function F(e){if(!n.xb(e))return e[0].id}function L(e){const{blockValue:t,getRecordValue:i,userTimeZone:o,intl:n}=e,s=y.kk.fromBlock(t),r=y.om.fromGetRecordValueFn(i);return s.getRenderTitleWithEmoji({getRecordModel:r,placeholder:n.formatMessage(_.untitledBlockTitle),userTimeZone:o,intl:n})}function E(e){return K(e).title.replaceAll(/[\r\n]+/g," ")}function U(e){const{activity:t}=e,i=t.navigable_block_id||t.top_level_block_id||t.collection_row_id;return i||(t.collection_id?t.collection_id:void 0)}function K(e){const{activity:t,getRecordValue:i,pageVisitSource:o,userTimeZone:n,intl:s}=e,r=y.om.fromGetRecordValueFn(i),a=t.navigable_block_id||t.top_level_block_id||t.collection_row_id;if(a){const l=i({table:C.iU,id:a,spaceId:t.space_id});if(l){return{url:y.kk.fromBlock(l).getRenderUrl({getRecordModel:r,baseUrl:e.baseURL,pageVisitSource:o}),title:L({intl:s,blockValue:l,getRecordValue:i,userTimeZone:n})}}return{url:e.baseURL||"/",title:s.formatMessage(_.untitledBlockTitle)}}if(t.collection_id)return z(e);if("permission-group-edited"===t.type){const o=r({table:I.bx,id:t.space_id});return{title:le(s,se({activity:t,getRecordValue:i})),url:(null==o?void 0:o.getRenderUrl({baseUrl:e.baseURL}))??"/"}}if("user-invited"===t.type){const o=function(e){const{activity:t,getRecordValue:i}=e;if(!t.permission_group_id)return;return ae({spaceId:t.space_id,permissionGroupId:t.permission_group_id,getRecordValue:i})}({activity:t,getRecordValue:i}),n=r({table:I.bx,id:t.space_id});if(n&&o)return{title:le(s,o),url:n.getRenderUrl({baseUrl:e.baseURL})}}else{if("team-membership-edited"===t.type)return q(e);if("access-requested"===t.type){const i=r({id:t.getAccessRequestId(),table:M.J8,spaceId:t.space_id});if(i&&i.isTeamMembershipRequest())return q(e)}}return W(e)}function q(e){const{activity:t,getRecordValue:i,intl:o}=e,n=y.om.fromGetRecordValueFn(i),s=e.baseURL||"/",r=o.formatMessage(_.untitledTeamName);if(!t.team_id)return{url:s,title:r};const a=n({table:A.e0,id:t.team_id}),l=n({table:I.bx,id:t.space_id});return{url:(null==l?void 0:l.getRenderUrl({baseUrl:e.baseURL}))??s,title:(null==a?void 0:a.getRenderTitleWithEmoji({placeholder:o.formatMessage(_.untitledTeamName)}))??r}}function H(e){return W(e).title}function W(e){const{activity:t,getRecordValue:i,intl:o}=e,n=i({table:I.bx,id:t.space_id});if(n){const t=y.kk.fromSpace(n);return{title:t.getRenderTitleWithEmoji({placeholder:o.formatMessage({defaultMessage:"Untitled",id:"pushNotifications.workspaceName.untitled.placeholder"})}),url:t.getRenderUrl({baseUrl:e.baseURL})}}return{url:e.baseURL||"/",title:o.formatMessage(_.untitledSpaceName)}}function G(e){return z(e).title}function z(e){const{activity:t,getRecordValue:i,pageVisitSource:o,userTimeZone:n,intl:s}=e;if(t.collection_id){const r=i({table:w.vF,id:t.collection_id,spaceId:t.space_id});if(r){const t=y.kk.fromCollection(r),i=y.om.fromGetRecordValueFn(e.getRecordValue),a=t.getRenderTitleWithEmoji({getRecordModel:i,placeholder:s.formatMessage(_.untitledCollectionName),userTimeZone:n,intl:s});return{url:t.getRenderUrl({getRecordModel:i,baseUrl:e.baseURL,pageVisitSource:o}),title:a}}return{url:e.baseURL||"/",title:s.formatMessage(_.untitledCollectionName)}}return{url:e.baseURL||"/",title:s.formatMessage(_.untitledCollectionName)}}function $(e){const{activity:t,getRecordValue:i,intl:o}=e;if("in-app-notification-automation-action-triggered"===t.type){const e=y.om.fromGetRecordValueFn(i),n=e({table:k.cv,id:t.getEdits()[0].automation_id,spaceId:t.space_id});return(null==n?void 0:n.getNameWithDefault(e,o))??(0,l.XO)(o)}}function Q(e){if(e.blockValue.properties)return(0,x.X)({intl:e.intl,textValue:e.blockValue.properties.title,getRecordModel:y.om.fromGetRecordValueFn(e.getRecordValue),userTimeZone:e.userTimeZone})}function Y(e,t){const i=(0,S.kD)(t,void 0);return e.formatMessage(i)}function J(e){let{userTimeZone:t,activity:i,getRecordValue:o,pageVisitSource:s,intl:r}=e;const a=i.getEdits();if(a.length){const e=[];a.forEach((t=>{"permission-created"===t.type?e.push(t.permission_data):"permission-deleted"===t.type?e.push({...t.permission_data,role:"none"}):"permission-restriction-created"===t.type||"permission-restriction-deleted"===t.type?(t.permission_data.calculated_changes||[]).forEach((t=>{let[i,o]=t;e.push(o)})):e.push(t.permission_data.after)}));const l=n.oA(e.sort(S._G).map((e=>{if("user_permission"===e.type){const t=o({table:N.KJ,id:e.user_id}),i=(0,j.Nz)(r,t),n=Y(r,e.role);return r.formatMessage(_.userNameWithRole,{userName:i,permissionLevel:n})}if("space_permission"===e.type){const n=H({intl:r,activity:i,getRecordValue:o,userTimeZone:t,pageVisitSource:s}),a=Y(r,e.role);return r.formatMessage(_.spaceNameWithRole,{spaceName:n,permissionLevel:a})}if("public_permission"===e.type){const t=Y(r,e.role);return r.formatMessage(_.publicPermissionRoleLabel,{permissionLevel:t})}if("bot_permission"===e.type){const t=o({table:T.cZ,id:e.bot_id}),i=(0,d.Mh)(t),n=Y(r,e.role);return r.formatMessage(_.botNameWithRole,{botName:i,permissionLevel:n})}})));return r.formatList(l,{type:"conjunction",style:"narrow"})}}function X(e){const{intl:t}=e;switch(e.blockValue.type){case c.Ti.text:case c.Ti.header:case c.Ti.subHeader:case c.Ti.subSubHeader:case c.Ti.factory:case c.Ti.equation:case c.Ti.code:return Q(e);case c.Ti.toggle:return` ${Q(e)}`;case c.Ti.bulletedList:return` ${Q(e)}`;case c.Ti.numberedList:return`1. ${Q(e)}`;case c.Ti.quote:return`${Q(e)}`;case c.Ti.toDo:return(function(e){let{blockValue:t}=e;return p.Ml(t.properties&&t.properties.checked)}(e)?" ":" ")+Q(e);case c.Ti.file:case c.Ti.bookmark:return` ${Q(e)}`;case c.Ti.embed:case c.Ti.framer:case c.Ti.whimsical:case c.Ti.mixpanel:case c.Ti.miro:case c.Ti.abstract:case c.Ti.sketch:case c.Ti.excalidraw:case c.Ti.replit:case c.Ti.hex:case c.Ti.deepnote:case c.Ti.tweet:case c.Ti.gist:case c.Ti.maps:case c.Ti.invision:case c.Ti.video:case c.Ti.audio:case c.Ti.image:return t.formatMessage(_.imageInPushNotification,{imageEmoji:""});case c.Ti.drive:return function(e){const{blockValue:t}=e,i=(0,f.v0)(t);return i&&i.title?i.title:L(e)}(e);case c.Ti.page:case c.Ti.collectionView:case c.Ti.collectionViewPage:return L(e);case c.Ti.tableRow:return function(e){var t;const{blockValue:i,getRecordValue:o,userTimeZone:n,intl:s}=e,r=o({table:i.parent_table,id:i.parent_id,spaceId:i.space_id});if(!r||!i)return;const a=i.properties,l=(null===(t=r.format)||void 0===t?void 0:t.table_block_column_order)||[];return l&&a?l.map((e=>(0,x.X)({textValue:a[e],getRecordModel:y.om.fromGetRecordValueFn(o),userTimeZone:n,intl:s}))).join(", "):void 0}(e)}}function ee(e){const{getRecordValue:t,baseURL:i,userTimeZone:o,intl:n}=e,s=t({table:C.iU,id:e.blockId});if(s){if("page"===s.type){const r=(0,b.ky)({block:s,getRecordValue:t});if(r){const i=m.oC(r),o=i[e.property],a=o?o.name:void 0,l=te({property:e.property,schema:i,block:s,getRecordValue:t,userTimeZone:e.userTimeZone,baseURL:e.baseURL,intl:n})||n.formatMessage(_.emptyPropertyBody);return n.formatMessage(_.propertyNameAndValueNotificationBody,{propertyName:a,propertyValue:l})}return X({intl:n,blockValue:s,getRecordValue:t,baseURL:i,userTimeZone:o})}return X({intl:n,blockValue:s,getRecordValue:t,baseURL:i,userTimeZone:o})}}function te(e){const{property:t,schema:i,getRecordValue:o,userTimeZone:n,baseURL:s,intl:l}=e,c=i[t],d=y.kk.fromBlock(e.block);if(!d.getProperties()||!c)return;const f=d.getProperties()[t];if(f){if("formula"===c.type){const e=y.om.fromGetRecordValueFn(o),s=(0,u.py)({schema:i,property:t,blockModel:d,getRecordModel:e,intl:l,userTimeZone:n,depth:0,resultCache:new Map});return h.U3(s)?(0,g.ZV)({allowRelativeDates:!0,intl:l,value:s,userTimeZone:n}):"boolean"==typeof s?s?m.bx:m.HC:(0,r.hj)(s)?s.toString():s}if("person"===c.type)return l.formatList(p.DW({textValue:f,propertySchema:c,blockCreatorPointer:d.getCreatedByPointer()}).map((e=>{const t=o(e),i=(0,a.LU)({table:e.table,value:t});return(0,a.$4)(l,i)})),{type:"conjunction",style:"narrow"});if("created_by"===c.type){const e=d.getCreatedByPointer();if(!e)return l.formatMessage(_.unknownAuthorInPropertySchemaChange);const t=o(e),i=t&&(0,a.LU)({table:e.table,value:t});return i?(0,a.$4)(l,i):l.formatMessage(_.unknownAuthorInPropertySchemaChange)}return"created_time"===c.type?(0,g.Yx)(d.getCreatedTime(),"short",l.locale,n):ie({propertySchema:c,textValue:f,getRecordValue:o,userTimeZone:n,baseURL:s,intl:l})}}function ie(e){const{propertySchema:t,textValue:i,getRecordValue:o,userTimeZone:n,baseURL:r,intl:l}=e;if("title"===t.type||"text"===t.type)return(0,x.X)({intl:l,textValue:i,getRecordModel:y.om.fromGetRecordValueFn(o),userTimeZone:n});if("select"===t.type){const e=t.options||[];return p.Sj(i,e)}if("multi_select"===t.type){const e=t.options||[];return l.formatList(p.uP(i,e),{type:"conjunction",style:"narrow"})}if("checkbox"===t.type)return p.Ml(i)?m.bx:m.HC;if("date"===t.type){const e=p.Gl(i);if(e)return(0,g.ZV)({allowRelativeDates:!0,intl:l,value:e,date_format:t.date_format,time_format:t.time_format,userTimeZone:n})}else{if("person"===t.type)return l.formatList(p.DW({textValue:i,propertySchema:t,blockCreatorPointer:void 0}).map((e=>{const t=o(e),i=(0,a.LU)({table:e.table,value:t});return(0,a.$4)(l,i)})),{type:"conjunction",style:"narrow"});if("relation"===t.type){const e=p.j$({relationValue:p.rq(i),getRecordModel:y.om.fromGetRecordValueFn(o),propertySchema:t});return l.formatList(e.map(o).map((e=>e?L({intl:l,blockValue:e,getRecordValue:o,baseURL:r,userTimeZone:n}):l.formatMessage(_.unknownRelationValueChange))),{type:"conjunction",style:"narrow"})}if("number"===t.type){const e=p.VY(i);if(void 0!==e)return e.toString()}else if("auto_increment_id"===t.type){const e=p.ah(i);if(void 0!==e)return e.toString()}else{if("file"===t.type)return l.formatList(p.g(i).map((e=>e.name||e.url)),{type:"conjunction",style:"narrow"});if("url"===t.type||"phone_number"===t.type||"email"===t.type)return(0,P.Jcv)(i);if("created_by"===t.type)return;if("created_time"===t.type)return;if("formula"===t.type)return;if("rollup"===t.type)return;if("last_edited_by"===t.type)return;if("last_edited_time"===t.type)return;if("last_visited_time"===t.type)return;if("button"===t.type)return;if("status"===t.type)return p.ZG(i,t);if("location"===t.type)return;if("verification"===t.type){const e=p._w(i),t=e?V.WN(e):{type:"none"};if("none"===t.type)return l.formatMessage(V.X3.none);const s=o(t.actorPointer),r=(0,a.LU)({table:t.actorPointer.table,value:s}),c=(0,a.$4)(l,r);return"verified"===t.type&&t.isIndefinite?l.formatMessage(V.X3.verifiedIndefinitely,{actor:c}):l.formatMessage(V.X3.verifiedUntil,{actor:c,datetime:B.nK({dateTime:t.dateTimeRange.end,intl:l,userTimeZone:n,displayInUserTimezone:!1,alwaysIncludeTimezone:!0})})}(0,s.t1)(t)}}}function oe(e){if("page_icon"===e.formatProperty)return e.intl.formatMessage(_.blockFormatEditPageIconName)}function ne(e){const{formatProperty:t,block:i,getRecordValue:o,intl:n}=e;if("page_icon"===t){const e=y.kk.fromBlock(i).getRenderIcon({getRecordModel:y.om.fromGetRecordValueFn(o)});return e?(0,v.Z)(e.icon)?e.icon:n.formatMessage(_.pageIconImagePlaceholder):n.formatMessage(_.emptyBlockEditedProperty)}}function se(e){const{activity:t,getRecordValue:i}=e;let o=ae({spaceId:t.space_id,permissionGroupId:t.permission_group_id,getRecordValue:i});if(!o){const e=t.getEdits(),i=R.hI(e)[0];o="permission-group-changed"===i.type?i.permission_group_data.after:i.permission_group_data}return o}function re(e){const{activity:t,intl:i,userName:o,targetName:n}=e,s=t.getEdits(),r=R.hI(s)[0];return r?"permission-group-created"===r.type?i.formatMessage(_.userCreatedPermissionGroup,{userName:o,permissionGroupName:n}):"permission-group-deleted"===r.type?i.formatMessage(_.userDeletedPermissionGroup,{userName:o,permissionGroupName:n}):i.formatMessage(_.userEditedPermissionGroup,{userName:o,permissionGroupName:n}):i.formatMessage(_.userEditedPermissionGroup,{userName:o,permissionGroupName:n})}function ae(e){const{spaceId:t,permissionGroupId:i,getRecordValue:o}=e,n=o({table:I.bx,id:t});return(n&&n.permission_groups||[]).find((e=>e.id===i))}function le(e,t){if(t){return[(0,v.Z)(t.icon)?t.icon:void 0,t.name||e.formatMessage(_.untitledPermissionGroupName)].filter(Boolean).join(" ")}return e.formatMessage(_.defaultPermissionGroupName)}function ce(e){switch(e){case"block-property-edited":case"commented":case"permission-group-mentioned":case"reminder":case"user-invited":case"user-mentioned":return!0;case"in-app-notification-automation-action-triggered":case"access-requested":case"access-request-resolved":case"email-edited":case"private-content-transferred":case"team-membership-edited":case"verification-expired":case"export-completed":case"import-completed":case"block-edited":case"collection-edited":case"collection-property-edited":case"collection-row-created":case"collection-row-deleted":case"collection-view-edited":case"page-deleted":case"page-locked":case"page-permanently-deleted":case"page-restored":case"page-unlocked":case"permission-group-edited":case"permissions-edited":case"top-level-block-created":case"top-level-block-deleted":return!1;default:(0,s.t1)(e)}}},57037:(e,t,i)=>{i.d(t,{w:()=>s});i(67294);var o=i(45238),n=i(85893);const s=(0,o.IU)("mobileBottomBarSearch",{viewBox:"0 0 26 26",svg:(0,n.jsx)("path",{d:"M11.1416 19.3779C12.9355 19.3779 14.5898 18.7979 15.9434 17.8311L21.0352 22.9229C21.2715 23.1592 21.583 23.2773 21.916 23.2773C22.6143 23.2773 23.1084 22.7402 23.1084 22.0527C23.1084 21.7305 23.001 21.4297 22.7646 21.1934L17.7051 16.123C18.7686 14.7266 19.4023 12.9971 19.4023 11.1172C19.4023 6.57324 15.6855 2.85645 11.1416 2.85645C6.59766 2.85645 2.88086 6.57324 2.88086 11.1172C2.88086 15.6611 6.59766 19.3779 11.1416 19.3779ZM11.1416 17.5947C7.59668 17.5947 4.66406 14.6621 4.66406 11.1172C4.66406 7.57227 7.59668 4.63965 11.1416 4.63965C14.6865 4.63965 17.6191 7.57227 17.6191 11.1172C17.6191 14.6621 14.6865 17.5947 11.1416 17.5947Z"})})},73426:(e,t,i)=>{i.d(t,{i:()=>s});i(67294);var o=i(45238),n=i(85893);const s=(0,o.IU)("templatesColor",{viewBox:"0 0 20 20",svg:(0,n.jsxs)("g",{children:[(0,n.jsx)("path",{d:"M6.39733 5.67853C5.89764 5.50234 5.36002 5.40649 4.8 5.40649C2.14904 5.40649 0 7.55432 0 10.2038C0 12.8533 2.14904 15.0011 4.8 15.0011C6.52165 15.0011 8.0316 14.0952 8.87867 12.7343L5.26487 12.0975L6.39733 5.67853Z",fill:"#3C9ED7"}),(0,n.jsx)("path",{d:"M17.3126 3.66609L7.85843 2L6.19141 11.4489L10.6545 12.2354L14.3998 5.81854L16.3449 9.15116L17.3126 3.66609Z",fill:"#E7595E"}),(0,n.jsx)("path",{d:"M8.80078 17L14.4008 7.4054L20.0008 17H8.80078Z",fill:"#F5BC4E"})]})})}}]);