"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[4519],{46564:(e,t,o)=>{o.d(t,{xj:()=>K,lA:()=>G,YV:()=>D,NZ:()=>R,Hh:()=>Q,F0:()=>z,xI:()=>O,LK:()=>U,sH:()=>W,cK:()=>L,cx:()=>q,yY:()=>T,sY:()=>A});o(57658),o(67294);var n=o(480),i=o(86628),a=o(24405),s=o(41432),r=o(12970),l=o(91856),c=o(56666),d=o(75e3),m=o(25651),p=o(11751),u=o(45238),g=o(85893);const h=(0,u.IU)("upLeftArrow",{viewBox:"0 0 16 16",svg:(0,g.jsx)("path",{d:"M2.8457 10.5869C2.8457 11.0312 3.19434 11.373 3.59766 11.373C4.00098 11.373 4.3291 11.0176 4.3291 10.6074V8.05762L4.21973 5.22754L5.32031 6.47168L11.8418 12.9932C11.999 13.1504 12.1904 13.2256 12.3818 13.2256C12.7852 13.2256 13.1543 12.8564 13.1543 12.46C13.1543 12.2686 13.0654 12.0771 12.9082 11.9199L6.40039 5.39844L5.15625 4.30469L8.10254 4.40039H10.5361C10.9463 4.40039 11.2881 4.07227 11.2881 3.67578C11.2881 3.27246 10.9736 2.93066 10.5156 2.93066H3.64551C3.16016 2.93066 2.85254 3.25195 2.85254 3.72363L2.8457 10.5869Z"})});var f=o(9291),C=o(31701),v=o(1898),y=o(42858),x=o(13447),k=o(84654),S=o(72495),b=o(19037),I=o(78663),w=o(99417),N=o(19124),P=o(40959),j=o(16772),M=o(27724),B=o(89941),F=o(62967);const A=(0,f.defineMessages)({notionAI:{defaultMessage:"Notion AI",id:"completions.completionActions.AIAssist"},more:{defaultMessage:"See more",id:"completions.completionActions.more"},alternativeUiString:{defaultMessage:"{text}",id:"completions.completionActions.alternativeUiString"},aiSummaryBlockDisplayName:{defaultMessage:"Summary",id:"completions.completionActions.aiSummaryBlockDisplayName"},aiActionItemsBlockDisplayName:{defaultMessage:"Action items",id:"completions.completionActions.aiActionItemsBlockDisplayName"},aiFreePromptBlockDisplayName:{defaultMessage:"Custom AI block",id:"completions.completionActions.aiFreePromptBlockDisplayName"},aiSectionBlockDisplayName:{defaultMessage:"Custom AI section",id:"completions.completionActions.aiSectionBlockDisplayName"}});function T(e){return function(t){return(0,g.jsx)(S.Z,{...t,title:(0,g.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,p.t)({width:16,height:16,marginRight:4}),(0,g.jsx)("div",{children:t.title})]}),right:e})}}function D(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;const o=[];if(o.push(...e.slice(0,t)),e.length>t){const n=(0,F.$J)({key:"more actions",render:e=>(0,g.jsx)(S.Z,{...e}),actions:e.slice(t)});o.push((0,F.MV)({key:"more",displayName:A.more,analyticsName:"Completions - more",validators:B.Pz,svg:()=>(0,g.jsx)(Y,{}),subActions:()=>[n],collapseSubActionsIntoParent:!0,width:350}))}return o}function _(){return(0,g.jsx)(G,{svg:m.R,svgFill:C.FN.light.purple[500]})}const Z=1e3;function L(e){const{key:t,name:o,analyticsName:n,textToInsert:i,onUpdatePromptState:a,right:s,renderTooltip:r,showEllipsis:l,userProvidedSearchName:c,executeImmediately:d,gtmFavoriteId:m}=e,p=o.length>Z?`${o.slice(0,Z)}…`:o;return(0,F.cN)({key:t,analyticsName:`Completions - insert text into prompt - ${n}`,...(u=l?`${p}…`:p,{displayName:A.alternativeUiString,displayNameInterpolatedValues:{text:u}}),validators:[],closeParentMenu:!1,svg:_,action(){a({insertText:i??o,analyticsName:n,gtmFavoriteId:m,executeImmediately:d})},right:s??q("updatePrompt"),renderTooltip:r,userProvidedSearchName:c});var u}function U(e){const{from:t,type:o,onUpdatePromptState:n}=e;function i(e){return L({key:`completions.${e.key}`,name:(0,w.t8)(e),analyticsName:e.key,textToInsert:(0,I.$W)(e),onUpdatePromptState:n,showEllipsis:!0})}const a="cursor"===o?{selectionType:o,isPageEmpty:!b.IC9()}:{selectionType:o},s=(0,w.up)(a),r=(0,w.pv)(s,a),l=[];for(const[c,d]of r){const e=[],n=B.Pz;for(const s of d)"helpMeDraft"!==s.key&&"helpMeEdit"!==s.key&&"helpMeWrite"!==s.key&&("translate"===s.key?e.push(V(s,n,o,t)):"changeTone"===s.key?e.push(E(s,n,o,t)):s.steps?e.push(i(s)):e.push(R({prompt:s,validators:n,type:o,from:t})));const a=(0,F.$J)({key:`completions.${c}`,title:(0,w.Mh)(c,"cursor"===o?"page":"selection"),render:e=>(0,g.jsx)(S.Z,{...e}),actions:D(e.filter(v.$K),7)});l.push(a)}return"cursor"===o&&l.push((0,F.$J)({key:"completions.aiBlocks",title:w.Dr.aiBlocks,render:e=>(0,g.jsx)(S.Z,{...e}),actions:P.O5.map((e=>function(e){const t=P.Hc[e.aiBlockType],{displayName:o,svg:n}=H[e.aiBlockType],i=e=>!t.shouldShow||t.shouldShow(e);return(0,F.cN)({key:`completions.aiBlocks.${t.key}`,analyticsName:`Completions - ${t.key}`,closeParentMenu:!0,svg:n,displayName:o,validators:[...B.vE,i],action:e=>{let{environment:o}=e;x.createAndCommit({userAction:"completionActions.createAiBlockAction",environment:o,perform:e=>{y.at({environment:o,selection:M.default.state.stores,createBlockItem:t,analyticsFrom:"ai_prompt",transaction:e})}})}})}({aiBlockType:e})))})),l}const H={[s.MF.aiSummaryBlock]:{displayName:A.aiSummaryBlockDisplayName,svg:()=>(0,g.jsx)(X,{svg:l.Y})},[s.MF.aiActionItemsBlock]:{displayName:A.aiActionItemsBlockDisplayName,svg:()=>(0,g.jsx)(X,{svg:r.O})},[s.MF.aiFreePromptBlock]:{displayName:A.aiFreePromptBlockDisplayName,svg:()=>(0,g.jsx)(X,{svg:p.t})}};function O(e){return(0,F.$J)({key:"completions",title:A.notionAI,render:T(),actions:$(e)})}function $(e){const{store:t,from:o}=e,n=[];for(const i of(0,N.G9)()){if("helpMeWrite"===i.key)continue;const e=R({prompt:i,validators:B.vE,type:"aiBlock",from:o,store:t});e&&n.push(e)}return n}function z(e){const{environment:t,inputValue:o,store:n}=e,i=(0,N.qB)({customPrompt:o,isPageEmpty:!1});k.triggerCompletionForAiBlock({environment:t,store:n,prompt:i,additionalContext:{prompt:o}})}function V(e,t,o,n){const{key:i,name:a,svg:s,svgFill:r,steps:l}=e;if("translate"!==i||!l||1!==l.length||"language"!==l[0].key||"dropdown"!==l[0].type)return;const c=l[0].dropdownOptions.map((i=>{let{key:a,name:s}=i;return(0,F.cN)({key:`completions.translate.${a}`,analyticsName:`Completions - translate - ${a}`,displayName:s,validators:t,closeParentMenu:!0,right:q("submitPrompt"),action:t=>{let{environment:i}=t;J({environment:i,prompt:e,from:n,type:o,additionalContext:{language:a}})}})})),d=(0,F.$J)({key:"translate language actions",render:e=>(0,g.jsx)(S.Z,{...e}),actions:c}),m=s?()=>(0,g.jsx)(G,{svg:s,svgFill:r}):void 0;return(0,F.MV)({key:"translate",displayName:a,analyticsName:`Completions - ${i}`,validators:t,svg:m,subActions:()=>[d]})}function E(e,t,o,n){const{key:i,name:a,svg:s,svgFill:r,steps:l}=e;if("changeTone"!==i||!l||1!==l.length||"tone"!==l[0].key||"dropdown"!==l[0].type)return;const c=l[0].dropdownOptions.map((i=>{let{key:a,name:s}=i;return(0,F.cN)({key:`completions.changeTone.${a}`,analyticsName:`Completions - changeTone - ${a}`,displayName:s,validators:t,closeParentMenu:!0,right:q("submitPrompt"),action:t=>{let{environment:i}=t;J({environment:i,prompt:e,from:n,type:o,additionalContext:{tone:a}})}})})),d=(0,F.$J)({key:"changeTone tone actions",render:e=>(0,g.jsx)(S.Z,{...e}),actions:c}),m=s?()=>(0,g.jsx)(G,{svg:s,svgFill:r}):void 0;return(0,F.MV)({key:"changeTone",displayName:a,analyticsName:`Completions - ${i}`,validators:t,svg:m,subActions:()=>[d]})}function K(e){const{focused:t,type:o}=e,s=(0,n.O7)(),r=(0,i.VK)((()=>s.device.isPhone),[s]),l=(0,a.yK)((e=>({iconStyle:{width:14,height:14,fill:e.mediumIconColor,opacity:!r&&t?1:0},containerStyle:{width:18,height:18,display:"flex",alignItems:"center",justifyContent:"center"}})),[t,r]);switch(o){case"submitPrompt":return(0,g.jsx)("div",{style:l.containerStyle,children:(0,d.U)(l.iconStyle)});case"updatePrompt":return(0,g.jsx)("div",{style:l.containerStyle,children:h(l.iconStyle)});default:(0,v.t1)(o)}}function q(e){return t=>(0,g.jsx)(K,{type:e,focused:t.focused})}function W(e){const{customPrompt:t,execute:o}=e;return(0,F.cN)({analyticsName:"Completions - execute current prompt input",key:"explicitFreeFormAction",displayName:w.Dr.genericHelpMeWrite,displayNameInterpolatedValues:{filter:t},svg:_,right:q("submitPrompt"),validators:[],closeParentMenu:!1,renderTooltip:F.zz,action(){o()}})}function R(e){const{prompt:t,validators:o,type:n,from:i,store:a,sortScoreMultiplier:s}=e,{key:r,name:l}=t;if("translate"===r&&("textSelection"===n||"blockSelection"===n||"cursor"===n))return V(t,o,n,i);if("changeTone"===r&&("textSelection"===n||"blockSelection"===n||"cursor"===n))return E(t,o,n,i);const c=function(e){const{svg:t,svgFill:o}=e;return t?()=>(0,g.jsx)(G,{svg:t,svgFill:o}):void 0}(t),d=[...o];return t.requiresContent?d.push(b.IC9):t.requiresNoContent&&d.push(b.ffD(b.IC9)),(0,F.cN)({key:`completions.${r}`,analyticsName:`Completions - ${r}`,displayName:l,fuzzySearchKeywords:t.fuzzySearchKeywords,validators:d,closeParentMenu:!0,svg:c,right:q("submitPrompt"),sortScoreMultiplier:s,action:e=>{let{environment:o}=e;J({environment:o,prompt:t,type:n,from:i,store:a})}})}function J(e){const{environment:t,prompt:o,type:n,from:i,store:a,additionalContext:s}=e;if("textSelection"===n)k.openCompletionPopupForSavedContext({environment:t,prompt:o,from:i,additionalContext:s});else if("blockSelection"===n)k.openCompletionPopupForBlockSelectionContext({environment:t,prompt:o,from:i,additionalContext:s});else if("cursor"===n){if(o.preferToNeverInsertTextAtCursor)return void k.selectPageAndOpenCompletionPopupForBlockSelectionContext({environment:t,prompt:o,from:i,additionalContext:s});k.openCompletionPopupForCursorContext({environment:t,prompt:o,from:i,additionalContext:s})}else"aiBlock"===n?a&&k.triggerCompletionForAiBlock({environment:t,store:a,prompt:o,additionalContext:s}):(0,v.t1)(n)}function Q(e){const{inputValue:t,from:o,mode:n,environment:i}=e;switch(n){case"edit":return void function(e){const{customPrompt:t,from:o,environment:n}=e,i=(0,w.sB)(t);"closedWithContext"===j.default.state.type&&j.default.state.context&&k.openCompletionPopupForPrefilledContext({environment:n,context:j.default.state.context,prompt:i,additionalContext:{prompt:t},from:o,skipInitialForm:!0})}({environment:i,customPrompt:t,from:o});case"write":const e=(0,w.wq)(t);if(e){const{prompt:t,additionalContext:n}=e,a=(0,I.FD)();if(!a)return;return void k.openCompletionPopupForPrefilledContext({environment:i,context:a,prompt:t,additionalContext:n,from:o,skipInitialForm:!0})}return void function(e){const{environment:t,customPrompt:o,from:n}=e,i=(0,N.qB)({customPrompt:o,isPageEmpty:!b.IC9()}),a=(0,I.FD)();a&&k.openCompletionPopupForPrefilledContext({environment:t,context:a,prompt:i,additionalContext:{prompt:o},from:n,skipInitialForm:!0})}({environment:i,customPrompt:t,from:o})}(0,v.t1)(n)}function Y(){const e=(0,a.Fg)();return(0,c.o)({width:12,marginLeft:2,marginRight:2,fill:e.mediumIconColor})}function G(e){const t=(0,a.yK)((t=>({box:{height:e.fixedWidth?22:void 0,width:e.fixedWidth?22:void 0,display:"flex",alignItems:"center",justifyContent:"center",...e.boxStyles},icon:{height:16,width:16,fill:e.svgFill??(0,C.gh)({theme:"light"}).regularIconColor}})),[e]);return(0,g.jsx)("div",{style:t.box,children:e.svg(t.icon)})}function X(e){const t=(0,a.yK)((e=>({box:{background:e.fill.purple,width:24,height:24,borderRadius:4},icon:{fill:e.icon.purple}})),[]);return(0,g.jsx)(G,{svg:e.svg,svgFill:t.icon.fill,boxStyles:t.box})}},47449:(e,t,o)=>{o.d(t,{qC:()=>h,Up:()=>g,CX:()=>u});var n=o(7032),i=o(54642),a=o(13447),s=o(37181),r=o(49085),l=o(92595);class c extends r.default{getInitialState(){return{loadingState:"initial"}}}const d=new c,m=d;(0,l.exposeDebugValue)("AiSuggestedPageQnaStore",d);var p=o(21273);function u(e,t){const{phase:o,transactionUserAction:n,userSettingsStore:i}=t;a.createAndCommit({environment:e,userAction:n,perform:e=>{s.d2({userSettingsStore:i,transaction:e,data:{ai_qna_intro_onboarding_phase:o}})}})}function g(e,t){const{userSettingsStore:o}=t;a.createAndCommit({environment:e,userAction:"aiQnaActions.setLastExposedToQnaAtToCurrentTimestamp",perform:e=>{s.d2({userSettingsStore:o,transaction:e,data:{last_exposed_to_ai_qna_at:Date.now()}})}})}async function h(e){let{environment:t,blockStore:o,reminderNumber:a,spaceId:s}=e;const r=await async function(e){let{environment:t,blockStore:o,reminderNumber:a,spaceId:s}=e;if("initial"===m.state.loadingState||m.state.reminderNumber!==a){const e=i.getSuggestedPageQna(t,{blockPointer:{...o.pointer,spaceId:s},aiSessionId:(0,n.ZP)()}).then((e=>"success"!==e.type?(m.setState({loadingState:"error",reminderNumber:a}),[]):e.data.questions));m.setState({loadingState:"loading",reminderNumber:a});const r=await e;return m.setState({loadingState:"loaded",reminderNumber:a,questions:r}),r[0]}if("loading"===m.state.loadingState)return m.waitUntil((()=>"loaded"===m.state.loadingState)).then((()=>"loaded"===m.state.loadingState?m.state.questions[0]:void 0));if("loaded"===m.state.loadingState){return m.state.questions[0]}return}({environment:t,blockStore:o,reminderNumber:a,spaceId:s});if(r&&p.Z.isQnaPageSuggestedQuestionRemindersEnabledForUser())return r}},16859:(e,t,o)=>{o.d(t,{d:()=>B});var n=o(67294),i=o(480),a=o(9291),s=o(73063),r=o(53437),l=o(26388),c=o(935),d=o(24405),m=o(64275),p=o(81570),u=o(83065),g=o(37810),h=o(64921),f=o(60458),C=o(1743),v=o(74194),y=o(16354),x=o(58297),k=o(64369),S=o(42402),b=o(43250),I=o(18514),w=o(85893);function N(e){const{checked:t,onChange:o}=e;return(0,w.jsxs)("div",{style:{display:"flex",gap:6,alignItems:"center"},children:[(0,w.jsx)(f.Z,{checked:t,onClick:o,size:14}),(0,w.jsx)("div",{onClick:o,children:(0,w.jsx)(k.Z,{style:{cursor:"pointer"},isSmall:!0,children:(0,w.jsx)(a.FormattedMessage,{defaultMessage:"Share this AI session with Notion",id:"completions.FeedbackPopup.shareWithNotion"})})})]})}function P(){const e=(0,d.yK)((e=>({container:{display:"flex",flexDirection:"row"},giftIcon:{width:16,height:16,fill:e.lightIconColor},message:{marginLeft:9,color:e.mediumTextColor,fontSize:12}})),[]);return(0,w.jsxs)("div",{style:e.container,children:[(0,p.T)(e.giftIcon),(0,w.jsx)("div",{style:e.message,children:(0,w.jsx)(a.FormattedMessage,{defaultMessage:"You’re sharing data with Notion for AI quality improvement. <aiTerms>Learn more</aiTerms>",id:"completions.OptInLearnMore.description",values:{aiTerms:e=>(0,w.jsx)(S.Z,{external:!0,href:(0,I.UY)("ai.dataSharingTerms"),children:e})}})})]})}function j(e){const{onSubmit:t}=e,o=(0,d.yK)((e=>({container:{width:300,display:"flex",flexDirection:"column",alignItems:"center",padding:19,position:"relative"},closeButtonContainer:{position:"absolute",top:10,right:10},closeButton:{zIndex:10,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"100%",background:e.buttonHoveredBackground,width:20,height:20,padding:4},closeButtonHover:{background:e.buttonPressedBackground},closeButtonIcon:{width:16,fill:e.mediumTextColor},giftIcon:{width:24,height:24,fill:e.lightIconColor},terms:{color:e.mediumTextColor,textAlign:"center",fontSize:13},shareButton:{width:"100%",marginTop:17,paddingTop:7,paddingBottom:7},notNowButton:{color:e.mediumTextColor,fontSize:14,marginTop:15},title:{textAlign:"center",marginTop:9,marginBottom:8,fontWeight:g.Z.fontWeight.semibold}})),[]);return(0,w.jsxs)("div",{style:o.container,children:[(0,w.jsx)("div",{style:o.closeButtonContainer,children:(0,w.jsx)(h.Z,{onClick:()=>{t({optIn:!1})},style:o.closeButton,hoveredStyle:o.closeButtonHover,children:(0,m.D)(o.closeButtonIcon)})}),(0,p.T)(o.giftIcon),(0,w.jsx)("div",{style:o.title,children:(0,w.jsx)(a.FormattedMessage,{defaultMessage:"Always share data to improve Notion AI?",id:"completions.ShareDataPopup.title"})}),(0,w.jsx)("div",{style:o.terms,children:(0,w.jsx)(a.FormattedMessage,{defaultMessage:"Help Notion improve AI quality by automatically sharing data from your usage of AI powered features.{br}By continuing, you agree to <aiTerms>AI Data Sharing Terms</aiTerms>",id:"completions.ShareDataPopup.description",values:{br:(0,w.jsx)("br",{}),aiTerms:e=>(0,w.jsx)(S.Z,{external:!0,href:(0,I.UY)("ai.dataSharingTerms"),children:e})}})}),(0,w.jsx)(x.Z,{style:o.shareButton,onClick:()=>{t({optIn:!0})},children:(0,w.jsx)(a.FormattedMessage,{defaultMessage:"Always share",id:"completions.ShareDataPopup.alwaysShareButton"})}),(0,w.jsx)(y.Z,{style:o.notNowButton,onClick:()=>{t({optIn:!1})},children:(0,w.jsx)(a.FormattedMessage,{defaultMessage:"Not now",id:"completions.ShareDataPopup.notNowButton"})})]})}function M(e){const{state:t,onUpdate:o,onSubmit:r,onCancel:l,userOptIn:c}=e,d=(0,n.useCallback)((()=>{o({...t,shareWithNotion:!t.shareWithNotion})}),[t,o]),m=(0,n.useCallback)((()=>{r(t)}),[r,t]),p=(0,n.useCallback)((e=>{o({...t,userContent:e.target.value})}),[o,t]),g=(0,a.useIntl)(),h=(0,i.O7)(),f=!c;return(0,w.jsx)("div",{style:{padding:14,...h.device.isMobile?{width:"100%"}:{minWidth:400}},className:b.YOJ,children:(0,w.jsxs)(C.Z,{debugName:"FeedbackPopup",capture:!0,children:[(0,w.jsx)(v.Z,{value:t.userContent,onChange:p,onSubmit:e=>{e.stopPropagation(),m()},onCancel:l,focusInitial:!0,placeholder:g.formatMessage({id:"completions.FeedbackPopup.userCommentPlaceholder",defaultMessage:"How could the output be improved? (optional)"})}),(0,w.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingTop:10},children:[f?(0,w.jsx)(N,{checked:t.shareWithNotion,onChange:d}):(0,w.jsx)(P,{}),(0,w.jsx)(s.Z,{icon:u._,onClick:m,ariaLabel:g.formatMessage({id:"completions.FeedbackPopup.submitButtonLabel",defaultMessage:"Submit feedback"}),isBlue:!0,iconStyle:{height:24,width:24},style:{height:20,width:20}})]})]})})}function B(e){const{type:t,ariaLabel:o,onClick:d,feedbackState:m,onDismiss:p,onSubmit:u,onUpdate:g,showShareDataPopup:h,onDataShareSubmit:f,userOptIn:C,iconButtonStyles:v}=e,y=(0,i.O7)(),x=t===(null==m?void 0:m.type),k=(0,c.L)(t,x),S=(0,n.useCallback)((()=>d(t)),[d,t]),b=(0,w.jsx)(l.ZP,{renderTooltip:()=>(0,w.jsx)("div",{children:(0,w.jsx)(a.FormattedMessage,{defaultMessage:"Share feedback with Notion",id:"completions.CompletionMenuActionBar.feedbackTooltip"})}),placement:l.ug.Bottom,render:e=>(0,w.jsx)(s.Z,{onClick:S,icon:k,ariaLabel:o,style:{...v},...e})});return(0,w.jsx)(r.ZP,{origin:b,open:(null==m?void 0:m.type)===t,popupType:y.device.isMobile?r.kQ.SlideUp:r.kQ.Popup,onDismiss:p,render:()=>m?h?(0,w.jsx)(j,{onCancel:p,onSubmit:f}):(0,w.jsx)(M,{state:m,onSubmit:u,onUpdate:g,onCancel:p,userOptIn:C}):null})}},935:(e,t,o)=>{o.d(t,{L:()=>b,u:()=>I});var n=o(67294),i=o(480),a=o(86628),s=o(33676),r=o(97022),l=o(39986),c=o(10498),d=o(9291),m=o(10910),p=o(64964),u=o(13447),g=o(37181),h=o(80444),f=o(77080),C=o(35057),v=o(84654),y=o(16859),x=o(85893);const k=!0,S=!1;function b(e,t){switch(e){case"thumbsup":return t?c.w:l.P;case"thumbsdown":return t?r.E:s.A}}function I(e){const{revision:t}=e,o=(0,d.useIntl)(),s=(0,i.O7)(),[r,l]=(0,n.useState)(void 0),[c,b]=(0,n.useState)(!1),I=(0,n.useRef)(null),w=(0,a.VK)((()=>f.default.checkGate("ai_data_sharing")),[]),N=(0,a.VK)((()=>h.default.state.currentUserSettingsStore),[]),P=(0,a.VK)((()=>{var e;const t=null==N||null===(e=N.getSettings())||void 0===e?void 0:e.seen_ai_data_share_prompt_at,o=!(0,C.mq)();return!Boolean(t)&&o}),[N]),j=(0,a.VK)((()=>{var e;return(null==N||null===(e=N.getSettings())||void 0===e?void 0:e.ai_data_share_opt_in)??S}),[N]),M=(0,n.useCallback)((()=>{p.oV({label:o.formatMessage({id:"completions.CompletionMenuFooter.showFeedbackThanksMessage",defaultMessage:"Thanks for submitting feedback!"})})}),[o]),B=(0,n.useCallback)((e=>{I.current=document.activeElement,l((t=>({userContent:"",shareWithNotion:k,...t,type:e})))}),[]),F=(0,n.useCallback)((e=>{e.shareWithNotion&&P&&w?b(!0):(M(),l(void 0)),v.submitFeedbackForRevision({...e,environment:s,revision:t,userOptIn:j})}),[t,s,j,P,w,M]),A=(0,n.useCallback)((e=>{e&&e.stopPropagation&&e.stopPropagation(),l(void 0),I.current&&I.current instanceof HTMLElement&&I.current.focus()}),[]),T=(0,n.useCallback)((e=>{const{optIn:t}=e;N&&(u.createAndCommit({userAction:"FeedbackButtons.aiDataShareOptIn",environment:s,userId:N.id,perform:e=>{g.d2({userSettingsStore:N,data:{ai_data_share_opt_in:t,seen_ai_data_share_prompt_at:Date.now()},transaction:e})}}),m.bd(s,{user_opt_in:t}),t?p.oV({label:o.formatMessage({id:"completions.CompletionMenuFooter.dataShareThanks",defaultMessage:"Thank you for your help making Notion better!"})}):M(),b(!1),l(void 0))}),[o,N,s,M]);return t.hasFeedback&&!c?null:(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(y.d,{type:"thumbsup",ariaLabel:o.formatMessage({id:"completions.CompletionMenuFooter.thumbsUp",defaultMessage:"Submit positive feedback"}),onClick:B,feedbackState:r,onDismiss:A,onSubmit:F,onUpdate:l,showShareDataPopup:c,onDataShareSubmit:T,userOptIn:j}),(0,x.jsx)(y.d,{type:"thumbsdown",ariaLabel:o.formatMessage({id:"completions.CompletionMenuFooter.thumbsDown",defaultMessage:"Submit negative feedback"}),onClick:B,feedbackState:r,onDismiss:A,onSubmit:F,onUpdate:l,showShareDataPopup:c,onDataShareSubmit:T,userOptIn:j})]})}},80671:(e,t,o)=>{o.d(t,{Cl:()=>g,Kj:()=>h,jw:()=>f,k2:()=>p,v5:()=>u});o(21703);var n=o(19889),i=o(896),a=o(12139),s=o(53965),r=o(7032),l=o(86572),c=o(80444),d=o(6258),m=o(63423);function p(){m.Z.setState({open:!0,stage:"limit_reached",addOnUpgradeId:(0,r.ZP)(),tax:0})}function u(){m.Z.setState({open:!1})}function g(e){const t=m.Z.state;t.open&&m.Z.setState({...t,stage:"confirm_purchase",coupon:e&&!(0,i.$v)(e)?e:void 0})}function h(){m.Z.setState({open:!0,stage:"cancel_plan",addOnUpgradeId:(0,r.ZP)(),tax:0})}async function f(e){const{environment:t,spaceStore:o,from:i}=e,r=function(){var e;const t=null===(e=c.default.state.currentSpaceStore)||void 0===e?void 0:e.getAdminIds();if(!t||0===t.length)throw new Error("No admins found in the current space");return(0,s.UP)(t)}(),m=o.getName(),p=d.U6.createChildStore(o,{table:n.KJ,id:r});await p.load();const u=p.getEmail();u?l.bf(t,{admin_id:r,admin_email:u,space_name:m,from:i}):a.IE(new Error("Could not get email for admin in sendMemberRequestForAddOn"))}},2585:(e,t,o)=>{o.d(t,{f:()=>a});o(67294);var n=o(45238),i=o(85893);const a=(0,n.IU)("chevronLeft",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M3.61816 8.06445C3.61816 8.29688 3.70703 8.49512 3.8916 8.67285L9.22363 13.8887C9.36719 14.0391 9.55859 14.1143 9.77734 14.1143C10.2217 14.1143 10.5703 13.7725 10.5703 13.3213C10.5703 13.1025 10.4814 12.9043 10.3311 12.7539L5.52539 8.06445L10.3311 3.375C10.4814 3.21777 10.5703 3.01953 10.5703 2.80078C10.5703 2.35645 10.2217 2.01465 9.77734 2.01465C9.55859 2.01465 9.36719 2.08984 9.22363 2.24023L3.8916 7.45605C3.70703 7.63379 3.625 7.83203 3.61816 8.06445Z"})})},81570:(e,t,o)=>{o.d(t,{T:()=>a});o(67294);var n=o(45238),i=o(85893);const a=(0,n.IU)("giftOutline",{viewBox:"0 0 32 34",svg:(0,i.jsx)("path",{d:"M7.781 33.219h16.422c2.938 0 4.563-1.547 4.563-4.5v-9.594h.109c1.375-.297 2.14-1.406 2.14-3v-4.11c0-1.906-1.062-3.109-2.968-3.109H24.89c.828-.828 1.312-1.953 1.312-3.25 0-3.031-2.39-5.187-5.422-5.187-2.187 0-4 1.203-4.797 3.297C15.187 1.672 13.39.469 11.187.469c-3.016 0-5.422 2.156-5.422 5.187 0 1.297.484 2.422 1.328 3.25H3.937C2.11 8.906.97 10.11.97 12.016v4.109c0 1.594.75 2.703 2.125 3h.11v9.594c0 2.953 1.624 4.5 4.577 4.5zm6.922-24.313h-2.437c-2.454 0-3.891-1.39-3.891-3.11 0-1.718 1.25-2.718 2.969-2.718 1.86 0 3.36 1.406 3.36 3.719v2.11zm2.563 0v-2.11c0-2.312 1.5-3.718 3.359-3.718 1.719 0 2.969 1 2.969 2.719 0 1.719-1.422 3.11-3.89 3.11h-2.438zm-2.672 7.969H4.578c-.781 0-1.094-.328-1.094-1.11V12.36c0-.78.313-1.093 1.094-1.093h10.016v5.609zm2.781 0v-5.61h10.047c.781 0 1.078.313 1.078 1.094v3.407c0 .78-.297 1.109-1.078 1.109H17.375zm-2.781 14H7.75c-1.297 0-2.031-.734-2.031-2.031v-9.61h8.875v11.641zm2.781 0v-11.64h8.875v9.609c0 1.297-.734 2.031-2.031 2.031h-6.844z"})})},83065:(e,t,o)=>{o.d(t,{_:()=>a});o(67294);var n=o(45238),i=o(85893);const a=(0,n.IU)("sendArrow",{viewBox:"0 0 20 20",svg:(0,i.jsx)("path",{d:"M9.79883 18.5894C14.6216 18.5894 18.5894 14.6216 18.5894 9.79883C18.5894 4.96777 14.6216 1 9.79053 1C4.95947 1 1 4.96777 1 9.79883C1 14.6216 4.96777 18.5894 9.79883 18.5894ZM9.79883 14.3062C9.20947 14.3062 8.76953 13.9077 8.76953 13.3433V9.69922L8.86914 8.00586L8.25488 8.84424L7.3916 9.81543C7.23389 10.0063 6.98486 10.1143 6.72754 10.1143C6.21289 10.1143 5.84766 9.75732 5.84766 9.25928C5.84766 8.99365 5.92236 8.79443 6.12158 8.58691L8.96045 5.61523C9.19287 5.35791 9.4585 5.2417 9.79883 5.2417C10.1309 5.2417 10.4048 5.36621 10.6372 5.61523L13.4761 8.58691C13.667 8.79443 13.75 8.99365 13.75 9.25928C13.75 9.75732 13.3848 10.1143 12.8618 10.1143C12.6128 10.1143 12.3638 10.0063 12.2061 9.81543L11.3428 8.86914L10.7202 7.99756L10.8281 9.69922V13.3433C10.8281 13.9077 10.3799 14.3062 9.79883 14.3062Z"})})},33676:(e,t,o)=>{o.d(t,{A:()=>s});o(67294);var n=o(45238),i=o(39986),a=o(85893);const s=(0,n.IU)("thumbDown",{viewBox:"0 0 18 19",svg:(0,a.jsx)("g",{transform:"rotate(180 9 9.5)",children:i.f})})},97022:(e,t,o)=>{o.d(t,{E:()=>s});o(67294);var n=o(45238),i=o(10498),a=o(85893);const s=(0,n.IU)("thumbDownFilled",{viewBox:"0 0 16 18",svg:(0,a.jsx)("g",{transform:"rotate(180 8 9)",children:i.O})})},39986:(e,t,o)=>{o.d(t,{P:()=>a,f:()=>i});o(67294);var n=o(45238);const i=(0,o(85893).jsx)("path",{d:"M0.539062 12.3125C0.539062 15.0547 2.29688 17.3125 4.54688 17.3125H7.11719C8.17188 17.8516 9.42188 18.1641 10.8047 18.1641H11.8906C12.9062 18.1641 13.7734 18.1016 14.3359 17.9609C15.4766 17.6797 16.1953 16.8672 16.1953 15.8516C16.1953 15.6641 16.1719 15.5 16.1172 15.3281C16.6562 14.9141 16.9609 14.2969 16.9609 13.6328C16.9609 13.3203 16.8984 13.0078 16.7891 12.7578C17.1484 12.375 17.3594 11.8203 17.3594 11.25C17.3594 10.875 17.2656 10.4922 17.1094 10.2031C17.3281 9.86719 17.4531 9.42188 17.4531 8.9375C17.4531 7.69531 16.5078 6.73438 15.2734 6.73438H12.3672C12.1953 6.73438 12.0859 6.65625 12.0938 6.50781C12.1328 5.69531 13.4062 3.75781 13.4062 2.17188C13.4062 1.01562 12.5859 0.171875 11.4688 0.171875C10.6484 0.171875 10.0859 0.59375 9.55469 1.61719C8.58594 3.48438 7.40625 5.125 5.65625 7.28125H4.25C2.14844 7.28125 0.539062 9.52344 0.539062 12.3125ZM5.375 12.25C5.375 10.5938 5.75 9.53125 6.80469 8.11719C7.99219 6.53125 9.625 4.63281 10.8125 2.27344C11.0625 1.77344 11.2344 1.64844 11.4844 1.64844C11.7891 1.64844 11.9844 1.86719 11.9844 2.25C11.9844 3.42188 10.6641 5.35156 10.6641 6.61719C10.6641 7.55469 11.4219 8.15625 12.4375 8.15625H15.2422C15.7031 8.15625 16.0391 8.5 16.0391 8.95312C16.0391 9.28125 15.9297 9.5 15.6562 9.76562C15.4609 9.96875 15.4375 10.25 15.6094 10.4453C15.8359 10.7734 15.9375 10.9844 15.9375 11.25C15.9375 11.5781 15.7812 11.8516 15.4609 12.0938C15.2031 12.2812 15.1094 12.5859 15.2656 12.8828C15.4297 13.2109 15.5156 13.3672 15.5156 13.6172C15.5156 14 15.2734 14.2891 14.7812 14.5469C14.5312 14.6875 14.4609 14.9531 14.5703 15.1875C14.7344 15.5938 14.7578 15.6641 14.7578 15.8438C14.7578 16.1797 14.5078 16.4531 13.9766 16.5859C13.5156 16.7031 12.7812 16.75 11.8203 16.7422L10.8125 16.7344C7.57031 16.7031 5.375 14.8828 5.375 12.25ZM1.9375 12.3125C1.9375 10.3281 2.96094 8.73438 4.14062 8.6875C4.34375 8.6875 4.55469 8.6875 4.75781 8.6875C4.20312 9.76562 3.95312 10.8984 3.95312 12.25C3.95312 13.6875 4.46094 14.9531 5.375 15.9453C5.07812 15.9453 4.76562 15.9375 4.46875 15.9375C3.10156 15.8906 1.9375 14.2812 1.9375 12.3125Z"}),a=(0,n.IU)("thumbUp",{viewBox:"0 0 18 19",svg:i})},10498:(e,t,o)=>{o.d(t,{O:()=>i,w:()=>a});o(67294);var n=o(45238);const i=(0,o(85893).jsx)("path",{d:"M4 12.1875C3.99219 15.1641 6.34375 17.4297 10.0859 17.4375H11.1719C12.1953 17.4375 12.9766 17.3594 13.4297 17.2422C14.1016 17.0781 14.7031 16.6562 14.7031 15.8828C14.7031 15.5859 14.625 15.3594 14.5312 15.1875C14.4766 15.1016 14.4922 15.0234 14.5703 14.9922C15.0859 14.7578 15.4766 14.2812 15.4766 13.6562C15.4766 13.2969 15.375 12.9766 15.2031 12.75C15.125 12.6406 15.1406 12.5469 15.2656 12.4766C15.625 12.25 15.875 11.7891 15.875 11.2656C15.875 10.8828 15.7578 10.4844 15.5547 10.2812C15.4453 10.1797 15.4609 10.1094 15.5781 10.0156C15.8281 9.78906 15.9844 9.41406 15.9844 8.96094C15.9844 8.15625 15.3516 7.5 14.5234 7.5H11.7031C11.0234 7.5 10.5781 7.15625 10.5781 6.60156C10.5781 5.54688 11.9141 3.57812 11.9141 2.14844C11.9141 1.375 11.4219 0.90625 10.75 0.90625C10.1641 0.90625 9.85938 1.28906 9.53125 1.9375C8.33594 4.24219 6.75781 6.11719 5.54688 7.72656C4.49219 9.11719 4.00781 10.3125 4 12.1875ZM0.015625 12.25C0.015625 14.6719 1.52344 16.6719 3.53125 16.6719H4.89062C3.47656 15.5938 2.85156 13.9922 2.86719 12.1719C2.875 10.2031 3.57812 8.77344 4.32031 7.79688H3.23438C1.41406 7.79688 0.015625 9.75 0.015625 12.25Z"}),a=(0,n.IU)("thumbUpFilled",{viewBox:"0 0 16 18",svg:i})}}]);