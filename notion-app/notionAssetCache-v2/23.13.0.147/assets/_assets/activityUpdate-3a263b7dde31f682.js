"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[7866],{37834:(e,t,o)=>{o.d(t,{FF:()=>m,U4:()=>v,gs:()=>b,jN:()=>g,xx:()=>y,zb:()=>f});o(67294);var r=o(23867),i=o(9291),s=o(37810),n=o(77080),a=o(46096),l=o(36610),d=o(54642),c=o(47307),u=o(92625),h=o(85893);const p=(0,i.defineMessages)({restoringPreviousVersion:{id:"historyModalActions.restoringPreviousVersion.loadingMessage",defaultMessage:"Restoring…"}});function g(e){const{environment:t,from:o,...r}=e;l.y(t,o),a.Z.setState({...r,open:!0,size:50})}function m(){const e=a.Z.state;e.open&&a.Z.setState({...e,size:e.size+20})}function v(){a.Z.setState({open:!1})}function b(e){const{environment:t,snapshot:o,nextFutureSnapshot:r}=e;l.qD(t,o);const i=a.Z.state;i.open&&a.Z.setState({...i,snapshot:o,nextFutureSnapshot:r,openSnapshotNearTimestamp:void 0})}function f(){const e=a.Z.state;e.open&&a.Z.setState({...e,snapshot:void 0,nextFutureSnapshot:void 0})}async function y(e){if(!a.Z.state.open)return;if(!a.Z.state.snapshot)return;const t="restore_collection",o=a.Z.state.pageHasCollection,g=n.default.checkGate("snapshot_optional_collection_rollback_enabled")&&o?[{key:t,text:(0,h.jsx)(i.FormattedMessage,{defaultMessage:"Also restore databases on this page",id:"historyModal.confirmDialog.selectOption.collection"}),description:(0,h.jsx)(i.FormattedMessage,{defaultMessage:"All database pages will be restored to the previous version, which may impact other users or database views.",id:"historyModal.confirmDialog.selectOption.collection.description"})}]:void 0,{accept:m,selectionResult:b}=await c.confirmUserActionV2({message:(0,h.jsx)("div",{style:{fontWeight:s.Z.fontWeight.semibold,fontSize:"medium"},children:(0,h.jsx)(i.FormattedMessage,{defaultMessage:"Restore to this version?",id:"historyModal.confirmDialog.description"})}),acceptLabel:(0,h.jsx)(i.FormattedMessage,{defaultMessage:"Restore",id:"historyModal.confirmDialog.restoreButton.label"}),selectionItems:g});if(!m)return;l.R9(e,a.Z.state.snapshot),u.j({message:p.restoringPreviousVersion});const f=await d.restoreSnapshot(e,{block:{id:a.Z.state.blockStore.id,spaceId:(0,r.C)(a.Z.state.blockStore.pointer.spaceId)},timestamp:a.Z.state.snapshot.timestamp,shouldRestoreCollection:(null==b?void 0:b[t])??!1}).next();f.value.error&&c.showErrorMessage(f.value.error.message),u.x(),v()}},68155:(e,t,o)=>{o.d(t,{Z:()=>a});o(67294);var r=o(9291),i=o(62896),s=o(10906),n=o(85893);const a=function(e){let{collectionViewName:t,collectionViewType:o}=e;return t?(0,n.jsx)(i.Z,{children:t}):"page"===o?(0,n.jsx)(r.FormattedMessage,{id:"database.collectionView.untitledName.untitled",defaultMessage:"Untitled"}):(0,n.jsx)(r.FormattedMessage,{...s.b1[o]})}},89845:(e,t,o)=>{o.d(t,{Z:()=>m});o(67294);var r=o(83355),i=o(13991),s=o(7057),n=o(53877),a=o(42875),l=o(36700),d=o(9291),c=o(31701),u=o(19584),h=o(26388),p=o(85893);class g extends r.Z{constructor(){super(...arguments),this.reminderTimer=void 0}UNSAFE_willMountOrUpdate(){this.createReminderTimer()}willUnmount(){this.clearReminderTimer()}createReminderTimer(){const e=this.props.value;if(!e)return;const t=n.KR(e,(0,a.r)());if(!t)return;const o=t.valueOf(),r=o-Date.now();r<0||r>u.A0||this.reminderTimer&&this.reminderTimer.timestamp===o||(this.reminderTimer&&clearTimeout(this.reminderTimer.timer),this.reminderTimer={timestamp:o,timer:setTimeout(this.enqueueForceUpdate,r)})}clearReminderTimer(){this.reminderTimer&&(clearTimeout(this.reminderTimer.timer),this.reminderTimer=void 0)}renderComponent(){const{value:e,withComma:t}=this.props;if(!e)return;const o=n.NK(e,(0,a.r)(),i.SP);let r;if(e.reminder){const t=n.Nm(e,(0,a.r)());r=t?{color:this.theme.errorText}:{color:c.ZP.blue}}const d=(0,p.jsxs)(p.Fragment,{children:[(0,s.ZV)({value:e,date_format:this.props.dateFormat,time_format:this.props.timeFormat,userTimeZone:(0,a.r)(),allowRelativeDates:!0,intl:this.props.intl,shortenDateAndRange:this.props.shortenDateAndRange,displayInUserTimezone:this.props.displayInUserTimezone}),e.reminder&&(0,l.m)({display:"inline-block",width:"1em",marginLeft:6,marginRight:2,paddingBottom:4,verticalAlign:"middle"}),t?", ":null]});return this.props.disableTooltip?(0,p.jsx)("div",{style:{...this.props.style,...r},children:d}):(0,p.jsx)(h.ZP,{renderTooltip:()=>(0,p.jsxs)(p.Fragment,{children:[this.props.tooltipHeader,(0,p.jsxs)("div",{style:b(this.theme,this.props.tooltipHeader),children:[v(o.start),o.end?` → ${v(o.end)}`:""]})]}),render:e=>(0,p.jsx)("div",{style:{...this.props.style,...r},...e,children:d}),placement:this.props.tooltipPlacement})}}g.displayName="DateBox";const m=(0,d.injectIntl)(g);function v(e){return(0,s.ZW)(e,"medium")}function b(e,t){return t?{color:e.mediumInvertedTextColor}:{}}},67706:(e,t,o)=>{o.d(t,{Z:()=>l});o(67294);var r=o(24405),i=o(37810),s=o(53437),n=o(26388),a=o(85893);function l(e){let{text:t,tooltipText:o,icon:l}=e;const d=(0,r.yK)((e=>({icon:{height:"1em",width:"1em",marginRight:"0.25em",fill:e.mediumIconColor,marginBottom:"0.1em"},tooltip:{background:e.contentBackground,boxShadow:e.lightBoxShadow},container:{display:"flex",alignItems:"center",fontWeight:i.Z.fontWeight.regular,color:e.mediumTextColor,fontSize:i.Z.fontSize.UISmall.desktop,textAlign:"center"},text:{display:"inline"}})),[]);return(0,a.jsx)(n.ZP,{style:d.tooltip,render:e=>(0,a.jsx)("div",{style:d.text,...e,children:t}),renderTooltip:()=>(0,a.jsxs)("div",{style:d.container,children:[l(d.icon),(0,a.jsx)("div",{children:o})]}),alignment:s.ZP.Alignment.Start,placement:s.ZP.Placement.Bottom})}},92559:(e,t,o)=>{o.d(t,{Z:()=>n});o(67294);var r=o(24405),i=o(31701),s=o(85893);function n(){const e=(0,r.yK)((()=>({blockContext:{flexShrink:0,display:"flex",width:3,borderRadius:4,marginLeft:2,marginRight:8,minHeight:24,background:i.DB}})),[]);return(0,s.jsx)("div",{style:e.blockContext})}},36081:(e,t,o)=>{o.d(t,{Z:()=>u});var r=o(67294),i=o(24405),s=o(9291),n=o(1898),a=o(31278),l=o(22649),d=o(85893);function c(e){let t,o,{permissionGroup:c,spaceId:u}=e;c?(t=c.icon,o=c.name||(0,d.jsx)(s.FormattedMessage,{defaultMessage:"Untitled group",id:"activity.permissionGroupTitles.untitledGroup"})):o=(0,d.jsx)(s.FormattedMessage,{defaultMessage:"Deleted group",id:"activity.permissionGroupTitles.deletedGroup"});const h=void 0!==t,p=(0,i.yK)((()=>({title:(0,l.TL)(h)})),[h]),g=(0,r.useMemo)((()=>(0,n.$K)(t)?{icon:t,pointer:{table:"space",id:u}}:void 0),[t,u]);return(0,d.jsxs)("span",{children:[g&&(0,d.jsx)(a.Z,{disabled:!0,icon:g,isEmptyPage:!1,size:18,style:l.e9}),(0,d.jsx)("span",{style:p.title,children:o})]})}const u=r.memo(c)},23160:(e,t,o)=>{o.r(t),o.d(t,{default:()=>oe});o(57658);var r=o(67294),i=o(83355),s=o(480),n=o(86628),a=o(24405),l=o(40902),d=o(15145),c=o(41432),u=o(12396),h=o(68626),p=o(55061),g=o(89101),m=o(21202),v=o(6287),b=o(13493),f=o(70279),y=o(33709),A=o(75246),S=o(99108),x=o(9291),j=o(1898),O=o(20616),M=o(68155),T=o(6258),k=o(84076),C=o(63381),R=o(13658),Z=o(17022),_=o(90060),w=o(12472),P=o(36081),I=o(22649),B=o(78976),V=o(74970),F=(o(92996),o(23867)),L=o(70203),D=o(37810),E=o(19719),N=o(95306),K=o(60682),U=o(14976),z=o(98165),W=o(62385),G=o(92559),H=o(85893);function X(e){let{activity:t,tabArgs:o,rootStore:i,isLast:a}=e;const l=(0,n.VK)((()=>t.getEdits()),[t]),{source:c,tab:u,notification:h}=o;let p=l.filter((e=>{switch(e.type){case"comment-changed":return!1;case"comment-created":case"comment-deleted":return!0;default:(0,j.t1)(e)}}));0===p.length&&0!==l.length&&"updates_sidebar"!==c&&(p=l);const g=p.length>0,v=(0,s.O7)(),b=(0,n.VK)((()=>{const e=i.getRecordStore(i,{table:y.qF,id:t.discussion_id,spaceId:t.space_id});if(e.isDefined())return e}),[t,i]),f=(0,n.VK)((()=>{const e=null==b?void 0:b.getParentPointer();if(e)return T.G.createChildStore(i,e)}),[b,i]),A=(0,n.VK)((()=>Boolean(f&&f.isDefined())),[f]),S=(0,n.VK)((()=>{const e=null==f?void 0:f.getNavigableBlockStore();return(null==e?void 0:e.id)||t.navigable_block_id}),[t,f]),O=T.G.createChildStore(i,{table:m.iU,id:S}),M=(0,n.VK)((()=>O.isDefined()),[O]),w=(0,n.VK)((()=>Boolean(f&&(0,z.fl)((0,z.qA)(f)))),[f]),P=(0,n.VK)((()=>{if(!w||!f)return;const e=f.getModel();return e?e.getRenderUrl({getRecordModel:i.getRecordModel,discussionId:t.discussion_id,pageVisitSource:d.tY.Notification}):void 0}),[w,f,i,t]),F=(0,n.VK)((()=>(0,_.P6)({edits:p,rootStore:i})),[p,i]),L=(0,n.VK)((()=>(0,_.XW)(F)),[F]),D=w,E=(0,r.useCallback)((e=>{if((0,Z.dG)({...o,environment:v,activity:t,mightCloseTab:D}),!w&&f&&b){var r;const i=e.target;N.oK({environment:v,discussionStore:b,rect:i.getBoundingClientRect(),blockStore:f,discussionLocation:Q({forReplyMenu:!0,source:o.source}),activityId:t.id,notificationId:null===(r=o.notification)||void 0===r?void 0:r.id})}}),[t,w,f,b,v,o,D]),K=(0,r.useCallback)((()=>{(0,Z.BE)({...o,environment:v,activity:t,mightCloseTab:D})}),[o,v,t,D]),U=(0,H.jsx)(B.Z,{titledRecordStore:O,getRecordModel:i.getRecordModel,activity:t,tabArgs:o}),W=(0,n.VK)((()=>(0,_.jC)({recordId:S,recordType:m.iU,tab:u,rootStore:i,environment:v})),[S,u,i,v]),G=v.device.isMobile,X=(0,n.VK)((()=>Q({source:c,forReplyMenu:!1})),[c]),$=(0,n.VK)((()=>(0,_.cr)({activity:t,rootStore:i})),[t,i]),J=null==$?void 0:$.id,ee=null==$?void 0:$.context,te=(0,n.VK)((()=>parseInt(t.end_time)),[t]);return g&&M&&A&&b?(0,H.jsxs)(V.ZP,{timestamp:te,header:(0,H.jsx)("span",{children:(0,H.jsx)(x.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} commented in {blockName}} other {{authorOrAuthors} commented in {blockName}}}",values:{numberOfAuthors:F.length,authorOrAuthors:L,blockName:U},id:"activity.commentActivity.header"})}),isLast:a,isPrivate:W,rootStore:i,navigableBlockId:S,icon:(0,H.jsx)(V.BE,{authors:F,size:24}),showSnapshotButton:!1,...(0,Z.h9)({notification:h,environment:v,tab:u,activity:t}),children:[(0,H.jsx)(q,{url:P,onClick:E,discussionId:J,discussionContext:ee,alwaysHighlightWithBlockBar:!1,rootStore:i,source:c}),(0,H.jsx)(R.Z,{visible:5,items:p.map(((e,t,o)=>(0,H.jsx)(k.Z,{onClick:E,href:P,innerStyle:(0,I.OD)({source:c,isMobile:G}),children:(0,H.jsx)(C.Z,{edit:e,rootStore:i,type:"comment-edit",discussionLocation:X,onReactionClick:K,hideAuthorName:!1})},t)))}),(0,H.jsx)(Y,{activity:t,rootStore:i,tabArgs:o})]}):null}function q(e){const{url:t,onClick:o,rootStore:r,source:i,discussionId:l,alwaysHighlightWithBlockBar:d,discussionContext:c}=e,u=0===(0,L.llS)(c).length||d,h=(0,s.O7)(),p=h.device.isMobile,g=(0,a.Fg)(),m=(0,a.yK)((e=>({linkbox:{...(0,I.OD)({source:i,isMobile:p}),display:"flex",alignItems:"center",fontSize:14,...u&&{color:e.mediumTextColor},paddingTop:2,paddingBottom:6,marginBottom:0}})),[p,i,u]),v=(0,n.VK)((()=>(0,U.IY)({environment:h,textValue:c?{value:c,spaceId:r.id}:void 0,parentStore:r,disableHover:!0,disableStyleAnnotations:u,disableInsertedDeletedAnnotations:u,disableDateStyleAnnotations:!1,disabled:!0,highlightDiscussionId:l,theme:g,emojiType:(0,K.e_)(h),katex:h.KatexStore.getKatex(),formulaValueTypes:[]})),[r,h,c,l,g,u]);return c?(0,H.jsxs)(k.Z,{href:t,onClick:o,innerStyle:m.linkbox,children:[u&&(0,H.jsx)(G.Z,{}),(0,H.jsx)("div",{style:D.Z.textOverflowStyle,children:v})]}):null}function Y(e){const{activity:t,rootStore:o,tabArgs:i}=e,{source:l,notification:d,tab:c}=i,u=(0,n.VK)((()=>{const e=o.getRecordStore(o,{table:y.qF,id:t.discussion_id,spaceId:t.space_id});if(e.isDefined())return e}),[t,o]),h=(0,s.O7)(),p=h.device.isMobile,g=(0,n.VK)((()=>T.t1.createChildStore(o,{table:y.qF,id:t.discussion_id,spaceId:(0,F.C)(o.pointer.spaceId)})),[t,o]),v=(0,n.VK)((()=>null==u?void 0:u.getParentId()),[u]),b=(0,r.useCallback)((e=>{if(!v)return;const r=T.G.createChildStore(o,{table:m.iU,id:v}),i=e.target,s=null==d?void 0:d.id;N.oK({environment:h,discussionStore:g,rect:i.getBoundingClientRect(),blockStore:r,discussionLocation:Q({forReplyMenu:!0,source:l}),activityId:t.id,notificationId:s}),"notifications_tab"===l&&E.gY({environment:h,notificationId:s,alreadyRead:Boolean(null==d?void 0:d.read),activity:t,tab:c})}),[t,g,h,d,v,o,l,c]),f=(0,a.yK)((e=>({container:{paddingLeft:(0,I.c3)({source:l,isMobile:p}),paddingTop:12,paddingBottom:4},actionButton:(0,I.b9)(e)})),[p,l]),A=Boolean(null==d?void 0:d.visited);return u?(0,H.jsxs)("div",{style:f.container,children:[(0,H.jsx)(W.Z,{onClick:b,style:f.actionButton,children:(0,H.jsx)(x.FormattedMessage,{defaultMessage:"Reply",id:"activity.replyButton.label"})}),A&&(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)($,{}),(0,H.jsx)(w.D,{tabArgs:i,environment:h,rootStore:o,activity:t})]})]}):null}function $(){return(0,H.jsx)("div",{style:{width:5,display:"inline-block"}})}function Q(e){const{forReplyMenu:t,source:o}=e;if("updates_sidebar"===o)return t?"reply_menu_updates_sidebar":"updates_sidebar";return`${t?"reply_menu_":"updates_menu_"}${E.Jn()}`}const J=r.memo(X),ee={width:12,height:12,display:"inline-block",verticalAlign:"middle",marginBottom:2,marginRight:4};class te extends i.Z{constructor(){super(...arguments),this.renderBlockEdit=(e,t,o)=>{const{tabArgs:r}=this.props,{source:i}=r;let s=this.getRecordModel({table:m.iU,id:e.block_id});s&&s.type===c.Ti.tableRow&&(s=this.getRecordModel({table:m.iU,id:s.parent_id}));const n=s?s.getRenderUrl({getRecordModel:this.getRecordModel,pageVisitSource:d.tY.Activity}):g._j.root,a=this.environment.device.isMobile;return"block-deleted"===e.type?e.block_data.block_value.type===c.Ti.page?(0,H.jsx)(k.Z,{href:n,onClick:()=>(0,Z.dG)({...r,environment:this.environment,activity:o}),innerStyle:(0,I.OD)({source:i,isMobile:a}),children:(0,H.jsx)(C.Z,{edit:e,rootStore:this.props.rootStore})},t):(0,H.jsx)("div",{style:(0,I.OD)({source:i,isMobile:a}),children:(0,H.jsx)(C.Z,{edit:e,rootStore:this.props.rootStore})},t):(0,H.jsx)(k.Z,{href:n,onClick:()=>(0,Z.dG)({...r,environment:this.environment,activity:o}),innerStyle:(0,I.OD)({source:i,isMobile:a}),children:(0,H.jsx)(C.Z,{edit:e,rootStore:this.props.rootStore})},t)}}UNSAFE_willMountOrUpdate(){!function(e,t){if("commented"===e.type){const r=se({table:y.qF,id:e.discussion_id,spaceId:e.space_id},t);if(r.isDefined()){const e=r.getCommentStores();for(const t of e){var o;null===(o=t.getCreatedByStore())||void 0===o||o.load()}}}}(this.props.activity,this.props.rootStore),this.environment.KatexStore.loadIfNeeded((()=>function(e,t){const o=(0,_.cr)({activity:e,rootStore:t});if(!o)return;return o.context}(this.props.activity,this.props.rootStore)))}renderComponent(){const{activity:e,rootStore:t,tabArgs:o,isLast:r}=this.props,i=e.type;if(!l.KN(i))return h.log({level:"error",from:"ActivityUpdate",type:"unsupportedActivityType",data:{message:`Activity type ${i} is not supported for ActivityUpdate`}}),null;switch(i){case"block-edited":return this.renderBlockEditActivity(e);case"collection-row-created":case"collection-row-deleted":return this.renderCollectionRowActivity(e);case"top-level-block-created":case"top-level-block-deleted":return this.renderTopLevelBlockActivity(e);case"permissions-edited":return this.renderPermissionsActivity(e);case"permission-group-edited":return this.renderPermissionGroupActivity(e);case"commented":return(0,H.jsx)(J,{activity:e,tabArgs:o,rootStore:t,isLast:r});case"collection-edited":return this.renderCollectionEdited(e);case"collection-view-edited":return this.renderCollectionViewEdited(e);case"collection-property-edited":return this.renderCollectionPropertyEdited(e);case"page-locked":case"page-unlocked":return this.renderPageLockActivity(e);case"page-deleted":case"page-restored":case"page-permanently-deleted":return(0,H.jsx)(le,{tabArgs:this.props.tabArgs,rootStore:this.props.rootStore,isLast:this.props.isLast,activity:e});default:(0,j.t1)(i)}}renderBlockEditActivity(e){const{tabArgs:t,rootStore:o}=this.props,{notification:r,tab:i}=t,s=e.getEdits();if(!s.length)return;const n=(0,S.hI)(s).filter((e=>{const{block_value:t}="block-changed"===e.type?e.block_data.after:e.block_data;return t.parent_table!==f.x_}));if(0===n.length)return;const a=this.getBlockStore(n[0].navigable_block_id);if(!a.isDefined())return;const l=(0,_.P6)({edits:n,rootStore:o}),d=(0,_.XW)(l),c=(0,H.jsx)(B.Z,{titledRecordStore:a,activity:e,tabArgs:t,getRecordModel:o.getRecordModel});return(0,H.jsxs)(V.ZP,{timestamp:parseInt(e.end_time),header:(0,H.jsx)("span",{children:(0,H.jsx)(x.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} edited {pageTitle}} other {{authorOrAuthors} edited {pageTitle}}}",id:"activity.blockEdited.header",values:{numberOfAuthors:l.length,authorOrAuthors:d,pageTitle:c}})}),isLast:this.props.isLast,isPrivate:(0,_.jC)({recordId:a.id,recordType:"block",tab:i,rootStore:o,environment:this.environment}),rootStore:this.props.rootStore,navigableBlockId:a.id,icon:(0,H.jsx)(V.BE,{authors:l,size:24}),showSnapshotButton:ie(this.props.tabArgs),...(0,Z.h9)({notification:r,activity:e,environment:this.environment,tab:i}),children:[(0,H.jsx)(R.Z,{visible:5,items:n.map(((t,o)=>this.renderBlockEdit(t,o,e)))}),(0,H.jsx)(w.Z,{tabArgs:t,activity:e,isMobile:this.environment.device.isMobile,environment:this.environment,rootStore:o})]})}renderCollectionRowActivity(e){const{tabArgs:t,rootStore:o}=this.props,{notification:r,tab:i}=t,s=e.getEdits();if(!s.length)return;const n=s[0],a=this.getBlockStore(e.collection_row_id);if(!a.isDefined())return;if(!a.getProperties())return;const l=(0,_.P6)({edits:s,rootStore:o}),d=(0,_.XW)(l),c=(0,H.jsx)(B.Z,{titledRecordStore:a,activity:e,tabArgs:t,getRecordModel:o.getRecordModel}),u="collection-row-created"===n.type?(0,H.jsx)(x.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} created {pageTitle}} other {{authorOrAuthors} created {pageTitle}}}",values:{numberOfAuthors:l.length,authorOrAuthors:d,pageTitle:c},id:"activity.collectionRowCreated.header"}):(0,H.jsx)(x.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} deleted {pageTitle}} other {{authorOrAuthors} deleted {pageTitle}}}",values:{numberOfAuthors:l.length,authorOrAuthors:d,pageTitle:c},id:"activity.collectionRowDeleted.header"});return(0,H.jsx)(V.ZP,{timestamp:parseInt(e.end_time),header:(0,H.jsx)("span",{children:u}),isLast:this.props.isLast,isPrivate:(0,_.jC)({recordId:a.id,recordType:"block",tab:i,rootStore:o,environment:this.environment}),rootStore:this.props.rootStore,navigableBlockId:a.id,icon:(0,H.jsx)(V.BE,{authors:l,size:24}),showSnapshotButton:ie(this.props.tabArgs),...(0,Z.h9)({notification:r,activity:e,environment:this.environment,tab:i}),children:(0,H.jsx)(w.Z,{tabArgs:t,activity:e,isMobile:this.environment.device.isMobile,environment:this.environment,rootStore:o})})}renderTopLevelBlockActivity(e){const{tabArgs:t,rootStore:o}=this.props,{notification:r,tab:i}=t,s=e.getEdits();if(!s.length)return;const n=s[0],a=this.getBlockStore(e.top_level_block_id);if(!a.isDefined())return;const l=a.hasSpacePermission(),d=(0,_.P6)({edits:s,rootStore:o}),c=(0,_.XW)(d),u=(0,H.jsx)(B.Z,{titledRecordStore:a,activity:e,tabArgs:t,getRecordModel:o.getRecordModel});let h;return h=l?"top-level-block-created"===n.type?(0,H.jsx)(x.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} created workspace page {pageTitle}} other {{authorOrAuthors} created workspace page {pageTitle}}}",values:{numberOfAuthors:d.length,authorOrAuthors:c,pageTitle:u},id:"activity.topLevelBlockWorkspaceCreated.header"}):(0,H.jsx)(x.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} deleted workspace page {pageTitle}} other {{authorOrAuthors} deleted workspace page {pageTitle}}}",values:{numberOfAuthors:d.length,authorOrAuthors:c,pageTitle:u},id:"activity.topLevelBlockWorkspaceDeleted.header"}):"top-level-block-created"===n.type?(0,H.jsx)(x.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} created private page {pageTitle}} other {{authorOrAuthors} created private page {pageTitle}}}",values:{numberOfAuthors:d.length,authorOrAuthors:c,pageTitle:u},id:"activity.topLevelBlockPrivateCreated.header"}):(0,H.jsx)(x.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} deleted private page {pageTitle}} other {{authorOrAuthors} deleted private page {pageTitle}}}",values:{numberOfAuthors:d.length,authorOrAuthors:c,pageTitle:u},id:"activity.topLevelBlockPrivateDeleted.header"}),(0,H.jsx)(V.ZP,{timestamp:parseInt(e.end_time),header:(0,H.jsx)("span",{children:h}),isLast:this.props.isLast,isPrivate:(0,_.jC)({recordId:a.id,recordType:"block",tab:i,rootStore:o,environment:this.environment}),rootStore:this.props.rootStore,icon:(0,H.jsx)(V.BE,{authors:d,size:24}),showSnapshotButton:!1,...(0,Z.h9)({notification:r,activity:e,environment:this.environment,tab:i})})}renderPermissionsActivity(e){const{tabArgs:t,rootStore:o}=this.props,{notification:r,tab:i,source:s}=t,n=e.getEdits();if(!n.length)return;const a=(0,S.hI)(n);if(0===a.length)return;let d,c;const u=a[0];if(u.navigable_block_id){const r=this.getBlockStore(u.navigable_block_id);if(!r.isDefined())return;c=(0,H.jsx)(B.Z,{titledRecordStore:r,activity:e,tabArgs:t,getRecordModel:o.getRecordModel}),d=(0,_.jC)({recordId:r.id,recordType:"block",tab:i,rootStore:o,environment:this.environment})}else{const r=ne(u.space_id,this.props.rootStore);if(!r.isDefined())return;c=(0,H.jsx)(B.Z,{titledRecordStore:r,activity:e,tabArgs:t,getRecordModel:o.getRecordModel}),d=(0,_.jC)({recordId:u.space_id,recordType:"space",tab:i,rootStore:o,environment:this.environment})}const{autojoinEdits:h,inheritanceEdits:p,otherEdits:g}=l.md(a),m=[];h.forEach(((t,s)=>{const n=(0,_.P6)({edits:[t],rootStore:o}),a=(0,_.XW)(n);m.push((0,H.jsx)(V.ZP,{timestamp:t.timestamp,header:(0,H.jsx)("span",{children:(0,H.jsx)(x.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} joined {pageOrSpaceName}} other {{authorOrAuthors} joined {pageOrSpaceName}}}",values:{numberOfAuthors:n.length,authorOrAuthors:a,pageOrSpaceName:c},id:"activity.permissionsActivity.header"})}),isLast:this.props.isLast,isPrivate:d,rootStore:this.props.rootStore,navigableBlockId:t.navigable_block_id,icon:(0,H.jsx)(V.BE,{authors:n,size:24}),showSnapshotButton:!1,...(0,Z.h9)({notification:r,activity:e,environment:this.environment,tab:i})},`autojoin-${s}`))}));const v=this.environment.device.isMobile;p.forEach(((n,a)=>{const l=(0,_.P6)({edits:[n],rootStore:o}),u=(0,_.XW)(l);let h;"permission-restriction-created"===n.type?h=(0,H.jsx)(x.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} restricted access for {pageOrSpaceName}} other {{authorOrAuthors} restricted access for {pageOrSpaceName}}}{inSudoMode, select, true { using administrator privileges} other {}}",values:{numberOfAuthors:l.length,authorOrAuthors:u,pageOrSpaceName:c,inSudoMode:n.inSudoMode},id:"activity.restrictPermissionsForActivity.header"}):"permission-restriction-deleted"===n.type&&(h=(0,H.jsx)(x.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} restored inherited access for {pageOrSpaceName}} other {{authorOrAuthors} restored inherited access for {pageOrSpaceName}}}{inSudoMode, select, true { using administrator privileges} other {}}",values:{numberOfAuthors:l.length,authorOrAuthors:u,pageOrSpaceName:c,inSudoMode:n.inSudoMode},id:"activity.restorePermissionsForActivity.header"})),m.push((0,H.jsxs)(V.ZP,{timestamp:parseInt(e.end_time),header:(0,H.jsx)("span",{children:h}),isLast:this.props.isLast,isPrivate:d,rootStore:this.props.rootStore,navigableBlockId:n.navigable_block_id,icon:(0,H.jsx)(V.BE,{authors:l,size:24}),showSnapshotButton:!1,...(0,Z.h9)({notification:r,activity:e,environment:this.environment,tab:i}),children:[(0,H.jsx)("div",{style:(0,I.OD)({source:s,isMobile:v}),children:(0,H.jsx)(C.Z,{edit:n,rootStore:this.props.rootStore})}),(0,H.jsx)(w.Z,{tabArgs:t,activity:e,isMobile:v,environment:this.environment,rootStore:o})]},`inheritance-${a}`))}));const b=(n,a,l)=>{if(n.length>0){const c=(0,_.P6)({edits:n,rootStore:o});m.push((0,H.jsxs)(V.ZP,{timestamp:parseInt(e.end_time),header:l,isLast:this.props.isLast,isPrivate:d,rootStore:this.props.rootStore,navigableBlockId:u.navigable_block_id,icon:(0,H.jsx)(V.BE,{authors:c,size:24}),showSnapshotButton:!1,...(0,Z.h9)({notification:r,activity:e,environment:this.environment,tab:i}),children:[n.map(((e,t,o)=>(0,H.jsx)("div",{style:(0,I.OD)({source:s,isMobile:v}),children:(0,H.jsx)(C.Z,{edit:e,rootStore:this.props.rootStore},t)},t))),(0,H.jsx)(w.Z,{tabArgs:t,activity:e,isMobile:this.environment.device.isMobile,environment:this.environment,rootStore:o})]},a))}},f=g.filter((e=>!e.inSudoMode));if(f.length>0){const e=(0,_.P6)({edits:f,rootStore:o}),t=(0,_.XW)(e);b(f,"other",(0,H.jsx)("span",{children:(0,H.jsx)(x.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} updated permission for {pageOrSpaceName}} other {{authorOrAuthors} updated permission for {pageOrSpaceName}}}",values:{numberOfAuthors:e.length,authorOrAuthors:t,pageOrSpaceName:c},id:"activity.updatedPermissionsForActivity.header"})}))}const y=g.filter((e=>e.inSudoMode));if(y.length>0){const e=(0,_.P6)({edits:y,rootStore:o}),t=(0,_.XW)(e);b(y,"other-sudo",(0,H.jsx)("span",{children:(0,H.jsx)(x.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} updated permission for {pageOrSpaceName}} other {{authorOrAuthors} updated permission for {pageOrSpaceName}}} using administrator privileges",values:{numberOfAuthors:e.length,authorOrAuthors:t,pageOrSpaceName:c},id:"activity.updatedPermissionsForActivityInSudoMode.header"})}))}return m}renderPermissionGroupActivity(e){const{tabArgs:t,rootStore:o}=this.props,{notification:r,tab:i,source:s}=t,n=e.getEdits();if(!n.length)return;const a=(0,S.hI)(n),l=a[0];if(!l)return;const d=ne(l.space_id,this.props.rootStore);if(!d.isDefined())return;const c=(0,Z.ME)(d.getModel().getRenderUrl({})),u=(0,H.jsx)(P.Z,{permissionGroup:(0,p.c_)({activity:e,getRecordValue:this.getRecordValue}),spaceId:e.space_id}),h=(0,_.P6)({edits:a,rootStore:o}),g=this.environment.device.isMobile;return(0,H.jsxs)(V.ZP,{timestamp:parseInt(e.end_time),header:(0,H.jsx)("span",{children:(0,H.jsx)(re,{activity:e,authors:h,groupName:u})}),isLast:this.props.isLast,isPrivate:(0,_.jC)({recordId:e.space_id,recordType:"space",tab:i,rootStore:o,environment:this.environment}),rootStore:o,icon:(0,H.jsx)(V.BE,{authors:h,size:24}),showSnapshotButton:!1,...(0,Z.h9)({notification:r,activity:e,environment:this.environment,tab:i}),children:[(0,H.jsx)(k.Z,{href:c,onClick:()=>(0,Z.dG)({...t,environment:this.environment,activity:e}),innerStyle:(0,I.OD)({source:s,isMobile:g}),children:(0,H.jsx)(C.Z,{edit:l,rootStore:o})}),(0,H.jsx)(w.Z,{tabArgs:t,activity:e,isMobile:g,environment:this.environment,rootStore:o})]})}renderCollectionEdited(e){const{tabArgs:t,rootStore:o}=this.props,{notification:r,tab:i}=t,s=e.getEdits();if(!s.length)return;const n=se({table:v.vF,id:e.collection_id,spaceId:e.space_id},this.props.rootStore);if(!n.isDefined())return;const a=s[0];if(!a)return;const c=n.getModel().getRenderUrl({getRecordModel:this.getRecordModel,pageVisitSource:d.tY.Activity}),u=(0,_.P6)({edits:s,rootStore:o}),h=(0,_.XW)(u),p=(0,H.jsx)(B.Z,{titledRecordStore:n,activity:e,tabArgs:t,getRecordModel:o.getRecordModel}),g="collection-created"===a.type?(0,H.jsx)(x.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} created {collectionTitle}} other {{authorOrAuthors} created {collectionTitle}}}",values:{numberOfAuthors:u.length,authorOrAuthors:h,collectionTitle:p},id:"activity.collectionCreated.header"}):(0,H.jsx)(x.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} edited {collectionTitle}} other {{authorOrAuthors} edited {collectionTitle}}}",values:{numberOfAuthors:u.length,authorOrAuthors:h,collectionTitle:p},id:"activity.collectionEdited.header"});return(0,H.jsxs)(V.ZP,{timestamp:parseInt(e.end_time),header:(0,H.jsx)("span",{children:g}),isLast:this.props.isLast,isPrivate:(0,_.jC)({recordId:e.collection_id,recordType:"collection",tab:i,rootStore:o,environment:this.environment}),rootStore:o,navigableBlockId:e.navigable_block_id,icon:(0,H.jsx)(V.BE,{authors:u,size:24}),showSnapshotButton:ie(this.props.tabArgs),...(0,Z.h9)({notification:r,activity:e,environment:this.environment,tab:i}),children:[l.OC(a)&&(0,H.jsx)(ae,{tabArgs:this.props.tabArgs,rootStore:this.props.rootStore,edit:a,url:c}),(0,H.jsx)(w.Z,{tabArgs:t,activity:e,isMobile:this.environment.device.isMobile,environment:this.environment,rootStore:o})]})}renderCollectionViewEdited(e){const{tabArgs:t,rootStore:o}=this.props,{notification:r,tab:i}=t,s=e.getEdits();if(!s.length)return;const n=se({table:v.vF,id:e.collection_id,spaceId:e.space_id},this.props.rootStore);if(!n.isDefined())return;const a=se({table:b.np,id:e.collection_view_id,spaceId:e.space_id},this.props.rootStore);if(!a.isDefined())return;const l=(0,S.hI)(s),d=l[0];if(!d)return;const c=this.renderCollectionViewTitle(a,e),u=(0,H.jsx)(B.Z,{titledRecordStore:n,activity:e,tabArgs:t,getRecordModel:o.getRecordModel}),h=(0,_.P6)({edits:l,rootStore:o}),p=(0,_.XW)(h);let g;return g="collection-view-created"===d.type?(0,H.jsx)(x.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} created view {collectionViewTitle} in {collectionTitle}} other {{authorOrAuthors} created view {collectionViewTitle} in {collectionTitle}}}",values:{numberOfAuthors:h.length,authorOrAuthors:p,collectionTitle:u,collectionViewTitle:c},id:"activity.collectionViewCreated.header"}):"collection-view-deleted"===d.type?(0,H.jsx)(x.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} deleted view {collectionViewTitle} in {collectionTitle}} other {{authorOrAuthors} deleted view {collectionViewTitle} in {collectionTitle}}}",values:{numberOfAuthors:h.length,authorOrAuthors:p,collectionTitle:u,collectionViewTitle:c},id:"activity.collectionViewDeleted.header"}):(0,H.jsx)(x.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} edited view {collectionViewTitle} in {collectionTitle}} other {{authorOrAuthors} edited view {collectionViewTitle} in {collectionTitle}}}",values:{numberOfAuthors:h.length,authorOrAuthors:p,collectionTitle:u,collectionViewTitle:c},id:"activity.collectionViewEdited.header"}),(0,H.jsx)(V.ZP,{timestamp:parseInt(e.end_time),header:(0,H.jsx)("span",{children:g}),isLast:this.props.isLast,isPrivate:(0,_.jC)({recordId:e.collection_id,recordType:"collection",tab:i,rootStore:o,environment:this.environment}),rootStore:o,navigableBlockId:e.navigable_block_id,icon:(0,H.jsx)(V.BE,{authors:h,size:24}),showSnapshotButton:ie(this.props.tabArgs),...(0,Z.h9)({notification:r,activity:e,environment:this.environment,tab:i}),children:(0,H.jsx)(w.Z,{tabArgs:t,activity:e,isMobile:this.environment.device.isMobile,environment:this.environment,rootStore:o})})}renderCollectionPropertyEdited(e){const{tabArgs:t,rootStore:o}=this.props,{notification:r,tab:i}=t,s=e.getEdits();if(!s.length)return;const n=(0,S.hI)(s),a=n[0];if(!a)return;const l=se({table:v.vF,id:e.collection_id,spaceId:e.space_id},this.props.rootStore);if(!l.isDefined())return;const c=l.getModel().getRenderUrl({getRecordModel:this.getRecordModel,pageVisitSource:d.tY.Activity}),u="collection-property-changed"===a.type?a.collection_property_data.after:a.collection_property_data,h=(0,_.P6)({edits:n,rootStore:o}),p=(0,_.XW)(h),g=(0,H.jsx)(B.Z,{titledRecordStore:l,activity:e,tabArgs:t,getRecordModel:o.getRecordModel}),m=(0,H.jsx)(ce,{propertySchema:u});let b;return b="collection-property-created"===a.type?(0,H.jsx)(x.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} created property {collectionPropertyTitle} in {collectionTitle}} other {{authorOrAuthors} created property {collectionPropertyTitle} in {collectionTitle}}}",values:{numberOfAuthors:h.length,authorOrAuthors:p,collectionTitle:g,collectionPropertyTitle:m},id:"activity.collectionPropertyCreated.header"}):"collection-property-deleted"===a.type?(0,H.jsx)(x.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} deleted property {collectionPropertyTitle} in {collectionTitle}} other {{authorOrAuthors} deleted property {collectionPropertyTitle} in {collectionTitle}}}",values:{numberOfAuthors:h.length,authorOrAuthors:p,collectionTitle:g,collectionPropertyTitle:m},id:"activity.collectionPropertyDeleted.header"}):(0,H.jsx)(x.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} edited property {collectionPropertyTitle} in {collectionTitle}} other {{authorOrAuthors} edited property {collectionPropertyTitle} in {collectionTitle}}}",values:{numberOfAuthors:h.length,authorOrAuthors:p,collectionTitle:g,collectionPropertyTitle:m},id:"activity.collectionPropertyEdited.header"}),(0,H.jsxs)(V.ZP,{timestamp:parseInt(e.end_time),header:(0,H.jsx)("span",{children:b}),isLast:this.props.isLast,isPrivate:(0,_.jC)({recordId:e.collection_id,recordType:"collection",tab:i,rootStore:o,environment:this.environment}),rootStore:o,navigableBlockId:e.navigable_block_id,icon:(0,H.jsx)(V.BE,{authors:h,size:24}),showSnapshotButton:ie(this.props.tabArgs),...(0,Z.h9)({notification:r,activity:e,environment:this.environment,tab:i}),children:[(0,H.jsx)(R.Z,{visible:5,items:n.map((e=>(0,H.jsx)(de,{tabArgs:this.props.tabArgs,rootStore:this.props.rootStore,edit:e,url:c},e.collection_property_id)))}),(0,H.jsx)(w.Z,{tabArgs:t,activity:e,isMobile:this.environment.device.isMobile,environment:this.environment,rootStore:o})]})}renderPageLockActivity(e){const{tabArgs:t,rootStore:o}=this.props,{notification:r,tab:i}=t,s=e.getEdits();if(!s.length)return;const n=s[0],a=this.getBlockStore(n.navigable_block_id);if(!a.isDefined())return;const l=(0,_.P6)({edits:s,rootStore:o}),d=(0,_.XW)(l),c=(0,H.jsx)(B.Z,{titledRecordStore:a,activity:e,tabArgs:t,getRecordModel:o.getRecordModel}),u="page-locked"===e.type?(0,H.jsx)(x.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} locked {blockTitle}} other {{authorOrAuthors} locked {blockTitle}}}",values:{numberOfAuthors:l.length,authorOrAuthors:d,blockTitle:c},id:"activity.pageLocked.header"}):(0,H.jsx)(x.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} unlocked {blockTitle}} other {{authorOrAuthors} unlocked {blockTitle}}}",values:{numberOfAuthors:l.length,authorOrAuthors:d,blockTitle:c},id:"activity.pageUnlocked.header"});return(0,H.jsx)(V.ZP,{timestamp:parseInt(e.end_time),header:(0,H.jsx)("span",{children:u}),isPrivate:(0,_.jC)({recordId:a.id,recordType:"block",tab:i,rootStore:o,environment:this.environment}),isLast:this.props.isLast,rootStore:o,navigableBlockId:a.id,icon:(0,H.jsx)(V.BE,{authors:l,size:24}),showSnapshotButton:!1,...(0,Z.h9)({notification:r,activity:e,environment:this.environment,tab:i}),children:(0,H.jsx)(w.Z,{tabArgs:t,activity:e,isMobile:this.environment.device.isMobile,environment:this.environment,rootStore:o})})}renderCollectionViewTitle(e,t){const{tabArgs:o}=this.props;if(!e.isDefined())return;const r=e.getModel().getRenderUrl({getRecordModel:this.getRecordModel,pageVisitSource:d.tY.Activity}),i=e.getFormat().collection_view_icon,s=e.getType();return(0,H.jsxs)(k.Z,{href:r,onClick:()=>(0,Z.V3)({environment:this.environment,activity:t,...o}),external:!1,innerStyle:{...I.lS,...I.nP},inline:!0,children:[(0,H.jsx)(O.F,{viewIcon:i,viewType:s,color:"light",style:{display:"inline-block",verticalAlign:"middle",marginRight:4,marginBottom:2},size:12}),(0,H.jsx)(M.Z,{collectionViewName:e.getName(),collectionViewType:e.getType()})]})}get getRecordValue(){return this.props.rootStore.getRecordValue}get getRecordModel(){return this.props.rootStore.getRecordModel}getBlockStore(e){return T.G.createChildStore(this.props.rootStore,{table:m.iU,id:e})}}te.displayName="ActivityUpdate";const oe=te;function re(e){const{activity:t,authors:o,groupName:r}=e,i=(0,n.VK)((()=>(0,_.XW)(o)),[o]),s=(0,n.VK)((()=>(0,S.hI)(t.getEdits())),[t])[0];return s?"permission-group-created"===s.type?(0,H.jsx)(x.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} created group {groupName}} other {{authorOrAuthors} created group {groupName}}}",values:{numberOfAuthors:o.length,authorOrAuthors:i,groupName:(0,H.jsx)("span",{style:I.nP,children:r})},id:"activity.updatedPermissionGroupCreated.header"}):"permission-group-deleted"===s.type?(0,H.jsx)(x.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} deleted group {groupName}} other {{authorOrAuthors} deleted group {groupName}}}",values:{numberOfAuthors:o.length,authorOrAuthors:i,groupName:(0,H.jsx)("span",{style:I.nP,children:r})},id:"activity.updatedPermissionGroupDeleted.header"}):(0,H.jsx)(x.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} edited group {groupName}} other {{authorOrAuthors} edited group {groupName}}}",values:{numberOfAuthors:o.length,authorOrAuthors:i,groupName:(0,H.jsx)("span",{style:I.nP,children:r})},id:"activity.updatedPermissionGroupEditedDefault.header"}):(0,H.jsx)(x.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} edited group {groupName}} other {{authorOrAuthors} edited group {groupName}}}",values:{numberOfAuthors:o.length,authorOrAuthors:i,groupName:(0,H.jsx)("span",{style:I.nP,children:r})},id:"activity.updatedPermissionGroupEdit.header"})}function ie(e){return"pageUpdatesSidebar"===e.tab}function se(e,t){return t.getRecordStore(t,e)}function ne(e,t){return T.H2.createChildStore(t,{table:A.bx,id:e})}function ae(e){let{edit:t,url:o,tabArgs:r,rootStore:i}=e;const n=(0,s.O7)(),{source:a}=r,l=n.device.isMobile;return(0,H.jsx)(k.Z,{href:o,innerStyle:(0,I.OD)({source:a,isMobile:l}),children:(0,H.jsx)(C.Z,{edit:t,rootStore:i})})}function le(e){let{activity:t,tabArgs:o,rootStore:r,isLast:i}=e;const a=(0,s.O7)(),{notification:l,tab:d}=o,c=(0,n.VK)((()=>t.getEdits()),[t]),u=c[0],h=(0,n.VK)((()=>(0,_.P6)({edits:c,rootStore:r})),[c,r]),p=(0,n.VK)((()=>se({table:m.iU,id:u.navigable_block_id,spaceId:u.space_id},r)),[u,r]),g=(0,n.VK)((()=>p.isDefined()),[p]),v=(0,n.VK)((()=>(0,_.jC)({recordId:p.id,recordType:"block",tab:d,rootStore:r,environment:a})),[p,a,r,d]),b=(0,n.VK)((()=>(0,_.XW)(h)),[h]),f=(0,n.VK)((()=>t.type),[t]),y=(0,n.VK)((()=>t.end_time),[t]);if(!c.length||!u||!g)return null;const A=(0,H.jsx)(B.Z,{titledRecordStore:p,activity:t,tabArgs:o,getRecordModel:r.getRecordModel});let S;return"page-deleted"===f?S=(0,H.jsx)(x.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} deleted {blockTitle}} other {{authorOrAuthors} deleted {blockTitle}}}",values:{numberOfAuthors:h.length,authorOrAuthors:b,blockTitle:A},id:"emailActivity.pageDeleted.header"}):"page-restored"===f?S=(0,H.jsx)(x.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} restored {blockTitle}} other {{authorOrAuthors} restored {blockTitle}}}",values:{numberOfAuthors:h.length,authorOrAuthors:b,blockTitle:A},id:"emailActivity.pageRestored.header"}):"page-permanently-deleted"===f?S=(0,H.jsx)(x.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} permanently deleted {blockTitle}} other {{authorOrAuthors} permanently deleted {blockTitle}}}",values:{numberOfAuthors:h.length,authorOrAuthors:b,blockTitle:A},id:"emailActivity.pagePermanentlyDeleted.header"}):(0,j.t1)(f),(0,H.jsx)(V.ZP,{timestamp:parseInt(y),header:(0,H.jsx)("span",{children:S}),isPrivate:v,isLast:i,rootStore:r,navigableBlockId:p.id,icon:(0,H.jsx)(V.BE,{authors:h,size:24}),showSnapshotButton:!1,...(0,Z.h9)({notification:l,activity:t,environment:a,tab:d}),children:(0,H.jsx)(w.Z,{tabArgs:o,activity:t,isMobile:a.device.isMobile,environment:a,rootStore:r})})}function de(e){let{edit:t,url:o,tabArgs:r,rootStore:i}=e;const n=(0,s.O7)();if("collection-property-changed"!==t.type)return null;const{source:a}=r,l=n.device.isMobile;return(0,H.jsx)(k.Z,{href:o,innerStyle:(0,I.OD)({source:a,isMobile:l}),children:(0,H.jsx)(C.Z,{edit:t,rootStore:i})})}function ce(e){let{propertySchema:t}=e;const o=(0,a.Fg)();return(0,H.jsxs)("span",{style:{...I.nP,whiteSpace:"nowrap"},children:[(0,H.jsx)(u.ZP,{icon:t.icon,type:t.type,size:12,style:ee,theme:o}),t.name]})}},22649:(e,t,o)=>{o.d(t,{OD:()=>l,TL:()=>u,_W:()=>c,b9:()=>h,c3:()=>d,e9:()=>n,lS:()=>s,nP:()=>a});var r=o(37810);const i={userSelect:"text",WebkitUserSelect:"text"},s={padding:1,...i},n={display:"inline-flex",marginRight:2,verticalAlign:"text-top"},a={fontWeight:r.Z.fontWeight.semibold};function l(e){return{padding:0,paddingLeft:d(e),paddingRight:16,paddingBottom:3,...i}}function d(e){const{source:t,isMobile:o}=e;return"notifications_tab"===t?52+(o?3:2):52}function c(e){return{height:26,paddingLeft:8,paddingRight:8,color:e.mediumTextColor}}function u(e){return{display:"inline",whiteSpace:"normal",marginRight:e?3:0,wordBreak:"break-word",...a}}function h(e){return{boxShadow:e.plainButtonBoxShadow,height:26,paddingLeft:8,paddingRight:8,fontWeight:500,color:e.regularTextColor}}},46096:(e,t,o)=>{o.d(t,{Z:()=>s});var r=o(49085);class i extends r.default{getInitialState(){return{open:!1}}}const s=new i},65422:(e,t,o)=>{o.d(t,{K:()=>s});o(67294);var r=o(45238),i=o(85893);const s=(0,r.IU)("boltFilled",{svg:(0,i.jsx)("path",{d:"M0 12.117c0 .38.293.664.703.664h5.518l-2.91 7.91c-.381 1.006.664 1.543 1.318.723l8.877-11.094c.166-.205.254-.4.254-.625 0-.371-.293-.664-.703-.664H7.539l2.91-7.91C10.83.115 9.785-.422 9.131.408L.254 11.492c-.166.215-.254.41-.254.625z"}),viewBox:"0 0 14 22"})},13530:(e,t,o)=>{o.d(t,{s:()=>s});o(67294);var r=o(45238),i=o(85893);const s=(0,r.IU)("historyForward",{viewBox:"0 0 14 14",svg:(0,i.jsx)("polygon",{points:"11.14107 6.25324 5.94392 1.0561 7 0 13.471958 6.47196 14 7 13.471958 7.52804 7 14 5.94392 12.94392 11.14107 7.74676 0 7.74676 1.77635684e-15 6.25324"})})},7220:(e,t,o)=>{o.d(t,{l:()=>s});o(67294);var r=o(45238),i=o(85893);const s=(0,r.IU)("import",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M13.291 14.5723C13.291 14.1484 12.9902 13.834 12.5732 13.834H8.06836C8.24609 13.8203 8.42383 13.7314 8.56055 13.5947L13.0586 9.08301C13.2158 8.91895 13.291 8.74121 13.291 8.54297C13.291 8.12598 12.9902 7.81836 12.5801 7.81836C12.3682 7.81836 12.1836 7.90039 12.0469 8.03711L10.4951 9.56836L8.69043 11.585L8.75195 10.1084V1.61133C8.75195 1.16016 8.44434 0.852539 8 0.852539C7.5625 0.852539 7.25488 1.16016 7.25488 1.61133V10.1084L7.30957 11.5781L5.50488 9.56836L3.95312 8.03711C3.82324 7.90039 3.63184 7.81836 3.42676 7.81836C3.0166 7.81836 2.70898 8.12598 2.70898 8.54297C2.70898 8.74121 2.78418 8.91895 2.94141 9.08301L7.44629 13.5947C7.58301 13.7314 7.75391 13.8203 7.93848 13.834H3.44043C3.0166 13.834 2.70898 14.1484 2.70898 14.5723C2.70898 14.9893 3.0166 15.3037 3.44043 15.3037H12.5732C12.9902 15.3037 13.291 14.9893 13.291 14.5723Z"})})},22686:(e,t,o)=>{o.d(t,{f:()=>s});o(67294);var r=o(45238),i=o(85893);const s=(0,r.IU)("person",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M7.7832 8.00195C9.27344 8.00195 10.5381 6.67578 10.5381 4.95996C10.5381 3.28516 9.2666 2 7.7832 2C6.29297 2 5.01465 3.30566 5.02148 4.97363C5.02148 6.67578 6.28613 8.00195 7.7832 8.00195ZM3.51758 14.3594H12.0352C13.1631 14.3594 13.5527 14.0176 13.5527 13.3887C13.5527 11.6318 11.3242 9.21191 7.77637 9.21191C4.23535 9.21191 2 11.6318 2 13.3887C2 14.0176 2.38965 14.3594 3.51758 14.3594Z"})})},14734:(e,t,o)=>{o.d(t,{X:()=>s});o(67294);var r=o(45238),i=o(85893);const s=(0,r.IU)("personCrossedOut",{viewBox:"0 0 44 44",svg:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("path",{d:"M5.4857 44H0L44 8.56549V13.0061L5.4857 44Z"}),(0,i.jsx)("path",{d:"M39.8048 44H8.66491L25.6448 30.4378C26.9394 30.6489 28.1581 30.9719 29.3009 31.4067C31.5362 32.2374 33.4346 33.326 34.9964 34.6723C36.5725 36.0044 37.7761 37.4367 38.6071 38.9692C39.4525 40.5018 39.8752 41.9555 39.8752 43.3305C39.8752 43.5675 39.8517 43.7906 39.8048 44Z"}),(0,i.jsx)("path",{d:"M30.3971 16.7973C30.3971 16.8668 30.3965 16.9359 30.3952 17.0048L19.3828 25.9192C18.7467 25.7134 18.1339 25.4228 17.5446 25.0473C16.2408 24.2023 15.1876 23.0708 14.3853 21.6528C13.5972 20.2205 13.2032 18.6163 13.2032 16.8403C13.2032 15.0929 13.5972 13.5174 14.3853 12.1137C15.1876 10.7101 16.2408 9.60007 17.5446 8.78366C18.8485 7.96725 20.267 7.55905 21.8001 7.55905C23.3332 7.55905 24.7517 7.96009 26.0556 8.76218C27.3595 9.56426 28.4054 10.6671 29.1935 12.0708C29.9959 13.4601 30.3971 15.0356 30.3971 16.7973Z"})]})})},8504:(e,t,o)=>{o.d(t,{J:()=>s});o(67294);var r=o(45238),i=o(85893);const s=(0,r.IU)("versionHistoryThick",{viewBox:"0 0 14 14",svg:(0,i.jsx)("path",{d:"M0 7C0 3.136 3.129 0 6.993 0C10.864 0 14 3.136 14 7C14 10.864 10.864 14 6.993 14C3.129 14 0 10.864 0 7ZM1.4 7C1.4 10.094 3.906 12.6 7 12.6C10.094 12.6 12.6 10.094 12.6 7C12.6 3.906 10.094 1.4 7 1.4C3.906 1.4 1.4 3.906 1.4 7ZM6.3 3.5H7.35V7.175L10.5 9.044L9.975 9.905L6.3 7.7V3.5Z"})})},70693:(e,t,o)=>{o.d(t,{mb:()=>a,nK:()=>l,pe:()=>d});var r=o(40506),i=o(7057),s=o(53877),n=o(42875);function a(e){const{dateTime:t,intl:o,shortenDateAndRange:r}=e,n=s.OQ.toPersistedDate(t.valueOf());return i.ZV({value:n,allowRelativeDates:!0,intl:o,shortenDateAndRange:r,displayInUserTimezone:!0})}function l(e){const{dateTime:t,intl:o,userTimeZone:r,displayInUserTimezone:n,alwaysIncludeTimezone:a}=e,l=s.OQ.toPersistedDateTime(t.valueOf(),t.zoneName);return i.ZV({value:l,allowRelativeDates:!0,intl:o,userTimeZone:r,displayInUserTimezone:n,alwaysIncludeTimezone:a})}function d(e){const{luxonRange:t,intl:o}=e,a=s.OQ.toPersistedDateRange(t),l=i.ZV({value:a,allowRelativeDates:!1,shortenDateAndRange:!0,intl:o,displayInUserTimezone:!0}),d=t.end.setZone((0,n.r)()),c=i.mr({start_time:d.toFormat(r.jK),humanReadable:!1,intl:o});return o.formatMessage({id:"verification.timeRange",defaultMessage:"{formattedDateRange} at {formattedEndTime}"},{formattedDateRange:l,formattedEndTime:c})}}}]);