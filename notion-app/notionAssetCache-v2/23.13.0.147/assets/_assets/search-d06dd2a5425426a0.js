"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[6464],{47449:(e,t,r)=>{r.d(t,{qC:()=>g,Up:()=>m,CX:()=>h});var o=r(7032),s=r(54642),i=r(13447),n=r(37181),a=r(49085),c=r(92595);class l extends a.default{getInitialState(){return{loadingState:"initial"}}}const d=new l,u=d;(0,c.exposeDebugValue)("AiSuggestedPageQnaStore",d);var p=r(21273);function h(e,t){const{phase:r,transactionUserAction:o,userSettingsStore:s}=t;i.createAndCommit({environment:e,userAction:o,perform:e=>{n.d2({userSettingsStore:s,transaction:e,data:{ai_qna_intro_onboarding_phase:r}})}})}function m(e,t){const{userSettingsStore:r}=t;i.createAndCommit({environment:e,userAction:"aiQnaActions.setLastExposedToQnaAtToCurrentTimestamp",perform:e=>{n.d2({userSettingsStore:r,transaction:e,data:{last_exposed_to_ai_qna_at:Date.now()}})}})}async function g(e){let{environment:t,blockStore:r,reminderNumber:i,spaceId:n}=e;const a=await async function(e){let{environment:t,blockStore:r,reminderNumber:i,spaceId:n}=e;if("initial"===u.state.loadingState||u.state.reminderNumber!==i){const e=s.getSuggestedPageQna(t,{blockPointer:{...r.pointer,spaceId:n},aiSessionId:(0,o.ZP)()}).then((e=>"success"!==e.type?(u.setState({loadingState:"error",reminderNumber:i}),[]):e.data.questions));u.setState({loadingState:"loading",reminderNumber:i});const a=await e;return u.setState({loadingState:"loaded",reminderNumber:i,questions:a}),a[0]}if("loading"===u.state.loadingState)return u.waitUntil((()=>"loaded"===u.state.loadingState)).then((()=>"loaded"===u.state.loadingState?u.state.questions[0]:void 0));if("loaded"===u.state.loadingState){return u.state.questions[0]}return}({environment:t,blockStore:r,reminderNumber:i,spaceId:n});if(a&&p.Z.isQnaPageSuggestedQuestionRemindersEnabledForUser())return a}},10912:(e,t,r)=>{r.d(t,{Z:()=>P});r(57658),r(67294);var o=r(83355),s=r(27531),i=r(86628),n=r(24405),a=r(41432),c=r(80951),l=r(95538),d=r(21202),u=r(1898),p=r(10906),h=r(12457),m=r(17311),g=r(35328),v=r(6258),y=r(9672),S=r(12981),f=r(43568),C=r(81865),b=r(35541),I=r(85893);function x(e){return"number"==typeof e}class w extends o.Z{constructor(){super(...arguments),this.renderContentBlock=e=>{const{store:t,renderAdditionalBlocks:r,rendererBlockStyle:o}=this.props,i=v.G.createChildStore(t,{table:d.iU,id:e}),n=i.getType(),a=r&&void 0!==n,c=this.blockIdsToRenderStore.state,l="table_row"===n?i.getParentBlockStore():i,u=a?l&&(0,b.u)({store:l,restrictedBlockIds:c,tableRenderMode:this.getTableRenderMode()}):(0,y.h)(i);if(u)return(0,I.jsx)(s.D,{value:this.restrictedContentStore,children:(0,I.jsx)(u,{store:i,disabled:!0,disableCommentMenu:!0,disableHoverMenu:!0,hideContent:(0,g.BX)(i),style:{fontSize:12,opacity:.8,pointerEvents:"none",...o},isQuickFind:!0,numberedListCounterStore:this.createComputedStore((()=>({depth:0,numberedListBlockIdsWithFormat:V(e,this.numberedLists)})))})},e)},this.coverStore=this.createComputedStore((()=>{const{store:e,renderAdditionalBlocks:t=!1,startBlockId:r}=this.props,{ThemeStore:o}=this.environment,s=r?(0,p.wK)({rootStore:e,renderAdditionalBlocks:t,startBlockId:r,tableRenderMode:this.getTableRenderMode()}):(0,p.NU)({rootStore:e,renderAdditionalBlocks:t,theme:o.state.mode});return s.image?s.image:!(this.props.showLoadingShimmer&&0===s.blockIds.length&&!s.isDefined)&&s.blockIds})),this.restrictedContentStore=this.createComputedStore((()=>{const{store:e,renderAdditionalBlocks:t=!1,startBlockId:r}=this.props,o=(0,p.wK)({rootStore:e,renderAdditionalBlocks:t,startBlockId:r,tableRenderMode:this.getTableRenderMode()});return o.image?void 0:o.blockIds})),this.blockIdsToRenderStore=this.createComputedStore((()=>{const e=this.coverStore.state,t=this.restrictedContentStore.state;return e&&Array.isArray(e)?e.filter((e=>!t||t.includes(e))):[]})),this.numberedLists=this.createComputedStore((()=>{const{store:e}=this.props,t=this.coverStore.state,r=[];if(Array.isArray(t)){let o=0;for(;o<t.length;){let s=t[o],i=v.G.createChildStore(e,{table:d.iU,id:s});if(i.getType()===a.Ti.numberedList){const n=[{blockId:s,idx:1}],c=[{id:s,format:void 0,depth:n.length-1,index:n[0].idx}];for(o+=1;o<t.length&&(s=t[o],i=v.G.createChildStore(e,{table:d.iU,id:s}),i.getType()===a.Ti.numberedList);){{const e=i.getParentId();if(i.getParentId()===n[n.length-1].blockId)n.push({blockId:s,idx:1});else{let t=n[n.length-1].idx;for(;n.length>0&&n[n.length-1].blockId!==e;)t=n[n.length-1].idx,n.pop();n.push({blockId:s,idx:t+1})}c.push({id:s,format:void 0,depth:n.length-1,index:n[n.length-1].idx})}o+=1}r.push(c)}else o+=1}}return r}))}didUpdate(e){this.props.coverFormat.type!==e.coverFormat.type&&this.props.onLoadProxiedImage()}renderComponent(){const{coverFormat:e}=this.props;return"page_cover"===e.type?(0,I.jsx)(W,{store:this.props.store,coverHeight:this.props.coverHeight,coverSizeFormat:this.props.coverSizeFormat,imageCoverWrapStyle:this.props.imageCoverWrapStyle,coverWidth:this.props.coverWidth,onLoadProxiedImage:this.props.onLoadProxiedImage,style:this.props.style,variant:this.props.variant,coverAspectFormat:this.props.coverAspectFormat,coverPosition:this.props.coverPosition,showEmptyGalleryCover:this.props.showEmptyGalleryCover,emptyGalleryCoverStyle:this.props.emptyGalleryCoverStyle}):"page_content"===e.type?this.renderPageContent():"property"===e.type?(0,I.jsx)(_,{store:this.props.store,coverHeight:this.props.coverHeight,coverSizeFormat:this.props.coverSizeFormat,imageCoverWrapStyle:this.props.imageCoverWrapStyle,onLoadProxiedImage:this.props.onLoadProxiedImage,coverWidth:this.props.coverWidth,style:this.props.style,variant:this.props.variant,coverAspectFormat:this.props.coverAspectFormat,coverPosition:this.props.coverPosition,showEmptyGalleryCover:this.props.showEmptyGalleryCover,emptyGalleryCoverStyle:this.props.emptyGalleryCoverStyle,property:e.property}):void 0}renderPageContent(){const e=this.coverStore.state,t=this.restrictedContentStore.state,r=this.props.renderAdditionalBlocks&&this.props.store.isCollectionView();if(!1===e)return(0,I.jsx)(T,{coverHeight:this.props.coverHeight,coverSizeFormat:this.props.coverSizeFormat,loadingShimmerStyle:this.props.loadingShimmerStyle});if(e){if(!Array.isArray(e))return r?(0,I.jsxs)("div",{style:z(this.props.variant,this.environment,this.theme,this.props.coverHeight,this.props.coverSizeFormat,this.props.coverContentFadedOverlay,this.props.contentWrapStyle,this.props.isCompactView),children:[(0,I.jsx)(C.Z,{url:e.url,onFinishedLoadingProxyUrl:e=>this.props.onLoadProxiedImage(e),isAuthenticated:!0,permissionRecord:e.pointer,width:L(),render:(e,t)=>{if(t)return(0,I.jsx)(S.Z,{style:{...j(),...E({renderCollectionImage:!0},this.props.variant,this.theme,this.props.coverHeight,this.props.coverSizeFormat),...B(),objectPosition:`center ${100*(1-F(this.props.store,this.props.coverPosition))}%`},placeholderLoadedStyle:{display:"flex",justifyContent:"center",alignItems:"end"},src:t})}}),(0,I.jsx)(M,{variant:this.props.variant}),(0,I.jsx)("div",{style:U(this.theme,this.props.coverContentFadedOverlayStyle)})]}):(0,I.jsxs)("div",{style:A(this.props.coverHeight,this.props.coverSizeFormat,this.props.imageCoverWrapStyle),children:[(0,I.jsx)(C.Z,{url:e.url,onFinishedLoadingProxyUrl:e=>this.props.onLoadProxiedImage(e),isAuthenticated:!0,permissionRecord:e.pointer,width:L(this.props.coverWidth,this.props.coverSizeFormat),render:(e,t)=>{if(t)return(0,I.jsx)(S.Z,{style:{...j(this.props.style),...E({renderCollectionImage:!1},this.props.variant,this.theme,this.props.coverHeight,this.props.coverSizeFormat),...B(this.props.coverAspectFormat),objectPosition:`center ${100*(1-F(this.props.store,this.props.coverPosition))}%`},src:t,loading:"lazy"})}}),(0,I.jsx)(M,{variant:this.props.variant})]});if(e.length>0)return(0,I.jsx)(I.Fragment,{children:(0,I.jsxs)("div",{style:z(this.props.variant,this.environment,this.theme,this.props.coverHeight,this.props.coverSizeFormat,this.props.coverContentFadedOverlay,this.props.contentWrapStyle,this.props.isCompactView),children:[t?e.filter((e=>t.indexOf(e)>=0)).map(this.renderContentBlock):e.map(this.renderContentBlock),this.props.coverContentFadedOverlay&&(0,I.jsx)("div",{style:U(this.theme,this.props.coverContentFadedOverlayStyle)})]})});if(this.props.showEmptyGalleryCover)return(0,I.jsx)(q,{coverHeight:this.props.coverHeight,coverSizeFormat:this.props.coverSizeFormat,emptyGalleryCoverStyle:this.props.emptyGalleryCoverStyle??z(this.props.variant,this.environment,this.theme,this.props.coverHeight,this.props.coverSizeFormat,this.props.coverContentFadedOverlay,this.props.contentWrapStyle,this.props.isCompactView)})}else if(this.props.showEmptyGalleryCover)return(0,I.jsx)(q,{coverHeight:this.props.coverHeight,coverSizeFormat:this.props.coverSizeFormat,emptyGalleryCoverStyle:this.props.emptyGalleryCoverStyle})}getTableRenderMode(){return this.props.renderAdditionalBlocks&&this.props.startBlockId?"table":"image"}}w.displayName="CollectionItemCover";const P=w;function F(e,t){if(x(t))return t;if(e.getFormatStore().isDefined()){const{page_cover_position:t,card_cover_position:r}=e.getFormat();if(x(r))return r;if(x(t))return t}return.5}function j(e){return e||{}}function k(e,t){if(e)return e;switch(t){case"large":return m.Z.card.desktop.large.height;case"small":return m.Z.card.desktop.small.height;default:return m.Z.card.desktop.medium.height}}function L(e,t){return e||(0,p.rD)(t)}function B(e){return{objectFit:void 0===e?"cover":e}}function A(e,t,r){return{height:k(e,t),position:"relative",pointerEvents:"none",overflow:"hidden",...r}}function q(e){let{coverHeight:t,coverSizeFormat:r,emptyGalleryCoverStyle:o}=e;return(0,I.jsx)("div",{style:{height:k(t,r),...o}})}function T(e){let{coverHeight:t,coverSizeFormat:r,loadingShimmerStyle:o}=e;return(0,I.jsx)("div",{style:{height:k(t,r),...o},children:(0,I.jsx)(h.Z,{show:!0,showDelay:100,showHold:0,render:e=>e?(0,I.jsx)(f.Z,{paragraphs:[{lineHeight:12,lineMargin:6,sectionWidths:[100,100,50],repeat:1,sectionMargin:0}]}):void 0})})}function R(e,t,r,o,s){const{ThemeStore:i}=t,n="dark"===i.state.mode,a=s?r.lightDividerColor:r.regularDividerColor;switch(e){case"default":return{};case"gallery":return{background:r.collectionGalleryPreviewCardCover,padding:"8px 8px 0",boxShadow:n?"transparent":`inset 0 -1px 0 0 ${a}`,...o};default:(0,u.t1)(e)}}function U(e,t){return{width:"100%",height:40,position:"absolute",bottom:0,left:0,background:`linear-gradient(to bottom, transparent, ${e.accentColors.gray[30]} 100%)`,...t}}function Z(e,t){switch(e){case"default":return{border:`1px solid ${t.stroke.regular}`,borderTopLeftRadius:4,borderTopRightRadius:4,borderBottomRightRadius:4,borderBottomLeftRadius:4};case"gallery":return{borderRadius:0,borderTopLeftRadius:1,borderTopRightRadius:1};default:(0,u.t1)(e)}}function M(e){let{variant:t}=e;const r=(0,n.Fg)();switch(t){case"default":return null;case"gallery":return(0,I.jsx)("div",{style:{position:"absolute",left:0,right:0,bottom:0,borderBottom:`1px solid ${r.regularDividerColor}`}});default:(0,u.t1)(t)}return null}function z(e,t,r,o,s,i,n,a){return{height:k(o,s),pointerEvents:"none",overflow:"hidden",position:i?"relative":"static",...R(e,t,r,n,a),...n}}function H(e,t,r,o){return{width:"100%",height:k(r,o),...Z(e,t),objectPosition:"center"}}function W(e){let{store:t,coverHeight:r,coverSizeFormat:o,imageCoverWrapStyle:s,coverWidth:a,onLoadProxiedImage:c,style:l,variant:d,coverAspectFormat:u,coverPosition:p,showEmptyGalleryCover:h,emptyGalleryCoverStyle:m}=e;const g=(0,n.Fg)(),v=(0,i.VK)((()=>{var e;return null===(e=t.getCover())||void 0===e?void 0:e.cover}),[t]),y=(0,i.VK)((()=>t.pointer),[t]),f=(0,i.VK)((()=>F(t,p)),[p,t]);return v?(0,I.jsxs)("div",{style:A(r,o,s),children:[(0,I.jsx)(C.Z,{url:v,isAuthenticated:!0,permissionRecord:y,width:L(a,o),onFinishedLoadingProxyUrl:e=>c(e),render:(e,t)=>{if(t)return(0,I.jsx)(S.Z,{style:{...j(l),...H(d,g,r,o),...B(u),objectPosition:`center ${100*(1-f)}%`},src:t,loading:"lazy"})}}),(0,I.jsx)(M,{variant:d})]}):h?(0,I.jsx)(q,{coverHeight:r,coverSizeFormat:o,emptyGalleryCoverStyle:m}):null}function _(e){let{property:t,store:r,coverHeight:o,coverSizeFormat:s,imageCoverWrapStyle:a,onLoadProxiedImage:d,coverWidth:u,style:p,variant:h,coverAspectFormat:m,coverPosition:g,showEmptyGalleryCover:v,emptyGalleryCoverStyle:y}=e;const f=(0,n.Fg)(),b=(0,i.VK)((()=>(0,c.g)(r.getPropertyValue(t)).find((e=>(0,l.SR)({url:e.url})))),[t,r]),x=(0,i.VK)((()=>r.pointer),[r]),w=(0,i.VK)((()=>F(r,g)),[g,r]);return b?(0,I.jsxs)("div",{style:A(o,s,a),children:[(0,I.jsx)(C.Z,{onFinishedLoadingProxyUrl:e=>d(e),url:b.url,isAuthenticated:!0,permissionRecord:x,width:L(u,s),render:(e,t)=>{if(t)return(0,I.jsx)(S.Z,{style:{...j(p),...H(h,f,o,s),...B(m),objectPosition:`center ${100*(1-w)}%`},src:t,loading:"lazy"})}}),(0,I.jsx)(M,{variant:h})]}):v?(0,I.jsx)(q,{coverHeight:o,coverSizeFormat:s,emptyGalleryCoverStyle:y}):null}function E(e,t,r,o,s){const{renderCollectionImage:i}=e;return{...H(t,r,o,s),objectPosition:"center center",...i&&{height:void 0,border:`1px solid ${r.lightDividerColor}`,borderBottom:"none",borderBottomLeftRadius:0,borderBottomRightRadius:0}}}function V(e,t){const r=t.state;for(const o of r)if(o.find((t=>t.id===e)))return o;return[]}},97820:(e,t,r)=>{r.d(t,{Z:()=>h,o:()=>g});r(67294);var o=r(480),s=r(86628),i=r(24405),n=r(99036),a=r(12396),c=r(37810),l=r(19124),d=r(76836),u=r(85893);const p={display:"flex",alignItems:"center",lineHeight:"120%",minWidth:0};const h=function(e){let{propertySchema:t,showIcon:r,hideName:s,badge:i,style:n,iconStyle:a,iconSize:l,className:d}=e;const h=(0,o.O7)(),{device:g}=h,y=g.isMobile?16:14;return(0,u.jsxs)("div",{className:d,style:{...p,fontSize:y,...n},children:[r&&(0,u.jsx)("div",{style:m(Boolean(s),a),children:(0,u.jsx)(v,{propertySchema:t,iconSize:l,iconStyle:a})}),!s&&(0,u.jsx)("div",{style:{...c.Z.textOverflowStyle},children:t.name}),i]})};function m(e,t){return{marginRight:e?void 0:6,...t}}function g(e){let{propertySchema:t}=e;const r=(0,o.O7)();return(0,s.VK)((()=>(0,l.Zt)(r)&&n.qQ(t)&&n.q3(t)&&("text"===t.type||(0,l.KZ)())),[r,t])?(0,u.jsx)(d.Z,{}):null}function v(e){let{propertySchema:t,iconSize:r,iconStyle:s}=e;const n=(0,i.Fg)(),c=(0,o.O7)(),{device:l}=c,d=l.isMobile?18:16;return(0,u.jsx)(a.ZP,{type:t.type,icon:t.icon,size:r||d,theme:n,style:s})}},90683:(e,t,r)=>{r.d(t,{a:()=>c});r(67294);var o=r(66897),s=r(1898),i=r(70301),n=r(45653),a=r(85893);function c(e){const{actor:t}=e,r={size:e.size??14,style:{marginRight:2,...e.style}};return(0,o.YU)(t)?(0,a.jsx)(i.Z,{botValue:t.asActor,...r}):(0,o.$S)(t)?(0,a.jsx)(n.Z,{userValue:t.asActor,...r}):(0,o.Iq)(t)?(0,a.jsx)(n.Z,{userValue:void 0,...r}):void(0,s.t1)(t)}},34700:(e,t,r)=>{function o(e){return"drag"in e&&e.drag?{WebkitAppRegion:"drag"}:"noDrag"in e&&e.noDrag?{WebkitAppRegion:"no-drag"}:{}}r.d(t,{X:()=>o})},78159:(e,t,r)=>{r.r(t),r.d(t,{TEST_ONLY__getVisibleSpaceUserIds:()=>ge,getLocalCacheFromAppState:()=>Q,searchActorsById:()=>fe,searchCollections:()=>ie,searchCollectionsWithRecents:()=>ne,searchEmailUser:()=>Se,searchInstallableIntegrations:()=>ue,searchMentionablePages:()=>Ce,searchPageIds:()=>J,searchPageIdsInAncestor:()=>oe,searchPagesInAncestor:()=>re,searchPagesInCollection:()=>X,searchPagesInSpace:()=>Y,searchPagesWithParent:()=>ee,searchPublicPages:()=>Ie,searchSpaceActorIds:()=>ye,searchSpaceActors:()=>ve,searchSpaceBots:()=>ce,searchSpaceGroups:()=>ae,searchTeams:()=>xe,searchTrashPages:()=>se,searchUsers:()=>pe,searchVisibleSpaceUsers:()=>he});r(57658);var o=r(43261),s=r.n(o),i=r(15070),n=r(33728),a=r(77657),c=r(58573),l=r(63306),d=r(72141),u=r(45953),p=r(99405),h=r(21202),m=r(77420),g=r(6287),v=r(75246),y=r(19889),S=r(92338),f=r(64684),C=r(70203),b=r(7928),I=r(53965),x=r(7032),w=r(1898),P=r(19584),F=r(54642),j=r(98730),k=r(75330),L=r(95477),B=r(28020),A=r(4708),q=r(98165),T=r(46654),R=r(15447),U=r(97638),Z=r(16639),M=r(94841),z=r(80444),H=r(77080),W=r(69327),_=r(84166),E=r(40061),V=r(6258),G=r(76117),D=r(81023),N=r(88893),O=r(88280),$=r(52432),K=r(96820);async function Q(e){const{currentSpaceStore:t,currentSpaceViewStore:r}=z.default.state;if(!t)return;return"on"===H.default.getEligibleGroup({experimentId:"use_global_local_search_cache"})?(await j.S(e),_.Z.state.localSearchableBlocksCache):await(0,K.S)({environment:e,currentSpaceStore:t,currentSpaceViewStore:r,excludeCurrentPage:!1})}async function Y(e){const{environment:t,query:r,limit:o,currentPageId:s,searchSessionId:i,searchSessionFlowNumber:n,recentlyMentionedPageIds:a,spaceId:c,requireEditPermissions:l,excludeTemplates:d,source:p,boostRecentlyViewedPages:h,ignoresHighlight:m}=e,{currentSpaceStore:g}=z.default.state,v={results:[],recordMap:u.PF.create().toJson({allowVersionDowngrade:!1}),total:0,trackEventProperties:void 0};if(!g)return v;const y=await Q(t),f=S.u4({isDeletedOnly:!1,navigableBlockContentOnly:!0,excludeTemplates:d,requireEditPermissions:l||void 0}),C={field:"relevance"};if(!r&&y){const e=(0,$.f)({query:{query:{text:r,filters:f,sort:C},limit:o},localCachedPages:y,userId:t.currentUser.id,environment:t,canUseLtr:!1});return e||v}const b=await F.search(t,{type:S.n8.BlocksInSpace,query:r,spaceId:c,currentPageId:s,searchSessionId:i,searchSessionFlowNumber:n,recentlyMentionedPageIds:a,limit:o,filters:f,sort:C,source:p,recentPagesForBoosting:h?(0,R.Wk)(W.Z.getWithoutSubscribing(c)):void 0,ignoresHighlight:m});if("failed"===b.type)throw b.error;return b.data}async function J(e){const t=await Y(e);return{results:t.results.map((e=>e.id)),recordMap:t.recordMap}}async function X(e){const{environment:t,query:r,collectionId:o,limit:s,spaceId:i,excludeTemplates:n,source:a,includePublicPagesWithoutExplicitAccess:c,boostRecentlyViewedPages:l,ignoresHighlight:d}=e,u=new Array,p=await Q(t),h=S.u4({isDeletedOnly:!1,navigableBlockContentOnly:!0,includePublicPagesWithoutExplicitAccess:c,excludeTemplates:n}),m={field:"relevance"},v=F.search(t,{type:S.n8.BlocksInCollection,query:r,spaceId:i,collectionId:o,limit:s,filters:h,sort:m,source:a,recentPagesForBoosting:l?(0,R.Wk)(W.Z.getWithoutSubscribing(i)):void 0,ignoresHighlight:d});if(p){const e={table:g.vF,id:o,spaceId:i},n=new V.NW(t,e);await n.load();const a=(0,$.f)({query:{query:{text:r,filters:n.isPageTreeCollection()?{...h,ancestors:[o]}:{...h,parentId:o},sort:m},limit:s},localCachedPages:p,userId:t.currentUser.id,environment:t,canUseLtr:!1});a&&u.push(...a.results)}const y=await v;if("failed"===y.type){if(0===u.length)throw y.error}else{let e=y.data.results;r||(e=U.YB({sort:m,batchSize:s,currentUserId:t.currentUser.id,unsorted:e})),u.push(...e)}return{results:I.oA(I.jj(u.map((e=>e.id))))}}async function ee(e){const{environment:t,query:r,parentId:o,limit:s,spaceId:i,excludeTemplates:n,source:a,includePublicPagesWithoutExplicitAccess:c,boostRecentlyViewedPages:l,ignoresHighlight:d}=e,[u,p]=await Promise.all([F.search(t,{type:S.n8.BlocksInParent,query:r,spaceId:i,parentId:o,limit:s,filters:S.u4({isDeletedOnly:!1,navigableBlockContentOnly:!0,includePublicPagesWithoutExplicitAccess:c,excludeTemplates:n}),sort:{field:"relevance"},source:a,recentPagesForBoosting:l?(0,R.Wk)(W.Z.getWithoutSubscribing(i)):void 0,ignoresHighlight:d}),te(e)]);if("failed"===u.type)throw u.error;return{results:I.oA(I.jj([p,...u.data.results.map((e=>e.id))]))}}async function te(e){const{environment:t,query:r,parentId:o,spaceId:s}=e,i=(0,p.Wj)({url:r,baseUrl:L.default.domainBaseUrl,publicDomainName:L.default.publicDomainName,isMobile:t.device.isMobile,protocol:L.default.protocol,currentUrl:window.location.href}),n="page"===i.name?i.peekViewBlockId||i.blockId:void 0,a=((0,x.qn)(r)?(0,x.wr)(r):void 0)||n;if(a){const e={table:h.iU,id:a},r=new V.G(t,e);await r.load();const i=r.id,n=r.getParentId(),c=r.getSpaceId();if(n===o&&c===s)return i}}async function re(e){const{environment:t,query:r,ancestorId:o,limit:s,excludeTemplates:i,source:n,currentPageId:a,searchSessionId:c,searchSessionFlowNumber:l,recentlyMentionedPageIds:d,ignoresHighlight:u}=e,p=await F.search(t,{type:S.n8.BlocksInAncestor,query:r,ancestorId:o,filters:S.u4({navigableBlockContentOnly:!0,excludeTemplates:i}),sort:{field:"relevance"},limit:s,source:n,currentPageId:a,searchSessionId:c,searchSessionFlowNumber:l,recentlyMentionedPageIds:d,ignoresHighlight:u});if("failed"===p.type)throw p.error;return p.data}async function oe(e){return{results:(await re(e)).results.map((e=>e.id))}}async function se(e){const{environment:t,query:r,limit:o,ancestorId:s,spaceId:i}=e,n=0===r.trim().length?{field:"lastEdited",direction:"desc"}:{field:"relevance"},a={query:r,filters:S.u4({isDeletedOnly:!0,navigableBlockContentOnly:!0,excludeTemplates:!1,editedBy:e.editedById?[e.editedById]:[]}),sort:n,limit:o,spaceId:i,source:"trash"},c=s?F.search(t,{type:S.n8.BlocksInAncestor,...a,ancestorId:s}):F.search(t,{type:S.n8.BlocksInSpace,...a}),l=await c;if("failed"===l.type)throw l.error;{const{results:e,recordMap:t,total:r}=l.data;return{results:e.map((e=>e.id)),recordMap:u.PF.create(t),endOfResultsReached:r===e.length}}}async function ie(e,t){const{query:r,limit:o,source:s,requireEditPermissions:i,databaseType:n,spaceStore:a,searchSessionId:c}=t;if(!a)return{results:[],total:0};const l=a.id,[d,u]=await Promise.all([we(e,{...t,spaceId:l,requireEditPermissions:i,databaseType:n}),F.search(e,{type:S.n8.CollectionsInSpace,query:r,spaceId:l,limit:o,filters:{...S.u4({excludeTemplates:!0,requireEditPermissions:i,databaseType:n})},sort:{field:"relevance"},source:s,recentPagesForBoosting:(0,R.Wk)(W.Z.get(l)),searchSessionId:c})]),p=I.G0("success"===u.type?I.oA(u.data.results.map((e=>e.collectionId))):[],d).slice(0,o);return{results:p,total:"success"===u.type?u.data.total:p.length}}async function ne(e){const{environment:t,collectionViewBlockStore:r,spaceStore:o,parentStore:s,query:i,limit:n,requireEditPermissions:a,databaseType:c,searchSessionId:l}=e;if(!s.isDefaultRecordCache())return{results:[],total:0};let d=[],u=0;if(!i){const e=t.currentUser.id;o&&(d=[...k.lG({currentUserId:e,spaceId:o.id}).map((e=>V.NW.createChildStore(s,{table:g.vF,id:e})))]),d=[...I.oA(null==r?void 0:r.getCollectionViewStores().map((e=>e.getCollectionStore()))),...d],c&&(d=d.filter((e=>{const t=e.getDatabaseType();return!!t&&c.includes(t)}))),d=I.mN(d,(e=>e.id)).filter((e=>!a||e.canEdit()))}const p=await ie(t,{query:i,limit:n,source:"collection_settings_source",requireEditPermissions:a,databaseType:c,spaceStore:o,searchSessionId:l});return d=[...d,...p.results.map((e=>V.NW.createChildStore(s,{table:g.vF,id:e})))],u=p.total,d=d.filter((e=>!(0,q.wf)(e)&&e.canRead())),await Promise.all(d.map((async e=>{await e.load()}))),{results:I.oA([...I.mN(d,(e=>e.id)).slice(0,n).map((e=>e.id))]),total:u}}function ae(e){const{query:t,intl:r}=e,{currentSpaceStore:o}=z.default.state,s=null==o?void 0:o.getPermissionGroups();if(!s)return[];return t?(0,c.ZP)(t,s,(e=>(0,Z.kF)({intl:r,group:e}))):s}async function ce(e){const{query:t}=e,{currentSpaceStore:r}=z.default.state;if(!r)return[];return de({parentStore:r,query:t,botIds:await le(e)})}async function le(e){const{environment:t}=e,{currentSpaceStore:r}=z.default.state;if(!r)return[];const o=r.id;await D.OR({environment:t,spaceId:o});const s=O.subscriptionDataStoreInstance.state;if(!s)return[];const i=(0,N.NM)(s);return I.jj(i.map((e=>e.botId)))}async function de(e){const{parentStore:t,query:r,botIds:o}=e,s=I.oA(await Promise.all(o.map((async e=>{const r=t.table===v.bx?t.id:void 0,o=(0,V.Kv)(t,{table:m.cZ,id:e,spaceId:r});return await o.load(),o.getValue()}))));return r?(0,c.ZP)(r,s,i.y2):s}async function ue(e){const{query:t,environment:r,spaceId:o,botSettings:s}=e;if(!o)return[];const i=await F.searchIntegrations(r,{query:t});if("success"===i.type){const e=i.data.integrationIds,t=s&&s.integration_approval_statuses?Object.keys(s.integration_approval_statuses):[],r=Boolean(null==s?void 0:s.integration_restrictions),o=Boolean("approved_or_built_by_notion"===(null==s?void 0:s.integration_restrictions));return r?e.filter((e=>o?t.includes(e)||(0,a.BP)({integrationId:e,env:"production"}):t.includes(e))):e}if("failed"===i.type)throw i.error;(0,w.t1)(i)}async function pe(e){let{parentStore:t,query:r,userIds:o,minFuzzyScore:s}=e;const i=I.oA(await Promise.all(o.map((async e=>{const r=V.U6.createChildStore(t,{table:y.KJ,id:e});return await r.load(),r.getValue()})))),a=G.p.state??{},l=Math.max(...Object.values(a));function d(e){var t;return e===(null===(t=z.default.state.currentUserRootStore)||void 0===t?void 0:t.userId)?l+1e-5:a[e]??0}const u=I.xb(a)?i:i.sort(((e,t)=>{const r=d(e.id);return d(t.id)-r}));if(t.table!==v.bx)return i;const p=new Set(t.getEmailDomains());return r?(0,c.ZP)(r,u,b.of,{minThreshold:s,getSortScore:e=>{const{original:t,score:r}=e,o=t.email&&(0,n.Gd)(t.email);return r*(o&&p.has(o)?-2:-1)}}):i}async function he(e){const{currentSpaceStore:t}=z.default.state;if(!t)return[];const r=e.query.startsWith("@")?e.query.slice(1):e.query,o=await me(e);return await pe({parentStore:t,query:r,userIds:o,minFuzzyScore:e.minFuzzyScore})}async function me(e){const{environment:t,membersOnly:r}=e,{currentSpaceStore:o}=z.default.state;if(!o)return[];await D.OR({environment:t,spaceId:o.id});const s=O.subscriptionDataStoreInstance.state;if(!s)return[];const i=(0,N.CM)(s).filter((e=>!(r&&!(0,d.Jy)(e.role)))),{mainEditorCurrentBlockStore:n,currentUserStore:a}=z.default.state,c=n&&!r?(0,T.YO)(n).flatMap((e=>{let{permissionItem:t}=e;return(0,d.jg)(t)?[t.user_id]:[]})):[],l=(0,A.F$)()&&n?function(e,t){const r=q.VP(e);if(r){const e=new Set((0,f.Hf)({membership:r.getRawMembership()}));return t.filter((t=>"none"!==t.role||t.isPageGuest||t.isTeamGuest&&e.has(t.userId)))}return t.filter((e=>"none"!==e.role||e.isPageGuest))}(n,i):i,u=l.map((e=>e.userId));return I.jj([...I.oA([null==a?void 0:a.userId]),...c,...u])}const ge=me;async function ve(e){const[t,r]=await Promise.all([he(e),ce(e)]);return{users:t,bots:r}}async function ye(e){const[t,r]=await Promise.all([me(e),le(e)]);return{userIds:t,botIds:r}}async function Se(e,t){const r=(0,n.H3)(t);if((0,n.oH)(r)&&r){const t=await F.findUser(e,{email:r});if("failed"===t.type)throw t.error;const o=t.data;return o.value?{user:o.value.value}:{email:r}}return{}}async function fe(e){const{query:t,userIds:r,botIds:o,store:s}=e;let i=s;if(!i){const{currentSpaceStore:e}=z.default.state;if(!e)return{users:[],bots:[]};i=e}const[n,a]=await Promise.all([pe({parentStore:i,query:t,userIds:r}),de({parentStore:i,query:t,botIds:o})]);return{users:n,bots:a}}async function Ce(e){const{nearBlock:t,environment:r,query:o,source:s,searchSessionId:i,searchSessionFlowNumber:n}=e,{currentSpaceStore:a}=z.default.state,c=(0,B.zj)(),l=t&&(0,T.YO)(t).find((e=>{let{permissionItem:t}=e;return(0,d.$D)(t)})),u=E.Z.getMentionedIds(r.currentUser.id);if(a){return be(await Y({environment:r,query:o,limit:20,spaceId:a.id,currentPageId:c,searchSessionId:i,searchSessionFlowNumber:n,recentlyMentionedPageIds:u,requireEditPermissions:!1,excludeTemplates:!0,source:s,boostRecentlyViewedPages:!0,ignoresHighlight:!0}))}if(l&&l.from.table===h.iU){return be(await re({environment:r,query:o,limit:20,ancestorId:l.from.blockId,excludeTemplates:!0,source:s,currentPageId:c,searchSessionId:i,searchSessionFlowNumber:n,recentlyMentionedPageIds:u,ignoresHighlight:!0}))}return[]}function be(e){const{trackEventProperties:t,results:r}=e,o=(0,P.m8)((0,w.qP)(t).map((e=>{let[t,r]=e;return[`server-${t}`,r]})));return r.map((e=>({...e,serverEventProperties:o})))}async function Ie(e){const{environment:t,query:r,source:o,limit:s}=e,{currentSpaceStore:i}=z.default.state;if(!i)return[];return(await Y({environment:t,query:r,limit:s||20,spaceId:i.id,requireEditPermissions:!0,excludeTemplates:!0,source:o,boostRecentlyViewedPages:!1})).results.filter((e=>{const t=V.G.createChildStore(i,{table:h.iU,id:e.id}),r=(0,q.fJ)(t);return(0,l.$t)(r)}))}async function xe(e){let{spaceViewStore:t,query:r,teamStores:o}=e;const s=I.oA(await Promise.all(o.map((async e=>(await e.load(),e.getValue()))))),i=t.getTeamsStores(),n=new Set(i.map((e=>e.id)));return r?(0,c.ZP)(r,s,(e=>e.name),{getSortScore:e=>{const{original:t,score:r}=e;return r*(n.has(t.id)?-2:-1)}}):s}function we(e,t){const{query:r,limit:o,spaceId:i,requireEditPermissions:n,databaseType:a}=t,c=[];return e.defaultRecordCache.inMemoryRecordCache.forEachRecord(e.currentUser.id,(e=>{let{model:t,role:l}=e;if(!(c.length>=o)&&t.table===g.vF&&t&&t.space_id===i){if(n&&!(0,d.J5)(l))return;const e=(0,C.QaF)(t.getName()),o=t.getDatabaseType();!(0,M.Kj)(t.getParentId())&&s().test(r,e)&&(!a||a&&o&&a.includes(o))&&c.push(t.pointer.id),t.getDatabaseType}})),c}},8597:(e,t,r)=>{r.d(t,{Z:()=>i});r(67294);var o=r(45238),s=r(85893);const i=(0,o.IU)("arrowUp",{viewBox:"0 0 16 16",svg:(0,s.jsx)("path",{d:"M8 14.5586C8.44434 14.5586 8.74512 14.251 8.74512 13.7998V5.30957L8.69043 3.83984L10.4951 5.84961L12.0469 7.38086C12.1836 7.51074 12.3682 7.59961 12.5801 7.59961C12.9902 7.59961 13.291 7.28516 13.291 6.86816C13.291 6.66992 13.2158 6.49219 13.0586 6.32812L8.55371 1.81641C8.40332 1.66602 8.20508 1.57715 8 1.57715C7.79492 1.57715 7.59668 1.66602 7.44629 1.81641L2.94141 6.32812C2.78418 6.49219 2.70898 6.66992 2.70898 6.86816C2.70898 7.28516 3.0166 7.59961 3.42676 7.59961C3.63184 7.59961 3.82324 7.51074 3.95312 7.38086L5.50488 5.84961L7.30957 3.83301L7.25488 5.30957V13.7998C7.25488 14.251 7.5625 14.5586 8 14.5586Z"})})},72787:(e,t,r)=>{r.d(t,{Y:()=>i});r(67294);var o=r(45238),s=r(85893);const i=(0,o.IU)("chevronDownThin",{viewBox:"0 0 16 16",svg:(0,s.jsx)("path",{d:"M8.004 12a.72.72 0 00.54-.237l6.238-6.487A.735.735 0 0015 4.753c0-.426-.314-.753-.733-.753a.76.76 0 00-.524.213l-5.739 5.955-5.747-5.955A.73.73 0 001.733 4C1.314 4 1 4.327 1 4.753c0 .204.08.384.218.531l6.238 6.479a.751.751 0 00.548.237z"})})},13148:(e,t,r)=>{r.d(t,{U:()=>i});r(67294);var o=r(45238),s=r(85893);const i=(0,o.IU)("close",{viewBox:"0 0 16 16",svg:(0,s.jsx)("path",{d:"M2.89795 13.3428C3.18799 13.6262 3.6626 13.6262 3.93945 13.3494L7.99341 9.29541L12.0474 13.3494C12.3308 13.6262 12.8054 13.6328 13.0889 13.3428C13.3723 13.0593 13.3723 12.5847 13.0955 12.3079L9.0415 8.24731L13.0955 4.19336C13.3723 3.9165 13.3789 3.4353 13.0889 3.15845C12.7988 2.875 12.3308 2.875 12.0474 3.15186L7.99341 7.20581L3.93945 3.15186C3.6626 2.875 3.1814 2.86841 2.89795 3.15186C2.6145 3.44189 2.62109 3.9231 2.89795 4.19336L6.9519 8.24731L2.89795 12.3079C2.62109 12.5781 2.6145 13.0659 2.89795 13.3428Z"})})},64878:(e,t,r)=>{r.d(t,{h:()=>i});r(67294);var o=r(45238),s=r(85893);const i=(0,o.IU)("dot",{viewBox:"0 0 5 4",svg:(0,s.jsx)("circle",{cx:"2.5",cy:"2",r:"2"})})},97439:(e,t,r)=>{r.d(t,{D:()=>i});r(67294);var o=r(45238),s=r(85893);const i=(0,o.IU)("doubleChevronLeft",{viewBox:"0 0 16 16",svg:(0,s.jsx)("path",{d:"M7.07031 13.8887C7.2207 14.0391 7.40527 14.1211 7.62402 14.1211C8.06836 14.1211 8.41699 13.7725 8.41699 13.3281C8.41699 13.1094 8.32812 12.9043 8.17773 12.7539L3.37207 8.05762L8.17773 3.375C8.32812 3.21777 8.41699 3.0127 8.41699 2.80078C8.41699 2.35645 8.06836 2.00781 7.62402 2.00781C7.40527 2.00781 7.2207 2.08984 7.07031 2.24023L1.73828 7.44922C1.56055 7.62012 1.46484 7.8252 1.46484 8.06445C1.46484 8.29688 1.55371 8.49512 1.73828 8.67969L7.07031 13.8887ZM13.1748 13.8887C13.3252 14.0391 13.5098 14.1211 13.7354 14.1211C14.1797 14.1211 14.5283 13.7725 14.5283 13.3281C14.5283 13.1094 14.4395 12.9043 14.2891 12.7539L9.4834 8.05762L14.2891 3.375C14.4395 3.21777 14.5283 3.0127 14.5283 2.80078C14.5283 2.35645 14.1797 2.00781 13.7354 2.00781C13.5098 2.00781 13.3252 2.08984 13.1748 2.24023L7.84961 7.44922C7.66504 7.62012 7.57617 7.8252 7.56934 8.06445C7.56934 8.29688 7.66504 8.49512 7.84961 8.67969L13.1748 13.8887Z"})})},27714:(e,t,r)=>{r.d(t,{N:()=>i});r(67294);var o=r(45238),s=r(85893);const i=(0,o.IU)("link",{viewBox:"0 0 16 16",svg:(0,s.jsx)("path",{d:"M7.69922 10.8945L8.73828 9.84863C7.91797 9.77344 7.34375 9.51367 6.91992 9.08984C5.76465 7.93457 5.76465 6.29395 6.91309 5.14551L9.18262 2.87598C10.3379 1.7207 11.9717 1.7207 13.127 2.87598C14.2891 4.04492 14.2822 5.67188 13.1338 6.82031L11.958 7.99609C12.1768 8.49512 12.2451 9.10352 12.1289 9.62988L14.0908 7.6748C15.7725 6 15.7793 3.62109 14.084 1.92578C12.3887 0.223633 10.0098 0.237305 8.33496 1.91211L5.95605 4.29785C4.28125 5.97266 4.26758 8.35156 5.96289 10.0469C6.36621 10.4434 6.90625 10.7441 7.69922 10.8945ZM8.30078 5.13184L7.26855 6.17773C8.08203 6.25293 8.66309 6.51953 9.08008 6.93652C10.2422 8.09863 10.2422 9.73242 9.08691 10.8809L6.81738 13.1504C5.66211 14.3057 4.03516 14.3057 2.87305 13.1504C1.71094 11.9883 1.71777 10.3545 2.87305 9.20605L4.04199 8.03027C3.83008 7.53125 3.75488 6.92969 3.87109 6.39648L1.91602 8.35156C0.234375 10.0264 0.227539 12.4121 1.92285 14.1074C3.61816 15.8027 5.99707 15.7891 7.67188 14.1143L10.0439 11.7354C11.7256 10.0537 11.7324 7.6748 10.0371 5.98633C9.64062 5.58301 9.10059 5.28223 8.30078 5.13184Z"})})},22686:(e,t,r)=>{r.d(t,{f:()=>i});r(67294);var o=r(45238),s=r(85893);const i=(0,o.IU)("person",{viewBox:"0 0 16 16",svg:(0,s.jsx)("path",{d:"M7.7832 8.00195C9.27344 8.00195 10.5381 6.67578 10.5381 4.95996C10.5381 3.28516 9.2666 2 7.7832 2C6.29297 2 5.01465 3.30566 5.02148 4.97363C5.02148 6.67578 6.28613 8.00195 7.7832 8.00195ZM3.51758 14.3594H12.0352C13.1631 14.3594 13.5527 14.0176 13.5527 13.3887C13.5527 11.6318 11.3242 9.21191 7.77637 9.21191C4.23535 9.21191 2 11.6318 2 13.3887C2 14.0176 2.38965 14.3594 3.51758 14.3594Z"})})},14734:(e,t,r)=>{r.d(t,{X:()=>i});r(67294);var o=r(45238),s=r(85893);const i=(0,o.IU)("personCrossedOut",{viewBox:"0 0 44 44",svg:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("path",{d:"M5.4857 44H0L44 8.56549V13.0061L5.4857 44Z"}),(0,s.jsx)("path",{d:"M39.8048 44H8.66491L25.6448 30.4378C26.9394 30.6489 28.1581 30.9719 29.3009 31.4067C31.5362 32.2374 33.4346 33.326 34.9964 34.6723C36.5725 36.0044 37.7761 37.4367 38.6071 38.9692C39.4525 40.5018 39.8752 41.9555 39.8752 43.3305C39.8752 43.5675 39.8517 43.7906 39.8048 44Z"}),(0,s.jsx)("path",{d:"M30.3971 16.7973C30.3971 16.8668 30.3965 16.9359 30.3952 17.0048L19.3828 25.9192C18.7467 25.7134 18.1339 25.4228 17.5446 25.0473C16.2408 24.2023 15.1876 23.0708 14.3853 21.6528C13.5972 20.2205 13.2032 18.6163 13.2032 16.8403C13.2032 15.0929 13.5972 13.5174 14.3853 12.1137C15.1876 10.7101 16.2408 9.60007 17.5446 8.78366C18.8485 7.96725 20.267 7.55905 21.8001 7.55905C23.3332 7.55905 24.7517 7.96009 26.0556 8.76218C27.3595 9.56426 28.4054 10.6671 29.1935 12.0708C29.9959 13.4601 30.3971 15.0356 30.3971 16.7973Z"})]})})},35840:(e,t,r)=>{r.d(t,{R:()=>i,T:()=>s});r(67294);var o=r(45238);const s=(0,r(85893).jsx)("path",{d:"M.281 6.438c0-.875.164-1.696.492-2.461a6.484 6.484 0 011.375-2.032A6.237 6.237 0 016.64.078 6.2 6.2 0 019.11.57c.77.328 1.447.787 2.03 1.375a6.374 6.374 0 011.368 2.032c.333.765.5 1.586.5 2.46 0 .688-.107 1.342-.32 1.961a6.28 6.28 0 01-.868 1.696l3.563 3.578c.11.104.19.226.242.367.057.14.086.29.086.445 0 .22-.05.417-.149.594a1.122 1.122 0 01-1 .57c-.156 0-.307-.028-.453-.086a1.058 1.058 0 01-.382-.25l-3.586-3.585c-.5.333-1.047.596-1.641.789a6.089 6.089 0 01-1.86.28 6.237 6.237 0 01-2.468-.491 6.4 6.4 0 01-2.024-1.367A6.509 6.509 0 01.773 8.913a6.256 6.256 0 01-.492-2.476zm1.664 0c0 .65.12 1.26.36 1.828a4.775 4.775 0 001.015 1.5c.433.427.933.763 1.5 1.007a4.548 4.548 0 001.82.368c.652 0 1.261-.123 1.829-.368a4.747 4.747 0 002.508-2.507 4.567 4.567 0 00.367-1.829c0-.645-.123-1.252-.367-1.82a4.776 4.776 0 00-1.016-1.5A4.578 4.578 0 008.469 2.11a4.567 4.567 0 00-1.828-.367c-.646 0-1.253.123-1.82.367a4.667 4.667 0 00-1.5 1.008c-.433.432-.772.932-1.016 1.5a4.633 4.633 0 00-.36 1.82z"}),i=(0,o.IU)("search",{viewBox:"0 0 16 16",svg:s})}}]);