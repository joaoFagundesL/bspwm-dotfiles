"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[4767,8319],{45257:(e,t,n)=>{n.d(t,{Z:()=>a});n(67294);var o=n(480),i=n(24405),r=n(42853),s=n(64921),l=n(85893);function a(e){const{icon:t,title:n,on:a,hasDiff:d,wrapStyle:u,innerStyle:m,hideChevron:p}=e,h=(0,i.Fg)(),f=(0,o.O7)();return(0,l.jsxs)("div",{style:{borderRadius:14,marginRight:6,display:"inline-flex",...d&&{position:"relative"},...u},children:[(0,l.jsxs)(s.Z,{disabled:e.disabled,style:c(Boolean(a),h,m,f.device.isMobile),hoveredStyle:a?{background:h.outlineBlueButtonHoveredBackground}:void 0,pressedStyle:a?{background:h.outlineBlueButtonPressedBackground}:void 0,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,onClick:e.onClick,onDoubleClick:e.onDoubleClick,children:[t,n,!p&&(0,r.i)({width:10,marginLeft:4,marginTop:1,fill:a?h.blueColor:h.lightIconColor})]}),d&&(0,l.jsx)("div",{style:{position:"absolute",top:-2,right:-2,background:"dark"===h.mode?h.accentColors.orange[500]:h.accentColors.orange[300],border:`1px solid ${h.contentBackground}`,width:9,height:9,borderRadius:9}})]})}function c(e,t,n,o){return{fontSize:14,display:"inline-flex",alignItems:"center",justifyContent:"center",whiteSpace:"nowrap",borderRadius:32,height:o?28:24,lineHeight:o?"28px":"24px",padding:"0 8px",border:`1px solid ${t.outlineButtonBorder}`,color:t.mediumTextColor,...e&&{color:t.blueColor,border:`1px solid ${t.filterPillBorder}`,background:t.filterPillBackground},...n}}},255:(e,t,n)=>{n.d(t,{Z:()=>l});n(67294);var o=n(480),i=n(53465),r=n(73063),s=n(85893);const l=function(e){const t=(0,o.O7)(),n={removeFilterButton:{height:void 0,width:void 0},removeFilterButtonMobile:{marginRight:-12,marginTop:-12,marginBottom:-12,paddingRight:12,paddingTop:12,paddingBottom:12}},{onClick:l,disabled:a}=e,{device:c}=t,d=c.isMobile?{...n.removeFilterButton,...n.removeFilterButtonMobile}:n.removeFilterButton;return(0,s.jsx)(r.Z,{icon:i.X,onClick:l,disabled:a,disableBackground:!0,style:d})}},83890:(e,t,n)=>{n.d(t,{Z:()=>b});n(67294);var o=n(480),i=n(86628),r=n(66897),s=n(22686),l=n(19889),a=n(7928),c=n(9291),d=n(77907),u=n(6258),m=n(92864),p=n(93044),h=n(255),f=n(97680),g=n(8319),v=n(85893);const b=function(e){let{mode:t,title:n,userIds:i,onChange:r,disabled:l,focused:a,onMenuDismiss:u,onMenuOpen:m,parentStore:p}=e;const h=(0,o.O7)(),f=(0,c.useIntl)();return(0,v.jsx)(g.Z,{mode:t,title:n,icon:s.f,iconStyles:C(h).recordIcon,items:i,onChange:r,disabled:l,focused:a,renderFilter:(e,t)=>(0,v.jsx)(M,{item:e,args:t,parentStore:p}),renderToken:(e,t)=>(0,v.jsx)(x,{item:e,handlers:t,userIds:i,parentStore:p}),renderItemForSummary:e=>(0,v.jsx)(k,{item:e,parentStore:p}),addItemLabel:(0,v.jsx)(c.FormattedMessage,{defaultMessage:"Add a person",id:"search.filterMenu.addAPersonButton.label"}),labelText:{title:n,tokenInputPlaceholder:f.formatMessage({defaultMessage:"Search people",id:"search.filterMenu.searchPeople.placeholder"}),componentDebugName:"SearchPersonFilter"},performRequest:e=>async function(e,t){let{query:n,current:o}=e;const i=new Set(o),r=await d.deps.searchActions.loader(),s=await r.searchVisibleSpaceUsers({environment:t,query:n,membersOnly:!1});return s.filter((e=>!i.has(e.id))).slice(0,20).map((e=>e.id))}(e,h),renderResultMenuItem:(e,t)=>(0,v.jsx)(y,{item:e,props:t,parentStore:p}),onMenuDismiss:u,onMenuOpen:m,hasItemsSelected:(null==i?void 0:i.length)>0})};function S(e,t){const n=function(e,t){return u.U6.createChildStore(t,{table:l.KJ,id:e})}(e,t);return n.getValue()}function k(e){let{item:t,parentStore:n}=e;const o=(0,c.useIntl)(),r=(0,i.VK)((()=>S(t,n)),[t,n]);return(0,v.jsx)(v.Fragment,{children:(0,a.Nz)(o,r)})}function x(e){let{item:t,handlers:n,userIds:s,parentStore:l}=e;const a=(0,o.O7)(),c=1===s.length,d=(0,i.VK)((()=>S(t,l)),[t,l]);return d?(0,v.jsx)(m.ZP,{format:a.device.isMobile?p.lP.Large:p.lP.Small,showRemoveButton:!0,isSingle:c,onClickRemove:n.onRemove,actor:(0,r.m3)(d),shouldShrink:!0,style:{background:"transparent"}},t):null}function y(e){let{item:t,props:n,parentStore:o}=e;const s=(0,i.VK)((()=>S(t,o)),[t,o]);return(0,v.jsx)(f.Z,{...n,actor:(0,r.m3)(s)})}function C(e){return{menuItem:{minHeight:void 0,paddingTop:e.device.isMobile?12:4,paddingBottom:e.device.isMobile?12:4},menuItemTitle:{width:"100%"},labeledMenuItemTitle:{display:"inline-flex",alignItems:"center"},menuItemLabel:{marginRight:12},recordIcon:{marginRight:2,fill:"currentColor"}}}function M(e){let{item:t,args:n,parentStore:s}=e;const{disabled:l,onRemove:a,onClick:c}=n,d=C((0,o.O7)()),u=(0,i.VK)((()=>S(t,s)),[t,s]),m=(0,v.jsx)(h.Z,{disabled:l,onClick:a});return(0,v.jsx)(f.Z,{disabled:l,focused:!1,actor:(0,r.m3)(u),right:m,style:d.menuItem,desktopTitleStyle:d.menuItemTitle,onClick:c},t)}},8319:(e,t,n)=>{n.d(t,{z:()=>U,Z:()=>q});var o=n(67294),i=n(83355),r=n(480),s=n(86628),l=n(47453),a=n(9291),c=n(53965),d=n(1898),u=n(45257),m=n(75024),p=n(49085);class h extends p.default{getInitialState(){return{isMenuOpen:!1,inputTemporaryValue:"",indexToReplace:void 0,popupOriginRect:void 0}}}const f=h;var g=n(52275),v=n(89728),b=n(53437),S=n(58297),k=n(72495),x=n(75689),y=n(91642),C=n(68626),M=n(52629),T=n(23586),j=n(60709),I=n(29798),R=n(72087),F=n(78140),B=n(32163),O=n(43765),w=n(40721),Z=n(47082),P=n(85893);const L={input:{marginTop:8,marginLeft:8,marginRight:8,boxSizing:"border-box",width:"auto"},menu:{width:250,maxHeight:"40vh"},inputMenu:{maxHeight:"20vh"}};const A=function(e){let{labelText:t,value:n,renderResultMenuItem:i,onConfirm:l,items:a,performRequest:c,onDismiss:d,onChange:u,renderToken:m,onRemove:p,onClear:h,disabled:f}=e;const g=(0,r.O7)(),v=(0,s.qz)(void 0,I.Z),b=(0,s.qz)(void 0,R.Z),S=(0,o.useCallback)(((e,o,r)=>(0,P.jsx)(H,{error:e,data:o,ready:r,labelText:t,value:n,renderResultMenuItem:i,onConfirm:l,menuListStore:v})),[t,n,i,l,v]),k={query:n,current:a};return(0,P.jsx)(F.Z,{...V(g,d,t,n,a,u,m,p,h,f),children:(0,P.jsx)(T.Z,{debounce:100,requestStore:b,request:k,performRequest:c,render:S})})};function z(e){const{device:t}=e;return t.isMobile}function D(e){let{labelText:t,value:n,items:o,disabled:i,onChange:s,renderToken:l,onRemove:a,onClear:d}=e;const u=(0,r.O7)(),m=o.map((e=>l(e,{onRemove:()=>a(e)})));return(0,P.jsx)(Z.Z,{focus:!z(u)||void 0,focusAfterAnimation:!0,format:Z.U.FilterValue,tokens:m,placeholder:t.tokenInputPlaceholder,onRemoveLastToken:()=>function(e,t){const n=c.Z$(e);n&&t(n)}(o,a),onClearButtonClick:d,value:n,onChange:s,showClearButton:!0,disabled:Boolean(i),style:L.inputMenu})}function V(e,t,n,o,i,r,s,l,a,c){if(z(e)){return{menuType:j.og.Modal,title:n.title,right:(0,P.jsx)(w.DoneMenuText,{}),onClickRight:t,header:(0,P.jsx)(D,{labelText:n,value:o,items:i,disabled:c,onChange:r,renderToken:s,onRemove:l,onClear:a})}}return{menuType:j.og.Popup,onClickOutside:t,header:(0,P.jsx)(D,{labelText:n,value:o,items:i,disabled:c,onChange:r,renderToken:s,onRemove:l,onClear:a}),...L.menu}}function H(e){let{error:t,data:n,ready:i,labelText:r,value:l,renderResultMenuItem:c,onConfirm:d,menuListStore:u}=e;const m=(0,s.qz)(u,I.Z),p=(0,o.useCallback)((e=>(0,P.jsx)(k.Z,{...e,title:r.resultSectionTitle,loading:!i})),[r,i]);if(t)return C.log({level:"error",from:r.componentDebugName,type:"requestFailed",error:(0,M.Ui)(t),data:{miscDataToConvertToString:{query:l}}}),(0,P.jsx)(p,{children:(0,P.jsx)(O.Z,{title:(0,P.jsx)(a.FormattedMessage,{defaultMessage:"Something went wrong.",id:"search.inputMenu.errorMessage"})})});if(!n)return(0,P.jsx)(p,{children:(0,P.jsx)(O.Z,{title:(0,P.jsx)(a.FormattedMessage,{defaultMessage:"Loading…",id:"search.inputMenu.loading.message"})})});if(n&&0===n.length)return(0,P.jsx)(p,{children:(0,P.jsx)(O.Z,{title:(0,P.jsx)(a.FormattedMessage,{defaultMessage:"No results found.",id:"search.inputMenu.noResults.message"})})});const h={key:"results",items:n.map((e=>function(e,t,n){return{key:e,action:()=>n(e),render:n=>t(e,n)}}(e,c,d))),render:p};return(0,P.jsx)(B.Z,{type:B.i.Vertical,store:m,initialFocus:0,sections:[h]})}let U=function(e){return e.Button="Button",e.Section="Section",e.Pill="Pill",e}({});class W extends i.Z{constructor(){super(...arguments),this.animationFrameRef={current:void 0},this.originRef=o.createRef(),this.storeTypes={componentStore:f},this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleMenuClose=e=>G(this.stores.componentStore,this.props.onMenuDismiss,e),this.scheduleMeasurement=(e,t)=>{this.animationFrameRef.current=requestAnimationFrame(function(e,t,n){return o=>{if(!n)return;if(!n.current)return;const i=e?e(t.state):t.state;t.setState({...i,popupOriginRect:n.current.getBoundingClientRect()})}}(t,this.stores.componentStore,this.originRef))}}didMount(){window.addEventListener("resize",this.scheduleMeasurement)}willUnmount(){window.removeEventListener("resize",this.scheduleMeasurement),this.animationFrameRef.current&&(cancelAnimationFrame(this.animationFrameRef.current),this.animationFrameRef.current=void 0)}didUpdate(e){(e.items.length!==this.props.items.length||e.mode!==this.props.mode)&&this.scheduleMeasurement()}renderComponent(){const{device:e}=this.environment,{mode:t}=this.props;return e.isMobile?(0,P.jsx)(oe,{searchTokenFilterProps:this.props,componentStore:this.stores.componentStore}):this.renderDesktop(t)}renderDesktop(e){const{title:t,disabled:n}=this.props,{componentStore:{state:o}}=this.stores,i=n||o.isMenuOpen;let r;const s=(()=>e===U.Section?(r=t,this.renderSectionOrigin()):e===U.Button?this.renderButtonOrigin():e===U.Pill?this.renderPillOrigin():void(0,d.t1)(e))();return(0,P.jsxs)(y.Z,{title:r,marginAfter:e===U.Section,style:$(this.environment,this.props.mode).sectionMenuItem,children:[e!==U.Pill&&this.renderFilters({disableFilters:i,showLabel:!1}),s,(0,P.jsx)(b.ZP,{popupType:b.ZP.PopupType.Popup,placementToOrigin:b.ZP.Placement.Bottom,alignmentToOrigin:b.ZP.Alignment.Start,open:X(this.stores.componentStore),originRect:o.popupOriginRect,render:()=>(0,P.jsx)(ne,{searchTokenFilterProps:this.props,componentStore:this.stores.componentStore}),onDismiss:this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleMenuClose,keepFocus:!0,preventScaleTransition:!0})]})}renderButtonOrigin(){const{icon:e,title:t,disabled:n,focused:o}=this.props,i=$(this.environment,this.props.mode),r=_(this.theme),s={...i.menuItem,...r.buttonMenuItem};return(0,P.jsx)("div",{ref:this.originRef,style:i.menuItemWrapper,children:(0,P.jsx)(g.Z,{disabled:n||X(this.stores.componentStore),icon:e(i.icon),title:t,focused:o,onClick:e=>ie(this.scheduleMeasurement,void 0,this.props.onMenuOpen),style:s})})}renderPillOrigin(){const{icon:e,title:t,disabled:n,iconStyles:o}=this.props,i=$(this.environment,this.props.mode),r=this.props.mode===U.Pill&&this.props.hasItemsSelected;return(0,P.jsx)("div",{ref:this.originRef,style:i.menuItemWrapper,children:(0,P.jsx)(u.Z,{on:r,icon:e({...i.icon,...o}),title:(0,P.jsx)("span",{children:t}),onClick:e=>ie(this.scheduleMeasurement,void 0,this.props.onMenuOpen),wrapStyle:{opacity:n?.4:1}})})}renderSectionOrigin(){const{addItemLabel:e,disabled:t}=this.props,n=$(this.environment,this.props.mode),i=_(this.theme);return(0,P.jsxs)(o.Fragment,{children:[(0,P.jsx)("div",{ref:this.originRef,style:n.menuItemWrapper}),(0,P.jsx)(g.Z,{disabled:t||X(this.stores.componentStore),icon:(0,l.R)(n.iconSmall),title:e,focused:!1,onClick:e=>ie(this.scheduleMeasurement,void 0,this.props.onMenuOpen),style:{...n.appendListItemButton,...i.appendListItemButton}})]})}renderFilters(e){const{items:t,renderFilter:n}=this.props,{device:o}=this.environment,i=t.map(((t,i)=>(0,P.jsx)("li",{children:n(t,{disabled:e.disableFilters,onRemove:()=>E(t,this.props.items,this.props.onChange),onClick:()=>o.isMobile?Q(this.stores.componentStore):ie(this.scheduleMeasurement,i,this.props.onMenuOpen)})},`${t}_${i}`)));return(0,P.jsx)("ul",{style:m.mK,children:i})}}W.displayName="SearchTokenFilter";const q=W;function K(e,t,n){n(t.filter((t=>t!==e)))}function N(e){e([])}function _(e){return{buttonMenuItem:{color:e.mediumTextColor},appendListItemButton:{color:e.lightTextColor}}}function E(e,t,n){K(e,t,n)}function $(e,t){return{menuItem:{minHeight:void 0,paddingTop:e.device.isMobile?12:4,paddingBottom:e.device.isMobile?12:4},menuItemWrapper:{display:"flex"},sectionMenuItem:{display:"flex"},appendListItemButton:{minHeight:void 0,paddingTop:4,paddingBottom:4,fontSize:m.yv(e,"UIRegular")},icon:{height:16,width:16,marginRight:"Pill"===t?6:-2,fill:"currentColor"},iconSmall:{height:12,width:12},summary:{display:"inline"},summaryItem:{display:"inline"}}}function Q(e){e.setState({...e.state,isMenuOpen:!0})}function X(e){return e.state.isMenuOpen}function J(e){e.setState({...e.state,inputTemporaryValue:"",indexToReplace:void 0})}function G(e,t,n){J(e),e.setState({...e.state,isMenuOpen:!1,indexToReplace:void 0}),t&&t(n)}function Y(e,t,n,o,i){const{indexToReplace:r}=i.state;"number"==typeof r&&r<t.length?function(e,t,n,o){o(n.slice(0,e).concat(t,n.slice(e+1)))}(r,e,t,n):t.includes(e)&&U.Pill?K(e,t,n):function(e,t,n){const o=t.concat(e);n(c.jj(o))}(e,t,n),o||J(i)}function ee(e){let{disableFilters:t,icon:n,title:o,mode:i,componentStore:s}=e;const l=$((0,r.O7)(),i);return(0,P.jsx)(g.Z,{disabled:t,focused:!1,icon:n({...l.icon}),title:o,onClick:e=>Q(s)})}function te(e){let{disableFilters:t,title:n,items:i,renderItemForSummary:s,mode:l,onChange:a,componentStore:c}=e;const d=(0,r.O7)(),u=(0,o.useCallback)((()=>Q(c)),[c]),p=$(d,l),h={...m.mK,...p.summary},f=i.length-1,g=(0,P.jsx)("ul",{style:h,children:i.map(((e,t)=>(0,P.jsx)("li",{style:p.summaryItem,children:(0,P.jsxs)(o.Fragment,{children:[s(e),t!==f&&","," "]})},e)))});return(0,P.jsx)(x.Z,{disabled:t,onClick:u,onClickClear:()=>N(a),label:n,title:g})}function ne(e){let{searchTokenFilterProps:t,componentStore:n}=e;const{items:i,onChange:r,keepInputOnItemConfirm:l,onMenuDismiss:c,renderToken:d,renderFooter:u,allowApplyBatchSelection:m}=t,p=(0,o.useCallback)((e=>Y(e,i,r,l,n)),[i,r,l,n]),h=(0,o.useCallback)((e=>G(n,c,e)),[n,c]),f=(0,o.useCallback)((e=>function(e,t){const{target:n}=e;t.setState({...t.state,inputTemporaryValue:String(n.value)})}(e,n)),[n]),g=(0,s.VK)((()=>n.state),[n]);return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(A,{...t,value:g.inputTemporaryValue,onChange:f,onDismiss:h,onConfirm:p,onClear:()=>{!function(e){e.setState({...e.state,inputTemporaryValue:""})}(n),N(r)},onRemove:e=>E(e,i,r),renderToken:d}),u&&(0,P.jsxs)(k.Z,{topBorder:!0,style:{padding:6,justifyContent:"space-between",display:"flex"},children:[(0,P.jsx)(v.Z,{onClick:()=>{N(r)},children:(0,P.jsx)(a.FormattedMessage,{id:"searchTokenFilter.clearButton",defaultMessage:"Clear"})}),m&&(0,P.jsx)(S.Z,{onClick:()=>{G(n,c,"applyButton")},children:(0,P.jsx)(a.FormattedMessage,{id:"searchTokenFilter.applyButton",defaultMessage:"Apply"})})]})]})}function oe(e){let{searchTokenFilterProps:t,componentStore:n}=e;const{mode:i,onMenuDismiss:r,disabled:l,title:a,items:c,renderItemForSummary:d,onChange:u,icon:m}=t,p=(0,o.useCallback)((e=>G(n,r,e)),[n,r]),h=(0,o.useCallback)((()=>(0,P.jsx)(ne,{searchTokenFilterProps:t,componentStore:n})),[t,n]),f=(0,s.VK)((()=>X(n)),[n]),g=l||f,v=i===U.Section?(0,P.jsx)(te,{title:a,items:c,renderItemForSummary:d,mode:i,onChange:u,componentStore:n,disableFilters:g}):(0,P.jsx)(ee,{icon:m,title:a,mode:i,componentStore:n,disableFilters:g});return(0,P.jsx)(b.ZP,{popupType:b.ZP.PopupType.SlideUp,open:f,origin:v,render:h,onDismiss:p,keepFocus:!0})}function ie(e,t,n){n&&n(),e(void 0,(e=>({...e,isMenuOpen:!0,indexToReplace:t})))}},75689:(e,t,n)=>{n.d(t,{Z:()=>d});n(67294);var o=n(480),i=n(24405),r=n(37810),s=n(52275),l=n(24006),a=n(255),c=n(85893);const d=function(e){const{disabled:t,label:n,title:r,onClick:l,isToggle:a,isToggleActive:d,onClickClear:p,...h}=e,f=(0,i.Fg)(),g=(0,o.O7)(),v=function(e){return{menuItemLabel:{color:e.lightTextColor}}}(f),b=u(g),S=(0,c.jsx)("span",{style:v.menuItemLabel,children:n});return(0,c.jsx)(s.Z,{focused:!1,...h,inline:a,disabled:t,icon:S,title:r,right:(0,c.jsx)(m,{disabled:!!t,isToggle:!!a,isToggleActive:!!d,onClick:l,onClickClear:p}),onClick:l,dontShrinkIcon:!0,dontShrinkRight:!0,shouldWrapTitle:!0,style:b.menuItem,desktopIconStyle:b.menuItemLabel})};function u(e){return{menuItem:{background:void 0,minHeight:void 0,fontSize:e.device.isMobile?r.Z.fontSize.UISmall.mobile:r.Z.fontSize.UIRegular.desktop,paddingTop:e.device.isMobile?12:4,paddingBottom:e.device.isMobile?12:4},labeledMenuItemTitle:{display:"inline-flex",alignItems:"center"},menuItemLabel:{marginTop:0},rightWrapper:{display:"flex",alignItems:"center",marginTop:"-50%",marginBottom:"-50%",height:44}}}function m(e){let{disabled:t,isToggle:n,isToggleActive:i,onClick:r,onClickClear:s=(()=>{})}=e;const d=u((0,o.O7)()).rightWrapper;return n?(0,c.jsx)("div",{style:d,children:(0,c.jsx)(l.Z,{on:!!i,onClick:r})}):(0,c.jsx)(a.Z,{disabled:t,onClick:s})}},91642:(e,t,n)=>{n.d(t,{Z:()=>r});n(67294);var o=n(72495),i=n(85893);const r=function(e){const t={desktopTitleStyle:{marginBottom:4},marginAfter:{marginBottom:16}},{title:n,marginAfter:r,desktopStyle:s,desktopTitleStyle:l,...a}=e,c=(r||s)&&{...r&&t.marginAfter,...s},d=l?{...t.desktopTitleStyle,...l}:t.desktopTitleStyle;return(0,i.jsx)(o.Z,{isTitleUppercase:!0,disableDesktopPadding:!0,enableActionSheetTitle:!0,desktopStyle:c,desktopTitleStyle:d,shouldShowBottomDivider:!1,title:n,...a})}},86706:(e,t,n)=>{n.d(t,{K9:()=>S,Uy:()=>b,nx:()=>m});n(57658);var o=n(67294),i=n(480),r=n(24405),s=n(9291),l=n(53965),a=n(74194),c=n(85893);const d=["control+t","control+shift+n","control+shift+t","control+w","control+shift+w","control+r","control+shift+r","control+shift+i","control+\\","control+=","control+-","control+0","control+[","control+]","control+shift+tab","control+tab","control+1","control+2","control+3","control+4","control+5","control+6","control+7","control+8","control+9"],u=["command+,","command+t","command+shift+n","command+shift+t","command+w","command+shift+w","command+r","command+shift+r","alt+command+i","command+\\","command+=","command+-","command+0","command+[","command+]","control+shift+tab","control+tab","command+option+left","command+option+right","command+shift+[","command+shift+]","command+1","command+2","command+3","command+4","command+5","command+6","command+7","command+8","command+9"];function m(e){function t(){return e.shortcut?b(e.shortcut):void 0}const{isMac:n,isWindows:m}=(0,i.Fy)(),{KeyboardShortcutStackStore:k}=(0,i.O7)(),[x,y]=(0,o.useState)(t()),[C,M]=(0,o.useState)(new Set([])),[T,j]=(0,o.useState)(),[I,R]=(0,o.useState)(!1),F=(0,o.useRef)(!1),B=(0,o.useRef)(!1),O=(0,o.useRef)(!1),w=(0,r.yK)((e=>({container:{display:"flex",flexDirection:"column",gap:10,alignItems:"flex-end"},takenShortcutError:{color:e.accentColors.red[500],fontSize:12}})),[]);function Z(){if(x&&O.current)if(x.key)if(n?x.control||x.option||x.command:x.control||x.option)if(function(e,t,n){for(const i of Object.values(e.shortcutMap))for(const e of i)if(l.Xy(b(e),t))return!0;const o=n?u:d;for(const i of o)if(l.Xy(b(i),t))return!0;return!1}(k,x,n)){y(t());const e=S(x,n);j((0,c.jsx)(s.FormattedMessage,{id:"desktopQuickSearch.error.shortcutAlreadyUsed",defaultMessage:"{reservedShortcut} is already used",values:{reservedShortcut:e}}))}else{const t=function(e,t){const n=[];e.shift&&n.push("shift");e.control&&(t?n.push("control"):n.push("ctrl"));e.option&&(t?n.push("option"):n.push("alt"));e.command&&(t?n.push("command"):n.push("meta"));e.key&&n.push(e.key.toLowerCase());return n.join("+")}(x,n);e.onChange(t)}else y(t()),j(n?(0,c.jsx)(s.FormattedMessage,{id:"desktopQuickSearch.error.macModifierRequired",defaultMessage:"Use one of Option, Control, or Command for global keyboard shortcuts"}):(0,c.jsx)(s.FormattedMessage,{id:"desktopQuickSearch.error.windowsModifierRequired",defaultMessage:"Use one of Control or Alt for global keyboard shortcuts"}));else y(void 0);else O.current||y(t());F.current=!0,R(!1),O.current=!1}function P(e){if(m&&e.startsWith("Meta"))return;const t=new Set([...C,e]),n=function(e){const t={};for(const o of e)o.startsWith(h)?t.command=!0:o.startsWith(g)?t.option=!0:o.startsWith(f)?t.shift=!0:o.startsWith(v)?t.control=!0:o.startsWith("Key")?t.key=o.substring(3).toLowerCase():o.startsWith("Digit")?t.key=o.substring(5):p[o]&&(t.key=p[o]);const n=0===Object.values(t).filter((e=>!l.o8(e))).length;return n?void 0:t}(t);M(t),y(n),j(void 0),O.current=!0}return(0,c.jsxs)("div",{style:w.container,children:[(0,c.jsx)(a.Z,{onKeyDown:function(e){B.current=!0,"Escape"===e.key?e.currentTarget.blur():"Tab"!==e.key&&(e.preventDefault(),e.stopPropagation(),P(e.code))},onKeyUp:function(e){B.current&&function(e){const t=new Set([...C]);if(t.delete(e),e.startsWith("Meta"))for(const n of t)n.startsWith(f)||n.startsWith(g)||n.startsWith(v)||t.delete(n);M(t),0===t.size&&Z()}(e.code)},onFocus:function(e){y(void 0),R(!0)},onBlur:function(e){F.current||Z(),F.current=!1,B.current=!1,M(new Set),R(!1)},focus:I,readOnly:!0,inputStyle:{textAlign:"center",caretColor:"transparent"},value:x&&S(x,n)}),T&&(0,c.jsx)("div",{style:w.takenShortcutError,children:T})]})}const p={ArrowDown:"down",ArrowLeft:"left",ArrowRight:"right",ArrowUp:"up",Backquote:"`",Backslash:"\\",Backspace:"backspace",BracketLeft:"[",BracketRight:"]",Comma:",",Delete:"delete",Enter:"return",Equal:"=",Minus:"-",Period:".",Quote:"'",Semicolon:";",Slash:"/",Space:"space"},h="Meta",f="Shift",g="Alt",v="Control";function b(e){const t={};for(let n of e.split("+"))n=n.toLowerCase(),"command"===n||"meta"===n?t.command=!0:"option"===n||"alt"===n?t.option=!0:"shift"===n?t.shift=!0:"control"===n||"ctrl"===n?t.control=!0:t.key=n;return t}function S(e,t){const n=[];if(e.shift&&(t?n.push("shift"):n.push("Shift")),e.control&&(t?n.push("control"):n.push("Ctrl")),e.option&&(t?n.push("option"):n.push("Alt")),e.command&&(t?n.push("⌘"):n.push("Win")),e.key){const t=1===e.key.length?e.key.toUpperCase():e.key;n.push(t)}return n.join("+")}},88507:(e,t,n)=>{n.d(t,{I:()=>r});n(67294);var o=n(45238),i=n(85893);const r=(0,o.IU)("openTeamSearch",{viewBox:"0 0 16 14",svg:(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("path",{d:"M9.506 13.342h4.447c.348 0 .621-.11.82-.328.2-.22.3-.516.3-.891V4.852c0-.375-.1-.67-.3-.885-.199-.219-.472-.328-.82-.328H9.922v1.136h3.709c.101 0 .178.026.228.077.051.05.076.127.076.228v6.815c0 .101-.025.177-.076.228-.05.05-.127.076-.228.076H9.506v1.143zm2.28-6.358h.925c.129 0 .193-.064.193-.193v-.896c0-.133-.064-.2-.193-.2h-.926c-.125 0-.187.067-.187.2v.896c0 .129.062.193.187.193zm0 2.168h.925c.129 0 .193-.066.193-.199v-.896c0-.133-.064-.2-.193-.2h-.926c-.125 0-.187.067-.187.2v.896c0 .133.062.2.187.2zm0 2.163h.925c.129 0 .193-.067.193-.2v-.896c0-.13-.064-.194-.193-.194h-.926c-.125 0-.187.065-.187.194v.896c0 .133.062.2.187.2zm-10.864.808c0 .375.1.672.299.89.199.22.474.329.826.329H9.44c.348 0 .621-.11.82-.328.204-.22.305-.516.305-.891V1.928c0-.38-.101-.676-.304-.89-.2-.22-.473-.329-.82-.329H2.046c-.352 0-.627.11-.826.328-.2.215-.3.512-.3.89v10.196zm1.142-.228V2.162c0-.105.026-.183.077-.234.05-.051.127-.076.228-.076h6.75c.102 0 .178.025.229.076.05.05.076.129.076.234v9.733c0 .101-.026.177-.076.228-.051.05-.127.076-.229.076H2.37c-.101 0-.178-.025-.228-.076-.051-.05-.077-.127-.077-.228zm1.588.85h.891v-1.946c0-.117.06-.176.182-.176h2.039c.12 0 .181.059.181.176v1.945h.89V10.5c0-.25-.058-.435-.175-.557-.117-.125-.295-.187-.533-.187H4.36c-.238 0-.416.062-.533.187-.117.122-.176.307-.176.557v2.244zm.17-8.362h1.12c.156 0 .234-.078.234-.235v-1.09c0-.156-.078-.234-.235-.234H3.822c-.148 0-.222.078-.222.235v1.09c0 .156.074.234.222.234zm2.719 0h1.12c.152 0 .228-.078.228-.235v-1.09c0-.156-.077-.234-.229-.234H6.541c-.152 0-.229.078-.229.235v1.09c0 .156.077.234.229.234zM3.822 6.627h1.12c.156 0 .234-.078.234-.234V5.309c0-.157-.078-.235-.235-.235H3.822c-.148 0-.222.078-.222.235v1.084c0 .156.074.234.222.234zm2.719 0h1.12c.152 0 .228-.078.228-.234V5.309c0-.157-.077-.235-.229-.235H6.541c-.152 0-.229.078-.229.235v1.084c0 .156.077.234.229.234zm-2.719 2.25h1.12c.156 0 .234-.08.234-.24V7.553c0-.157-.078-.235-.235-.235H3.822c-.148 0-.222.078-.222.235v1.084c0 .16.074.24.222.24zm2.719 0h1.12c.152 0 .228-.08.228-.24V7.553c0-.157-.077-.235-.229-.235H6.541c-.152 0-.229.078-.229.235v1.084c0 .16.077.24.229.24z"})})})}}]);