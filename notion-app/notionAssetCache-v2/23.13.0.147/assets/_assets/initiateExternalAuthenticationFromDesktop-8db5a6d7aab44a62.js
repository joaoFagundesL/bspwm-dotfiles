"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[3871],{94810:(e,t,n)=>{n.r(t),n.d(t,{default:()=>g});var i=n(67294),r=n(480),o=n(86628),s=n(19889),a=n(98275),l=n(1898),d=n(18265),u=n(95477),c=n(77907),h=n(80444),f=n(68785),p=n(85893);function g(e){const{redirectUri:t}=e,[n,g]=(0,i.useState)(!0),[v,x]=(0,i.useState)(!1),y=(0,r.O7)(),m=(0,o.VK)((()=>y.currentUser.loggedInUserIds),[y]),U=(0,o.VK)((()=>h.default.state.currentUserStore),[]),k=(0,o.VK)((()=>U?m.map((e=>U.getRecordModel({table:s.KJ,id:e}))).filter(l.$K):[]),[U,m]),w=(0,i.useCallback)((()=>{m.length!==k.length||v||g(!1)}),[m,k,v]);return(0,i.useEffect)((()=>{var e;if(!t)return void g(!1);const n=decodeURIComponent(t),i=d.gy(n)&&d.Qc(n);if(!i||(r=i,o=u.default,!r.host||"local"!==o.env&&!o.domainBaseUrl.includes(r.host)&&!a.S3[o.env].includes(r.host)))return void g(!1);var r,o;let s;if(null!==(e=i.path)&&void 0!==e&&e.includes("/eap/app")){const e=decodeURIComponent(n),t=d.Qc(e).query.notion_state,i=t&&JSON.parse(t);s=i?i.userId:void 0}else s=i.query.notion_user_id;k.some((e=>e.id===s))?(x(!0),window.location.href=n):w()}),[t,k,w]),(0,p.jsx)("div",{style:{height:"100%"},children:n?(0,p.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",flexWrap:"wrap",height:"100%"},children:(0,p.jsx)(f.Z,{style:{height:20,width:20}})}):(0,p.jsx)(c.LazyPageError,{route:{name:"initiateExternalAuthenticationFromDesktop"},publicPageData:void 0})})}}}]);